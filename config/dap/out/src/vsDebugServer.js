"use strict";var WV=Object.create;var zb=Object.defineProperty;var GE=Object.getOwnPropertyDescriptor;var qV=Object.getOwnPropertyNames;var VV=Object.getPrototypeOf,GV=Object.prototype.hasOwnProperty;var XV=(t,e)=>()=>(t&&(e=t(t=0)),e);var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var KV=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qV(e))!GV.call(t,i)&&i!==r&&zb(t,i,{get:()=>e[i],enumerable:!(n=GE(e,i))||n.enumerable});return t};var $=(t,e,r)=>(r=t!=null?WV(VV(t)):{},KV(e||!t||!t.__esModule?zb(r,"default",{value:t,enumerable:!0}):r,t));var W=(t,e,r,n)=>{for(var i=n>1?void 0:n?GE(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&zb(e,r,i),i},I=(t,e)=>(r,n)=>e(r,n,t);var ut=b((Cpe,ZE)=>{"use strict";var zV=Object.create,Rd=Object.defineProperty,JV=Object.getOwnPropertyDescriptor,zE=Object.getOwnPropertyNames,YV=Object.getPrototypeOf,QV=Object.prototype.hasOwnProperty,ZV=(t,e)=>function(){return e||(0,t[zE(t)[0]])((e={exports:{}}).exports,e),e.exports},e8=(t,e)=>{for(var r in e)Rd(t,r,{get:e[r],enumerable:!0})},JE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zE(e))!QV.call(t,i)&&i!==r&&Rd(t,i,{get:()=>e[i],enumerable:!(n=JV(e,i))||n.enumerable});return t},t8=(t,e,r)=>(r=t!=null?zV(YV(t)):{},JE(e||!t||!t.__esModule?Rd(r,"default",{value:t,enumerable:!0}):r,t)),r8=t=>JE(Rd({},"__esModule",{value:!0}),t),n8=ZV({"node_modules/request-light/lib/node/main.js"(t){(()=>{var e={46:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u,c,{signal:l}={}){return new Promise((f,p)=>{function m(){l?.removeEventListener("abort",m),u.removeListener(c,h),u.removeListener("error",g)}function h(...y){m(),f(y)}function g(y){m(),p(y)}l?.addEventListener("abort",m),u.on(c,h),u.on("error",g)})}},54:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};let l=u(361),f=c(u(374)),p=c(u(304)),m=f.default("agent-base");function h(){let{stack:y}=new Error;return typeof y=="string"&&y.split(`
`).some(_=>_.indexOf("(https.js:")!==-1||_.indexOf("node:https:")!==-1)}function g(y,_){return new g.Agent(y,_)}(function(y){class _ extends l.EventEmitter{constructor(N,D){super();let j=D;typeof N=="function"?this.callback=N:N&&(j=N),this.timeout=null,j&&typeof j.timeout=="number"&&(this.timeout=j.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:h()?443:80}set defaultPort(N){this.explicitDefaultPort=N}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:h()?"https:":"http:"}set protocol(N){this.explicitProtocol=N}callback(N,D,j){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(N,D){let j=Object.assign({},D);typeof j.secureEndpoint!="boolean"&&(j.secureEndpoint=h()),j.host==null&&(j.host="localhost"),j.port==null&&(j.port=j.secureEndpoint?443:80),j.protocol==null&&(j.protocol=j.secureEndpoint?"https:":"http:"),j.host&&j.path&&delete j.path,delete j.agent,delete j.hostname,delete j._defaultAgent,delete j.defaultPort,delete j.createConnection,N._last=!0,N.shouldKeepAlive=!1;let X=!1,G=null,U=j.timeout||this.timeout,k=F=>{N._hadError||(N.emit("error",F),N._hadError=!0)},M=()=>{G=null,X=!0;let F=new Error(`A "socket" was not created for HTTP request before ${U}ms`);F.code="ETIMEOUT",k(F)},E=F=>{X||(G!==null&&(clearTimeout(G),G=null),k(F))},q=F=>{if(X)return;if(G!=null&&(clearTimeout(G),G=null),V=F,!!V&&typeof V.addRequest=="function")return m("Callback returned another Agent instance %o",F.constructor.name),void F.addRequest(N,j);var V;if(F)return F.once("free",()=>{this.freeSocket(F,j)}),void N.onSocket(F);let S=new Error(`no Duplex stream was returned to agent-base for \`${N.method} ${N.path}\``);k(S)};if(typeof this.callback=="function"){this.promisifiedCallback||(this.callback.length>=3?(m("Converting legacy callback function to promise"),this.promisifiedCallback=p.default(this.callback)):this.promisifiedCallback=this.callback),typeof U=="number"&&U>0&&(G=setTimeout(M,U)),"port"in j&&typeof j.port!="number"&&(j.port=Number(j.port));try{m("Resolving socket for %o request: %o",j.protocol,`${N.method} ${N.path}`),Promise.resolve(this.promisifiedCallback(N,j)).then(q,E)}catch(F){Promise.reject(F).catch(E)}}else k(new Error("`callback` is not defined"))}freeSocket(N,D){m("Freeing socket %o %o",N.constructor.name,D),N.destroy()}destroy(){m("Destroying agent %o",this.constructor.name)}}y.Agent=_,y.prototype=y.Agent.prototype})(g||(g={})),s.exports=g},304:(s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(u){return function(c,l){return new Promise((f,p)=>{u.call(this,c,l,(m,h)=>{m?p(m):f(h)})})}}},370:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(N,D,j,X){return new(j||(j=Promise))(function(G,U){function k(q){try{E(X.next(q))}catch(F){U(F)}}function M(q){try{E(X.throw(q))}catch(F){U(F)}}function E(q){var F;q.done?G(q.value):(F=q.value,F instanceof j?F:new j(function(V){V(F)})).then(k,M)}E((X=X.apply(N,D||[])).next())})},l=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(a,"__esModule",{value:!0});let f=l(u(808)),p=l(u(404)),m=l(u(310)),h=l(u(374)),g=l(u(46)),y=u(54),_=(0,h.default)("http-proxy-agent");class C extends y.Agent{constructor(D){let j;if(j=typeof D=="string"?m.default.parse(D):D,!j)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");_("Creating new HttpProxyAgent instance: %o",j),super(j);let X=Object.assign({},j);var G;this.secureProxy=j.secureProxy||typeof(G=X.protocol)=="string"&&/^https:?$/i.test(G),X.host=X.hostname||X.host,typeof X.port=="string"&&(X.port=parseInt(X.port,10)),!X.port&&X.host&&(X.port=this.secureProxy?443:80),X.host&&X.path&&(delete X.path,delete X.pathname),this.proxy=X}callback(D,j){return c(this,void 0,void 0,function*(){let{proxy:X,secureProxy:G}=this,U=m.default.parse(D.path),k;if(U.protocol||(U.protocol="http:"),U.hostname||(U.hostname=j.hostname||j.host||null),U.port==null&&(j.port,1)&&(U.port=String(j.port)),U.port==="80"&&(U.port=""),D.path=m.default.format(U),X.auth&&D.setHeader("Proxy-Authorization",`Basic ${Buffer.from(X.auth).toString("base64")}`),G?(_("Creating `tls.Socket`: %o",X),k=p.default.connect(X)):(_("Creating `net.Socket`: %o",X),k=f.default.connect(X)),D._header){let M,E;_("Regenerating stored HTTP header string for request"),D._header=null,D._implicitHeader(),D.output&&D.output.length>0?(_("Patching connection write() output buffer with updated header"),M=D.output[0],E=M.indexOf(`\r
\r
`)+4,D.output[0]=D._header+M.substring(E),_("Output buffer: %o",D.output)):D.outputData&&D.outputData.length>0&&(_("Patching connection write() output buffer with updated header"),M=D.outputData[0].data,E=M.indexOf(`\r
\r
`)+4,D.outputData[0].data=D._header+M.substring(E),_("Output buffer: %o",D.outputData[0].data))}return yield(0,g.default)(k,"connect"),k})}}a.default=C},201:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}})(u(370));function l(f){return new c.default(f)}(function(f){f.HttpProxyAgent=c.default,f.prototype=c.default.prototype})(l||(l={})),s.exports=l},146:function(s,a,u){"use strict";var c=this&&this.__awaiter||function(j,X,G,U){return new(G||(G=Promise))(function(k,M){function E(V){try{F(U.next(V))}catch(S){M(S)}}function q(V){try{F(U.throw(V))}catch(S){M(S)}}function F(V){var S;V.done?k(V.value):(S=V.value,S instanceof G?S:new G(function(P){P(S)})).then(E,q)}F((U=U.apply(j,X||[])).next())})},l=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(a,"__esModule",{value:!0});let f=l(u(808)),p=l(u(404)),m=l(u(310)),h=l(u(491)),g=l(u(374)),y=u(54),_=l(u(829)),C=g.default("https-proxy-agent:agent");class N extends y.Agent{constructor(X){let G;if(G=typeof X=="string"?m.default.parse(X):X,!G)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");C("creating new HttpsProxyAgent instance: %o",G),super(G);let U=Object.assign({},G);var k;this.secureProxy=G.secureProxy||typeof(k=U.protocol)=="string"&&/^https:?$/i.test(k),U.host=U.hostname||U.host,typeof U.port=="string"&&(U.port=parseInt(U.port,10)),!U.port&&U.host&&(U.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in U)&&(U.ALPNProtocols=["http 1.1"]),U.host&&U.path&&(delete U.path,delete U.pathname),this.proxy=U}callback(X,G){return c(this,void 0,void 0,function*(){let{proxy:U,secureProxy:k}=this,M;k?(C("Creating `tls.Socket`: %o",U),M=p.default.connect(U)):(C("Creating `net.Socket`: %o",U),M=f.default.connect(U));let E=Object.assign({},U.headers),q=`CONNECT ${G.host}:${G.port} HTTP/1.1\r
`;U.auth&&(E["Proxy-Authorization"]=`Basic ${Buffer.from(U.auth).toString("base64")}`);let{host:F,port:V,secureEndpoint:S}=G;(function(ue,ee){return!!(!ee&&ue===80||ee&&ue===443)})(V,S)||(F+=`:${V}`),E.Host=F,E.Connection="close";for(let ue of Object.keys(E))q+=`${ue}: ${E[ue]}\r
`;let P=_.default(M);M.write(`${q}\r
`);let{statusCode:oe,buffered:te}=yield P;if(oe===200){if(X.once("socket",D),G.secureEndpoint){C("Upgrading socket connection to TLS");let ue=G.servername||G.host;return p.default.connect(Object.assign(Object.assign({},function(ee,...pe){let be={},ge;for(ge in ee)pe.includes(ge)||(be[ge]=ee[ge]);return be}(G,"host","hostname","path","port")),{socket:M,servername:ue}))}return M}M.destroy();let fe=new f.default.Socket({writable:!1});return fe.readable=!0,X.once("socket",ue=>{C("replaying proxy buffer for failed request"),h.default(ue.listenerCount("data")>0),ue.push(te),ue.push(null)}),fe})}}function D(j){j.resume()}a.default=N},18:function(s,a,u){"use strict";let c=(this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}})(u(146));function l(f){return new c.default(f)}(function(f){f.HttpsProxyAgent=c.default,f.prototype=c.default.prototype})(l||(l={})),s.exports=l},829:function(s,a,u){"use strict";var c=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(a,"__esModule",{value:!0});let l=c(u(374)).default("https-proxy-agent:parse-proxy-response");a.default=function(f){return new Promise((p,m)=>{let h=0,g=[];function y(){let N=f.read();N?function(D){g.push(D),h+=D.length;let j=Buffer.concat(g,h);if(j.indexOf(`\r
\r
`)===-1)return l("have not received end of HTTP headers yet..."),void y();let X=j.toString("ascii",0,j.indexOf(`\r
`)),G=+X.split(" ")[1];l("got proxy server response: %o",X),p({statusCode:G,buffered:j})}(N):f.once("readable",y)}function _(N){l("onclose had error %o",N)}function C(){l("onend")}f.on("error",function N(D){f.removeListener("end",C),f.removeListener("error",N),f.removeListener("close",_),f.removeListener("readable",y),l("onerror %o",D),m(D)}),f.on("close",_),f.on("end",C),y()})}},539:function(s,a,u){"use strict";var c,l=this&&this.__extends||(c=function(k,M){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,q){E.__proto__=q}||function(E,q){for(var F in q)Object.prototype.hasOwnProperty.call(q,F)&&(E[F]=q[F])},c(k,M)},function(k,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function E(){this.constructor=k}c(k,M),k.prototype=M===null?Object.create(M):(E.prototype=M.prototype,new E)}),f=this&&this.__assign||function(){return f=Object.assign||function(k){for(var M,E=1,q=arguments.length;E<q;E++)for(var F in M=arguments[E])Object.prototype.hasOwnProperty.call(M,F)&&(k[F]=M[F]);return k},f.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0}),a.getErrorStatusDescription=a.xhr=a.configure=void 0;var p=u(685),m=u(687),h=u(310),g=u(472),y=u(796),_=u(201),C=u(18);if(process.env.VSCODE_NLS_CONFIG){var N=process.env.VSCODE_NLS_CONFIG;g.config(JSON.parse(N))}var D=g.loadMessageBundle(),j=void 0,X=!0;function G(k){var M;return new Promise(function(E,q){var F=(0,h.parse)(k.url),V={hostname:F.hostname,agent:!!k.agent&&k.agent,port:F.port?parseInt(F.port):F.protocol==="https:"?443:80,path:F.path,method:k.type||"GET",headers:k.headers,rejectUnauthorized:typeof k.strictSSL!="boolean"||k.strictSSL};k.user&&k.password&&(V.auth=k.user+":"+k.password);var S=function(P){if(P.statusCode>=300&&P.statusCode<400&&k.followRedirects&&k.followRedirects>0&&P.headers.location){var oe=P.headers.location;oe.startsWith("/")&&(oe=(0,h.format)({protocol:F.protocol,hostname:F.hostname,port:F.port,pathname:oe})),E(G(function(te){for(var fe=[],ue=1;ue<arguments.length;ue++)fe[ue-1]=arguments[ue];return fe.forEach(function(ee){return Object.keys(ee).forEach(function(pe){return te[pe]=ee[pe]})}),te}({},k,{url:oe,followRedirects:k.followRedirects-1})))}else E({req:M,res:P})};(M=F.protocol==="https:"?m.request(V,S):p.request(V,S)).on("error",q),k.timeout&&M.setTimeout(k.timeout),k.data&&M.write(k.data),M.end(),k.token&&(k.token.isCancellationRequested&&M.destroy(new U),k.token.onCancellationRequested(function(){M.destroy(new U)}))})}a.configure=function(k,M){j=k,X=M},a.xhr=function(k){return typeof(k=f({},k)).strictSSL!="boolean"&&(k.strictSSL=X),k.agent||(k.agent=function(M,E){E===void 0&&(E={});var q=(0,h.parse)(M),F=E.proxyUrl||function(P){return P.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:P.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}(q);if(!F)return null;var V=(0,h.parse)(F);if(!/^https?:$/.test(V.protocol))return null;var S={host:V.hostname,port:Number(V.port),auth:V.auth,rejectUnauthorized:typeof E.strictSSL!="boolean"||E.strictSSL,protocol:V.protocol};return q.protocol==="http:"?_(S):C(S)}(k.url,{proxyUrl:j,strictSSL:X})),typeof k.followRedirects!="number"&&(k.followRedirects=5),G(k).then(function(M){return new Promise(function(E,q){var F,V,S=M.res,P=S,oe=!1,te=S.headers&&S.headers["content-encoding"];if(te&&(F=k.type,V=M.res.statusCode,!(F==="HEAD"||V>=100&&V<200||V===204||V===304))){var fe={flush:y.constants.Z_SYNC_FLUSH,finishFlush:y.constants.Z_SYNC_FLUSH};if(te==="gzip"){var ue=y.createGunzip(fe);S.pipe(ue),P=ue}else if(te==="deflate"){var ee=y.createInflate(fe);S.pipe(ee),P=ee}}var pe=[];P.on("data",function(be){return pe.push(be)}),P.on("end",function(){if(!oe){if(oe=!0,k.followRedirects>0&&(S.statusCode>=300&&S.statusCode<=303||S.statusCode===307)){var be=S.headers.location;if(be.startsWith("/")){var ge=(0,h.parse)(k.url);be=(0,h.format)({protocol:ge.protocol,hostname:ge.hostname,port:ge.port,pathname:be})}if(be){var qt={type:k.type,url:be,user:k.user,password:k.password,headers:k.headers,timeout:k.timeout,followRedirects:k.followRedirects-1,data:k.data,token:k.token};return void(0,a.xhr)(qt).then(E,q)}}var me=Buffer.concat(pe),mr={responseText:me.toString(),body:me,status:S.statusCode,headers:S.headers||{}};S.statusCode>=200&&S.statusCode<300||S.statusCode===1223?E(mr):q(mr)}}),P.on("error",function(be){var ge;ge=U.is(be)?be:{responseText:D("error","Unable to access {0}. Error: {1}",k.url,be.message),body:Buffer.concat(pe),status:500,headers:{}},oe=!0,q(ge)}),k.token&&(k.token.isCancellationRequested&&P.destroy(new U),k.token.onCancellationRequested(function(){P.destroy(new U)}))})},function(M){var E;return E=U.is(M)?M:{responseText:k.agent?D("error.cannot.connect.proxy","Unable to connect to {0} through a proxy. Error: {1}",k.url,M.message):D("error.cannot.connect","Unable to connect to {0}. Error: {1}",k.url,M.message),body:Buffer.concat([]),status:404,headers:{}},Promise.reject(E)})},a.getErrorStatusDescription=function(k){if(!(k<400))switch(k){case 400:return D("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return D("status.401","Unauthorized. The server is refusing to respond.");case 403:return D("status.403","Forbidden. The server is refusing to respond.");case 404:return D("status.404","Not Found. The requested location could not be found.");case 405:return D("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return D("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return D("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return D("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return D("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return D("status.410","Gone. The requested page is no longer available.");case 411:return D("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return D("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return D("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return D("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return D("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return D("status.500","Internal Server Error.");case 501:return D("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return D("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return D("status.416","HTTP status code {0}",k)}};var U=function(k){function M(){var E=k.call(this,"The user aborted a request")||this;return E.name="AbortError",Object.setPrototypeOf(E,M.prototype),E}return l(M,k),M.is=function(E){return E instanceof M},M}(Error)},800:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.localize=a.format=a.setPseudo=a.isPseudo=a.isDefined=a.BundleFormat=a.MessageFormat=void 0;var c,l,f,p=u(926);function m(g){return g!==void 0}function h(g,y){return a.isPseudo&&(g="\uFF3B"+g.replace(/[aouei]/g,"$&$&")+"\uFF3D"),y.length===0?g:g.replace(/\{(\d+)\}/g,function(_,C){var N=C[0],D=y[N],j=_;return typeof D=="string"?j=D:typeof D!="number"&&typeof D!="boolean"&&D!=null||(j=String(D)),j})}(f=a.MessageFormat||(a.MessageFormat={})).file="file",f.bundle="bundle",f.both="both",(l=a.BundleFormat||(a.BundleFormat={})).standalone="standalone",l.languagePack="languagePack",function(g){g.is=function(y){var _=y;return _&&m(_.key)&&m(_.comment)}}(c||(c={})),a.isDefined=m,a.isPseudo=!1,a.setPseudo=function(g){a.isPseudo=g},a.format=h,a.localize=function(g,y){for(var _=[],C=2;C<arguments.length;C++)_[C-2]=arguments[C];return h(y,_)},a.loadMessageBundle=function(g){return(0,p.default)().loadMessageBundle(g)},a.config=function(g){return(0,p.default)().config(g)}},926:(s,a)=>{"use strict";var u;function c(){if(u===void 0)throw new Error("No runtime abstraction layer installed");return u}Object.defineProperty(a,"__esModule",{value:!0}),function(l){l.install=function(f){if(f===void 0)throw new Error("No runtime abstraction layer provided");u=f}}(c||(c={})),a.default=c},472:(s,a,u)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.config=a.loadMessageBundle=a.BundleFormat=a.MessageFormat=void 0;var c=u(17),l=u(147),f=u(926),p=u(800),m=u(800);Object.defineProperty(a,"MessageFormat",{enumerable:!0,get:function(){return m.MessageFormat}}),Object.defineProperty(a,"BundleFormat",{enumerable:!0,get:function(){return m.BundleFormat}});var h,g,y=Object.prototype.toString;function _(M){return y.call(M)==="[object Number]"}function C(M){return y.call(M)==="[object String]"}function N(M){return JSON.parse(l.readFileSync(M,"utf8"))}function D(M){return function(E,q){for(var F=[],V=2;V<arguments.length;V++)F[V-2]=arguments[V];return _(E)?E>=M.length?void console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `.concat(new Error("").stack)):(0,p.format)(M[E],F):C(q)?(console.warn("Message ".concat(q," didn't get externalized correctly.")),(0,p.format)(q,F)):void console.error(`Broken localize call found. Stacktrace is
: `.concat(new Error("").stack))}}function j(M,E){return h[M]=E,E}function X(M){try{return function(E){var q=N(c.join(E,"nls.metadata.json")),F=Object.create(null);for(var V in q){var S=q[V];F[V]=S.messages}return F}(M)}catch(E){return void console.log("Generating default bundle from meta data failed.",E)}}function G(M,E){var q;if(g.languagePackSupport===!0&&g.cacheRoot!==void 0&&g.languagePackId!==void 0&&g.translationsConfigFile!==void 0&&g.translationsConfig!==void 0)try{q=function(V,S){var P,oe,te,fe=c.join(g.cacheRoot,"".concat(V.id,"-").concat(V.hash,".json")),ue=!1,ee=!1;try{return P=JSON.parse(l.readFileSync(fe,{encoding:"utf8",flag:"r"})),oe=fe,te=new Date,l.utimes(oe,te,te,function(){}),P}catch(pe){if(pe.code==="ENOENT")ee=!0;else{if(!(pe instanceof SyntaxError))throw pe;console.log("Syntax error parsing message bundle: ".concat(pe.message,".")),l.unlink(fe,function(be){be&&console.error("Deleting corrupted bundle ".concat(fe," failed."))}),ue=!0}}if(P=function(pe,be){var ge=g.translationsConfig[pe.id];if(ge){var qt=N(ge).contents,me=N(c.join(be,"nls.metadata.json")),mr=Object.create(null);for(var Rr in me){var J=me[Rr],Ie=qt["".concat(pe.outDir,"/").concat(Rr)];if(Ie){for(var z=[],he=0;he<J.keys.length;he++){var Te=J.keys[he],Ze=Ie[C(Te)?Te:Te.key];Ze===void 0&&(Ze=J.messages[he]),z.push(Ze)}mr[Rr]=z}else mr[Rr]=J.messages}return mr}}(V,S),!P||ue)return P;if(ee)try{l.writeFileSync(fe,JSON.stringify(P),{encoding:"utf8",flag:"wx"})}catch(pe){if(pe.code==="EEXIST")return P;throw pe}return P}(M,E)}catch(V){console.log("Load or create bundle failed ",V)}if(!q){if(g.languagePackSupport)return X(E);var F=function(V){for(var S=g.language;S;){var P=c.join(V,"nls.bundle.".concat(S,".json"));if(l.existsSync(P))return P;var oe=S.lastIndexOf("-");S=oe>0?S.substring(0,oe):void 0}if(S===void 0&&(P=c.join(V,"nls.bundle.json"),l.existsSync(P)))return P}(E);if(F)try{return N(F)}catch(V){console.log("Loading in the box message bundle failed.",V)}q=X(E)}return q}function U(M){if(!M)return p.localize;var E=c.extname(M);if(E&&(M=M.substr(0,M.length-E.length)),g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.bundle){var q=function(ue){for(var ee,pe=c.dirname(ue);ee=c.join(pe,"nls.metadata.header.json"),!l.existsSync(ee);){var be=c.dirname(pe);if(be===pe){ee=void 0;break}pe=be}return ee}(M);if(q){var F=c.dirname(q),V=h[F];if(V===void 0)try{var S=JSON.parse(l.readFileSync(q,"utf8"));try{var P=G(S,F);V=j(F,P?{header:S,nlsBundle:P}:null)}catch(ue){console.error("Failed to load nls bundle",ue),V=j(F,null)}}catch(ue){console.error("Failed to read header file",ue),V=j(F,null)}if(V){var oe=M.substr(F.length+1).replace(/\\/g,"/"),te=V.nlsBundle[oe];return te===void 0?(console.error("Messages for file ".concat(M," not found. See console for details.")),function(){return"Messages not found."}):D(te)}}}if(g.messageFormat===p.MessageFormat.both||g.messageFormat===p.MessageFormat.file)try{var fe=N(function(ue){var ee;if(!(g.cacheLanguageResolution&&ee)){if(p.isPseudo||!g.language)ee=".nls.json";else for(var pe=g.language;pe;){var be=".nls."+pe+".json";if(l.existsSync(ue+be)){ee=be;break}var ge=pe.lastIndexOf("-");ge>0?pe=pe.substring(0,ge):(ee=".nls.json",pe=null)}g.cacheLanguageResolution}return ue+ee}(M));return Array.isArray(fe)?D(fe):(0,p.isDefined)(fe.messages)&&(0,p.isDefined)(fe.keys)?D(fe.messages):(console.error("String bundle '".concat(M,"' uses an unsupported format.")),function(){return"File bundle has unsupported format. See console for details"})}catch(ue){ue.code!=="ENOENT"&&console.error("Failed to load single file bundle",ue)}return console.error("Failed to load message bundle for file ".concat(M)),function(){return"Failed to load message bundle. See console for details."}}function k(M){return M&&(C(M.locale)&&(g.locale=M.locale.toLowerCase(),g.language=g.locale,h=Object.create(null)),M.messageFormat!==void 0&&(g.messageFormat=M.messageFormat),M.bundleFormat===p.BundleFormat.standalone&&g.languagePackSupport===!0&&(g.languagePackSupport=!1)),(0,p.setPseudo)(g.locale==="pseudo"),U}(function(){if(g={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:p.MessageFormat.bundle},C(process.env.VSCODE_NLS_CONFIG))try{var M=JSON.parse(process.env.VSCODE_NLS_CONFIG),E=void 0;if(M.availableLanguages){var q=M.availableLanguages["*"];C(q)&&(E=q)}if(C(M.locale)&&(g.locale=M.locale.toLowerCase()),E===void 0?g.language=g.locale:E!=="en"&&(g.language=E),function(V){return V===!0||V===!1}(M._languagePackSupport)&&(g.languagePackSupport=M._languagePackSupport),C(M._cacheRoot)&&(g.cacheRoot=M._cacheRoot),C(M._languagePackId)&&(g.languagePackId=M._languagePackId),C(M._translationsConfigFile)){g.translationsConfigFile=M._translationsConfigFile;try{g.translationsConfig=N(g.translationsConfigFile)}catch{if(M._corruptedFile){var F=c.dirname(M._corruptedFile);l.exists(F,function(S){S&&l.writeFile(M._corruptedFile,"corrupted","utf8",function(P){console.error(P)})})}}}}catch{}(0,p.setPseudo)(g.locale==="pseudo"),h=Object.create(null)})(),a.loadMessageBundle=U,a.config=k,f.default.install(Object.freeze({loadMessageBundle:U,config:k}))},374:(s,a)=>{function u(){}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(c){return u}},491:s=>{"use strict";s.exports=require("assert")},361:s=>{"use strict";s.exports=require("events")},147:s=>{"use strict";s.exports=require("fs")},685:s=>{"use strict";s.exports=require("http")},687:s=>{"use strict";s.exports=require("https")},808:s=>{"use strict";s.exports=require("net")},17:s=>{"use strict";s.exports=require("path")},404:s=>{"use strict";s.exports=require("tls")},310:s=>{"use strict";s.exports=require("url")},796:s=>{"use strict";s.exports=require("zlib")}},r={},n=function s(a){var u=r[a];if(u!==void 0)return u.exports;var c=r[a]={exports:{}};return e[a].call(c.exports,c,c.exports,s),c.exports}(539),i=t;for(var o in n)i[o]=n[o];n.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})()}}),YE={};e8(YE,{config:()=>u8,t:()=>QE});ZE.exports=r8(YE);var i8=require("fs"),o8=require("fs/promises"),XE=t8(n8());async function s8(t){if(t.protocol==="file:")return await(0,o8.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:")try{let e=await(0,XE.xhr)({url:t.toString(),followRedirects:5,headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"}});return new TextDecoder().decode(e.body)}catch(e){throw new Error(e.responseText??(0,XE.getErrorStatusDescription)(e.status)??e.toString())}throw new Error("Unsupported protocol")}function a8(t){return(0,i8.readFileSync)(t,"utf8")}var Xl;function u8(t){if("contents"in t){typeof t.contents=="string"?Xl=JSON.parse(t.contents):Xl=t.contents;return}if("fsPath"in t){let e=a8(t.fsPath),r=JSON.parse(e);Xl=KE(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{let i=s8(e).then(o=>{try{let s=JSON.parse(o);Xl=KE(s)?s.contents.bundle:s}catch(s){n(s)}}).catch(o=>{n(o)});r(i)})}}function QE(...t){let e=t[0],r,n,i;if(typeof e=="string")r=e,n=e,t.splice(0,1),i=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let u=1;u<e.length;u++)a+=`{${u-1}}`+e[u];return QE(a,...s)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),i=e.args??{};let o=Xl?.[r];return o?typeof o=="string"?Md(o,i):o.comment?Md(o.message,i):Md(n,i):Md(n,i)}var c8=/{([^}]+)}/g;function Md(t,e){return t.replace(c8,(r,n)=>e[n]??r)}function KE(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var Ki=b(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.findWindowsCandidates=rr.sort=rr.preferredEdgePath=rr.preferredFirefoxPath=rr.preferredChromePath=rr.escapeRegexSpecialChars=rr.canAccess=void 0;var p8=require("path");async function Kl({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}rr.canAccess=Kl;var d8="/\\.?*()^${}|[]+";function h8(t,e){let r=d8.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}rr.escapeRegexSpecialChars=h8;async function m8(t,e){if(await Kl(t,e.CHROME_PATH))return e.CHROME_PATH}rr.preferredChromePath=m8;async function H8(t,e){if(await Kl(t,e.FIREFOX_PATH))return e.FIREFOX_PATH}rr.preferredFirefoxPath=H8;async function g8(t,e){if(await Kl(t,e.EDGE_PATH))return e.EDGE_PATH}rr.preferredEdgePath=g8;function y8(t,e){return[...t].filter(n=>!!n).map(n=>{let i=e.find(o=>o.regex.test(n));return i?{path:n,weight:i.weight,quality:i.quality}:{path:n,weight:10,quality:"dev"}}).sort((n,i)=>i.weight-n.weight).map(n=>({path:n.path,quality:n.quality}))}rr.sort=y8;async function b8(t,e,r){let n=[t.LOCALAPPDATA,t.PROGRAMFILES,t["PROGRAMFILES(X86)"]].filter(o=>!!o),i=[];for(let o of n)for(let s of r){let a=p8.win32.join(o,s.name);i.push(Kl(e,a).then(u=>u?{path:a,quality:s.type}:void 0))}return(await Promise.all(i)).filter(o=>!!o)}rr.findWindowsCandidates=b8});var Od=b(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.DarwinFinderBase=void 0;var v8=require("path"),_8=require("fs"),Jb=Ki(),rL=/( \(0x[a-f0-9]+\))/,Yb=class{constructor(e=process.env,r=_8.promises,n=n){this.env=e,this.fs=r,this.execa=n,this.lsRegisterCommand="/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -dump",this.wellKnownPaths=[]}async findWhere(e){for(let r of this.wellKnownPaths)if(e(r)&&await(0,Jb.canAccess)(this.fs,r.path))return r;return(await this.findAll()).find(e)}findAll(){var e;return(e=this.foundAll)!==null&&e!==void 0||(this.foundAll=this.findAllInner()),this.foundAll}async findLaunchRegisteredApps(e,r,n){let{stdout:i}=await this.execa.command(`${this.lsRegisterCommand} | awk 'tolower($0) ~ /${e.toLowerCase()}${rL.source}?$/ { $1=""; print $0 }'`,{shell:!0,stdio:"pipe"}),o=[...r,...i.split(`
`).map(u=>u.trim().replace(rL,""))].filter(u=>!!u),s=this.getPreferredPath();s&&o.push(s);let a=new Set;for(let u of o)for(let c of n){let l=v8.posix.join(u.trim(),c);try{await this.fs.access(l),a.add(l)}catch{}}return a}createPriorities(e){let r=this.env.HOME&&(0,Jb.escapeRegexSpecialChars)(this.env.HOME),n=this.getPreferredPath(),i=e.reduce((o,s)=>[...o,{regex:new RegExp(`^/Applications/.*${s.name}`),weight:s.weight+100,quality:s.quality},{regex:new RegExp(`^${r}/Applications/.*${s.name}`),weight:s.weight,quality:s.quality},{regex:new RegExp(`^/Volumes/.*${s.name}`),weight:s.weight-100,quality:s.quality}],[]);return n&&i.unshift({regex:new RegExp((0,Jb.escapeRegexSpecialChars)(n)),weight:151,quality:"custom"}),i}};kd.DarwinFinderBase=Yb});var nL=b(Nd=>{"use strict";Object.defineProperty(Nd,"__esModule",{value:!0});Nd.DarwinChromeBrowserFinder=void 0;var w8=Ki(),I8=Od(),Qb=class extends I8.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",quality:"stable"},{path:"/Applications/Google Chrome Canary.app/Contents/MacOS/Google Chrome Canary",quality:"canary"},{path:"/Applications/Google Chrome Beta.app/Contents/MacOS/Google Chrome Beta",quality:"beta"},{path:"/Applications/Google Chrome Dev.app/Contents/MacOS/Google Chrome Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Google Chrome Canary","/Contents/MacOS/Google Chrome Beta","/Contents/MacOS/Google Chrome Dev","/Contents/MacOS/Google Chrome"],r=["/Applications/Google Chrome.app","/Applications/Google Chrome Canary.app"],n=await this.findLaunchRegisteredApps("google chrome[A-Za-z() ]*.app",r,e);return(0,w8.sort)(n,this.createPriorities([{name:"Chrome.app",weight:0,quality:"stable"},{name:"Chrome Canary.app",weight:1,quality:"canary"},{name:"Chrome Beta.app",weight:2,quality:"beta"},{name:"Chrome Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.CHROME_PATH}};Nd.DarwinChromeBrowserFinder=Qb});var iL=b(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.DarwinEdgeBrowserFinder=void 0;var A8=Ki(),S8=Od(),Zb=class extends S8.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Microsoft Edge.app/Contents/MacOS/Microsoft Edge",quality:"stable"},{path:"/Applications/Microsoft Edge Canary.app/Contents/MacOS/Microsoft Edge Canary",quality:"canary"},{path:"/Applications/Microsoft Edge Beta.app/Contents/MacOS/Microsoft Edge Beta",quality:"beta"},{path:"/Applications/Microsoft Edge Dev.app/Contents/MacOS/Microsoft Edge Dev",quality:"dev"}]}async findAllInner(){let e=["/Contents/MacOS/Microsoft Edge Canary","/Contents/MacOS/Microsoft Edge Beta","/Contents/MacOS/Microsoft Edge Dev","/Contents/MacOS/Microsoft Edge"],r=["/Applications/Microsoft Edge.app"],n=await this.findLaunchRegisteredApps("Microsoft Edge[A-Za-z ]*.app",r,e);return(0,A8.sort)(n,this.createPriorities([{name:"Microsoft Edge.app",weight:0,quality:"stable"},{name:"Microsoft Edge Canary.app",weight:1,quality:"canary"},{name:"Microsoft Edge Beta.app",weight:2,quality:"beta"},{name:"Microsoft Edge Dev.app",weight:3,quality:"dev"}]))}getPreferredPath(){return this.env.EDGE_PATH}};Bd.DarwinEdgeBrowserFinder=Zb});var oL=b(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.DarwinFirefoxBrowserFinder=void 0;var E8=Ki(),L8=Od(),ev=class extends L8.DarwinFinderBase{constructor(){super(...arguments),this.wellKnownPaths=[{path:"/Applications/Firefox.app/Contents/MacOS/firefox",quality:"stable"},{path:"/Applications/Firefox Developer Edition.app/Contents/MacOS/firefox",quality:"dev"},{path:"/Applications/Firefox Nightly.app/Contents/MacOS/firefox",quality:"canary"}]}async findAllInner(){let e=["/Contents/MacOS/firefox"],r=["/Applications/Firefox.app"],n=await this.findLaunchRegisteredApps("Firefox[A-Za-z ]*.app",r,e);return(0,E8.sort)(n,this.createPriorities([{name:"Firefox.app",weight:0,quality:"stable"},{name:"Firefox Nightly.app",weight:1,quality:"canary"},{name:"Firefox Developer Edition.app",weight:2,quality:"dev"}]))}getPreferredPath(){return this.env.FIREFOX_PATH}};Fd.DarwinFirefoxBrowserFinder=ev});var jd=b(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.LinuxChromeBrowserFinder=void 0;var P8=require("path"),mu=Ki(),tv=require("child_process"),x8=require("os"),C8=require("fs"),sL=/\r?\n/,rv=class{constructor(e=process.env,r=C8.promises){this.env=e,this.fs=r,this.pathEnvironmentVar="CHROME_PATH",this.priorities=[{regex:/chrome-wrapper$/,weight:54,quality:"custom"},{regex:/google-chrome-dev$/,weight:53,quality:"dev"},{regex:/google-chrome-canary$/,weight:52,quality:"canary"},{regex:/google-chrome-unstable$/,weight:51,quality:"canary"},{regex:/google-chrome-canary$/,weight:51,quality:"canary"},{regex:/google-chrome-stable$/,weight:50,quality:"stable"},{regex:/google-chrome$/,weight:49,quality:"stable"},{regex:/chromium-browser$/,weight:48,quality:"custom"},{regex:/chromium$/,weight:47,quality:"custom"}],this.executablesOnPath=["google-chrome-unstable","google-chrome-dev","google-chrome-beta","google-chrome-canary","google-chrome-stable","google-chrome","chromium-browser","chromium"]}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=new Set,r=this.env[this.pathEnvironmentVar];r&&await(0,mu.canAccess)(this.fs,r)&&e.add(r),[P8.posix.join((0,x8.homedir)(),".local/share/applications/"),"/usr/share/applications/","/usr/bin"].forEach(s=>{for(let a in this.findChromeExecutables(s))e.add(a)}),await Promise.all(this.executablesOnPath.map(async s=>{try{let a=(0,tv.execFileSync)("which",[s],{stdio:"pipe"}).toString().split(sL)[0];await(0,mu.canAccess)(this.fs,a)&&e.add(a)}catch{}}));let o=r?[{regex:new RegExp((0,mu.escapeRegexSpecialChars)(r)),weight:101,quality:"custom"}].concat(this.priorities):this.priorities;return(0,mu.sort)(e,o)}async findChromeExecutables(e){let r=/(^[^ ]+).*/,n=`^Exec=/.*/(${this.executablesOnPath.join("|")})-.*`,i=[];if(await(0,mu.canAccess)(this.fs,e)){let o;try{o=(0,tv.execSync)(`grep -ER "${n}" ${e} | awk -F '=' '{print $2}'`)}catch{o=(0,tv.execSync)(`grep -Er "${n}" ${e} | awk -F '=' '{print $2}'`)}let s=o.toString().split(sL).map(a=>a.replace(r,"$1"));await Promise.all(s.map(async a=>{await(0,mu.canAccess)(this.fs,a)&&i.push(a)}))}return i}};Ud.LinuxChromeBrowserFinder=rv});var aL=b(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.LinuxEdgeBrowserFinder=void 0;var D8=jd(),nv=class extends D8.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="EDGE_PATH",this.executablesOnPath=["microsoft-edge-dev","microsoft-edge-beta","microsoft-edge-stable","microsoft-edge"],this.priorities=[{regex:/microsoft-edge\-wrapper$/,weight:52,quality:"custom"},{regex:/microsoft-edge\-dev$/,weight:51,quality:"dev"},{regex:/microsoft-edge\-beta$/,weight:51,quality:"beta"},{regex:/microsoft-edge\-stable$/,weight:50,quality:"stable"},{regex:/microsoft-edge$/,weight:49,quality:"stable"}]}};Wd.LinuxEdgeBrowserFinder=nv});var uL=b(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.LinuxFirefoxBrowserFinder=void 0;var T8=jd(),iv=class extends T8.LinuxChromeBrowserFinder{constructor(){super(...arguments),this.pathEnvironmentVar="FIREFOX_PATH",this.executablesOnPath=["firefox-aurora","firefox-dev","firefox-developer","firefox-trunk","firefox-nightly","firefox"],this.priorities=[{regex:/firefox\-aurora$/,weight:51,quality:"dev"},{regex:/firefox\-dev$/,weight:51,quality:"dev"},{regex:/firefox\-developer$/,weight:51,quality:"dev"},{regex:/firefox\-trunk'$/,weight:50,quality:"canary"},{regex:/firefox\-nightly'$/,weight:50,quality:"canary"},{regex:/firefox$/,weight:49,quality:"stable"}]}};qd.LinuxFirefoxBrowserFinder=iv});var lL=b(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.WindowsChromeBrowserFinder=void 0;var $8=require("path"),cL=Ki(),M8=require("fs"),ov=class{constructor(e=process.env,r=M8.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=$8.win32.sep,r=[{name:`${e}Google${e}Chrome Dev${e}Application${e}chrome.exe`,type:"dev"},{name:`${e}Google${e}Chrome SxS${e}Application${e}chrome.exe`,type:"canary"},{name:`${e}Google${e}Chrome Beta${e}Application${e}chrome.exe`,type:"beta"},{name:`${e}Google${e}Chrome${e}Application${e}chrome.exe`,type:"stable"}],n=await(0,cL.findWindowsCandidates)(this.env,this.fs,r),i=await(0,cL.preferredChromePath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};Vd.WindowsChromeBrowserFinder=ov});var pL=b(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.WindowsEdgeBrowserFinder=void 0;var nr=require("path"),R8=require("fs"),fL=Ki(),sv=class{constructor(e=process.env,r=R8.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=[{name:`${nr.sep}Microsoft${nr.sep}Edge SxS${nr.sep}Application${nr.sep}msedge.exe`,type:"canary"},{name:`${nr.sep}Microsoft${nr.sep}Edge Dev${nr.sep}Application${nr.sep}msedge.exe`,type:"dev"},{name:`${nr.sep}Microsoft${nr.sep}Edge Beta${nr.sep}Application${nr.sep}msedge.exe`,type:"beta"},{name:`${nr.sep}Microsoft${nr.sep}Edge${nr.sep}Application${nr.sep}msedge.exe`,type:"stable"}],r=await(0,fL.findWindowsCandidates)(this.env,this.fs,e),n=await(0,fL.preferredEdgePath)(this.fs,this.env);return n&&r.unshift({path:n,quality:"custom"}),r}};Gd.WindowsEdgeBrowserFinder=sv});var hL=b(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.WindowsFirefoxBrowserFinder=void 0;var k8=require("path"),dL=Ki(),O8=require("fs"),av=class{constructor(e=process.env,r=O8.promises){this.env=e,this.fs=r}async findWhere(e){return(await this.findAll()).find(e)}async findAll(){let e=k8.win32.sep,r=[{name:`${e}Firefox Developer Edition${e}firefox.exe`,type:"dev"},{name:`${e}Firefox Nightly${e}firefox.exe`,type:"canary"},{name:`${e}Mozilla Firefox${e}firefox.exe`,type:"stable"}],n=await(0,dL.findWindowsCandidates)(this.env,this.fs,r),i=await(0,dL.preferredFirefoxPath)(this.fs,this.env);return i&&n.unshift({path:i,quality:"custom"}),n}};Xd.WindowsFirefoxBrowserFinder=av});var uv=b(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.FirefoxBrowserFinder=Or.EdgeBrowserFinder=Or.ChromeBrowserFinder=Or.isQuality=Or.allQualities=void 0;var N8=nL(),B8=iL(),F8=oL(),U8=jd(),j8=aL(),W8=uL(),q8=lL(),V8=pL(),G8=hL(),X8={canary:null,stable:null,beta:null,dev:null,custom:null};Or.allQualities=new Set(Object.keys(X8));var K8=t=>Or.allQualities.has(t);Or.isQuality=K8;Or.ChromeBrowserFinder=process.platform==="win32"?q8.WindowsChromeBrowserFinder:process.platform==="darwin"?N8.DarwinChromeBrowserFinder:U8.LinuxChromeBrowserFinder;Or.EdgeBrowserFinder=process.platform==="win32"?V8.WindowsEdgeBrowserFinder:process.platform==="darwin"?B8.DarwinEdgeBrowserFinder:j8.LinuxEdgeBrowserFinder;Or.FirefoxBrowserFinder=process.platform==="win32"?G8.WindowsFirefoxBrowserFinder:process.platform==="darwin"?F8.DarwinFirefoxBrowserFinder:W8.LinuxFirefoxBrowserFinder});var bL=b((Xpe,yL)=>{yL.exports=gL;gL.sync=J8;var mL=require("fs");function z8(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}function HL(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:z8(e,r)}function gL(t,e,r){mL.stat(t,function(n,i){r(n,n?!1:HL(i,t,e))})}function J8(t,e){return HL(mL.statSync(t),t,e)}});var AL=b((Kpe,IL)=>{IL.exports=_L;_L.sync=Y8;var vL=require("fs");function _L(t,e,r){vL.stat(t,function(n,i){r(n,n?!1:wL(i,e))})}function Y8(t,e){return wL(vL.statSync(t),e)}function wL(t,e){return t.isFile()&&Q8(t,e)}function Q8(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),u=parseInt("010",8),c=parseInt("001",8),l=a|u,f=r&c||r&u&&i===s||r&a&&n===o||r&l&&o===0;return f}});var lv=b((Jpe,SL)=>{var zpe=require("fs"),Kd;process.platform==="win32"||global.TESTING_WINDOWS?Kd=bL():Kd=AL();SL.exports=cv;cv.sync=Z8;function cv(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){cv(t,e||{},function(o,s){o?i(o):n(s)})})}Kd(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}function Z8(t,e){try{return Kd.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var TL=b((Ype,DL)=>{var Hu=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",EL=require("path"),eG=Hu?";":":",LL=lv(),PL=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),xL=(t,e)=>{let r=e.colon||eG,n=t.match(/\//)||Hu&&t.match(/\\/)?[""]:[...Hu?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Hu?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Hu?i.split(r):[""];return Hu&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},CL=(t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=xL(t,e),s=[],a=c=>new Promise((l,f)=>{if(c===n.length)return e.all&&s.length?l(s):f(PL(t));let p=n[c],m=/^".*"$/.test(p)?p.slice(1,-1):p,h=EL.join(m,t),g=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;l(u(g,c,0))}),u=(c,l,f)=>new Promise((p,m)=>{if(f===i.length)return p(a(l+1));let h=i[f];LL(c+h,{pathExt:o},(g,y)=>{if(!g&&y)if(e.all)s.push(c+h);else return p(c+h);return p(u(c,l,f+1))})});return r?a(0).then(c=>r(null,c),r):a(0)},tG=(t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=xL(t,e),o=[];for(let s=0;s<r.length;s++){let a=r[s],u=/^".*"$/.test(a)?a.slice(1,-1):a,c=EL.join(u,t),l=!u&&/^\.[\\\/]/.test(t)?t.slice(0,2)+c:c;for(let f=0;f<n.length;f++){let p=l+n[f];try{if(LL.sync(p,{pathExt:i}))if(e.all)o.push(p);else return p}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw PL(t)};DL.exports=CL;CL.sync=tG});var ML=b((Qpe,fv)=>{"use strict";var $L=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};fv.exports=$L;fv.exports.default=$L});var NL=b((Zpe,OL)=>{"use strict";var RL=require("path"),rG=TL(),nG=ML();function kL(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let s;try{s=rG.sync(t.command,{path:r[nG({env:r})],pathExt:e?RL.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=RL.resolve(i?t.options.cwd:"",s)),s}function iG(t){return kL(t)||kL(t,!0)}OL.exports=iG});var BL=b((ede,dv)=>{"use strict";var pv=/([()\][%!^"`<>&|;, *?])/g;function oG(t){return t=t.replace(pv,"^$1"),t}function sG(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(pv,"^$1"),e&&(t=t.replace(pv,"^$1")),t}dv.exports.command=oG;dv.exports.argument=sG});var UL=b((tde,FL)=>{"use strict";FL.exports=/^#!(.*)/});var WL=b((rde,jL)=>{"use strict";var aG=UL();jL.exports=(t="")=>{let e=t.match(aG);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var VL=b((nde,qL)=>{"use strict";var hv=require("fs"),uG=WL();function cG(t){let r=Buffer.alloc(150),n;try{n=hv.openSync(t,"r"),hv.readSync(n,r,0,150,0),hv.closeSync(n)}catch{}return uG(r.toString())}qL.exports=cG});var zL=b((ide,KL)=>{"use strict";var lG=require("path"),GL=NL(),XL=BL(),fG=VL(),pG=process.platform==="win32",dG=/\.(?:com|exe)$/i,hG=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function mG(t){t.file=GL(t);let e=t.file&&fG(t.file);return e?(t.args.unshift(t.file),t.command=e,GL(t)):t.file}function HG(t){if(!pG)return t;let e=mG(t),r=!dG.test(e);if(t.options.forceShell||r){let n=hG.test(e);t.command=lG.normalize(t.command),t.command=XL.command(t.command),t.args=t.args.map(o=>XL.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function gG(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:HG(n)}KL.exports=gG});var QL=b((ode,YL)=>{"use strict";var mv=process.platform==="win32";function Hv(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function yG(t,e){if(!mv)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=JL(i,e,"spawn");if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}function JL(t,e){return mv&&t===1&&!e.file?Hv(e.original,"spawn"):null}function bG(t,e){return mv&&t===1&&!e.file?Hv(e.original,"spawnSync"):null}YL.exports={hookChildProcess:yG,verifyENOENT:JL,verifyENOENTSync:bG,notFoundError:Hv}});var tP=b((sde,gu)=>{"use strict";var ZL=require("child_process"),gv=zL(),yv=QL();function eP(t,e,r){let n=gv(t,e,r),i=ZL.spawn(n.command,n.args,n.options);return yv.hookChildProcess(i,n),i}function vG(t,e,r){let n=gv(t,e,r),i=ZL.spawnSync(n.command,n.args,n.options);return i.error=i.error||yv.verifyENOENTSync(i.status,n),i}gu.exports=eP;gu.exports.spawn=eP;gu.exports.sync=vG;gu.exports._parse=gv;gu.exports._enoent=yv});var nP=b((ade,rP)=>{"use strict";rP.exports=t=>{let e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var oP=b((ude,bv)=>{"use strict";var iP=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};bv.exports=iP;bv.exports.default=iP});var uP=b((cde,Jl)=>{"use strict";var zl=require("path"),sP=oP(),aP=t=>{t={cwd:process.cwd(),path:process.env[sP()],execPath:process.execPath,...t};let e,r=zl.resolve(t.cwd),n=[];for(;e!==r;)n.push(zl.join(r,"node_modules/.bin")),e=r,r=zl.resolve(r,"..");let i=zl.resolve(t.cwd,t.execPath,"..");return n.push(i),n.concat(t.path).join(zl.delimiter)};Jl.exports=aP;Jl.exports.default=aP;Jl.exports.env=t=>{t={env:process.env,...t};let e={...t.env},r=sP({env:e});return t.path=e[r],e[r]=Jl.exports(t),e}});var lP=b((lde,vv)=>{"use strict";var cP=(t,e)=>{for(let r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};vv.exports=cP;vv.exports.default=cP});var pP=b((fde,Jd)=>{"use strict";var _G=lP(),zd=new WeakMap,fP=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0,i=t.displayName||t.name||"<anonymous>",o=function(...s){if(zd.set(o,++n),n===1)r=t.apply(this,s),t=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return _G(o,t),zd.set(o,n),o};Jd.exports=fP;Jd.exports.default=fP;Jd.exports.callCount=t=>{if(!zd.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return zd.get(t)}});var dP=b(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.SIGNALS=void 0;var wG=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Yd.SIGNALS=wG});var _v=b(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.SIGRTMAX=yu.getRealtimeSignals=void 0;var IG=function(){let t=mP-hP+1;return Array.from({length:t},AG)};yu.getRealtimeSignals=IG;var AG=function(t,e){return{name:`SIGRT${e+1}`,number:hP+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},hP=34,mP=64;yu.SIGRTMAX=mP});var HP=b(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.getSignals=void 0;var SG=require("os"),EG=dP(),LG=_v(),PG=function(){let t=(0,LG.getRealtimeSignals)();return[...EG.SIGNALS,...t].map(xG)};Qd.getSignals=PG;var xG=function({name:t,number:e,description:r,action:n,forced:i=!1,standard:o}){let{signals:{[t]:s}}=SG.constants,a=s!==void 0;return{name:t,number:a?s:e,description:r,supported:a,action:n,forced:i,standard:o}}});var yP=b(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.signalsByNumber=bu.signalsByName=void 0;var CG=require("os"),gP=HP(),DG=_v(),TG=function(){return(0,gP.getSignals)().reduce($G,{})},$G=function(t,{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}){return{...t,[e]:{name:e,number:r,description:n,supported:i,action:o,forced:s,standard:a}}},MG=TG();bu.signalsByName=MG;var RG=function(){let t=(0,gP.getSignals)(),e=DG.SIGRTMAX+1,r=Array.from({length:e},(n,i)=>kG(i,t));return Object.assign({},...r)},kG=function(t,e){let r=OG(t,e);if(r===void 0)return{};let{name:n,description:i,supported:o,action:s,forced:a,standard:u}=r;return{[t]:{name:n,number:t,description:i,supported:o,action:s,forced:a,standard:u}}},OG=function(t,e){let r=e.find(({name:n})=>CG.constants.signals[n]===t);return r!==void 0?r:e.find(n=>n.number===t)},NG=RG();bu.signalsByNumber=NG});var vP=b((Hde,bP)=>{"use strict";var{signalsByName:BG}=yP(),FG=({timedOut:t,timeout:e,errorCode:r,signal:n,signalDescription:i,exitCode:o,isCanceled:s})=>t?`timed out after ${e} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",UG=({stdout:t,stderr:e,all:r,error:n,signal:i,exitCode:o,command:s,escapedCommand:a,timedOut:u,isCanceled:c,killed:l,parsed:{options:{timeout:f}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let p=i===void 0?void 0:BG[i].description,m=n&&n.code,g=`Command ${FG({timedOut:u,timeout:f,errorCode:m,signal:i,signalDescription:p,exitCode:o,isCanceled:c})}: ${s}`,y=Object.prototype.toString.call(n)==="[object Error]",_=y?`${g}
${n.message}`:g,C=[_,e,t].filter(Boolean).join(`
`);return y?(n.originalMessage=n.message,n.message=C):n=new Error(C),n.shortMessage=_,n.command=s,n.escapedCommand=a,n.exitCode=o,n.signal=i,n.signalDescription=p,n.stdout=t,n.stderr=e,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!u,n.isCanceled=c,n.killed=l&&!u,n};bP.exports=UG});var wP=b((gde,wv)=>{"use strict";var Zd=["stdin","stdout","stderr"],jG=t=>Zd.some(e=>t[e]!==void 0),_P=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return Zd.map(n=>t[n]);if(jG(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Zd.map(n=>`\`${n}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let r=Math.max(e.length,Zd.length);return Array.from({length:r},(n,i)=>e[i])};wv.exports=_P;wv.exports.node=t=>{let e=_P(t);return e==="ipc"?"ipc":e===void 0||typeof e=="string"?[e,e,e,"ipc"]:e.includes("ipc")?e:[...e,"ipc"]}});var IP=b((yde,eh)=>{eh.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&eh.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&eh.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var EP=b((bde,Zl)=>{var WG=require("assert"),Yl=IP(),qG=/^win/i.test(process.platform),th=require("events");typeof th!="function"&&(th=th.EventEmitter);var Vt;process.__signal_exit_emitter__?Vt=process.__signal_exit_emitter__:(Vt=process.__signal_exit_emitter__=new th,Vt.count=0,Vt.emitted={});Vt.infinite||(Vt.setMaxListeners(1/0),Vt.infinite=!0);Zl.exports=function(t,e){WG.equal(typeof t,"function","a callback must be provided for exit handler"),Ql===!1&&AP();var r="exit";e&&e.alwaysLast&&(r="afterexit");var n=function(){Vt.removeListener(r,t),Vt.listeners("exit").length===0&&Vt.listeners("afterexit").length===0&&Av()};return Vt.on(r,t),n};Zl.exports.unload=Av;function Av(){Ql&&(Ql=!1,Yl.forEach(function(t){try{process.removeListener(t,Sv[t])}catch{}}),process.emit=Iv,process.reallyExit=SP,Vt.count-=1)}function vu(t,e,r){Vt.emitted[t]||(Vt.emitted[t]=!0,Vt.emit(t,e,r))}var Sv={};Yl.forEach(function(t){Sv[t]=function(){var r=process.listeners(t);r.length===Vt.count&&(Av(),vu("exit",null,t),vu("afterexit",null,t),qG&&t==="SIGHUP"&&(t="SIGINT"),process.kill(process.pid,t))}});Zl.exports.signals=function(){return Yl};Zl.exports.load=AP;var Ql=!1;function AP(){Ql||(Ql=!0,Vt.count+=1,Yl=Yl.filter(function(t){try{return process.on(t,Sv[t]),!0}catch{return!1}}),process.emit=GG,process.reallyExit=VG)}var SP=process.reallyExit;function VG(t){process.exitCode=t||0,vu("exit",process.exitCode,null),vu("afterexit",process.exitCode,null),SP.call(process,process.exitCode)}var Iv=process.emit;function GG(t,e){if(t==="exit"){e!==void 0&&(process.exitCode=e);var r=Iv.apply(this,arguments);return vu("exit",process.exitCode,null),vu("afterexit",process.exitCode,null),r}else return Iv.apply(this,arguments)}});var PP=b((vde,LP)=>{"use strict";var XG=require("os"),KG=EP(),zG=1e3*5,JG=(t,e="SIGTERM",r={})=>{let n=t(e);return YG(t,e,r,n),n},YG=(t,e,r,n)=>{if(!QG(e,r,n))return;let i=e4(r),o=setTimeout(()=>{t("SIGKILL")},i);o.unref&&o.unref()},QG=(t,{forceKillAfterTimeout:e},r)=>ZG(t)&&e!==!1&&r,ZG=t=>t===XG.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",e4=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return zG;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},t4=(t,e)=>{t.kill()&&(e.isCanceled=!0)},r4=(t,e,r)=>{t.kill(e),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},n4=(t,{timeout:e,killSignal:r="SIGTERM"},n)=>{if(e===0||e===void 0)return n;let i,o=new Promise((a,u)=>{i=setTimeout(()=>{r4(t,r,u)},e)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([o,s])},i4=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},o4=async(t,{cleanup:e,detached:r},n)=>{if(!e||r)return n;let i=KG(()=>{t.kill()});return n.finally(()=>{i()})};LP.exports={spawnedKill:JG,spawnedCancel:t4,setupTimeout:n4,validateTimeout:i4,setExitHandler:o4}});var CP=b((_de,xP)=>{"use strict";var Jn=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Jn.writable=t=>Jn(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Jn.readable=t=>Jn(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Jn.duplex=t=>Jn.writable(t)&&Jn.readable(t);Jn.transform=t=>Jn.duplex(t)&&typeof t._transform=="function"&&typeof t._transformState=="object";xP.exports=Jn});var TP=b((wde,DP)=>{"use strict";var{PassThrough:s4}=require("stream");DP.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new s4({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var $P=b((Ide,ef)=>{"use strict";var{constants:a4}=require("buffer"),u4=require("stream"),{promisify:c4}=require("util"),l4=TP(),f4=c4(u4.pipeline),rh=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Ev(t,e){if(!t)throw new Error("Expected a stream");e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n=l4(e);return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=a4.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};(async()=>{try{await f4(t,n),i()}catch(a){s(a)}})(),n.on("data",()=>{n.getBufferedLength()>r&&s(new rh)})}),n.getBufferedValue()}ef.exports=Ev;ef.exports.buffer=(t,e)=>Ev(t,{...e,encoding:"buffer"});ef.exports.array=(t,e)=>Ev(t,{...e,array:!0});ef.exports.MaxBufferError=rh});var RP=b((Ade,MP)=>{"use strict";var{PassThrough:p4}=require("stream");MP.exports=function(){var t=[],e=new p4({objectMode:!0});return e.setMaxListeners(0),e.add=r,e.isEmpty=n,e.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(r),e;function r(o){return Array.isArray(o)?(o.forEach(r),this):(t.push(o),o.once("end",i.bind(null,o)),o.once("error",e.emit.bind(e,"error")),o.pipe(e,{end:!1}),this)}function n(){return t.length==0}function i(o){t=t.filter(function(s){return s!==o}),!t.length&&e.readable&&e.end()}}});var BP=b((Sde,NP)=>{"use strict";var OP=CP(),kP=$P(),d4=RP(),h4=(t,e)=>{e===void 0||t.stdin===void 0||(OP(e)?e.pipe(t.stdin):t.stdin.end(e))},m4=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let r=d4();return t.stdout&&r.add(t.stdout),t.stderr&&r.add(t.stderr),r},Lv=async(t,e)=>{if(t){t.destroy();try{return await e}catch(r){return r.bufferedData}}},Pv=(t,{encoding:e,buffer:r,maxBuffer:n})=>{if(!(!t||!r))return e?kP(t,{encoding:e,maxBuffer:n}):kP.buffer(t,{maxBuffer:n})},H4=async({stdout:t,stderr:e,all:r},{encoding:n,buffer:i,maxBuffer:o},s)=>{let a=Pv(t,{encoding:n,buffer:i,maxBuffer:o}),u=Pv(e,{encoding:n,buffer:i,maxBuffer:o}),c=Pv(r,{encoding:n,buffer:i,maxBuffer:o*2});try{return await Promise.all([s,a,u,c])}catch(l){return Promise.all([{error:l,signal:l.signal,timedOut:l.timedOut},Lv(t,a),Lv(e,u),Lv(r,c)])}},g4=({input:t})=>{if(OP(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};NP.exports={handleInput:h4,makeAllStream:m4,getSpawnedResult:H4,validateInputSync:g4}});var UP=b((Ede,FP)=>{"use strict";var y4=(async()=>{})().constructor.prototype,b4=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(y4,t)]),v4=(t,e)=>{for(let[r,n]of b4){let i=typeof e=="function"?(...o)=>Reflect.apply(n.value,e(),o):n.value.bind(e);Reflect.defineProperty(t,r,{...n,value:i})}return t},_4=t=>new Promise((e,r)=>{t.on("exit",(n,i)=>{e({exitCode:n,signal:i})}),t.on("error",n=>{r(n)}),t.stdin&&t.stdin.on("error",n=>{r(n)})});FP.exports={mergePromise:v4,getSpawnedPromise:_4}});var qP=b((Lde,WP)=>{"use strict";var jP=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],w4=/^[\w.-]+$/,I4=/"/g,A4=t=>typeof t!="string"||w4.test(t)?t:`"${t.replace(I4,'\\"')}"`,S4=(t,e)=>jP(t,e).join(" "),E4=(t,e)=>jP(t,e).map(r=>A4(r)).join(" "),L4=/ +/g,P4=t=>{let e=[];for(let r of t.trim().split(L4)){let n=e[e.length-1];n&&n.endsWith("\\")?e[e.length-1]=`${n.slice(0,-1)} ${r}`:e.push(r)}return e};WP.exports={joinCommand:S4,getEscapedCommand:E4,parseCommand:P4}});var Cv=b((Pde,_u)=>{"use strict";var x4=require("path"),xv=require("child_process"),C4=tP(),D4=nP(),T4=uP(),$4=pP(),nh=vP(),GP=wP(),{spawnedKill:M4,spawnedCancel:R4,setupTimeout:k4,validateTimeout:O4,setExitHandler:N4}=PP(),{handleInput:B4,getSpawnedResult:F4,makeAllStream:U4,validateInputSync:j4}=BP(),{mergePromise:VP,getSpawnedPromise:W4}=UP(),{joinCommand:XP,parseCommand:KP,getEscapedCommand:zP}=qP(),q4=1e3*1e3*100,V4=({env:t,extendEnv:e,preferLocal:r,localDir:n,execPath:i})=>{let o=e?{...process.env,...t}:t;return r?T4.env({env:o,cwd:n,execPath:i}):o},JP=(t,e,r={})=>{let n=C4._parse(t,e,r);return t=n.command,e=n.args,r=n.options,r={maxBuffer:q4,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r},r.env=V4(r),r.stdio=GP(r),process.platform==="win32"&&x4.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:r,parsed:n}},tf=(t,e,r)=>typeof e!="string"&&!Buffer.isBuffer(e)?r===void 0?void 0:"":t.stripFinalNewline?D4(e):e,ih=(t,e,r)=>{let n=JP(t,e,r),i=XP(t,e),o=zP(t,e);O4(n.options);let s;try{s=xv.spawn(n.file,n.args,n.options)}catch(m){let h=new xv.ChildProcess,g=Promise.reject(nh({error:m,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return VP(h,g)}let a=W4(s),u=k4(s,n.options,a),c=N4(s,n.options,u),l={isCanceled:!1};s.kill=M4.bind(null,s.kill.bind(s)),s.cancel=R4.bind(null,s,l);let p=$4(async()=>{let[{error:m,exitCode:h,signal:g,timedOut:y},_,C,N]=await F4(s,n.options,c),D=tf(n.options,_),j=tf(n.options,C),X=tf(n.options,N);if(m||h!==0||g!==null){let G=nh({error:m,exitCode:h,signal:g,stdout:D,stderr:j,all:X,command:i,escapedCommand:o,parsed:n,timedOut:y,isCanceled:l.isCanceled,killed:s.killed});if(!n.options.reject)return G;throw G}return{command:i,escapedCommand:o,exitCode:0,stdout:D,stderr:j,all:X,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return B4(s,n.options.input),s.all=U4(s,n.options),VP(s,p)};_u.exports=ih;_u.exports.sync=(t,e,r)=>{let n=JP(t,e,r),i=XP(t,e),o=zP(t,e);j4(n.options);let s;try{s=xv.spawnSync(n.file,n.args,n.options)}catch(c){throw nh({error:c,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}let a=tf(n.options,s.stdout,s.error),u=tf(n.options,s.stderr,s.error);if(s.error||s.status!==0||s.signal!==null){let c=nh({stdout:a,stderr:u,error:s.error,signal:s.signal,exitCode:s.status,command:i,escapedCommand:o,parsed:n,timedOut:s.error&&s.error.code==="ETIMEDOUT",isCanceled:!1,killed:s.signal!==null});if(!n.options.reject)return c;throw c}return{command:i,escapedCommand:o,exitCode:0,stdout:a,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};_u.exports.command=(t,e)=>{let[r,...n]=KP(t);return ih(r,n,e)};_u.exports.commandSync=(t,e)=>{let[r,...n]=KP(t);return ih.sync(r,n,e)};_u.exports.node=(t,e,r={})=>{e&&!Array.isArray(e)&&typeof e=="object"&&(r=e,e=[]);let n=GP.node(r),i=process.execArgv.filter(a=>!a.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:s=i}=r;return ih(o,[...s,t,...Array.isArray(e)?e:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})}});var yt=b(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.NON_CUSTOM_TAG_KEYS=Ae.PRE_DESTROY=Ae.POST_CONSTRUCT=Ae.DESIGN_PARAM_TYPES=Ae.PARAM_TYPES=Ae.TAGGED_PROP=Ae.TAGGED=Ae.MULTI_INJECT_TAG=Ae.INJECT_TAG=Ae.OPTIONAL_TAG=Ae.UNMANAGED_TAG=Ae.NAME_TAG=Ae.NAMED_TAG=void 0;Ae.NAMED_TAG="named";Ae.NAME_TAG="name";Ae.UNMANAGED_TAG="unmanaged";Ae.OPTIONAL_TAG="optional";Ae.INJECT_TAG="inject";Ae.MULTI_INJECT_TAG="multi_inject";Ae.TAGGED="inversify:tagged";Ae.TAGGED_PROP="inversify:tagged_props";Ae.PARAM_TYPES="inversify:paramtypes";Ae.DESIGN_PARAM_TYPES="design:paramtypes";Ae.POST_CONSTRUCT="post_construct";Ae.PRE_DESTROY="pre_destroy";function G4(){return[Ae.INJECT_TAG,Ae.MULTI_INJECT_TAG,Ae.NAME_TAG,Ae.UNMANAGED_TAG,Ae.NAMED_TAG,Ae.OPTIONAL_TAG]}Ae.NON_CUSTOM_TAG_KEYS=G4()});var Pn=b(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.TargetTypeEnum=Mo.BindingTypeEnum=Mo.BindingScopeEnum=void 0;var X4={Request:"Request",Singleton:"Singleton",Transient:"Transient"};Mo.BindingScopeEnum=X4;var K4={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};Mo.BindingTypeEnum=K4;var z4={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};Mo.TargetTypeEnum=z4});var Ro=b(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.id=void 0;var J4=0;function Y4(){return J4++}oh.id=Y4});var QP=b(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.Binding=void 0;var YP=Pn(),Q4=Ro(),Z4=function(){function t(e,r){this.id=(0,Q4.id)(),this.activated=!1,this.serviceIdentifier=e,this.scope=r,this.type=YP.BindingTypeEnum.Invalid,this.constraint=function(n){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===YP.BindingScopeEnum.Singleton?this.activated:!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}();sh.Binding=Z4});var ir=b(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.STACK_OVERFLOW=ne.CIRCULAR_DEPENDENCY_IN_FACTORY=ne.ON_DEACTIVATION_ERROR=ne.PRE_DESTROY_ERROR=ne.POST_CONSTRUCT_ERROR=ne.ASYNC_UNBIND_REQUIRED=ne.MULTIPLE_POST_CONSTRUCT_METHODS=ne.MULTIPLE_PRE_DESTROY_METHODS=ne.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=ne.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=ne.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=ne.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=ne.ARGUMENTS_LENGTH_MISMATCH=ne.INVALID_DECORATOR_OPERATION=ne.INVALID_TO_SELF_VALUE=ne.LAZY_IN_SYNC=ne.INVALID_FUNCTION_BINDING=ne.INVALID_MIDDLEWARE_RETURN=ne.NO_MORE_SNAPSHOTS_AVAILABLE=ne.INVALID_BINDING_TYPE=ne.NOT_IMPLEMENTED=ne.CIRCULAR_DEPENDENCY=ne.UNDEFINED_INJECT_ANNOTATION=ne.MISSING_INJECT_ANNOTATION=ne.MISSING_INJECTABLE_ANNOTATION=ne.NOT_REGISTERED=ne.CANNOT_UNBIND=ne.AMBIGUOUS_MATCH=ne.KEY_NOT_FOUND=ne.NULL_ARGUMENT=ne.DUPLICATED_METADATA=ne.DUPLICATED_INJECTABLE_DECORATOR=void 0;ne.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.";ne.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:";ne.NULL_ARGUMENT="NULL argument";ne.KEY_NOT_FOUND="Key Not Found";ne.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:";ne.CANNOT_UNBIND="Could not unbind serviceIdentifier:";ne.NOT_REGISTERED="No matching bindings found for serviceIdentifier:";ne.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:";ne.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var e5=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};ne.UNDEFINED_INJECT_ANNOTATION=e5;ne.CIRCULAR_DEPENDENCY="Circular dependency found:";ne.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.";ne.INVALID_BINDING_TYPE="Invalid binding type:";ne.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.";ne.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!";ne.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!";var t5=function(t){return"You are attempting to construct '"+t+`' in a synchronous way
 but it has asynchronous dependencies.`};ne.LAZY_IN_SYNC=t5;ne.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier";ne.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var r5=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+(t[0]+" must be >= than the number of constructor arguments of its base class.")};ne.ARGUMENTS_LENGTH_MISMATCH=r5;ne.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.";ne.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').";ne.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean";ne.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean";ne.MULTIPLE_PRE_DESTROY_METHODS="Cannot apply @preDestroy decorator multiple times in the same class";ne.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";ne.ASYNC_UNBIND_REQUIRED="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)";var n5=function(t,e){return"@postConstruct error in class "+t+": "+e};ne.POST_CONSTRUCT_ERROR=n5;var i5=function(t,e){return"@preDestroy error in class "+t+": "+e};ne.PRE_DESTROY_ERROR=i5;var o5=function(t,e){return"onDeactivation() error in class "+t+": "+e};ne.ON_DEACTIVATION_ERROR=o5;var s5=function(t,e){return"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with"+("service identifier '"+e+"'.")};ne.CIRCULAR_DEPENDENCY_IN_FACTORY=s5;ne.STACK_OVERFLOW="Maximum call stack size exceeded"});var Tv=b(Yn=>{"use strict";var a5=Yn&&Yn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),u5=Yn&&Yn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c5=Yn&&Yn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&a5(e,t,r);return u5(e,t),e};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.MetadataReader=void 0;var Dv=c5(yt()),l5=function(){function t(){}return t.prototype.getConstructorMetadata=function(e){var r=Reflect.getMetadata(Dv.PARAM_TYPES,e),n=Reflect.getMetadata(Dv.TAGGED,e);return{compilerGeneratedMetadata:r,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(e){var r=Reflect.getMetadata(Dv.TAGGED_PROP,e)||[];return r},t}();Yn.MetadataReader=l5});var ZP=b(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.BindingCount=void 0;var f5={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};ah.BindingCount=f5});var $v=b(tn=>{"use strict";var p5=tn&&tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),d5=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h5=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&p5(e,t,r);return d5(e,t),e};Object.defineProperty(tn,"__esModule",{value:!0});tn.tryAndThrowErrorIfStackOverflow=tn.isStackOverflowExeption=void 0;var m5=h5(ir());function ex(t){return t instanceof RangeError||t.message===m5.STACK_OVERFLOW}tn.isStackOverflowExeption=ex;var H5=function(t,e){try{return t()}catch(r){throw ex(r)&&(r=e()),r}};tn.tryAndThrowErrorIfStackOverflow=H5});var wu=b(bt=>{"use strict";var g5=bt&&bt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),y5=bt&&bt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),b5=bt&&bt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&g5(e,t,r);return y5(e,t),e};Object.defineProperty(bt,"__esModule",{value:!0});bt.getSymbolDescription=bt.circularDependencyToException=bt.listMetadataForTarget=bt.listRegisteredBindingsForServiceIdentifier=bt.getServiceIdentifierAsString=bt.getFunctionName=void 0;var v5=b5(ir());function tx(t){if(typeof t=="function"){var e=t;return e.name}else{if(typeof t=="symbol")return t.toString();var e=t;return e}}bt.getServiceIdentifierAsString=tx;function _5(t,e,r){var n="",i=r(t,e);return i.length!==0&&(n=`
Registered bindings:`,i.forEach(function(o){var s="Object";o.implementationType!==null&&(s=ix(o.implementationType)),n=n+`
 `+s,o.constraint.metaData&&(n=n+" - "+o.constraint.metaData)})),n}bt.listRegisteredBindingsForServiceIdentifier=_5;function rx(t,e){return t.parentRequest===null?!1:t.parentRequest.serviceIdentifier===e?!0:rx(t.parentRequest,e)}function w5(t){function e(n,i){i===void 0&&(i=[]);var o=tx(n.serviceIdentifier);return i.push(o),n.parentRequest!==null?e(n.parentRequest,i):i}var r=e(t);return r.reverse().join(" --> ")}function nx(t){t.childRequests.forEach(function(e){if(rx(e,e.serviceIdentifier)){var r=w5(e);throw new Error(v5.CIRCULAR_DEPENDENCY+" "+r)}else nx(e)})}bt.circularDependencyToException=nx;function I5(t,e){if(e.isTagged()||e.isNamed()){var r="",n=e.getNamedTag(),i=e.getCustomTags();return n!==null&&(r+=n.toString()+`
`),i!==null&&i.forEach(function(o){r+=o.toString()+`
`})," "+t+`
 `+t+" - "+r}else return" "+t}bt.listMetadataForTarget=I5;function ix(t){if(t.name)return t.name;var e=t.toString(),r=e.match(/^function\s*([^\s(]+)/);return r?r[1]:"Anonymous function: "+e}bt.getFunctionName=ix;function A5(t){return t.toString().slice(7,-1)}bt.getSymbolDescription=A5});var ox=b(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.Context=void 0;var S5=Ro(),E5=function(){function t(e){this.id=(0,S5.id)(),this.container=e}return t.prototype.addPlan=function(e){this.plan=e},t.prototype.setCurrentRequest=function(e){this.currentRequest=e},t}();uh.Context=E5});var xn=b(Qn=>{"use strict";var L5=Qn&&Qn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),P5=Qn&&Qn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),x5=Qn&&Qn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&L5(e,t,r);return P5(e,t),e};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Metadata=void 0;var C5=x5(yt()),D5=function(){function t(e,r){this.key=e,this.value=r}return t.prototype.toString=function(){return this.key===C5.NAMED_TAG?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}();Qn.Metadata=D5});var sx=b(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.Plan=void 0;var T5=function(){function t(e,r){this.parentContext=e,this.rootRequest=r}return t}();ch.Plan=T5});var Mv=b(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.LazyServiceIdentifer=void 0;var $5=function(){function t(e){this._cb=e}return t.prototype.unwrap=function(){return this._cb()},t}();lh.LazyServiceIdentifer=$5});var ax=b(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.QueryableString=void 0;var M5=function(){function t(e){this.str=e}return t.prototype.startsWith=function(e){return this.str.indexOf(e)===0},t.prototype.endsWith=function(e){var r="",n=e.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},n)},t.prototype.contains=function(e){return this.str.indexOf(e)!==-1},t.prototype.equals=function(e){return this.str===e},t.prototype.value=function(){return this.str},t}();fh.QueryableString=M5});var Rv=b(Zn=>{"use strict";var R5=Zn&&Zn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k5=Zn&&Zn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),O5=Zn&&Zn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R5(e,t,r);return k5(e,t),e};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.Target=void 0;var zi=O5(yt()),N5=Ro(),B5=wu(),ux=xn(),F5=ax(),U5=function(){function t(e,r,n,i){this.id=(0,N5.id)(),this.type=e,this.serviceIdentifier=n;var o=typeof r=="symbol"?(0,B5.getSymbolDescription)(r):r;this.name=new F5.QueryableString(o||""),this.identifier=r,this.metadata=new Array;var s=null;typeof i=="string"?s=new ux.Metadata(zi.NAMED_TAG,i):i instanceof ux.Metadata&&(s=i),s!==null&&this.metadata.push(s)}return t.prototype.hasTag=function(e){for(var r=0,n=this.metadata;r<n.length;r++){var i=n[r];if(i.key===e)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(zi.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(e){return this.matchesTag(zi.MULTI_INJECT_TAG)(e)},t.prototype.isNamed=function(){return this.hasTag(zi.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(e){return zi.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})})},t.prototype.isOptional=function(){return this.matchesTag(zi.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===zi.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return zi.NON_CUSTOM_TAG_KEYS.every(function(r){return e.key!==r})}):null},t.prototype.matchesNamedTag=function(e){return this.matchesTag(zi.NAMED_TAG)(e)},t.prototype.matchesTag=function(e){var r=this;return function(n){for(var i=0,o=r.metadata;i<o.length;i++){var s=o[i];if(s.key===e&&s.value===n)return!0}return!1}},t}();Zn.Target=U5});var Hx=b(or=>{"use strict";var j5=or&&or.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W5=or&&or.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cx=or&&or.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&j5(e,t,r);return W5(e,t),e},ph=or&&or.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(or,"__esModule",{value:!0});or.getFunctionName=or.getBaseClassDependencyCount=or.getDependencies=void 0;var q5=Mv(),kv=cx(ir()),lx=Pn(),rf=cx(yt()),Ov=wu();Object.defineProperty(or,"getFunctionName",{enumerable:!0,get:function(){return Ov.getFunctionName}});var fx=Rv();function V5(t,e){var r=(0,Ov.getFunctionName)(e);return px(t,r,e,!1)}or.getDependencies=V5;function px(t,e,r,n){var i=t.getConstructorMetadata(r),o=i.compilerGeneratedMetadata;if(o===void 0){var s=kv.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var a=i.userGeneratedMetadata,u=Object.keys(a),c=r.length===0&&u.length>0,l=u.length>r.length,f=c||l?u.length:r.length,p=X5(n,e,o,a,f),m=dx(t,r,e),h=ph(ph([],p,!0),m,!0);return h}function G5(t,e,r,n,i){var o=i[t.toString()]||[],s=mx(o),a=s.unmanaged!==!0,u=n[t],c=s.inject||s.multiInject;if(u=c||u,u instanceof q5.LazyServiceIdentifer&&(u=u.unwrap()),a){var l=u===Object,f=u===Function,p=u===void 0,m=l||f||p;if(!e&&m){var h=kv.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+r+".";throw new Error(h)}var g=new fx.Target(lx.TargetTypeEnum.ConstructorArgument,s.targetName,u);return g.metadata=o,g}return null}function X5(t,e,r,n,i){for(var o=[],s=0;s<i;s++){var a=s,u=G5(a,t,e,r,n);u!==null&&o.push(u)}return o}function K5(t,e,r,n){var i=t||e;if(i===void 0){var o=kv.MISSING_INJECTABLE_ANNOTATION+" for property "+String(r)+" in class "+n+".";throw new Error(o)}return i}function dx(t,e,r){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.getOwnPropertySymbols(n),s=Object.keys(n),a=s.concat(o),u=0,c=a;u<c.length;u++){var l=c[u],f=n[l],p=mx(f),m=p.targetName||l,h=K5(p.inject,p.multiInject,l,r),g=new fx.Target(lx.TargetTypeEnum.ClassProperty,m,h);g.metadata=f,i.push(g)}var y=Object.getPrototypeOf(e.prototype).constructor;if(y!==Object){var _=dx(t,y,r);i=ph(ph([],i,!0),_,!0)}return i}function hx(t,e){var r=Object.getPrototypeOf(e.prototype).constructor;if(r!==Object){var n=(0,Ov.getFunctionName)(r),i=px(t,n,r,!0),o=i.map(function(u){return u.metadata.filter(function(c){return c.key===rf.UNMANAGED_TAG})}),s=[].concat.apply([],o).length,a=i.length-s;return a>0?a:hx(t,r)}else return 0}or.getBaseClassDependencyCount=hx;function mx(t){var e={};return t.forEach(function(r){e[r.key.toString()]=r.value}),{inject:e[rf.INJECT_TAG],multiInject:e[rf.MULTI_INJECT_TAG],targetName:e[rf.NAME_TAG],unmanaged:e[rf.UNMANAGED_TAG]}}});var gx=b(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.Request=void 0;var z5=Ro(),J5=function(){function t(e,r,n,i,o){this.id=(0,z5.id)(),this.serviceIdentifier=e,this.parentContext=r,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=n===null?new Map:null}return t.prototype.addChildRequest=function(e,r,n){var i=new t(e,this.parentContext,this,r,n);return this.childRequests.push(i),i},t}();dh.Request=J5});var jv=b(Ar=>{"use strict";var Y5=Ar&&Ar.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Q5=Ar&&Ar.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vx=Ar&&Ar.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Y5(e,t,r);return Q5(e,t),e};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.getBindingDictionary=Ar.createMockRequest=Ar.plan=void 0;var hh=ZP(),Bv=vx(ir()),_x=Pn(),yx=vx(yt()),Z5=$v(),Iu=wu(),wx=ox(),Fv=xn(),e9=sx(),Nv=Hx(),Uv=gx(),Ix=Rv();function Ax(t){return t._bindingDictionary}Ar.getBindingDictionary=Ax;function t9(t,e,r,n,i,o){var s=t?yx.MULTI_INJECT_TAG:yx.INJECT_TAG,a=new Fv.Metadata(s,r),u=new Ix.Target(e,n,r,a);if(i!==void 0){var c=new Fv.Metadata(i,o);u.metadata.push(c)}return u}function bx(t,e,r,n,i){var o=nf(r.container,i.serviceIdentifier),s=[];return o.length===hh.BindingCount.NoBindingsAvailable&&r.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(r.container.bind(i.serviceIdentifier).toSelf(),o=nf(r.container,i.serviceIdentifier)),e?s=o:s=o.filter(function(a){var u=new Uv.Request(a.serviceIdentifier,r,n,a,i);return a.constraint(u)}),r9(i.serviceIdentifier,s,i,r.container),s}function r9(t,e,r,n){switch(e.length){case hh.BindingCount.NoBindingsAvailable:if(r.isOptional())return e;var i=(0,Iu.getServiceIdentifierAsString)(t),o=Bv.NOT_REGISTERED;throw o+=(0,Iu.listMetadataForTarget)(i,r),o+=(0,Iu.listRegisteredBindingsForServiceIdentifier)(n,i,nf),new Error(o);case hh.BindingCount.OnlyOneBindingAvailable:return e;case hh.BindingCount.MultipleBindingsAvailable:default:if(r.isArray())return e;var i=(0,Iu.getServiceIdentifierAsString)(t),o=Bv.AMBIGUOUS_MATCH+" "+i;throw o+=(0,Iu.listRegisteredBindingsForServiceIdentifier)(n,i,nf),new Error(o)}}function Sx(t,e,r,n,i,o){var s,a;if(i===null){s=bx(t,e,n,null,o),a=new Uv.Request(r,n,null,s,o);var u=new e9.Plan(n,a);n.addPlan(u)}else s=bx(t,e,n,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach(function(c){var l=null;if(o.isArray())l=a.addChildRequest(c.serviceIdentifier,c,o);else{if(c.cache)return;l=a}if(c.type===_x.BindingTypeEnum.Instance&&c.implementationType!==null){var f=(0,Nv.getDependencies)(t,c.implementationType);if(!n.container.options.skipBaseClassChecks){var p=(0,Nv.getBaseClassDependencyCount)(t,c.implementationType);if(f.length<p){var m=Bv.ARGUMENTS_LENGTH_MISMATCH((0,Nv.getFunctionName)(c.implementationType));throw new Error(m)}}f.forEach(function(h){Sx(t,!1,h.serviceIdentifier,n,l,h)})}})}function nf(t,e){var r=[],n=Ax(t);return n.hasKey(e)?r=n.get(e):t.parent!==null&&(r=nf(t.parent,e)),r}function n9(t,e,r,n,i,o,s,a){a===void 0&&(a=!1);var u=new wx.Context(e),c=t9(r,n,i,"",o,s);try{return Sx(t,a,i,u,null,c),u}catch(l){throw(0,Z5.isStackOverflowExeption)(l)&&(0,Iu.circularDependencyToException)(u.plan.rootRequest),l}}Ar.plan=n9;function i9(t,e,r,n){var i=new Ix.Target(_x.TargetTypeEnum.Variable,"",e,new Fv.Metadata(r,n)),o=new wx.Context(t),s=new Uv.Request(e,o,null,[],i);return s}Ar.createMockRequest=i9});var of=b(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.isPromiseOrContainsPromise=Au.isPromise=void 0;function Wv(t){var e=typeof t=="object"&&t!==null||typeof t=="function";return e&&typeof t.then=="function"}Au.isPromise=Wv;function o9(t){return Wv(t)?!0:Array.isArray(t)&&t.some(Wv)}Au.isPromiseOrContainsPromise=o9});var Ex=b(ei=>{"use strict";var s9=ei&&ei.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},a9=ei&&ei.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(ei,"__esModule",{value:!0});ei.saveToScope=ei.tryGetFromScope=void 0;var mh=ae(),u9=of(),c9=function(t,e){return e.scope===mh.BindingScopeEnum.Singleton&&e.activated?e.cache:e.scope===mh.BindingScopeEnum.Request&&t.has(e.id)?t.get(e.id):null};ei.tryGetFromScope=c9;var l9=function(t,e,r){e.scope===mh.BindingScopeEnum.Singleton&&p9(e,r),e.scope===mh.BindingScopeEnum.Request&&f9(t,e,r)};ei.saveToScope=l9;var f9=function(t,e,r){t.has(e.id)||t.set(e.id,r)},p9=function(t,e){t.cache=e,t.activated=!0,(0,u9.isPromise)(e)&&d9(t,e)},d9=function(t,e){return s9(void 0,void 0,void 0,function(){var r,n;return a9(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return r=i.sent(),t.cache=r,[3,3];case 2:throw n=i.sent(),t.cache=null,t.activated=!1,n;case 3:return[2]}})})}});var Lx=b(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.FactoryType=void 0;var h9;(function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"})(h9=sf.FactoryType||(sf.FactoryType={}))});var Vv=b(Sr=>{"use strict";var m9=Sr&&Sr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),H9=Sr&&Sr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g9=Sr&&Sr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&m9(e,t,r);return H9(e,t),e};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getFactoryDetails=Sr.ensureFullyBound=Sr.multiBindToService=void 0;var y9=ae(),b9=g9(ir()),ti=Pn(),qv=Lx(),v9=function(t){return function(e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.forEach(function(i){return t.bind(i).toService(e)})}}};Sr.multiBindToService=v9;var _9=function(t){var e=null;switch(t.type){case ti.BindingTypeEnum.ConstantValue:case ti.BindingTypeEnum.Function:e=t.cache;break;case ti.BindingTypeEnum.Constructor:case ti.BindingTypeEnum.Instance:e=t.implementationType;break;case ti.BindingTypeEnum.DynamicValue:e=t.dynamicValue;break;case ti.BindingTypeEnum.Provider:e=t.provider;break;case ti.BindingTypeEnum.Factory:e=t.factory;break}if(e===null){var r=(0,y9.getServiceIdentifierAsString)(t.serviceIdentifier);throw new Error(b9.INVALID_BINDING_TYPE+" "+r)}};Sr.ensureFullyBound=_9;var w9=function(t){switch(t.type){case ti.BindingTypeEnum.Factory:return{factory:t.factory,factoryType:qv.FactoryType.Factory};case ti.BindingTypeEnum.Provider:return{factory:t.provider,factoryType:qv.FactoryType.Provider};case ti.BindingTypeEnum.DynamicValue:return{factory:t.dynamicValue,factoryType:qv.FactoryType.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}};Sr.getFactoryDetails=w9});var $x=b(Mt=>{"use strict";var Su=Mt&&Mt.__assign||function(){return Su=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Su.apply(this,arguments)},I9=Mt&&Mt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),A9=Mt&&Mt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S9=Mt&&Mt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&I9(e,t,r);return A9(e,t),e},Cx=Mt&&Mt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Dx=Mt&&Mt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},E9=Mt&&Mt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.resolveInstance=void 0;var Gv=ir(),Kv=Pn(),Xv=S9(yt()),zv=of();function L9(t,e){return t.reduce(function(r,n){var i=e(n),o=n.target.type;return o===Kv.TargetTypeEnum.ConstructorArgument?r.constructorInjections.push(i):(r.propertyRequests.push(n),r.propertyInjections.push(i)),r.isAsync||(r.isAsync=(0,zv.isPromiseOrContainsPromise)(i)),r},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function P9(t,e,r){var n;if(e.length>0){var i=L9(e,r),o=Su(Su({},i),{constr:t});i.isAsync?n=x9(o):n=Tx(o)}else n=new t;return n}function Tx(t){var e,r=new((e=t.constr).bind.apply(e,E9([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach(function(n,i){var o=n.target.identifier,s=t.propertyInjections[i];r[o]=s}),r}function x9(t){return Cx(this,void 0,void 0,function(){var e,r;return Dx(this,function(n){switch(n.label){case 0:return[4,Px(t.constructorInjections)];case 1:return e=n.sent(),[4,Px(t.propertyInjections)];case 2:return r=n.sent(),[2,Tx(Su(Su({},t),{constructorInjections:e,propertyInjections:r}))]}})})}function Px(t){return Cx(this,void 0,void 0,function(){var e,r,n,i;return Dx(this,function(o){for(e=[],r=0,n=t;r<n.length;r++)i=n[r],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]})})}function xx(t,e){var r=C9(t,e);return(0,zv.isPromise)(r)?r.then(function(){return e}):e}function C9(t,e){var r,n;if(Reflect.hasMetadata(Xv.POST_CONSTRUCT,t)){var i=Reflect.getMetadata(Xv.POST_CONSTRUCT,t);try{return(n=(r=e)[i.value])===null||n===void 0?void 0:n.call(r)}catch(o){throw new Error((0,Gv.POST_CONSTRUCT_ERROR)(t.name,o.message))}}}function D9(t,e){t.scope!==Kv.BindingScopeEnum.Singleton&&T9(t,e)}function T9(t,e){var r="Class cannot be instantiated in "+(t.scope===Kv.BindingScopeEnum.Request?"request":"transient")+" scope.";if(typeof t.onDeactivation=="function")throw new Error((0,Gv.ON_DEACTIVATION_ERROR)(e.name,r));if(Reflect.hasMetadata(Xv.PRE_DESTROY,e))throw new Error((0,Gv.PRE_DESTROY_ERROR)(e.name,r))}function $9(t,e,r,n){D9(t,e);var i=P9(e,r,n);return(0,zv.isPromise)(i)?i.then(function(o){return xx(e,o)}):xx(e,i)}Mt.resolveInstance=$9});var Nx=b(Er=>{"use strict";var M9=Er&&Er.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),R9=Er&&Er.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),k9=Er&&Er.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&M9(e,t,r);return R9(e,t),e},O9=Er&&Er.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},N9=Er&&Er.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Er,"__esModule",{value:!0});Er.resolve=void 0;var B9=k9(ir()),Hh=Pn(),F9=jv(),Mx=Ex(),Jv=of(),kx=Vv(),U9=$v(),j9=$x(),Yv=function(t){return function(e){e.parentContext.setCurrentRequest(e);var r=e.bindings,n=e.childRequests,i=e.target&&e.target.isArray(),o=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(i&&o)return n.map(function(a){var u=Yv(t);return u(a)});if(e.target.isOptional()&&r.length===0)return;var s=r[0];return G9(t,e,s)}},W9=function(t,e){var r=(0,kx.getFactoryDetails)(t);return(0,U9.tryAndThrowErrorIfStackOverflow)(function(){return r.factory.bind(t)(e)},function(){return new Error(B9.CIRCULAR_DEPENDENCY_IN_FACTORY(r.factoryType,e.currentRequest.serviceIdentifier.toString()))})},q9=function(t,e,r){var n,i=e.childRequests;switch((0,kx.ensureFullyBound)(r),r.type){case Hh.BindingTypeEnum.ConstantValue:case Hh.BindingTypeEnum.Function:n=r.cache;break;case Hh.BindingTypeEnum.Constructor:n=r.implementationType;break;case Hh.BindingTypeEnum.Instance:n=(0,j9.resolveInstance)(r,r.implementationType,i,Yv(t));break;default:n=W9(r,e.parentContext)}return n},V9=function(t,e,r){var n=(0,Mx.tryGetFromScope)(t,e);return n!==null||(n=r(),(0,Mx.saveToScope)(t,e,n)),n},G9=function(t,e,r){return V9(t,r,function(){var n=q9(t,e,r);return(0,Jv.isPromise)(n)?n=n.then(function(i){return Rx(e,r,i)}):n=Rx(e,r,n),n})};function Rx(t,e,r){var n=X9(t.parentContext,e,r),i=J9(t.parentContext.container),o,s=i.next();do{o=s.value;var a=t.parentContext,u=t.serviceIdentifier,c=z9(o,u);(0,Jv.isPromise)(n)?n=Ox(c,a,n):n=K9(c,a,n),s=i.next()}while(s.done!==!0&&!(0,F9.getBindingDictionary)(o).hasKey(t.serviceIdentifier));return n}var X9=function(t,e,r){var n;return typeof e.onActivation=="function"?n=e.onActivation(t,r):n=r,n},K9=function(t,e,r){for(var n=t.next();!n.done;){if(r=n.value(e,r),(0,Jv.isPromise)(r))return Ox(t,e,r);n=t.next()}return r},Ox=function(t,e,r){return O9(void 0,void 0,void 0,function(){var n,i;return N9(this,function(o){switch(o.label){case 0:return[4,r];case 1:n=o.sent(),i=t.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(e,n)];case 3:return n=o.sent(),i=t.next(),[3,2];case 4:return[2,n]}})})},z9=function(t,e){var r=t._activations;return r.hasKey(e)?r.get(e).values():[].values()},J9=function(t){for(var e=[t],r=t.parent;r!==null;)e.push(r),r=r.parent;var n=function(){var o=e.pop();return o!==void 0?{done:!1,value:o}:{done:!0,value:void 0}},i={next:n};return i};function Y9(t){var e=Yv(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}Er.resolve=Y9});var Qv=b(sr=>{"use strict";var Q9=sr&&sr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Z9=sr&&sr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),eX=sr&&sr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Q9(e,t,r);return Z9(e,t),e};Object.defineProperty(sr,"__esModule",{value:!0});sr.typeConstraint=sr.namedConstraint=sr.taggedConstraint=sr.traverseAncerstors=void 0;var tX=eX(yt()),rX=xn(),Bx=function(t,e){var r=t.parentRequest;return r!==null?e(r)?!0:Bx(r,e):!1};sr.traverseAncerstors=Bx;var Fx=function(t){return function(e){var r=function(n){return n!==null&&n.target!==null&&n.target.matchesTag(t)(e)};return r.metaData=new rX.Metadata(t,e),r}};sr.taggedConstraint=Fx;var nX=Fx(tX.NAMED_TAG);sr.namedConstraint=nX;var iX=function(t){return function(e){var r=null;if(e!==null)if(r=e.bindings[0],typeof t=="string"){var n=r.serviceIdentifier;return n===t}else{var i=e.bindings[0].implementationType;return t===i}return!1}};sr.typeConstraint=iX});var yh=b(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.BindingWhenSyntax=void 0;var Hr=bh(),Et=Qv(),oX=function(){function t(e){this._binding=e}return t.prototype.when=function(e){return this._binding.constraint=e,new Hr.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(e){return this._binding.constraint=(0,Et.namedConstraint)(e),new Hr.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){if(e===null)return!1;var r=e.target!==null&&!e.target.isNamed()&&!e.target.isTagged();return r},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(e,r){return this._binding.constraint=(0,Et.taggedConstraint)(e)(r),new Hr.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Et.typeConstraint)(e)(r.parentRequest)},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Et.namedConstraint)(e)(r.parentRequest)},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Et.taggedConstraint)(e)(r)(n.parentRequest)},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Et.traverseAncerstors)(r,(0,Et.typeConstraint)(e))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Et.traverseAncerstors)(r,(0,Et.typeConstraint)(e))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Et.traverseAncerstors)(r,(0,Et.namedConstraint)(e))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Et.traverseAncerstors)(r,(0,Et.namedConstraint)(e))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&(0,Et.traverseAncerstors)(n,(0,Et.taggedConstraint)(e)(r))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(e,r){return this._binding.constraint=function(n){return n!==null&&!(0,Et.traverseAncerstors)(n,(0,Et.taggedConstraint)(e)(r))},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&(0,Et.traverseAncerstors)(r,e)},new Hr.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(r){return r!==null&&!(0,Et.traverseAncerstors)(r,e)},new Hr.BindingOnSyntax(this._binding)},t}();gh.BindingWhenSyntax=oX});var bh=b(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.BindingOnSyntax=void 0;var Ux=yh(),sX=function(){function t(e){this._binding=e}return t.prototype.onActivation=function(e){return this._binding.onActivation=e,new Ux.BindingWhenSyntax(this._binding)},t.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new Ux.BindingWhenSyntax(this._binding)},t}();vh.BindingOnSyntax=sX});var Zv=b(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.BindingWhenOnSyntax=void 0;var aX=bh(),uX=yh(),cX=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new uX.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new aX.BindingOnSyntax(this._binding)}return t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();_h.BindingWhenOnSyntax=cX});var jx=b(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.BindingInSyntax=void 0;var e_=Pn(),t_=Zv(),lX=function(){function t(e){this._binding=e}return t.prototype.inRequestScope=function(){return this._binding.scope=e_.BindingScopeEnum.Request,new t_.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=e_.BindingScopeEnum.Singleton,new t_.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=e_.BindingScopeEnum.Transient,new t_.BindingWhenOnSyntax(this._binding)},t}();wh.BindingInSyntax=lX});var Wx=b(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.BindingInWhenOnSyntax=void 0;var fX=jx(),pX=bh(),dX=yh(),hX=function(){function t(e){this._binding=e,this._bindingWhenSyntax=new dX.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new pX.BindingOnSyntax(this._binding),this._bindingInSyntax=new fX.BindingInSyntax(e)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},t.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(e,r){return this._bindingWhenSyntax.whenTargetTagged(e,r)},t.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},t.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},t.prototype.whenParentTagged=function(e,r){return this._bindingWhenSyntax.whenParentTagged(e,r)},t.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},t.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},t.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},t.prototype.whenAnyAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,r)},t.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},t.prototype.whenNoAncestorTagged=function(e,r){return this._bindingWhenSyntax.whenNoAncestorTagged(e,r)},t.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},t.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},t.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},t.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},t}();Ih.BindingInWhenOnSyntax=hX});var Gx=b(ri=>{"use strict";var mX=ri&&ri.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HX=ri&&ri.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gX=ri&&ri.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&mX(e,t,r);return HX(e,t),e};Object.defineProperty(ri,"__esModule",{value:!0});ri.BindingToSyntax=void 0;var qx=gX(ir()),gr=Pn(),Vx=Wx(),Eu=Zv(),yX=function(){function t(e){this._binding=e}return t.prototype.to=function(e){return this._binding.type=gr.BindingTypeEnum.Instance,this._binding.implementationType=e,new Vx.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+qx.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},t.prototype.toConstantValue=function(e){return this._binding.type=gr.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=gr.BindingScopeEnum.Singleton,new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(e){return this._binding.type=gr.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new Vx.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(e){return this._binding.type=gr.BindingTypeEnum.Constructor,this._binding.implementationType=e,this._binding.scope=gr.BindingScopeEnum.Singleton,new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(e){return this._binding.type=gr.BindingTypeEnum.Factory,this._binding.factory=e,this._binding.scope=gr.BindingScopeEnum.Singleton,new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(e){if(typeof e!="function")throw new Error(qx.INVALID_FUNCTION_BINDING);var r=this.toConstantValue(e);return this._binding.type=gr.BindingTypeEnum.Function,this._binding.scope=gr.BindingScopeEnum.Singleton,r},t.prototype.toAutoFactory=function(e){return this._binding.type=gr.BindingTypeEnum.Factory,this._binding.factory=function(r){var n=function(){return r.container.get(e)};return n},this._binding.scope=gr.BindingScopeEnum.Singleton,new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toAutoNamedFactory=function(e){return this._binding.type=gr.BindingTypeEnum.Factory,this._binding.factory=function(r){return function(n){return r.container.getNamed(e,n)}},new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(e){return this._binding.type=gr.BindingTypeEnum.Provider,this._binding.provider=e,this._binding.scope=gr.BindingScopeEnum.Singleton,new Eu.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(e){this.toDynamicValue(function(r){return r.container.get(e)})},t}();ri.BindingToSyntax=yX});var Xx=b(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ContainerSnapshot=void 0;var bX=function(){function t(){}return t.of=function(e,r,n,i,o){var s=new t;return s.bindings=e,s.middleware=r,s.deactivations=i,s.activations=n,s.moduleActivationStore=o,s},t}();Ah.ContainerSnapshot=bX});var Kx=b(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.isClonable=void 0;function vX(t){return typeof t=="object"&&t!==null&&"clone"in t&&typeof t.clone=="function"}Sh.isClonable=vX});var r_=b(ni=>{"use strict";var _X=ni&&ni.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wX=ni&&ni.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IX=ni&&ni.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_X(e,t,r);return wX(e,t),e};Object.defineProperty(ni,"__esModule",{value:!0});ni.Lookup=void 0;var Vs=IX(ir()),AX=Kx(),SX=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(e,r){if(e==null)throw new Error(Vs.NULL_ARGUMENT);if(r==null)throw new Error(Vs.NULL_ARGUMENT);var n=this._map.get(e);n!==void 0?n.push(r):this._map.set(e,[r])},t.prototype.get=function(e){if(e==null)throw new Error(Vs.NULL_ARGUMENT);var r=this._map.get(e);if(r!==void 0)return r;throw new Error(Vs.KEY_NOT_FOUND)},t.prototype.remove=function(e){if(e==null)throw new Error(Vs.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(Vs.KEY_NOT_FOUND)},t.prototype.removeIntersection=function(e){var r=this;this.traverse(function(n,i){var o=e.hasKey(n)?e.get(n):void 0;if(o!==void 0){var s=i.filter(function(a){return!o.some(function(u){return a===u})});r._setValue(n,s)}})},t.prototype.removeByCondition=function(e){var r=this,n=[];return this._map.forEach(function(i,o){for(var s=[],a=0,u=i;a<u.length;a++){var c=u[a],l=e(c);l?n.push(c):s.push(c)}r._setValue(o,s)}),n},t.prototype.hasKey=function(e){if(e==null)throw new Error(Vs.NULL_ARGUMENT);return this._map.has(e)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){r.forEach(function(i){return e.add(n,(0,AX.isClonable)(i)?i.clone():i)})}),e},t.prototype.traverse=function(e){this._map.forEach(function(r,n){e(n,r)})},t.prototype._setValue=function(e,r){r.length>0?this._map.set(e,r):this._map.delete(e)},t}();ni.Lookup=SX});var Jx=b(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});Eh.ModuleActivationStore=void 0;var zx=r_(),EX=function(){function t(){this._map=new Map}return t.prototype.remove=function(e){if(this._map.has(e)){var r=this._map.get(e);return this._map.delete(e),r}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(e,r,n){this._getModuleActivationHandlers(e).onDeactivations.add(r,n)},t.prototype.addActivation=function(e,r,n){this._getModuleActivationHandlers(e).onActivations.add(r,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(r,n){e._map.set(n,{onActivations:r.onActivations.clone(),onDeactivations:r.onDeactivations.clone()})}),e},t.prototype._getModuleActivationHandlers=function(e){var r=this._map.get(e);return r===void 0&&(r=this._getEmptyHandlersStore(),this._map.set(e,r)),r},t.prototype._getEmptyHandlersStore=function(){var e={onActivations:new zx.Lookup,onDeactivations:new zx.Lookup};return e},t}();Eh.ModuleActivationStore=EX});var Qx=b(Rt=>{"use strict";var Ph=Rt&&Rt.__assign||function(){return Ph=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ph.apply(this,arguments)},LX=Rt&&Rt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),PX=Rt&&Rt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Yx=Rt&&Rt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&LX(e,t,r);return PX(e,t),e},rn=Rt&&Rt.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},nn=Rt&&Rt.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},xX=Rt&&Rt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Container=void 0;var CX=QP(),Cn=Yx(ir()),Lu=Pn(),Gs=Yx(yt()),DX=Tv(),Lh=jv(),TX=Nx(),$X=Gx(),Xs=of(),MX=Ro(),RX=wu(),kX=Xx(),af=r_(),OX=Jx(),NX=function(){function t(e){var r=e||{};if(typeof r!="object")throw new Error(""+Cn.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(r.defaultScope===void 0)r.defaultScope=Lu.BindingScopeEnum.Transient;else if(r.defaultScope!==Lu.BindingScopeEnum.Singleton&&r.defaultScope!==Lu.BindingScopeEnum.Transient&&r.defaultScope!==Lu.BindingScopeEnum.Request)throw new Error(""+Cn.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(r.autoBindInjectable===void 0)r.autoBindInjectable=!1;else if(typeof r.autoBindInjectable!="boolean")throw new Error(""+Cn.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(r.skipBaseClassChecks===void 0)r.skipBaseClassChecks=!1;else if(typeof r.skipBaseClassChecks!="boolean")throw new Error(""+Cn.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=(0,MX.id)(),this._bindingDictionary=new af.Lookup,this._snapshots=[],this._middleware=null,this._activations=new af.Lookup,this._deactivations=new af.Lookup,this.parent=null,this._metadataReader=new DX.MetadataReader,this._moduleActivationStore=new OX.ModuleActivationStore}return t.merge=function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var o=new t,s=xX([e,r],n,!0).map(function(c){return(0,Lh.getBindingDictionary)(c)}),a=(0,Lh.getBindingDictionary)(o);function u(c,l){c.traverse(function(f,p){p.forEach(function(m){l.add(m.serviceIdentifier,m.clone())})})}return s.forEach(function(c){u(c,a)}),o},t.prototype.load=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=this._getContainerModuleHelpersFactory(),i=0,o=e;i<o.length;i++){var s=o[i],a=n(s.id);s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return rn(this,void 0,void 0,function(){var n,i,o,s,a;return nn(this,function(u){switch(u.label){case 0:n=this._getContainerModuleHelpersFactory(),i=0,o=e,u.label=1;case 1:return i<o.length?(s=o[i],a=n(s.id),[4,s.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.forEach(function(i){var o=e._removeModuleBindings(i.id);e._deactivateSingletons(o),e._removeModuleHandlers(i.id)})},t.prototype.unloadAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return rn(this,void 0,void 0,function(){var n,i,o,s;return nn(this,function(a){switch(a.label){case 0:n=0,i=e,a.label=1;case 1:return n<i.length?(o=i[n],s=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(s)]):[3,4];case 2:a.sent(),this._removeModuleHandlers(o.id),a.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.bind=function(e){var r=this.options.defaultScope||Lu.BindingScopeEnum.Transient,n=new CX.Binding(e,r);return this._bindingDictionary.add(e,n),new $X.BindingToSyntax(n)},t.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},t.prototype.rebindAsync=function(e){return rn(this,void 0,void 0,function(){return nn(this,function(r){switch(r.label){case 0:return[4,this.unbindAsync(e)];case 1:return r.sent(),[2,this.bind(e)]}})})},t.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e);this._deactivateSingletons(r)}this._removeServiceFromDictionary(e)},t.prototype.unbindAsync=function(e){return rn(this,void 0,void 0,function(){var r;return nn(this,function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(r=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(r)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}})})},t.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse(function(r,n){e._deactivateSingletons(n)}),this._bindingDictionary=new af.Lookup},t.prototype.unbindAllAsync=function(){return rn(this,void 0,void 0,function(){var e,r=this;return nn(this,function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse(function(i,o){e.push(r._deactivateSingletonsAsync(o))}),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new af.Lookup,[2]}})})},t.prototype.onActivation=function(e,r){this._activations.add(e,r)},t.prototype.onDeactivation=function(e,r){this._deactivations.add(e,r)},t.prototype.isBound=function(e){var r=this._bindingDictionary.hasKey(e);return!r&&this.parent&&(r=this.parent.isBound(e)),r},t.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},t.prototype.isBoundNamed=function(e,r){return this.isBoundTagged(e,Gs.NAMED_TAG,r)},t.prototype.isBoundTagged=function(e,r,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),s=(0,Lh.createMockRequest)(this,e,r,n);i=o.some(function(a){return a.constraint(s)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,r,n)),i},t.prototype.snapshot=function(){this._snapshots.push(kX.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var e=this._snapshots.pop();if(e===void 0)throw new Error(Cn.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},t.prototype.createChild=function(e){var r=new t(e||this.options);return r.parent=this,r},t.prototype.applyMiddleware=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(i,o){return o(i)},n)},t.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},t.prototype.get=function(e){var r=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(r)},t.prototype.getAsync=function(e){return rn(this,void 0,void 0,function(){var r;return nn(this,function(n){return r=this._getNotAllArgs(e,!1),[2,this._get(r)]})})},t.prototype.getTagged=function(e,r,n){var i=this._getNotAllArgs(e,!1,r,n);return this._getButThrowIfAsync(i)},t.prototype.getTaggedAsync=function(e,r,n){return rn(this,void 0,void 0,function(){var i;return nn(this,function(o){return i=this._getNotAllArgs(e,!1,r,n),[2,this._get(i)]})})},t.prototype.getNamed=function(e,r){return this.getTagged(e,Gs.NAMED_TAG,r)},t.prototype.getNamedAsync=function(e,r){return this.getTaggedAsync(e,Gs.NAMED_TAG,r)},t.prototype.getAll=function(e){var r=this._getAllArgs(e);return this._getButThrowIfAsync(r)},t.prototype.getAllAsync=function(e){var r=this._getAllArgs(e);return this._getAll(r)},t.prototype.getAllTagged=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getButThrowIfAsync(i)},t.prototype.getAllTaggedAsync=function(e,r,n){var i=this._getNotAllArgs(e,!0,r,n);return this._getAll(i)},t.prototype.getAllNamed=function(e,r){return this.getAllTagged(e,Gs.NAMED_TAG,r)},t.prototype.getAllNamedAsync=function(e,r){return this.getAllTaggedAsync(e,Gs.NAMED_TAG,r)},t.prototype.resolve=function(e){var r=this.isBound(e);r||this.bind(e).toSelf();var n=this.get(e);return r||this.unbind(e),n},t.prototype._preDestroy=function(e,r){if(Reflect.hasMetadata(Gs.PRE_DESTROY,e)){var n=Reflect.getMetadata(Gs.PRE_DESTROY,e);return r[n.value]()}},t.prototype._removeModuleHandlers=function(e){var r=this._moduleActivationStore.remove(e);this._activations.removeIntersection(r.onActivations),this._deactivations.removeIntersection(r.onDeactivations)},t.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition(function(r){return r.moduleId===e})},t.prototype._deactivate=function(e,r){var n=this,i=Object.getPrototypeOf(r).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(r,this._deactivations.get(e.serviceIdentifier).values());if((0,Xs.isPromise)(o))return this._handleDeactivationError(o.then(function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,r,i)}),i)}var s=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,r,i);if((0,Xs.isPromise)(s))return this._handleDeactivationError(s,i)}catch(a){throw new Error(Cn.ON_DEACTIVATION_ERROR(i.name,a.message))}},t.prototype._handleDeactivationError=function(e,r){return rn(this,void 0,void 0,function(){var n;return nn(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return i.sent(),[3,3];case 2:throw n=i.sent(),new Error(Cn.ON_DEACTIVATION_ERROR(r.name,n.message));case 3:return[2]}})})},t.prototype._deactivateContainer=function(e,r){for(var n=this,i=r.next();i.value;){var o=i.value(e);if((0,Xs.isPromise)(o))return o.then(function(){return n._deactivateContainerAsync(e,r)});i=r.next()}},t.prototype._deactivateContainerAsync=function(e,r){return rn(this,void 0,void 0,function(){var n;return nn(this,function(i){switch(i.label){case 0:n=r.next(),i.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return i.sent(),n=r.next(),[3,1];case 3:return[2]}})})},t.prototype._getContainerModuleHelpersFactory=function(){var e=this,r=function(l,f){l._binding.moduleId=f},n=function(l){return function(f){var p=e.bind(f);return r(p,l),p}},i=function(){return function(l){return e.unbind(l)}},o=function(){return function(l){return e.unbindAsync(l)}},s=function(){return function(l){return e.isBound(l)}},a=function(l){return function(f){var p=e.rebind(f);return r(p,l),p}},u=function(l){return function(f,p){e._moduleActivationStore.addActivation(l,f,p),e.onActivation(f,p)}},c=function(l){return function(f,p){e._moduleActivationStore.addDeactivation(l,f,p),e.onDeactivation(f,p)}};return function(l){return{bindFunction:n(l),isboundFunction:s(),onActivationFunction:u(l),onDeactivationFunction:c(l),rebindFunction:a(l),unbindFunction:i(),unbindAsyncFunction:o()}}},t.prototype._getAll=function(e){return Promise.all(this._get(e))},t.prototype._get=function(e){var r=Ph(Ph({},e),{contextInterceptor:function(i){return i},targetType:Lu.TargetTypeEnum.Variable});if(this._middleware){var n=this._middleware(r);if(n==null)throw new Error(Cn.INVALID_MIDDLEWARE_RETURN);return n}return this._planAndResolve()(r)},t.prototype._getButThrowIfAsync=function(e){var r=this._get(e);if((0,Xs.isPromiseOrContainsPromise)(r))throw new Error(Cn.LAZY_IN_SYNC(e.serviceIdentifier));return r},t.prototype._getAllArgs=function(e){var r={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e};return r},t.prototype._getNotAllArgs=function(e,r,n,i){var o={avoidConstraints:!1,isMultiInject:r,serviceIdentifier:e,key:n,value:i};return o},t.prototype._planAndResolve=function(){var e=this;return function(r){var n=(0,Lh.plan)(e._metadataReader,e,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);n=r.contextInterceptor(n);var i=(0,TX.resolve)(n);return i}},t.prototype._deactivateIfSingleton=function(e){var r=this;if(e.activated)return(0,Xs.isPromise)(e.cache)?e.cache.then(function(n){return r._deactivate(e,n)}):this._deactivate(e,e.cache)},t.prototype._deactivateSingletons=function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r],o=this._deactivateIfSingleton(i);if((0,Xs.isPromise)(o))throw new Error(Cn.ASYNC_UNBIND_REQUIRED)}},t.prototype._deactivateSingletonsAsync=function(e){return rn(this,void 0,void 0,function(){var r=this;return nn(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(i){return r._deactivateIfSingleton(i)}))];case 1:return n.sent(),[2]}})})},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,r,n){return this.parent?this._deactivate.bind(this.parent)(e,r):this._bindingDeactivationAndPreDestroy(e,r,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,r,n){return rn(this,void 0,void 0,function(){return nn(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,r)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,r,n)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},t.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error(Cn.CANNOT_UNBIND+" "+(0,RX.getServiceIdentifierAsString)(e))}},t.prototype._bindingDeactivationAndPreDestroy=function(e,r,n){var i=this;if(typeof e.onDeactivation=="function"){var o=e.onDeactivation(r);if((0,Xs.isPromise)(o))return o.then(function(){return i._preDestroy(n,r)})}return this._preDestroy(n,r)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(e,r,n){return rn(this,void 0,void 0,function(){return nn(this,function(i){switch(i.label){case 0:return typeof e.onDeactivation!="function"?[3,2]:[4,e.onDeactivation(r)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(n,r)];case 3:return i.sent(),[2]}})})},t}();Rt.Container=NX});var eC=b(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.AsyncContainerModule=Pu.ContainerModule=void 0;var Zx=Ro(),BX=function(){function t(e){this.id=(0,Zx.id)(),this.registry=e}return t}();Pu.ContainerModule=BX;var FX=function(){function t(e){this.id=(0,Zx.id)(),this.registry=e}return t}();Pu.AsyncContainerModule=FX});var tC=b(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.getFirstArrayDuplicate=void 0;function UX(t){for(var e=new Set,r=0,n=t;r<n.length;r++){var i=n[r];if(e.has(i))return i;e.add(i)}}xh.getFirstArrayDuplicate=UX});var Ji=b(ar=>{"use strict";var jX=ar&&ar.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),WX=ar&&ar.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nC=ar&&ar.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jX(e,t,r);return WX(e,t),e};Object.defineProperty(ar,"__esModule",{value:!0});ar.createTaggedDecorator=ar.tagProperty=ar.tagParameter=ar.decorate=void 0;var Ch=nC(ir()),iC=nC(yt()),qX=tC();function VX(t){return t.prototype!==void 0}function GX(t){if(t!==void 0)throw new Error(Ch.INVALID_DECORATOR_OPERATION)}function oC(t,e,r,n){GX(e),aC(iC.TAGGED,t,r.toString(),n)}ar.tagParameter=oC;function sC(t,e,r){if(VX(t))throw new Error(Ch.INVALID_DECORATOR_OPERATION);aC(iC.TAGGED_PROP,t.constructor,e,r)}ar.tagProperty=sC;function XX(t){var e=[];if(Array.isArray(t)){e=t;var r=(0,qX.getFirstArrayDuplicate)(e.map(function(n){return n.key}));if(r!==void 0)throw new Error(Ch.DUPLICATED_METADATA+" "+r.toString())}else e=[t];return e}function aC(t,e,r,n){var i=XX(n),o={};Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var s=o[r];if(s===void 0)s=[];else for(var a=function(f){if(i.some(function(p){return p.key===f.key}))throw new Error(Ch.DUPLICATED_METADATA+" "+f.key.toString())},u=0,c=s;u<c.length;u++){var l=c[u];a(l)}s.push.apply(s,i),o[r]=s,Reflect.defineMetadata(t,o,e)}function KX(t){return function(e,r,n){typeof n=="number"?oC(e,r,n,t):sC(e,r,t)}}ar.createTaggedDecorator=KX;function rC(t,e){Reflect.decorate(t,e)}function zX(t,e){return function(r,n){e(r,n,t)}}function JX(t,e,r){typeof r=="number"?rC([zX(r,t)],e):typeof r=="string"?Reflect.decorate([t],e,r):rC([t],e)}ar.decorate=JX});var cC=b(ii=>{"use strict";var YX=ii&&ii.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),QX=ii&&ii.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),uC=ii&&ii.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&YX(e,t,r);return QX(e,t),e};Object.defineProperty(ii,"__esModule",{value:!0});ii.injectable=void 0;var ZX=uC(ir()),n_=uC(yt());function e6(){return function(t){if(Reflect.hasOwnMetadata(n_.PARAM_TYPES,t))throw new Error(ZX.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(n_.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(n_.PARAM_TYPES,e,t),t}}ii.injectable=e6});var lC=b(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.tagged=void 0;var t6=xn(),r6=Ji();function n6(t,e){return(0,r6.createTaggedDecorator)(new t6.Metadata(t,e))}Dh.tagged=n6});var fC=b(oi=>{"use strict";var i6=oi&&oi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),o6=oi&&oi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s6=oi&&oi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&i6(e,t,r);return o6(e,t),e};Object.defineProperty(oi,"__esModule",{value:!0});oi.named=void 0;var a6=s6(yt()),u6=xn(),c6=Ji();function l6(t){return(0,c6.createTaggedDecorator)(new u6.Metadata(a6.NAMED_TAG,t))}oi.named=l6});var i_=b(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});Th.injectBase=void 0;var f6=ir(),p6=xn(),d6=Ji();function h6(t){return function(e){return function(r,n,i){if(e===void 0){var o=typeof r=="function"?r.name:r.constructor.name;throw new Error((0,f6.UNDEFINED_INJECT_ANNOTATION)(o))}return(0,d6.createTaggedDecorator)(new p6.Metadata(t,e))(r,n,i)}}}Th.injectBase=h6});var pC=b(si=>{"use strict";var m6=si&&si.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),H6=si&&si.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g6=si&&si.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&m6(e,t,r);return H6(e,t),e};Object.defineProperty(si,"__esModule",{value:!0});si.inject=void 0;var y6=g6(yt()),b6=i_(),v6=(0,b6.injectBase)(y6.INJECT_TAG);si.inject=v6});var dC=b(ai=>{"use strict";var _6=ai&&ai.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),w6=ai&&ai.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),I6=ai&&ai.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&_6(e,t,r);return w6(e,t),e};Object.defineProperty(ai,"__esModule",{value:!0});ai.optional=void 0;var A6=I6(yt()),S6=xn(),E6=Ji();function L6(){return(0,E6.createTaggedDecorator)(new S6.Metadata(A6.OPTIONAL_TAG,!0))}ai.optional=L6});var hC=b(ui=>{"use strict";var P6=ui&&ui.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),x6=ui&&ui.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),C6=ui&&ui.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&P6(e,t,r);return x6(e,t),e};Object.defineProperty(ui,"__esModule",{value:!0});ui.unmanaged=void 0;var D6=C6(yt()),T6=xn(),$6=Ji();function M6(){return function(t,e,r){var n=new T6.Metadata(D6.UNMANAGED_TAG,!0);(0,$6.tagParameter)(t,e,r,n)}}ui.unmanaged=M6});var mC=b(ci=>{"use strict";var R6=ci&&ci.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),k6=ci&&ci.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),O6=ci&&ci.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&R6(e,t,r);return k6(e,t),e};Object.defineProperty(ci,"__esModule",{value:!0});ci.multiInject=void 0;var N6=O6(yt()),B6=i_(),F6=(0,B6.injectBase)(N6.MULTI_INJECT_TAG);ci.multiInject=F6});var HC=b(li=>{"use strict";var U6=li&&li.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),j6=li&&li.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),W6=li&&li.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&U6(e,t,r);return j6(e,t),e};Object.defineProperty(li,"__esModule",{value:!0});li.targetName=void 0;var q6=W6(yt()),V6=xn(),G6=Ji();function X6(t){return function(e,r,n){var i=new V6.Metadata(q6.NAME_TAG,t);(0,G6.tagParameter)(e,r,n,i)}}li.targetName=X6});var o_=b($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.propertyEventDecorator=void 0;var K6=xn();function z6(t,e){return function(){return function(r,n){var i=new K6.Metadata(t,n);if(Reflect.hasOwnMetadata(t,r.constructor))throw new Error(e);Reflect.defineMetadata(t,i,r.constructor)}}}$h.propertyEventDecorator=z6});var yC=b(fi=>{"use strict";var J6=fi&&fi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Y6=fi&&fi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),gC=fi&&fi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&J6(e,t,r);return Y6(e,t),e};Object.defineProperty(fi,"__esModule",{value:!0});fi.postConstruct=void 0;var Q6=gC(ir()),Z6=gC(yt()),eK=o_(),tK=(0,eK.propertyEventDecorator)(Z6.POST_CONSTRUCT,Q6.MULTIPLE_POST_CONSTRUCT_METHODS);fi.postConstruct=tK});var vC=b(pi=>{"use strict";var rK=pi&&pi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nK=pi&&pi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),bC=pi&&pi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&rK(e,t,r);return nK(e,t),e};Object.defineProperty(pi,"__esModule",{value:!0});pi.preDestroy=void 0;var iK=bC(ir()),oK=bC(yt()),sK=o_(),aK=(0,sK.propertyEventDecorator)(oK.PRE_DESTROY,iK.MULTIPLE_PRE_DESTROY_METHODS);pi.preDestroy=aK});var _C=b(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.interfaces=void 0;var s_;s_||(s_={});Mh.interfaces=s_});var ae=b(ie=>{"use strict";var uK=ie&&ie.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cK=ie&&ie.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lK=ie&&ie.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&uK(e,t,r);return cK(e,t),e};Object.defineProperty(ie,"__esModule",{value:!0});ie.multiBindToService=ie.getServiceIdentifierAsString=ie.typeConstraint=ie.namedConstraint=ie.taggedConstraint=ie.traverseAncerstors=ie.decorate=ie.interfaces=ie.id=ie.MetadataReader=ie.preDestroy=ie.postConstruct=ie.targetName=ie.multiInject=ie.unmanaged=ie.optional=ie.LazyServiceIdentifer=ie.inject=ie.named=ie.tagged=ie.injectable=ie.createTaggedDecorator=ie.ContainerModule=ie.AsyncContainerModule=ie.TargetTypeEnum=ie.BindingTypeEnum=ie.BindingScopeEnum=ie.Container=ie.METADATA_KEY=void 0;var fK=lK(yt());ie.METADATA_KEY=fK;var pK=Qx();Object.defineProperty(ie,"Container",{enumerable:!0,get:function(){return pK.Container}});var a_=Pn();Object.defineProperty(ie,"BindingScopeEnum",{enumerable:!0,get:function(){return a_.BindingScopeEnum}});Object.defineProperty(ie,"BindingTypeEnum",{enumerable:!0,get:function(){return a_.BindingTypeEnum}});Object.defineProperty(ie,"TargetTypeEnum",{enumerable:!0,get:function(){return a_.TargetTypeEnum}});var wC=eC();Object.defineProperty(ie,"AsyncContainerModule",{enumerable:!0,get:function(){return wC.AsyncContainerModule}});Object.defineProperty(ie,"ContainerModule",{enumerable:!0,get:function(){return wC.ContainerModule}});var dK=Ji();Object.defineProperty(ie,"createTaggedDecorator",{enumerable:!0,get:function(){return dK.createTaggedDecorator}});var hK=cC();Object.defineProperty(ie,"injectable",{enumerable:!0,get:function(){return hK.injectable}});var mK=lC();Object.defineProperty(ie,"tagged",{enumerable:!0,get:function(){return mK.tagged}});var HK=fC();Object.defineProperty(ie,"named",{enumerable:!0,get:function(){return HK.named}});var gK=pC();Object.defineProperty(ie,"inject",{enumerable:!0,get:function(){return gK.inject}});var yK=Mv();Object.defineProperty(ie,"LazyServiceIdentifer",{enumerable:!0,get:function(){return yK.LazyServiceIdentifer}});var bK=dC();Object.defineProperty(ie,"optional",{enumerable:!0,get:function(){return bK.optional}});var vK=hC();Object.defineProperty(ie,"unmanaged",{enumerable:!0,get:function(){return vK.unmanaged}});var _K=mC();Object.defineProperty(ie,"multiInject",{enumerable:!0,get:function(){return _K.multiInject}});var wK=HC();Object.defineProperty(ie,"targetName",{enumerable:!0,get:function(){return wK.targetName}});var IK=yC();Object.defineProperty(ie,"postConstruct",{enumerable:!0,get:function(){return IK.postConstruct}});var AK=vC();Object.defineProperty(ie,"preDestroy",{enumerable:!0,get:function(){return AK.preDestroy}});var SK=Tv();Object.defineProperty(ie,"MetadataReader",{enumerable:!0,get:function(){return SK.MetadataReader}});var EK=Ro();Object.defineProperty(ie,"id",{enumerable:!0,get:function(){return EK.id}});var LK=_C();Object.defineProperty(ie,"interfaces",{enumerable:!0,get:function(){return LK.interfaces}});var PK=Ji();Object.defineProperty(ie,"decorate",{enumerable:!0,get:function(){return PK.decorate}});var Rh=Qv();Object.defineProperty(ie,"traverseAncerstors",{enumerable:!0,get:function(){return Rh.traverseAncerstors}});Object.defineProperty(ie,"taggedConstraint",{enumerable:!0,get:function(){return Rh.taggedConstraint}});Object.defineProperty(ie,"namedConstraint",{enumerable:!0,get:function(){return Rh.namedConstraint}});Object.defineProperty(ie,"typeConstraint",{enumerable:!0,get:function(){return Rh.typeConstraint}});var xK=wu();Object.defineProperty(ie,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return xK.getServiceIdentifierAsString}});var CK=Vv();Object.defineProperty(ie,"multiBindToService",{enumerable:!0,get:function(){return CK.multiBindToService}})});var DT=b((UHe,Cf)=>{var xT={};xT.__wbindgen_placeholder__=Cf.exports;var Rn,{TextDecoder:mJ}=require("util"),CT=new mJ("utf-8",{ignoreBOM:!0,fatal:!0});CT.decode();var xm=null;function z_(){return(xm===null||xm.buffer!==Rn.memory.buffer)&&(xm=new Uint8Array(Rn.memory.buffer)),xm}function HJ(t,e){return CT.decode(z_().subarray(t,t+e))}var X_=0;function PT(t,e){let r=e(t.length*1);return z_().set(t,r/1),X_=t.length,r}var K_=class t{static __wrap(e){let r=Object.create(t.prototype);return r.ptr=e,r}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();Rn.__wbg_hasher_free(e)}constructor(){var e=Rn.hasher_new();return t.__wrap(e)}update(e){var r=PT(e,Rn.__wbindgen_malloc),n=X_;Rn.hasher_update(this.ptr,r,n)}digest(e){try{var r=PT(e,Rn.__wbindgen_malloc),n=X_;Rn.hasher_digest(this.ptr,r,n)}finally{e.set(z_().subarray(r/1,r/1+n)),Rn.__wbindgen_free(r,n*1)}}};Cf.exports.Hasher=K_;Cf.exports.__wbindgen_throw=function(t,e){throw new Error(HJ(t,e))};var gJ=require("path").join(__dirname,"chromehash_bg.wasm"),yJ=require("fs").readFileSync(gJ),bJ=new WebAssembly.Module(yJ),vJ=new WebAssembly.Instance(bJ,xT);Rn=vJ.exports;Cf.exports.__wasm=Rn});var OT=b(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.shaHashFile=vi.hashFile=vi.shaHash=vi.hash=void 0;var MT=DT(),RT=require("fs"),TT=require("string_decoder"),kT=require("crypto"),Dm=Buffer.alloc(4*5),_J=t=>{let e=new MT.Hasher;return e.update(SJ(t)),e.digest(Dm),e.free(),Dm.toString("hex")};vi.hash=_J;var wJ=t=>{let e=(0,kT.createHash)("sha256");return e.update(EJ(t)),e.digest("hex")};vi.shaHash=wJ;var IJ=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=new MT.Hasher,i;try{i=await RT.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if($m(s))for(n.update(s.slice(2));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else if(Mm(s))for(n.update(s.slice(2).swap16());o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead).swap16());else if(Tm(s)){let a=new TT.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s.slice(3)),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}else{let a=new TT.StringDecoder("utf8");for(n.update(Buffer.from(a.write(s),"utf16le"));o.bytesRead===r.length;)o=await i.read(r,0,r.length,null),n.update(Buffer.from(a.write(r.slice(0,o.bytesRead)),"utf16le"))}return n.digest(Dm),Dm.toString("hex")}finally{n.free(),i!==void 0&&await i.close()}};vi.hashFile=IJ;var Cm={stream:!0},AJ=async(t,e=4096)=>{e%2===1&&e++;let r=Buffer.alloc(e),n=(0,kT.createHash)("sha256"),i;try{i=await RT.promises.open(t,"r");let o=await i.read(r,0,r.length,null),s=r.slice(0,o.bytesRead);if($m(s)){let a=new TextDecoder("utf-16le");for(n.update(a.decode(s.slice(2),Cm));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Cm))}else if(Mm(s)){let a=new TextDecoder("utf-16be");for(n.update(a.decode(s.slice(2),Cm));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(a.decode(r.slice(0,o.bytesRead),Cm))}else if(Tm(s))for(n.update(s.slice(3));o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));else for(n.update(s);o.bytesRead>0;)o=await i.read(r,0,r.length,null),n.update(r.slice(0,o.bytesRead));return n.digest("hex")}finally{await i?.close()}};vi.shaHashFile=AJ;var Tm=t=>t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191,$m=t=>t.length>=2&&t[0]===255&&t[1]===254,Mm=t=>t.length>=2&&t[0]===254&&t[1]===255,SJ=t=>Tm(t)?$T(t.slice(3)):$m(t)?t.slice(2):Mm(t)?t.slice(2).swap16():$T(t),EJ=t=>Tm(t)?t.slice(3):$m(t)?new TextEncoder().encode(new TextDecoder("utf-16le").decode(t.slice(2))):Mm(t)?new TextEncoder().encode(new TextDecoder("utf-16be").decode(t.slice(2))):t,$T=t=>Buffer.from(t.toString("utf8"),"utf16le")});var Vm=b(ln=>{"use strict";ln.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;ln.find=(t,e)=>t.nodes.find(r=>r.type===e);ln.exceedsLimit=(t,e,r=1,n)=>n===!1||!ln.isInteger(t)||!ln.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=n;ln.escapeNode=(t,e=0,r)=>{let n=t.nodes[e];n&&(r&&n.type===r||n.type==="open"||n.type==="close")&&n.escaped!==!0&&(n.value="\\"+n.value,n.escaped=!0)};ln.encloseBrace=t=>t.type!=="brace"||t.commas>>0+t.ranges>>0?!1:(t.invalid=!0,!0);ln.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:!(t.commas>>0+t.ranges>>0)||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;ln.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;ln.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);ln.flatten=(...t)=>{let e=[],r=n=>{for(let i=0;i<n.length;i++){let o=n[i];Array.isArray(o)?r(o,e):o!==void 0&&e.push(o)}return e};return r(t),e}});var Gm=b((kye,a$)=>{"use strict";var s$=Vm();a$.exports=(t,e={})=>{let r=(n,i={})=>{let o=e.escapeInvalid&&s$.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a="";if(n.value)return(o||s)&&s$.isOpenOrClose(n)?"\\"+n.value:n.value;if(n.value)return n.value;if(n.nodes)for(let u of n.nodes)a+=r(u);return a};return r(t)}});var c$=b((Oye,u$)=>{"use strict";u$.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var y$=b((Nye,g$)=>{"use strict";var l$=c$(),ha=(t,e,r)=>{if(l$(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(l$(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let n={relaxZeros:!0,...r};typeof n.strictZeros=="boolean"&&(n.relaxZeros=n.strictZeros===!1);let i=String(n.relaxZeros),o=String(n.shorthand),s=String(n.capture),a=String(n.wrap),u=t+":"+e+"="+i+o+s+a;if(ha.cache.hasOwnProperty(u))return ha.cache[u].result;let c=Math.min(t,e),l=Math.max(t,e);if(Math.abs(c-l)===1){let g=t+"|"+e;return n.capture?`(${g})`:n.wrap===!1?g:`(?:${g})`}let f=H$(t)||H$(e),p={min:t,max:e,a:c,b:l},m=[],h=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),c<0){let g=l<0?Math.abs(l):1;h=f$(g,Math.abs(c),p,n),c=p.a=0}return l>=0&&(m=f$(c,l,p,n)),p.negatives=h,p.positives=m,p.result=GJ(h,m,n),n.capture===!0?p.result=`(${p.result})`:n.wrap!==!1&&m.length+h.length>1&&(p.result=`(?:${p.result})`),ha.cache[u]=p,p.result};function GJ(t,e,r){let n=tw(t,e,"-",!1,r)||[],i=tw(e,t,"",!1,r)||[],o=tw(t,e,"-?",!0,r)||[];return n.concat(o).concat(i).join("|")}function XJ(t,e){let r=1,n=1,i=d$(t,r),o=new Set([e]);for(;t<=i&&i<=e;)o.add(i),r+=1,i=d$(t,r);for(i=h$(e+1,n)-1;t<i&&i<=e;)o.add(i),n+=1,i=h$(e+1,n)-1;return o=[...o],o.sort(JJ),o}function KJ(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let n=zJ(t,e),i=n.length,o="",s=0;for(let a=0;a<i;a++){let[u,c]=n[a];u===c?o+=u:u!=="0"||c!=="9"?o+=YJ(u,c,r):s++}return s&&(o+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:o,count:[s],digits:i}}function f$(t,e,r,n){let i=XJ(t,e),o=[],s=t,a;for(let u=0;u<i.length;u++){let c=i[u],l=KJ(String(s),String(c),n),f="";if(!r.isPadded&&a&&a.pattern===l.pattern){a.count.length>1&&a.count.pop(),a.count.push(l.count[0]),a.string=a.pattern+m$(a.count),s=c+1;continue}r.isPadded&&(f=QJ(c,r,n)),l.string=f+l.pattern+m$(l.count),o.push(l),s=c+1,a=l}return o}function tw(t,e,r,n,i){let o=[];for(let s of t){let{string:a}=s;!n&&!p$(e,"string",a)&&o.push(r+a),n&&p$(e,"string",a)&&o.push(r+a)}return o}function zJ(t,e){let r=[];for(let n=0;n<t.length;n++)r.push([t[n],e[n]]);return r}function JJ(t,e){return t>e?1:e>t?-1:0}function p$(t,e,r){return t.some(n=>n[e]===r)}function d$(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function h$(t,e){return t-t%Math.pow(10,e)}function m$(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function YJ(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function H$(t){return/^-?(0+)\d/.test(t)}function QJ(t,e,r){if(!e.isPadded)return t;let n=Math.abs(e.maxLen-String(t).length),i=r.relaxZeros!==!1;switch(n){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${n}}`:`0{${n}}`}}ha.cache={};ha.clearCache=()=>ha.cache={};g$.exports=ha});var iw=b((Bye,E$)=>{"use strict";var ZJ=require("util"),_$=y$(),b$=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),eY=t=>e=>t===!0?Number(e):String(e),rw=t=>typeof t=="number"||typeof t=="string"&&t!=="",$f=t=>Number.isInteger(+t),nw=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},tY=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,rY=(t,e,r)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return r===!1?String(t):t},v$=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},nY=(t,e)=>{t.negatives.sort((s,a)=>s<a?-1:s>a?1:0),t.positives.sort((s,a)=>s<a?-1:s>a?1:0);let r=e.capture?"":"?:",n="",i="",o;return t.positives.length&&(n=t.positives.join("|")),t.negatives.length&&(i=`-(${r}${t.negatives.join("|")})`),n&&i?o=`${n}|${i}`:o=n||i,e.wrap?`(${r}${o})`:o},w$=(t,e,r,n)=>{if(r)return _$(t,e,{wrap:!1,...n});let i=String.fromCharCode(t);if(t===e)return i;let o=String.fromCharCode(e);return`[${i}-${o}]`},I$=(t,e,r)=>{if(Array.isArray(t)){let n=r.wrap===!0,i=r.capture?"":"?:";return n?`(${i}${t.join("|")})`:t.join("|")}return _$(t,e,r)},A$=(...t)=>new RangeError("Invalid range arguments: "+ZJ.inspect(...t)),S$=(t,e,r)=>{if(r.strictRanges===!0)throw A$([t,e]);return[]},iY=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},oY=(t,e,r=1,n={})=>{let i=Number(t),o=Number(e);if(!Number.isInteger(i)||!Number.isInteger(o)){if(n.strictRanges===!0)throw A$([t,e]);return[]}i===0&&(i=0),o===0&&(o=0);let s=i>o,a=String(t),u=String(e),c=String(r);r=Math.max(Math.abs(r),1);let l=nw(a)||nw(u)||nw(c),f=l?Math.max(a.length,u.length,c.length):0,p=l===!1&&tY(t,e,n)===!1,m=n.transform||eY(p);if(n.toRegex&&r===1)return w$(v$(t,f),v$(e,f),!0,n);let h={negatives:[],positives:[]},g=C=>h[C<0?"negatives":"positives"].push(Math.abs(C)),y=[],_=0;for(;s?i>=o:i<=o;)n.toRegex===!0&&r>1?g(i):y.push(rY(m(i,_),f,p)),i=s?i-r:i+r,_++;return n.toRegex===!0?r>1?nY(h,n):I$(y,null,{wrap:!1,...n}):y},sY=(t,e,r=1,n={})=>{if(!$f(t)&&t.length>1||!$f(e)&&e.length>1)return S$(t,e,n);let i=n.transform||(p=>String.fromCharCode(p)),o=`${t}`.charCodeAt(0),s=`${e}`.charCodeAt(0),a=o>s,u=Math.min(o,s),c=Math.max(o,s);if(n.toRegex&&r===1)return w$(u,c,!1,n);let l=[],f=0;for(;a?o>=s:o<=s;)l.push(i(o,f)),o=a?o-r:o+r,f++;return n.toRegex===!0?I$(l,null,{wrap:!1,options:n}):l},Xm=(t,e,r,n={})=>{if(e==null&&rw(t))return[t];if(!rw(t)||!rw(e))return S$(t,e,n);if(typeof r=="function")return Xm(t,e,1,{transform:r});if(b$(r))return Xm(t,e,0,r);let i={...n};return i.capture===!0&&(i.wrap=!0),r=r||i.step||1,$f(r)?$f(t)&&$f(e)?oY(t,e,r,i):sY(t,e,Math.max(Math.abs(r),1),i):r!=null&&!b$(r)?iY(r,i):Xm(t,e,1,r)};E$.exports=Xm});var x$=b((Fye,P$)=>{"use strict";var aY=iw(),L$=Vm(),uY=(t,e={})=>{let r=(n,i={})=>{let o=L$.isInvalidBrace(i),s=n.invalid===!0&&e.escapeInvalid===!0,a=o===!0||s===!0,u=e.escapeInvalid===!0?"\\":"",c="";if(n.isOpen===!0||n.isClose===!0)return u+n.value;if(n.type==="open")return a?u+n.value:"(";if(n.type==="close")return a?u+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":a?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let l=L$.reduce(n.nodes),f=aY(...l,{...e,wrap:!1,toRegex:!0});if(f.length!==0)return l.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let l of n.nodes)c+=r(l,n);return c};return r(t)};P$.exports=uY});var T$=b((Uye,D$)=>{"use strict";var cY=iw(),C$=Gm(),ic=Vm(),ma=(t="",e="",r=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?ic.flatten(e).map(i=>`{${i}}`):e;for(let i of t)if(Array.isArray(i))for(let o of i)n.push(ma(o,e,r));else for(let o of e)r===!0&&typeof o=="string"&&(o=`{${o}}`),n.push(Array.isArray(o)?ma(i,o,r):i+o);return ic.flatten(n)},lY=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(i,o={})=>{i.queue=[];let s=o,a=o.queue;for(;s.type!=="brace"&&s.type!=="root"&&s.parent;)s=s.parent,a=s.queue;if(i.invalid||i.dollar){a.push(ma(a.pop(),C$(i,e)));return}if(i.type==="brace"&&i.invalid!==!0&&i.nodes.length===2){a.push(ma(a.pop(),["{}"]));return}if(i.nodes&&i.ranges>0){let f=ic.reduce(i.nodes);if(ic.exceedsLimit(...f,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let p=cY(...f,e);p.length===0&&(p=C$(i,e)),a.push(ma(a.pop(),p)),i.nodes=[];return}let u=ic.encloseBrace(i),c=i.queue,l=i;for(;l.type!=="brace"&&l.type!=="root"&&l.parent;)l=l.parent,c=l.queue;for(let f=0;f<i.nodes.length;f++){let p=i.nodes[f];if(p.type==="comma"&&i.type==="brace"){f===1&&c.push(""),c.push("");continue}if(p.type==="close"){a.push(ma(a.pop(),c,u));continue}if(p.value&&p.type!=="open"){c.push(ma(c.pop(),p.value));continue}p.nodes&&n(p,i)}return c};return ic.flatten(n(t))};D$.exports=lY});var M$=b((jye,$$)=>{"use strict";$$.exports={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var B$=b((Wye,N$)=>{"use strict";var fY=Gm(),{MAX_LENGTH:R$,CHAR_BACKSLASH:ow,CHAR_BACKTICK:pY,CHAR_COMMA:dY,CHAR_DOT:hY,CHAR_LEFT_PARENTHESES:mY,CHAR_RIGHT_PARENTHESES:HY,CHAR_LEFT_CURLY_BRACE:gY,CHAR_RIGHT_CURLY_BRACE:yY,CHAR_LEFT_SQUARE_BRACKET:k$,CHAR_RIGHT_SQUARE_BRACKET:O$,CHAR_DOUBLE_QUOTE:bY,CHAR_SINGLE_QUOTE:vY,CHAR_NO_BREAK_SPACE:_Y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:wY}=M$(),IY=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},n=typeof r.maxLength=="number"?Math.min(R$,r.maxLength):R$;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let i={type:"root",input:t,nodes:[]},o=[i],s=i,a=i,u=0,c=t.length,l=0,f=0,p,m={},h=()=>t[l++],g=y=>{if(y.type==="text"&&a.type==="dot"&&(a.type="text"),a&&a.type==="text"&&y.type==="text"){a.value+=y.value;return}return s.nodes.push(y),y.parent=s,y.prev=a,a=y,y};for(g({type:"bos"});l<c;)if(s=o[o.length-1],p=h(),!(p===wY||p===_Y)){if(p===ow){g({type:"text",value:(e.keepEscaping?p:"")+h()});continue}if(p===O$){g({type:"text",value:"\\"+p});continue}if(p===k$){u++;let y=!0,_;for(;l<c&&(_=h());){if(p+=_,_===k$){u++;continue}if(_===ow){p+=h();continue}if(_===O$&&(u--,u===0))break}g({type:"text",value:p});continue}if(p===mY){s=g({type:"paren",nodes:[]}),o.push(s),g({type:"text",value:p});continue}if(p===HY){if(s.type!=="paren"){g({type:"text",value:p});continue}s=o.pop(),g({type:"text",value:p}),s=o[o.length-1];continue}if(p===bY||p===vY||p===pY){let y=p,_;for(e.keepQuotes!==!0&&(p="");l<c&&(_=h());){if(_===ow){p+=_+h();continue}if(_===y){e.keepQuotes===!0&&(p+=_);break}p+=_}g({type:"text",value:p});continue}if(p===gY){f++;let _={type:"brace",open:!0,close:!1,dollar:a.value&&a.value.slice(-1)==="$"||s.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};s=g(_),o.push(s),g({type:"open",value:p});continue}if(p===yY){if(s.type!=="brace"){g({type:"text",value:p});continue}let y="close";s=o.pop(),s.close=!0,g({type:y,value:p}),f--,s=o[o.length-1];continue}if(p===dY&&f>0){if(s.ranges>0){s.ranges=0;let y=s.nodes.shift();s.nodes=[y,{type:"text",value:fY(s)}]}g({type:"comma",value:p}),s.commas++;continue}if(p===hY&&f>0&&s.commas===0){let y=s.nodes;if(f===0||y.length===0){g({type:"text",value:p});continue}if(a.type==="dot"){if(s.range=[],a.value+=p,a.type="range",s.nodes.length!==3&&s.nodes.length!==5){s.invalid=!0,s.ranges=0,a.type="text";continue}s.ranges++,s.args=[];continue}if(a.type==="range"){y.pop();let _=y[y.length-1];_.value+=a.value+p,a=_,s.ranges--;continue}g({type:"dot",value:p});continue}g({type:"text",value:p})}do if(s=o.pop(),s.type!=="root"){s.nodes.forEach(C=>{C.nodes||(C.type==="open"&&(C.isOpen=!0),C.type==="close"&&(C.isClose=!0),C.nodes||(C.type="text"),C.invalid=!0)});let y=o[o.length-1],_=y.nodes.indexOf(s);y.nodes.splice(_,1,...s.nodes)}while(o.length>0);return g({type:"eos"}),i};N$.exports=IY});var j$=b((qye,U$)=>{"use strict";var F$=Gm(),AY=x$(),SY=T$(),EY=B$(),Fr=(t,e={})=>{let r=[];if(Array.isArray(t))for(let n of t){let i=Fr.create(n,e);Array.isArray(i)?r.push(...i):r.push(i)}else r=[].concat(Fr.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};Fr.parse=(t,e={})=>EY(t,e);Fr.stringify=(t,e={})=>F$(typeof t=="string"?Fr.parse(t,e):t,e);Fr.compile=(t,e={})=>(typeof t=="string"&&(t=Fr.parse(t,e)),AY(t,e));Fr.expand=(t,e={})=>{typeof t=="string"&&(t=Fr.parse(t,e));let r=SY(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};Fr.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Fr.compile(t,e):Fr.expand(t,e);U$.exports=Fr});var Mf=b((Vye,X$)=>{"use strict";var LY=require("path"),wi="\\\\/",W$=`[^${wi}]`,oo="\\.",PY="\\+",xY="\\?",Km="\\/",CY="(?=.)",q$="[^/]",sw=`(?:${Km}|$)`,V$=`(?:^|${Km})`,aw=`${oo}{1,2}${sw}`,DY=`(?!${oo})`,TY=`(?!${V$}${aw})`,$Y=`(?!${oo}{0,1}${sw})`,MY=`(?!${aw})`,RY=`[^.${Km}]`,kY=`${q$}*?`,G$={DOT_LITERAL:oo,PLUS_LITERAL:PY,QMARK_LITERAL:xY,SLASH_LITERAL:Km,ONE_CHAR:CY,QMARK:q$,END_ANCHOR:sw,DOTS_SLASH:aw,NO_DOT:DY,NO_DOTS:TY,NO_DOT_SLASH:$Y,NO_DOTS_SLASH:MY,QMARK_NO_DOT:RY,STAR:kY,START_ANCHOR:V$},OY={...G$,SLASH_LITERAL:`[${wi}]`,QMARK:W$,STAR:`${W$}*?`,DOTS_SLASH:`${oo}{1,2}(?:[${wi}]|$)`,NO_DOT:`(?!${oo})`,NO_DOTS:`(?!(?:^|[${wi}])${oo}{1,2}(?:[${wi}]|$))`,NO_DOT_SLASH:`(?!${oo}{0,1}(?:[${wi}]|$))`,NO_DOTS_SLASH:`(?!${oo}{1,2}(?:[${wi}]|$))`,QMARK_NO_DOT:`[^.${wi}]`,START_ANCHOR:`(?:^|[${wi}])`,END_ANCHOR:`(?:[${wi}]|$)`},NY={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};X$.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:NY,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:LY.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?OY:G$}}});var Rf=b(Cr=>{"use strict";var BY=require("path"),FY=process.platform==="win32",{REGEX_BACKSLASH:UY,REGEX_REMOVE_BACKSLASH:jY,REGEX_SPECIAL_CHARS:WY,REGEX_SPECIAL_CHARS_GLOBAL:qY}=Mf();Cr.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Cr.hasRegexChars=t=>WY.test(t);Cr.isRegexChar=t=>t.length===1&&Cr.hasRegexChars(t);Cr.escapeRegex=t=>t.replace(qY,"\\$1");Cr.toPosixSlashes=t=>t.replace(UY,"/");Cr.removeBackslashes=t=>t.replace(jY,e=>e==="\\"?"":e);Cr.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};Cr.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:FY===!0||BY.sep==="\\";Cr.escapeLast=(t,e,r)=>{let n=t.lastIndexOf(e,r);return n===-1?t:t[n-1]==="\\"?Cr.escapeLast(t,e,n-1):`${t.slice(0,n)}\\${t.slice(n)}`};Cr.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Cr.wrapOutput=(t,e={},r={})=>{let n=r.contains?"":"^",i=r.contains?"":"$",o=`${n}(?:${t})${i}`;return e.negated===!0&&(o=`(?:^(?!${o}).*$)`),o}});var tM=b((Xye,eM)=>{"use strict";var K$=Rf(),{CHAR_ASTERISK:uw,CHAR_AT:VY,CHAR_BACKWARD_SLASH:kf,CHAR_COMMA:GY,CHAR_DOT:cw,CHAR_EXCLAMATION_MARK:lw,CHAR_FORWARD_SLASH:Z$,CHAR_LEFT_CURLY_BRACE:fw,CHAR_LEFT_PARENTHESES:pw,CHAR_LEFT_SQUARE_BRACKET:XY,CHAR_PLUS:KY,CHAR_QUESTION_MARK:z$,CHAR_RIGHT_CURLY_BRACE:zY,CHAR_RIGHT_PARENTHESES:J$,CHAR_RIGHT_SQUARE_BRACKET:JY}=Mf(),Y$=t=>t===Z$||t===kf,Q$=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},YY=(t,e)=>{let r=e||{},n=t.length-1,i=r.parts===!0||r.scanToEnd===!0,o=[],s=[],a=[],u=t,c=-1,l=0,f=0,p=!1,m=!1,h=!1,g=!1,y=!1,_=!1,C=!1,N=!1,D=!1,j=!1,X=0,G,U,k={value:"",depth:0,isGlob:!1},M=()=>c>=n,E=()=>u.charCodeAt(c+1),q=()=>(G=U,u.charCodeAt(++c));for(;c<n;){U=q();let oe;if(U===kf){C=k.backslashes=!0,U=q(),U===fw&&(_=!0);continue}if(_===!0||U===fw){for(X++;M()!==!0&&(U=q());){if(U===kf){C=k.backslashes=!0,q();continue}if(U===fw){X++;continue}if(_!==!0&&U===cw&&(U=q())===cw){if(p=k.isBrace=!0,h=k.isGlob=!0,j=!0,i===!0)continue;break}if(_!==!0&&U===GY){if(p=k.isBrace=!0,h=k.isGlob=!0,j=!0,i===!0)continue;break}if(U===zY&&(X--,X===0)){_=!1,p=k.isBrace=!0,j=!0;break}}if(i===!0)continue;break}if(U===Z$){if(o.push(c),s.push(k),k={value:"",depth:0,isGlob:!1},j===!0)continue;if(G===cw&&c===l+1){l+=2;continue}f=c+1;continue}if(r.noext!==!0&&(U===KY||U===VY||U===uw||U===z$||U===lw)===!0&&E()===pw){if(h=k.isGlob=!0,g=k.isExtglob=!0,j=!0,U===lw&&c===l&&(D=!0),i===!0){for(;M()!==!0&&(U=q());){if(U===kf){C=k.backslashes=!0,U=q();continue}if(U===J$){h=k.isGlob=!0,j=!0;break}}continue}break}if(U===uw){if(G===uw&&(y=k.isGlobstar=!0),h=k.isGlob=!0,j=!0,i===!0)continue;break}if(U===z$){if(h=k.isGlob=!0,j=!0,i===!0)continue;break}if(U===XY){for(;M()!==!0&&(oe=q());){if(oe===kf){C=k.backslashes=!0,q();continue}if(oe===JY){m=k.isBracket=!0,h=k.isGlob=!0,j=!0;break}}if(i===!0)continue;break}if(r.nonegate!==!0&&U===lw&&c===l){N=k.negated=!0,l++;continue}if(r.noparen!==!0&&U===pw){if(h=k.isGlob=!0,i===!0){for(;M()!==!0&&(U=q());){if(U===pw){C=k.backslashes=!0,U=q();continue}if(U===J$){j=!0;break}}continue}break}if(h===!0){if(j=!0,i===!0)continue;break}}r.noext===!0&&(g=!1,h=!1);let F=u,V="",S="";l>0&&(V=u.slice(0,l),u=u.slice(l),f-=l),F&&h===!0&&f>0?(F=u.slice(0,f),S=u.slice(f)):h===!0?(F="",S=u):F=u,F&&F!==""&&F!=="/"&&F!==u&&Y$(F.charCodeAt(F.length-1))&&(F=F.slice(0,-1)),r.unescape===!0&&(S&&(S=K$.removeBackslashes(S)),F&&C===!0&&(F=K$.removeBackslashes(F)));let P={prefix:V,input:t,start:l,base:F,glob:S,isBrace:p,isBracket:m,isGlob:h,isExtglob:g,isGlobstar:y,negated:N,negatedExtglob:D};if(r.tokens===!0&&(P.maxDepth=0,Y$(U)||s.push(k),P.tokens=s),r.parts===!0||r.tokens===!0){let oe;for(let te=0;te<o.length;te++){let fe=oe?oe+1:l,ue=o[te],ee=t.slice(fe,ue);r.tokens&&(te===0&&l!==0?(s[te].isPrefix=!0,s[te].value=V):s[te].value=ee,Q$(s[te]),P.maxDepth+=s[te].depth),(te!==0||ee!=="")&&a.push(ee),oe=ue}if(oe&&oe+1<t.length){let te=t.slice(oe+1);a.push(te),r.tokens&&(s[s.length-1].value=te,Q$(s[s.length-1]),P.maxDepth+=s[s.length-1].depth)}P.slashes=o,P.parts=a}return P};eM.exports=YY});var iM=b((Kye,nM)=>{"use strict";var zm=Mf(),Ur=Rf(),{MAX_LENGTH:Jm,POSIX_REGEX_SOURCE:QY,REGEX_NON_SPECIAL_CHARS:ZY,REGEX_SPECIAL_CHARS_BACKREF:e7,REPLACEMENTS:rM}=zm,t7=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(i=>Ur.escapeRegex(i)).join("..")}return r},oc=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,dw=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=rM[t]||t;let r={...e},n=typeof r.maxLength=="number"?Math.min(Jm,r.maxLength):Jm,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);let o={type:"bos",value:"",output:r.prepend||""},s=[o],a=r.capture?"":"?:",u=Ur.isWindows(e),c=zm.globChars(u),l=zm.extglobChars(c),{DOT_LITERAL:f,PLUS_LITERAL:p,SLASH_LITERAL:m,ONE_CHAR:h,DOTS_SLASH:g,NO_DOT:y,NO_DOT_SLASH:_,NO_DOTS_SLASH:C,QMARK:N,QMARK_NO_DOT:D,STAR:j,START_ANCHOR:X}=c,G=J=>`(${a}(?:(?!${X}${J.dot?g:f}).)*?)`,U=r.dot?"":y,k=r.dot?N:D,M=r.bash===!0?G(r):j;r.capture&&(M=`(${M})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let E={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:s};t=Ur.removePrefix(t,E),i=t.length;let q=[],F=[],V=[],S=o,P,oe=()=>E.index===i-1,te=E.peek=(J=1)=>t[E.index+J],fe=E.advance=()=>t[++E.index]||"",ue=()=>t.slice(E.index+1),ee=(J="",Ie=0)=>{E.consumed+=J,E.index+=Ie},pe=J=>{E.output+=J.output!=null?J.output:J.value,ee(J.value)},be=()=>{let J=1;for(;te()==="!"&&(te(2)!=="("||te(3)==="?");)fe(),E.start++,J++;return J%2===0?!1:(E.negated=!0,E.start++,!0)},ge=J=>{E[J]++,V.push(J)},qt=J=>{E[J]--,V.pop()},me=J=>{if(S.type==="globstar"){let Ie=E.braces>0&&(J.type==="comma"||J.type==="brace"),z=J.extglob===!0||q.length&&(J.type==="pipe"||J.type==="paren");J.type!=="slash"&&J.type!=="paren"&&!Ie&&!z&&(E.output=E.output.slice(0,-S.output.length),S.type="star",S.value="*",S.output=M,E.output+=S.output)}if(q.length&&J.type!=="paren"&&(q[q.length-1].inner+=J.value),(J.value||J.output)&&pe(J),S&&S.type==="text"&&J.type==="text"){S.output=(S.output||S.value)+J.value,S.value+=J.value;return}J.prev=S,s.push(J),S=J},mr=(J,Ie)=>{let z={...l[Ie],conditions:1,inner:""};z.prev=S,z.parens=E.parens,z.output=E.output;let he=(r.capture?"(":"")+z.open;ge("parens"),me({type:J,value:Ie,output:E.output?"":h}),me({type:"paren",extglob:!0,value:fe(),output:he}),q.push(z)},Rr=J=>{let Ie=J.close+(r.capture?")":""),z;if(J.type==="negate"){let he=M;if(J.inner&&J.inner.length>1&&J.inner.includes("/")&&(he=G(r)),(he!==M||oe()||/^\)+$/.test(ue()))&&(Ie=J.close=`)$))${he}`),J.inner.includes("*")&&(z=ue())&&/^\.[^\\/.]+$/.test(z)){let Te=dw(z,{...e,fastpaths:!1}).output;Ie=J.close=`)${Te})${he})`}J.prev.type==="bos"&&(E.negatedExtglob=!0)}me({type:"paren",extglob:!0,value:P,output:Ie}),qt("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let J=!1,Ie=t.replace(e7,(z,he,Te,Ze,ot,To)=>Ze==="\\"?(J=!0,z):Ze==="?"?he?he+Ze+(ot?N.repeat(ot.length):""):To===0?k+(ot?N.repeat(ot.length):""):N.repeat(Te.length):Ze==="."?f.repeat(Te.length):Ze==="*"?he?he+Ze+(ot?M:""):M:he?z:`\\${z}`);return J===!0&&(r.unescape===!0?Ie=Ie.replace(/\\/g,""):Ie=Ie.replace(/\\+/g,z=>z.length%2===0?"\\\\":z?"\\":"")),Ie===t&&r.contains===!0?(E.output=t,E):(E.output=Ur.wrapOutput(Ie,E,e),E)}for(;!oe();){if(P=fe(),P==="\0")continue;if(P==="\\"){let z=te();if(z==="/"&&r.bash!==!0||z==="."||z===";")continue;if(!z){P+="\\",me({type:"text",value:P});continue}let he=/^\\+/.exec(ue()),Te=0;if(he&&he[0].length>2&&(Te=he[0].length,E.index+=Te,Te%2!==0&&(P+="\\")),r.unescape===!0?P=fe():P+=fe(),E.brackets===0){me({type:"text",value:P});continue}}if(E.brackets>0&&(P!=="]"||S.value==="["||S.value==="[^")){if(r.posix!==!1&&P===":"){let z=S.value.slice(1);if(z.includes("[")&&(S.posix=!0,z.includes(":"))){let he=S.value.lastIndexOf("["),Te=S.value.slice(0,he),Ze=S.value.slice(he+2),ot=QY[Ze];if(ot){S.value=Te+ot,E.backtrack=!0,fe(),!o.output&&s.indexOf(S)===1&&(o.output=h);continue}}}(P==="["&&te()!==":"||P==="-"&&te()==="]")&&(P=`\\${P}`),P==="]"&&(S.value==="["||S.value==="[^")&&(P=`\\${P}`),r.posix===!0&&P==="!"&&S.value==="["&&(P="^"),S.value+=P,pe({value:P});continue}if(E.quotes===1&&P!=='"'){P=Ur.escapeRegex(P),S.value+=P,pe({value:P});continue}if(P==='"'){E.quotes=E.quotes===1?0:1,r.keepQuotes===!0&&me({type:"text",value:P});continue}if(P==="("){ge("parens"),me({type:"paren",value:P});continue}if(P===")"){if(E.parens===0&&r.strictBrackets===!0)throw new SyntaxError(oc("opening","("));let z=q[q.length-1];if(z&&E.parens===z.parens+1){Rr(q.pop());continue}me({type:"paren",value:P,output:E.parens?")":"\\)"}),qt("parens");continue}if(P==="["){if(r.nobracket===!0||!ue().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(oc("closing","]"));P=`\\${P}`}else ge("brackets");me({type:"bracket",value:P});continue}if(P==="]"){if(r.nobracket===!0||S&&S.type==="bracket"&&S.value.length===1){me({type:"text",value:P,output:`\\${P}`});continue}if(E.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(oc("opening","["));me({type:"text",value:P,output:`\\${P}`});continue}qt("brackets");let z=S.value.slice(1);if(S.posix!==!0&&z[0]==="^"&&!z.includes("/")&&(P=`/${P}`),S.value+=P,pe({value:P}),r.literalBrackets===!1||Ur.hasRegexChars(z))continue;let he=Ur.escapeRegex(S.value);if(E.output=E.output.slice(0,-S.value.length),r.literalBrackets===!0){E.output+=he,S.value=he;continue}S.value=`(${a}${he}|${S.value})`,E.output+=S.value;continue}if(P==="{"&&r.nobrace!==!0){ge("braces");let z={type:"brace",value:P,output:"(",outputIndex:E.output.length,tokensIndex:E.tokens.length};F.push(z),me(z);continue}if(P==="}"){let z=F[F.length-1];if(r.nobrace===!0||!z){me({type:"text",value:P,output:P});continue}let he=")";if(z.dots===!0){let Te=s.slice(),Ze=[];for(let ot=Te.length-1;ot>=0&&(s.pop(),Te[ot].type!=="brace");ot--)Te[ot].type!=="dots"&&Ze.unshift(Te[ot].value);he=t7(Ze,r),E.backtrack=!0}if(z.comma!==!0&&z.dots!==!0){let Te=E.output.slice(0,z.outputIndex),Ze=E.tokens.slice(z.tokensIndex);z.value=z.output="\\{",P=he="\\}",E.output=Te;for(let ot of Ze)E.output+=ot.output||ot.value}me({type:"brace",value:P,output:he}),qt("braces"),F.pop();continue}if(P==="|"){q.length>0&&q[q.length-1].conditions++,me({type:"text",value:P});continue}if(P===","){let z=P,he=F[F.length-1];he&&V[V.length-1]==="braces"&&(he.comma=!0,z="|"),me({type:"comma",value:P,output:z});continue}if(P==="/"){if(S.type==="dot"&&E.index===E.start+1){E.start=E.index+1,E.consumed="",E.output="",s.pop(),S=o;continue}me({type:"slash",value:P,output:m});continue}if(P==="."){if(E.braces>0&&S.type==="dot"){S.value==="."&&(S.output=f);let z=F[F.length-1];S.type="dots",S.output+=P,S.value+=P,z.dots=!0;continue}if(E.braces+E.parens===0&&S.type!=="bos"&&S.type!=="slash"){me({type:"text",value:P,output:f});continue}me({type:"dot",value:P,output:f});continue}if(P==="?"){if(!(S&&S.value==="(")&&r.noextglob!==!0&&te()==="("&&te(2)!=="?"){mr("qmark",P);continue}if(S&&S.type==="paren"){let he=te(),Te=P;if(he==="<"&&!Ur.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(S.value==="("&&!/[!=<:]/.test(he)||he==="<"&&!/<([!=]|\w+>)/.test(ue()))&&(Te=`\\${P}`),me({type:"text",value:P,output:Te});continue}if(r.dot!==!0&&(S.type==="slash"||S.type==="bos")){me({type:"qmark",value:P,output:D});continue}me({type:"qmark",value:P,output:N});continue}if(P==="!"){if(r.noextglob!==!0&&te()==="("&&(te(2)!=="?"||!/[!=<:]/.test(te(3)))){mr("negate",P);continue}if(r.nonegate!==!0&&E.index===0){be();continue}}if(P==="+"){if(r.noextglob!==!0&&te()==="("&&te(2)!=="?"){mr("plus",P);continue}if(S&&S.value==="("||r.regex===!1){me({type:"plus",value:P,output:p});continue}if(S&&(S.type==="bracket"||S.type==="paren"||S.type==="brace")||E.parens>0){me({type:"plus",value:P});continue}me({type:"plus",value:p});continue}if(P==="@"){if(r.noextglob!==!0&&te()==="("&&te(2)!=="?"){me({type:"at",extglob:!0,value:P,output:""});continue}me({type:"text",value:P});continue}if(P!=="*"){(P==="$"||P==="^")&&(P=`\\${P}`);let z=ZY.exec(ue());z&&(P+=z[0],E.index+=z[0].length),me({type:"text",value:P});continue}if(S&&(S.type==="globstar"||S.star===!0)){S.type="star",S.star=!0,S.value+=P,S.output=M,E.backtrack=!0,E.globstar=!0,ee(P);continue}let J=ue();if(r.noextglob!==!0&&/^\([^?]/.test(J)){mr("star",P);continue}if(S.type==="star"){if(r.noglobstar===!0){ee(P);continue}let z=S.prev,he=z.prev,Te=z.type==="slash"||z.type==="bos",Ze=he&&(he.type==="star"||he.type==="globstar");if(r.bash===!0&&(!Te||J[0]&&J[0]!=="/")){me({type:"star",value:P,output:""});continue}let ot=E.braces>0&&(z.type==="comma"||z.type==="brace"),To=q.length&&(z.type==="pipe"||z.type==="paren");if(!Te&&z.type!=="paren"&&!ot&&!To){me({type:"star",value:P,output:""});continue}for(;J.slice(0,3)==="/**";){let $o=t[E.index+4];if($o&&$o!=="/")break;J=J.slice(3),ee("/**",3)}if(z.type==="bos"&&oe()){S.type="globstar",S.value+=P,S.output=G(r),E.output=S.output,E.globstar=!0,ee(P);continue}if(z.type==="slash"&&z.prev.type!=="bos"&&!Ze&&oe()){E.output=E.output.slice(0,-(z.output+S.output).length),z.output=`(?:${z.output}`,S.type="globstar",S.output=G(r)+(r.strictSlashes?")":"|$)"),S.value+=P,E.globstar=!0,E.output+=z.output+S.output,ee(P);continue}if(z.type==="slash"&&z.prev.type!=="bos"&&J[0]==="/"){let $o=J[1]!==void 0?"|$":"";E.output=E.output.slice(0,-(z.output+S.output).length),z.output=`(?:${z.output}`,S.type="globstar",S.output=`${G(r)}${m}|${m}${$o})`,S.value+=P,E.output+=z.output+S.output,E.globstar=!0,ee(P+fe()),me({type:"slash",value:"/",output:""});continue}if(z.type==="bos"&&J[0]==="/"){S.type="globstar",S.value+=P,S.output=`(?:^|${m}|${G(r)}${m})`,E.output=S.output,E.globstar=!0,ee(P+fe()),me({type:"slash",value:"/",output:""});continue}E.output=E.output.slice(0,-S.output.length),S.type="globstar",S.output=G(r),S.value+=P,E.output+=S.output,E.globstar=!0,ee(P);continue}let Ie={type:"star",value:P,output:M};if(r.bash===!0){Ie.output=".*?",(S.type==="bos"||S.type==="slash")&&(Ie.output=U+Ie.output),me(Ie);continue}if(S&&(S.type==="bracket"||S.type==="paren")&&r.regex===!0){Ie.output=P,me(Ie);continue}(E.index===E.start||S.type==="slash"||S.type==="dot")&&(S.type==="dot"?(E.output+=_,S.output+=_):r.dot===!0?(E.output+=C,S.output+=C):(E.output+=U,S.output+=U),te()!=="*"&&(E.output+=h,S.output+=h)),me(Ie)}for(;E.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(oc("closing","]"));E.output=Ur.escapeLast(E.output,"["),qt("brackets")}for(;E.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(oc("closing",")"));E.output=Ur.escapeLast(E.output,"("),qt("parens")}for(;E.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(oc("closing","}"));E.output=Ur.escapeLast(E.output,"{"),qt("braces")}if(r.strictSlashes!==!0&&(S.type==="star"||S.type==="bracket")&&me({type:"maybe_slash",value:"",output:`${m}?`}),E.backtrack===!0){E.output="";for(let J of E.tokens)E.output+=J.output!=null?J.output:J.value,J.suffix&&(E.output+=J.suffix)}return E};dw.fastpaths=(t,e)=>{let r={...e},n=typeof r.maxLength=="number"?Math.min(Jm,r.maxLength):Jm,i=t.length;if(i>n)throw new SyntaxError(`Input length: ${i}, exceeds maximum allowed length: ${n}`);t=rM[t]||t;let o=Ur.isWindows(e),{DOT_LITERAL:s,SLASH_LITERAL:a,ONE_CHAR:u,DOTS_SLASH:c,NO_DOT:l,NO_DOTS:f,NO_DOTS_SLASH:p,STAR:m,START_ANCHOR:h}=zm.globChars(o),g=r.dot?f:l,y=r.dot?p:l,_=r.capture?"":"?:",C={negated:!1,prefix:""},N=r.bash===!0?".*?":m;r.capture&&(N=`(${N})`);let D=U=>U.noglobstar===!0?N:`(${_}(?:(?!${h}${U.dot?c:s}).)*?)`,j=U=>{switch(U){case"*":return`${g}${u}${N}`;case".*":return`${s}${u}${N}`;case"*.*":return`${g}${N}${s}${u}${N}`;case"*/*":return`${g}${N}${a}${u}${y}${N}`;case"**":return g+D(r);case"**/*":return`(?:${g}${D(r)}${a})?${y}${u}${N}`;case"**/*.*":return`(?:${g}${D(r)}${a})?${y}${N}${s}${u}${N}`;case"**/.*":return`(?:${g}${D(r)}${a})?${s}${u}${N}`;default:{let k=/^(.*?)\.(\w+)$/.exec(U);if(!k)return;let M=j(k[1]);return M?M+s+k[2]:void 0}}},X=Ur.removePrefix(t,C),G=j(X);return G&&r.strictSlashes!==!0&&(G+=`${a}?`),G};nM.exports=dw});var sM=b((zye,oM)=>{"use strict";var r7=require("path"),n7=tM(),hw=iM(),mw=Rf(),i7=Mf(),o7=t=>t&&typeof t=="object"&&!Array.isArray(t),ht=(t,e,r=!1)=>{if(Array.isArray(t)){let l=t.map(p=>ht(p,e,r));return p=>{for(let m of l){let h=m(p);if(h)return h}return!1}}let n=o7(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!n)throw new TypeError("Expected pattern to be a non-empty string");let i=e||{},o=mw.isWindows(e),s=n?ht.compileRe(t,e):ht.makeRe(t,e,!1,!0),a=s.state;delete s.state;let u=()=>!1;if(i.ignore){let l={...e,ignore:null,onMatch:null,onResult:null};u=ht(i.ignore,l,r)}let c=(l,f=!1)=>{let{isMatch:p,match:m,output:h}=ht.test(l,s,e,{glob:t,posix:o}),g={glob:t,state:a,regex:s,posix:o,input:l,output:h,match:m,isMatch:p};return typeof i.onResult=="function"&&i.onResult(g),p===!1?(g.isMatch=!1,f?g:!1):u(l)?(typeof i.onIgnore=="function"&&i.onIgnore(g),g.isMatch=!1,f?g:!1):(typeof i.onMatch=="function"&&i.onMatch(g),f?g:!0)};return r&&(c.state=a),c};ht.test=(t,e,r,{glob:n,posix:i}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let o=r||{},s=o.format||(i?mw.toPosixSlashes:null),a=t===n,u=a&&s?s(t):t;return a===!1&&(u=s?s(t):t,a=u===n),(a===!1||o.capture===!0)&&(o.matchBase===!0||o.basename===!0?a=ht.matchBase(t,e,r,i):a=e.exec(u)),{isMatch:!!a,match:a,output:u}};ht.matchBase=(t,e,r,n=mw.isWindows(r))=>(e instanceof RegExp?e:ht.makeRe(e,r)).test(r7.basename(t));ht.isMatch=(t,e,r)=>ht(e,r)(t);ht.parse=(t,e)=>Array.isArray(t)?t.map(r=>ht.parse(r,e)):hw(t,{...e,fastpaths:!1});ht.scan=(t,e)=>n7(t,e);ht.compileRe=(t,e,r=!1,n=!1)=>{if(r===!0)return t.output;let i=e||{},o=i.contains?"":"^",s=i.contains?"":"$",a=`${o}(?:${t.output})${s}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);let u=ht.toRegex(a,e);return n===!0&&(u.state=t),u};ht.makeRe=(t,e={},r=!1,n=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let i={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(i.output=hw.fastpaths(t,e)),i.output||(i=hw(t,e)),ht.compileRe(i,e,r,n)};ht.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};ht.constants=i7;oM.exports=ht});var uM=b((Jye,aM)=>{"use strict";aM.exports=sM()});var Of=b((Yye,pM)=>{"use strict";var lM=require("util"),fM=j$(),Ii=uM(),Hw=Rf(),cM=t=>t===""||t==="./",nt=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let n=new Set,i=new Set,o=new Set,s=0,a=l=>{o.add(l.output),r&&r.onResult&&r.onResult(l)};for(let l=0;l<e.length;l++){let f=Ii(String(e[l]),{...r,onResult:a},!0),p=f.state.negated||f.state.negatedExtglob;p&&s++;for(let m of t){let h=f(m,!0);(p?!h.isMatch:h.isMatch)&&(p?n.add(h.output):(n.delete(h.output),i.add(h.output)))}}let c=(s===e.length?[...o]:[...i]).filter(l=>!n.has(l));if(r&&c.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(l=>l.replace(/\\/g,"")):e}return c};nt.match=nt;nt.matcher=(t,e)=>Ii(t,e);nt.isMatch=(t,e,r)=>Ii(e,r)(t);nt.any=nt.isMatch;nt.not=(t,e,r={})=>{e=[].concat(e).map(String);let n=new Set,i=[],o=a=>{r.onResult&&r.onResult(a),i.push(a.output)},s=new Set(nt(t,e,{...r,onResult:o}));for(let a of i)s.has(a)||n.add(a);return[...n]};nt.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${lM.inspect(t)}"`);if(Array.isArray(e))return e.some(n=>nt.contains(t,n,r));if(typeof e=="string"){if(cM(t)||cM(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return nt.isMatch(t,e,{...r,contains:!0})};nt.matchKeys=(t,e,r)=>{if(!Hw.isObject(t))throw new TypeError("Expected the first argument to be an object");let n=nt(Object.keys(t),e,r),i={};for(let o of n)i[o]=t[o];return i};nt.some=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=Ii(String(i),r);if(n.some(s=>o(s)))return!0}return!1};nt.every=(t,e,r)=>{let n=[].concat(t);for(let i of[].concat(e)){let o=Ii(String(i),r);if(!n.every(s=>o(s)))return!1}return!0};nt.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${lM.inspect(t)}"`);return[].concat(e).every(n=>Ii(n,r)(t))};nt.capture=(t,e,r)=>{let n=Hw.isWindows(r),o=Ii.makeRe(String(t),{...r,capture:!0}).exec(n?Hw.toPosixSlashes(e):e);if(o)return o.slice(1).map(s=>s===void 0?"":s)};nt.makeRe=(...t)=>Ii.makeRe(...t);nt.scan=(...t)=>Ii.scan(...t);nt.parse=(t,e)=>{let r=[];for(let n of[].concat(t||[]))for(let i of fM(String(n),e))r.push(Ii.parse(i,e));return r};nt.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!/\{.*\}/.test(t)?[t]:fM(t,e)};nt.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return nt.braces(t,{...e,expand:!0})};pM.exports=nt});var HM=b(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});function c7(t){let e=[],r=new Array(4),n=[0,192,224,240],i=[127,63,63,63],o=[0,128,128,128];for(let s of t){let a=r,u=s.codePointAt(0),c=0-(-(u&4294967168)>>31)-(-(u&4294965248)>>31)-(-(u&4294901760)>>31),l=i[c],f=o[c];a[3]=f|u&l,a[2]=f|u>>>6&l,a[1]=f|u>>>12&l,a[0]=f|u>>>18&l;let p=3-c;a[p]|=n[c],Array.prototype.push.apply(e,a.slice(p))}return new Uint8Array(e)}Jo.toUtf8_1=c7;function l7(t){let e=[];for(let r of t){let n=r.codePointAt(0);n<128?e.push(n):n<2048?e.push(192|n>>6&31,128|n&63):n<65536?e.push(224|n>>12&15,128|n>>6&63,128|n&63):e.push(240|n>>18&7,128|n>>12&63,128|n>>6&63,128|n&63)}return new Uint8Array(e)}Jo.toUtf8_2=l7;function mM(t){let e=[];for(let r=0,n=t.length;r<n;++r){let i=t.charCodeAt(r);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{let o=65536+((i&1023)<<10|t.charCodeAt(++r)&1023);e.push(240|o>>18&7,128|o>>12&63,128|o>>6&63,128|o&63)}}return new Uint8Array(e)}Jo.toUtf8_3=mM;Jo.toUtf8=mM;Jo.default=Jo.toUtf8});var bM=b(gw=>{"use strict";Object.defineProperty(gw,"__esModule",{value:!0});var f7=HM(),uc=2654435761,cc=2246822519,Qm=3266489917,gM=668265263,yM=374761393;function p7(t,e=0){t=typeof t=="string"?f7.default(t):t;let r=t,n=e+yM&4294967295,i=0;if(r.length>=16){let s=[e+uc+cc&4294967295,e+cc&4294967295,e+0&4294967295,e-uc&4294967295],a=t,u=a.length-16,c=0;for(i=0;(i&4294967280)<=u;i+=4){let l=i,f=a[l+0]+(a[l+1]<<8),p=a[l+2]+(a[l+3]<<8),m=f*cc+(p*cc<<16),h=s[c]+m&4294967295;h=h<<13|h>>>19;let g=h&65535,y=h>>>16;s[c]=g*uc+(y*uc<<16)&4294967295,c=c+1&3}n=(s[0]<<1|s[0]>>>31)+(s[1]<<7|s[1]>>>25)+(s[2]<<12|s[2]>>>20)+(s[3]<<18|s[3]>>>14)&4294967295}n=n+t.length&4294967295;let o=t.length-4;for(;i<=o;i+=4){let s=i,a=r[s+0]+(r[s+1]<<8),u=r[s+2]+(r[s+3]<<8),c=a*Qm+(u*Qm<<16);n=n+c&4294967295,n=n<<17|n>>>15,n=(n&65535)*gM+((n>>>16)*gM<<16)&4294967295}for(;i<r.length;++i){let s=r[i];n=n+s*yM,n=n<<11|n>>>21,n=(n&65535)*uc+((n>>>16)*uc<<16)&4294967295}return n=n^n>>>15,n=((n&65535)*cc&4294967295)+((n>>>16)*cc<<16),n=n^n>>>13,n=((n&65535)*Qm&4294967295)+((n>>>16)*Qm<<16),n=n^n>>>16,n<0?n+4294967296:n}gw.xxHash32=p7});var vM=b(Zm=>{"use strict";function d7(t){for(var e in t)Zm.hasOwnProperty(e)||(Zm[e]=t[e])}Object.defineProperty(Zm,"__esModule",{value:!0});d7(bM())});var FM=b((Yve,BM)=>{"use strict";var{Duplex:v7}=require("stream");function OM(t){t.emit("close")}function _7(){!this.destroyed&&this._writableState.finished&&this.destroy()}function NM(t){this.removeListener("error",NM),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function w7(t,e){let r=!0,n=new v7({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(o,s){let a=!s&&n._readableState.objectMode?o.toString():o;n.push(a)||t.pause()}),t.once("error",function(o){n.destroyed||(r=!1,n.destroy(o))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(i,o){if(t.readyState===t.CLOSED){o(i),process.nextTick(OM,n);return}let s=!1;t.once("error",function(u){s=!0,o(u)}),t.once("close",function(){s||o(i),process.nextTick(OM,n)}),r&&t.terminate()},n._final=function(i){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(i)});return}t._socket!==null&&(t._socket._writableState.finished?(i(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){i()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(i,o,s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(i,o,s)});return}t.send(i,s)},n.on("end",_7),n.on("error",NM),n}BM.exports=w7});var Zo=b((Qve,UM)=>{"use strict";UM.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Wf=b((Zve,sH)=>{"use strict";var{EMPTY_BUFFER:I7}=Zo(),Sw=Buffer[Symbol.species];function A7(t,e){if(t.length===0)return I7;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let i=0;i<t.length;i++){let o=t[i];r.set(o,n),n+=o.length}return n<e?new Sw(r.buffer,r.byteOffset,n):r}function jM(t,e,r,n,i){for(let o=0;o<i;o++)r[n+o]=t[o]^e[o&3]}function WM(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function S7(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Ew(t){if(Ew.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new Sw(t):ArrayBuffer.isView(t)?e=new Sw(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Ew.readOnly=!1),e}sH.exports={concat:A7,mask:jM,toArrayBuffer:S7,toBuffer:Ew,unmask:WM};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");sH.exports.mask=function(e,r,n,i,o){o<48?jM(e,r,n,i,o):t.mask(e,r,n,i,o)},sH.exports.unmask=function(e,r){e.length<32?WM(e,r):t.unmask(e,r)}}catch{}});var GM=b((e_e,VM)=>{"use strict";var qM=Symbol("kDone"),Lw=Symbol("kRun"),Pw=class{constructor(e){this[qM]=()=>{this.pending--,this[Lw]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Lw]()}[Lw](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[qM])}}};VM.exports=Pw});var Gf=b((t_e,JM)=>{"use strict";var qf=require("zlib"),XM=Wf(),E7=GM(),{kStatusCode:KM}=Zo(),L7=Buffer[Symbol.species],P7=Buffer.from([0,0,255,255]),cH=Symbol("permessage-deflate"),so=Symbol("total-length"),Vf=Symbol("callback"),es=Symbol("buffers"),uH=Symbol("error"),aH,xw=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!aH){let i=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;aH=new E7(i)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Vf];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(i=>!(r.serverNoContextTakeover===!1&&i.server_no_context_takeover||i.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>i.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!i.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let i=r[n];if(i.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(i=i[0],n==="client_max_window_bits"){if(i!==!0){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else if(n==="server_max_window_bits"){let o=+i;if(!Number.isInteger(o)||o<8||o>15)throw new TypeError(`Invalid value for parameter "${n}": ${i}`);i=o}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(i!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${i}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=i})}),e}decompress(e,r,n){aH.add(i=>{this._decompress(e,r,(o,s)=>{i(),n(o,s)})})}compress(e,r,n){aH.add(i=>{this._compress(e,r,(o,s)=>{i(),n(o,s)})})}_decompress(e,r,n){let i=this._isServer?"client":"server";if(!this._inflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?qf.Z_DEFAULT_WINDOWBITS:this.params[o];this._inflate=qf.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[cH]=this,this._inflate[so]=0,this._inflate[es]=[],this._inflate.on("error",C7),this._inflate.on("data",zM)}this._inflate[Vf]=n,this._inflate.write(e),r&&this._inflate.write(P7),this._inflate.flush(()=>{let o=this._inflate[uH];if(o){this._inflate.close(),this._inflate=null,n(o);return}let s=XM.concat(this._inflate[es],this._inflate[so]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[so]=0,this._inflate[es]=[],r&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,r,n){let i=this._isServer?"server":"client";if(!this._deflate){let o=`${i}_max_window_bits`,s=typeof this.params[o]!="number"?qf.Z_DEFAULT_WINDOWBITS:this.params[o];this._deflate=qf.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[so]=0,this._deflate[es]=[],this._deflate.on("data",x7)}this._deflate[Vf]=n,this._deflate.write(e),this._deflate.flush(qf.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let o=XM.concat(this._deflate[es],this._deflate[so]);r&&(o=new L7(o.buffer,o.byteOffset,o.length-4)),this._deflate[Vf]=null,this._deflate[so]=0,this._deflate[es]=[],r&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),n(null,o)})}};JM.exports=xw;function x7(t){this[es].push(t),this[so]+=t.length}function zM(t){if(this[so]+=t.length,this[cH]._maxPayload<1||this[so]<=this[cH]._maxPayload){this[es].push(t);return}this[uH]=new RangeError("Max payload size exceeded"),this[uH].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[uH][KM]=1009,this.removeListener("data",zM),this.reset()}function C7(t){this[cH]._inflate=null,t[KM]=1007,this[Vf](t)}});var Xf=b((r_e,lH)=>{"use strict";var{isUtf8:YM}=require("buffer"),D7=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function T7(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Cw(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}lH.exports={isValidStatusCode:T7,isValidUTF8:Cw,tokenChars:D7};if(YM)lH.exports.isValidUTF8=function(t){return t.length<24?Cw(t):YM(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");lH.exports.isValidUTF8=function(e){return e.length<32?Cw(e):t(e)}}catch{}});var Rw=b((n_e,oR)=>{"use strict";var{Writable:$7}=require("stream"),QM=Gf(),{BINARY_TYPES:M7,EMPTY_BUFFER:ZM,kStatusCode:R7,kWebSocket:k7}=Zo(),{concat:Dw,toArrayBuffer:O7,unmask:N7}=Wf(),{isValidStatusCode:B7,isValidUTF8:eR}=Xf(),fH=Buffer[Symbol.species],F7=Promise.resolve(),U7=typeof queueMicrotask=="function"?queueMicrotask:j7,mc=0,tR=1,rR=2,nR=3,Tw=4,iR=5,$w=6,Mw=class extends $7{constructor(e={}){super(),this._binaryType=e.binaryType||M7[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[k7]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=mc,this._loop=!1}_write(e,r,n){if(this._opcode===8&&this._state==mc)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new fH(n.buffer,n.byteOffset+e,n.length-e),new fH(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],i=r.length-e;e>=n.length?r.set(this._buffers.shift(),i):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=new fH(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){let r;this._loop=!0;do switch(this._state){case mc:r=this.getInfo();break;case tR:r=this.getPayloadLength16();break;case rR:r=this.getPayloadLength64();break;case nR:this.getMask();break;case Tw:r=this.getData(e);break;case iR:this._loop=!1;return;default:this._loop=!1,U7(()=>{this._state=mc,this.startLoop(e)});return}while(this._loop);e(r)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,Bt(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let r=(e[0]&64)===64;if(r&&!this._extensions[QM.extensionName])return this._loop=!1,Bt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(r)return this._loop=!1,Bt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,Bt(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,Bt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,Bt(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(r)return this._loop=!1,Bt(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,Bt(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,Bt(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,Bt(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,Bt(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=tR;else if(this._payloadLength===127)this._state=rR;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),r=e.readUInt32BE(0);return r>Math.pow(2,53-32)-1?(this._loop=!1,Bt(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,Bt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=nR:this._state=Tw}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Tw}getData(e){let r=ZM;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&N7(r,this._mask)}if(this._opcode>7)return this.controlMessage(r);if(this._compressed){this._state=iR,this.decompress(r,e);return}return r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage()}decompress(e,r){this._extensions[QM.extensionName].decompress(e,this._fin,(i,o)=>{if(i)return r(i);if(o.length){if(this._messageLength+=o.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return r(Bt(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(o)}let s=this.dataMessage();if(s)return r(s);this.startLoop(r)})}dataMessage(){if(this._fin){let e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Dw(r,e):this._binaryType==="arraybuffer"?n=O7(Dw(r,e)):n=r,this.emit("message",n,!0)}else{let n=Dw(r,e);if(!this._skipUTF8Validation&&!eR(n))return this._loop=!1,Bt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",n,!1)}}this._state=$w}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,ZM),this.end(),this._state=mc;else{let r=e.readUInt16BE(0);if(!B7(r))return Bt(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let n=new fH(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!eR(n))return Bt(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",r,n),this.end(),this._state=mc}else this._opcode===9?(this.emit("ping",e),this._state=$w):(this.emit("pong",e),this._state=$w)}};oR.exports=Mw;function Bt(t,e,r,n,i){let o=new t(r?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(o,Bt),o.code=i,o[R7]=n,o}function j7(t){F7.then(t).catch(q7)}function W7(t){throw t}function q7(t){process.nextTick(W7,t)}});var Ow=b((o_e,uR)=>{"use strict";var{Duplex:i_e}=require("stream"),{randomFillSync:V7}=require("crypto"),sR=Gf(),{EMPTY_BUFFER:G7}=Zo(),{isValidStatusCode:X7}=Xf(),{mask:aR,toBuffer:Hc}=Wf(),Nn=Symbol("kByteLength"),K7=Buffer.alloc(4),kw=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,r){let n,i=!1,o=2,s=!1;r.mask&&(n=r.maskBuffer||K7,r.generateMask?r.generateMask(n):V7(n,0,4),s=(n[0]|n[1]|n[2]|n[3])===0,o=6);let a;typeof e=="string"?(!r.mask||s)&&r[Nn]!==void 0?a=r[Nn]:(e=Buffer.from(e),a=e.length):(a=e.length,i=r.mask&&r.readOnly&&!s);let u=a;a>=65536?(o+=8,u=127):a>125&&(o+=2,u=126);let c=Buffer.allocUnsafe(i?a+o:o);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[o-4]=n[0],c[o-3]=n[1],c[o-2]=n[2],c[o-1]=n[3],s?[c,e]:i?(aR(e,n,c,o,a),[c]):(aR(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,i){let o;if(e===void 0)o=G7;else{if(typeof e!="number"||!X7(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+a),o.writeUInt16BE(e,0),typeof r=="string"?o.write(r,2):o.set(r,2)}}let s={[Nn]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(t.frame(o,s),i)}ping(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=Hc(e),i=e.length,o=Hc.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Nn]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}pong(e,r,n){let i,o;if(typeof e=="string"?(i=Buffer.byteLength(e),o=!1):(e=Hc(e),i=e.length,o=Hc.readOnly),i>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Nn]:i,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:o,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}send(e,r,n){let i=this._extensions[sR.extensionName],o=r.binary?2:1,s=r.compress,a,u;if(typeof e=="string"?(a=Buffer.byteLength(e),u=!1):(e=Hc(e),a=e.length,u=Hc.readOnly),this._firstFragment?(this._firstFragment=!1,s&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=i._threshold),this._compress=s):(s=!1,o=0),r.fin&&(this._firstFragment=!0),i){let c={[Nn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}else this.sendFrame(t.frame(e,{[Nn]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:u,rsv1:!1}),n)}dispatch(e,r,n,i){if(!r){this.sendFrame(t.frame(e,n),i);return}let o=this._extensions[sR.extensionName];this._bufferedBytes+=n[Nn],this._deflating=!0,o.compress(e,n.fin,(s,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");typeof i=="function"&&i(u);for(let c=0;c<this._queue.length;c++){let l=this._queue[c],f=l[l.length-1];typeof f=="function"&&f(u)}return}this._bufferedBytes-=n[Nn],this._deflating=!1,n.readOnly=!1,this.sendFrame(t.frame(a,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Nn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Nn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};uR.exports=kw});var gR=b((s_e,HR)=>{"use strict";var{kForOnEventAttribute:Kf,kListener:Nw}=Zo(),cR=Symbol("kCode"),lR=Symbol("kData"),fR=Symbol("kError"),pR=Symbol("kMessage"),dR=Symbol("kReason"),gc=Symbol("kTarget"),hR=Symbol("kType"),mR=Symbol("kWasClean"),ao=class{constructor(e){this[gc]=null,this[hR]=e}get target(){return this[gc]}get type(){return this[hR]}};Object.defineProperty(ao.prototype,"target",{enumerable:!0});Object.defineProperty(ao.prototype,"type",{enumerable:!0});var ya=class extends ao{constructor(e,r={}){super(e),this[cR]=r.code===void 0?0:r.code,this[dR]=r.reason===void 0?"":r.reason,this[mR]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[cR]}get reason(){return this[dR]}get wasClean(){return this[mR]}};Object.defineProperty(ya.prototype,"code",{enumerable:!0});Object.defineProperty(ya.prototype,"reason",{enumerable:!0});Object.defineProperty(ya.prototype,"wasClean",{enumerable:!0});var yc=class extends ao{constructor(e,r={}){super(e),this[fR]=r.error===void 0?null:r.error,this[pR]=r.message===void 0?"":r.message}get error(){return this[fR]}get message(){return this[pR]}};Object.defineProperty(yc.prototype,"error",{enumerable:!0});Object.defineProperty(yc.prototype,"message",{enumerable:!0});var zf=class extends ao{constructor(e,r={}){super(e),this[lR]=r.data===void 0?null:r.data}get data(){return this[lR]}};Object.defineProperty(zf.prototype,"data",{enumerable:!0});var z7={addEventListener(t,e,r={}){for(let i of this.listeners(t))if(!r[Kf]&&i[Nw]===e&&!i[Kf])return;let n;if(t==="message")n=function(o,s){let a=new zf("message",{data:s?o:o.toString()});a[gc]=this,pH(e,this,a)};else if(t==="close")n=function(o,s){let a=new ya("close",{code:o,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[gc]=this,pH(e,this,a)};else if(t==="error")n=function(o){let s=new yc("error",{error:o,message:o.message});s[gc]=this,pH(e,this,s)};else if(t==="open")n=function(){let o=new ao("open");o[gc]=this,pH(e,this,o)};else return;n[Kf]=!!r[Kf],n[Nw]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Nw]===e&&!r[Kf]){this.removeListener(t,r);break}}};HR.exports={CloseEvent:ya,ErrorEvent:yc,Event:ao,EventTarget:z7,MessageEvent:zf};function pH(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Bw=b((a_e,yR)=>{"use strict";var{tokenChars:Jf}=Xf();function Ci(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function J7(t){let e=Object.create(null),r=Object.create(null),n=!1,i=!1,o=!1,s,a,u=-1,c=-1,l=-1,f=0;for(;f<t.length;f++)if(c=t.charCodeAt(f),s===void 0)if(l===-1&&Jf[c]===1)u===-1&&(u=f);else if(f!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=f);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${f}`);l===-1&&(l=f);let m=t.slice(u,l);c===44?(Ci(e,m,r),r=Object.create(null)):s=m,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${f}`);else if(a===void 0)if(l===-1&&Jf[c]===1)u===-1&&(u=f);else if(c===32||c===9)l===-1&&u!==-1&&(l=f);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${f}`);l===-1&&(l=f),Ci(r,t.slice(u,l),!0),c===44&&(Ci(e,s,r),r=Object.create(null),s=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,f),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${f}`);else if(i){if(Jf[c]!==1)throw new SyntaxError(`Unexpected character at index ${f}`);u===-1?u=f:n||(n=!0),i=!1}else if(o)if(Jf[c]===1)u===-1&&(u=f);else if(c===34&&u!==-1)o=!1,l=f;else if(c===92)i=!0;else throw new SyntaxError(`Unexpected character at index ${f}`);else if(c===34&&t.charCodeAt(f-1)===61)o=!0;else if(l===-1&&Jf[c]===1)u===-1&&(u=f);else if(u!==-1&&(c===32||c===9))l===-1&&(l=f);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${f}`);l===-1&&(l=f);let m=t.slice(u,l);n&&(m=m.replace(/\\/g,""),n=!1),Ci(r,a,m),c===44&&(Ci(e,s,r),r=Object.create(null),s=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${f}`);if(u===-1||o||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=f);let p=t.slice(u,l);return s===void 0?Ci(e,p,r):(a===void 0?Ci(r,p,!0):n?Ci(r,a,p.replace(/\\/g,"")):Ci(r,a,p),Ci(e,s,r)),e}function Y7(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(i=>{let o=n[i];return Array.isArray(o)||(o=[o]),o.map(s=>s===!0?i:`${i}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}yR.exports={format:Y7,parse:J7}});var qw=b((l_e,xR)=>{"use strict";var Q7=require("events"),Z7=require("https"),eQ=require("http"),_R=require("net"),tQ=require("tls"),{randomBytes:rQ,createHash:nQ}=require("crypto"),{Duplex:u_e,Readable:c_e}=require("stream"),{URL:Fw}=require("url"),ts=Gf(),iQ=Rw(),oQ=Ow(),{BINARY_TYPES:bR,EMPTY_BUFFER:dH,GUID:sQ,kForOnEventAttribute:Uw,kListener:aQ,kStatusCode:uQ,kWebSocket:lr,NOOP:wR}=Zo(),{EventTarget:{addEventListener:cQ,removeEventListener:lQ}}=gR(),{format:fQ,parse:pQ}=Bw(),{toBuffer:dQ}=Wf(),hQ=30*1e3,IR=Symbol("kAborted"),jw=[8,13],uo=["CONNECTING","OPEN","CLOSING","CLOSED"],mQ=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Ht=class t extends Q7{constructor(e,r,n){super(),this._binaryType=bR[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=dH,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),AR(this,e,r,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){bR.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let i=new iQ({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation});this._sender=new oQ(e,this._extensions,n.generateMask),this._receiver=i,this._socket=e,i[lr]=this,e[lr]=this,i.on("conclude",yQ),i.on("drain",bQ),i.on("error",vQ),i.on("message",_Q),i.on("ping",wQ),i.on("pong",IQ),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",ER),e.on("data",mH),e.on("end",LR),e.on("error",PR),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ts.extensionName]&&this._extensions[ts.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let n="WebSocket was closed before the connection was established";jr(this,this._req,n);return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),hQ)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Ww(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||dH,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Ww(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||dH,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Ww(this,e,n);return}let i={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[ts.extensionName]||(i.compress=!1),this._sender.send(e||dH,i,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){let e="WebSocket was closed before the connection was established";jr(this,this._req,e);return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(Ht,"CONNECTING",{enumerable:!0,value:uo.indexOf("CONNECTING")});Object.defineProperty(Ht.prototype,"CONNECTING",{enumerable:!0,value:uo.indexOf("CONNECTING")});Object.defineProperty(Ht,"OPEN",{enumerable:!0,value:uo.indexOf("OPEN")});Object.defineProperty(Ht.prototype,"OPEN",{enumerable:!0,value:uo.indexOf("OPEN")});Object.defineProperty(Ht,"CLOSING",{enumerable:!0,value:uo.indexOf("CLOSING")});Object.defineProperty(Ht.prototype,"CLOSING",{enumerable:!0,value:uo.indexOf("CLOSING")});Object.defineProperty(Ht,"CLOSED",{enumerable:!0,value:uo.indexOf("CLOSED")});Object.defineProperty(Ht.prototype,"CLOSED",{enumerable:!0,value:uo.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(Ht.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(Ht.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Uw])return e[aQ];return null},set(e){for(let r of this.listeners(t))if(r[Uw]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Uw]:!0})}})});Ht.prototype.addEventListener=cQ;Ht.prototype.removeEventListener=lQ;xR.exports=Ht;function AR(t,e,r,n){let i={protocolVersion:jw[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!jw.includes(i.protocolVersion))throw new RangeError(`Unsupported protocol version: ${i.protocolVersion} (supported versions: ${jw.join(", ")})`);let o;if(e instanceof Fw)o=e;else try{o=new Fw(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}o.protocol==="http:"?o.protocol="ws:":o.protocol==="https:"&&(o.protocol="wss:"),t._url=o.href;let s=o.protocol==="wss:",a=o.protocol==="ws+unix:",u;if(o.protocol!=="ws:"&&!s&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!o.pathname?u="The URL's pathname is empty":o.hash&&(u="The URL contains a fragment identifier"),u){let g=new SyntaxError(u);if(t._redirects===0)throw g;hH(t,g);return}let c=s?443:80,l=rQ(16).toString("base64"),f=s?Z7.request:eQ.request,p=new Set,m;if(i.createConnection=s?gQ:HQ,i.defaultPort=i.defaultPort||c,i.port=o.port||c,i.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,i.headers={...i.headers,"Sec-WebSocket-Version":i.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},i.path=o.pathname+o.search,i.timeout=i.handshakeTimeout,i.perMessageDeflate&&(m=new ts(i.perMessageDeflate!==!0?i.perMessageDeflate:{},!1,i.maxPayload),i.headers["Sec-WebSocket-Extensions"]=fQ({[ts.extensionName]:m.offer()})),r.length){for(let g of r){if(typeof g!="string"||!mQ.test(g)||p.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(g)}i.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(i.origin&&(i.protocolVersion<13?i.headers["Sec-WebSocket-Origin"]=i.origin:i.headers.Origin=i.origin),(o.username||o.password)&&(i.auth=`${o.username}:${o.password}`),a){let g=i.path.split(":");i.socketPath=g[0],i.path=g[1]}let h;if(i.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=s,t._originalHostOrSocketPath=a?i.socketPath:o.host;let g=n&&n.headers;if(n={...n,headers:{}},g)for(let[y,_]of Object.entries(g))n.headers[y.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let g=a?t._originalIpc?i.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:o.host===t._originalHostOrSocketPath;(!g||t._originalSecure&&!s)&&(delete i.headers.authorization,delete i.headers.cookie,g||delete i.headers.host,i.auth=void 0)}i.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(i.auth).toString("base64")),h=t._req=f(i),t._redirects&&t.emit("redirect",t.url,h)}else h=t._req=f(i);i.timeout&&h.on("timeout",()=>{jr(t,h,"Opening handshake has timed out")}),h.on("error",g=>{h===null||h[IR]||(h=t._req=null,hH(t,g))}),h.on("response",g=>{let y=g.headers.location,_=g.statusCode;if(y&&i.followRedirects&&_>=300&&_<400){if(++t._redirects>i.maxRedirects){jr(t,h,"Maximum redirects exceeded");return}h.abort();let C;try{C=new Fw(y,e)}catch{let D=new SyntaxError(`Invalid URL: ${y}`);hH(t,D);return}AR(t,C,r,n)}else t.emit("unexpected-response",h,g)||jr(t,h,`Unexpected server response: ${g.statusCode}`)}),h.on("upgrade",(g,y,_)=>{if(t.emit("upgrade",g),t.readyState!==Ht.CONNECTING)return;if(h=t._req=null,g.headers.upgrade.toLowerCase()!=="websocket"){jr(t,y,"Invalid Upgrade header");return}let C=nQ("sha1").update(l+sQ).digest("base64");if(g.headers["sec-websocket-accept"]!==C){jr(t,y,"Invalid Sec-WebSocket-Accept header");return}let N=g.headers["sec-websocket-protocol"],D;if(N!==void 0?p.size?p.has(N)||(D="Server sent an invalid subprotocol"):D="Server sent a subprotocol but none was requested":p.size&&(D="Server sent no subprotocol"),D){jr(t,y,D);return}N&&(t._protocol=N);let j=g.headers["sec-websocket-extensions"];if(j!==void 0){if(!m){jr(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let X;try{X=pQ(j)}catch{jr(t,y,"Invalid Sec-WebSocket-Extensions header");return}let G=Object.keys(X);if(G.length!==1||G[0]!==ts.extensionName){jr(t,y,"Server indicated an extension that was not requested");return}try{m.accept(X[ts.extensionName])}catch{jr(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[ts.extensionName]=m}t.setSocket(y,_,{generateMask:i.generateMask,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation})}),i.finishRequest?i.finishRequest(h,t):h.end()}function hH(t,e){t._readyState=Ht.CLOSING,t.emit("error",e),t.emitClose()}function HQ(t){return t.path=t.socketPath,_R.connect(t)}function gQ(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=_R.isIP(t.host)?"":t.host),tQ.connect(t)}function jr(t,e,r){t._readyState=Ht.CLOSING;let n=new Error(r);Error.captureStackTrace(n,jr),e.setHeader?(e[IR]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(hH,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Ww(t,e,r){if(e){let n=dQ(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${uo[t.readyState]})`);process.nextTick(r,n)}}function yQ(t,e){let r=this[lr];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[lr]!==void 0&&(r._socket.removeListener("data",mH),process.nextTick(SR,r._socket),t===1005?r.close():r.close(t,e))}function bQ(){let t=this[lr];t.isPaused||t._socket.resume()}function vQ(t){let e=this[lr];e._socket[lr]!==void 0&&(e._socket.removeListener("data",mH),process.nextTick(SR,e._socket),e.close(t[uQ])),e.emit("error",t)}function vR(){this[lr].emitClose()}function _Q(t,e){this[lr].emit("message",t,e)}function wQ(t){let e=this[lr];e.pong(t,!e._isServer,wR),e.emit("ping",t)}function IQ(t){this[lr].emit("pong",t)}function SR(t){t.resume()}function ER(){let t=this[lr];this.removeListener("close",ER),this.removeListener("data",mH),this.removeListener("end",LR),t._readyState=Ht.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[lr]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",vR),t._receiver.on("finish",vR))}function mH(t){this[lr]._receiver.write(t)||this.pause()}function LR(){let t=this[lr];t._readyState=Ht.CLOSING,t._receiver.end(),this.end()}function PR(){let t=this[lr];this.removeListener("error",PR),this.on("error",wR),t&&(t._readyState=Ht.CLOSING,this.destroy())}});var DR=b((f_e,CR)=>{"use strict";var{tokenChars:AQ}=Xf();function SQ(t){let e=new Set,r=-1,n=-1,i=0;for(i;i<t.length;i++){let s=t.charCodeAt(i);if(n===-1&&AQ[s]===1)r===-1&&(r=i);else if(i!==0&&(s===32||s===9))n===-1&&r!==-1&&(n=i);else if(s===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${i}`);n===-1&&(n=i);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${i}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let o=t.slice(r,i);if(e.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return e.add(o),e}CR.exports={parse:SQ}});var NR=b((d_e,OR)=>{"use strict";var EQ=require("events"),HH=require("http"),{Duplex:p_e}=require("stream"),{createHash:LQ}=require("crypto"),TR=Bw(),ba=Gf(),PQ=DR(),xQ=qw(),{GUID:CQ,kWebSocket:DQ}=Zo(),TQ=/^[+/0-9A-Za-z]{22}==$/,$R=0,MR=1,kR=2,Vw=class extends EQ{constructor(e,r){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:xQ,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=HH.createServer((n,i)=>{let o=HH.STATUS_CODES[426];i.writeHead(426,{"Content-Length":o.length,"Content-Type":"text/plain"}),i.end(o)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=$Q(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(i,o,s)=>{this.handleUpgrade(i,o,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=$R}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===kR){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Yf,this);return}if(e&&this.once("close",e),this._state!==MR)if(this._state=MR,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Yf,this):process.nextTick(Yf,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Yf(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,i){r.on("error",RR);let o=e.headers["sec-websocket-key"],s=+e.headers["sec-websocket-version"];if(e.method!=="GET"){va(this,e,r,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){va(this,e,r,400,"Invalid Upgrade header");return}if(!o||!TQ.test(o)){va(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(s!==8&&s!==13){va(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Qf(r,400);return}let a=e.headers["sec-websocket-protocol"],u=new Set;if(a!==void 0)try{u=PQ.parse(a)}catch{va(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],l={};if(this.options.perMessageDeflate&&c!==void 0){let f=new ba(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=TR.parse(c);p[ba.extensionName]&&(f.accept(p[ba.extensionName]),l[ba.extensionName]=f)}catch{va(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:e.headers[`${s===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(f,(p,m,h,g)=>{if(!p)return Qf(r,m||401,h,g);this.completeUpgrade(l,o,u,e,r,n,i)});return}if(!this.options.verifyClient(f))return Qf(r,401)}this.completeUpgrade(l,o,u,e,r,n,i)}completeUpgrade(e,r,n,i,o,s,a){if(!o.readable||!o.writable)return o.destroy();if(o[DQ])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>$R)return Qf(o,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${LQ("sha1").update(r+CQ).digest("base64")}`],l=new this.options.WebSocket(null);if(n.size){let f=this.options.handleProtocols?this.options.handleProtocols(n,i):n.values().next().value;f&&(c.push(`Sec-WebSocket-Protocol: ${f}`),l._protocol=f)}if(e[ba.extensionName]){let f=e[ba.extensionName].params,p=TR.format({[ba.extensionName]:[f]});c.push(`Sec-WebSocket-Extensions: ${p}`),l._extensions=e}this.emit("headers",c,i),o.write(c.concat(`\r
`).join(`\r
`)),o.removeListener("error",RR),l.setSocket(o,s,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Yf,this)})),a(l,i)}};OR.exports=Vw;function $Q(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function Yf(t){t._state=kR,t.emit("close")}function RR(){this.destroy()}function Qf(t,e,r,n){r=r||HH.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${HH.STATUS_CODES[e]}\r
`+Object.keys(n).map(i=>`${i}: ${n[i]}`).join(`\r
`)+`\r
\r
`+r)}function va(t,e,r,n,i){if(t.listenerCount("wsClientError")){let o=new Error(i);Error.captureStackTrace(o,va),t.emit("wsClientError",o,r,e)}else Qf(r,n,i)}});var QR=b((X_e,YR)=>{"use strict";YR.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ek=b((K_e,ZR)=>{ZR.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var nk=b((z_e,rk)=>{"use strict";var jQ=ek(),WQ=Array.prototype.concat,qQ=Array.prototype.slice,tk=rk.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var o=e[n];jQ(o)?r=WQ.call(r,qQ.call(o)):r.push(o)}return r};tk.wrap=function(t){return function(){return t(tk(arguments))}}});var ak=b((J_e,sk)=>{var tp=QR(),rp=nk(),ik=Object.hasOwnProperty,ok={};for(wH in tp)ik.call(tp,wH)&&(ok[tp[wH]]=wH);var wH,Wr=sk.exports={to:{},get:{}};Wr.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=Wr.get.hsl(t),n="hsl";break;case"hwb":r=Wr.get.hwb(t),n="hwb";break;default:r=Wr.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};Wr.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],a,u,c;if(a=t.match(r)){for(c=a[2],a=a[1],u=0;u<3;u++){var l=u*2;s[u]=parseInt(a.slice(l,l+2),16)}c&&(s[3]=parseInt(c,16)/255)}else if(a=t.match(e)){for(a=a[1],c=a[3],u=0;u<3;u++)s[u]=parseInt(a[u]+a[u],16);c&&(s[3]=parseInt(c+c,16)/255)}else if(a=t.match(n)){for(u=0;u<3;u++)s[u]=parseInt(a[u+1],0);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else if(a=t.match(i)){for(u=0;u<3;u++)s[u]=Math.round(parseFloat(a[u+1])*2.55);a[4]&&(a[5]?s[3]=parseFloat(a[4])*.01:s[3]=parseFloat(a[4]))}else return(a=t.match(o))?a[1]==="transparent"?[0,0,0,0]:ik.call(tp,a[1])?(s=tp[a[1]],s[3]=1,s):null:null;for(u=0;u<3;u++)s[u]=rs(s[u],0,255);return s[3]=rs(s[3],0,1),s};Wr.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=rs(parseFloat(r[2]),0,100),s=rs(parseFloat(r[3]),0,100),a=rs(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Wr.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,o=rs(parseFloat(r[2]),0,100),s=rs(parseFloat(r[3]),0,100),a=rs(isNaN(n)?1:n,0,1);return[i,o,s,a]}return null};Wr.to.hex=function(){var t=rp(arguments);return"#"+IH(t[0])+IH(t[1])+IH(t[2])+(t[3]<1?IH(Math.round(t[3]*255)):"")};Wr.to.rgb=function(){var t=rp(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Wr.to.rgb.percent=function(){var t=rp(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};Wr.to.hsl=function(){var t=rp(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Wr.to.hwb=function(){var t=rp(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Wr.to.keyword=function(t){return ok[t.slice(0,3)]};function rs(t,e,r){return Math.min(Math.max(e,t),r)}function IH(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var ck=b((Y_e,uk)=>{"use strict";uk.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Yw=b((Q_e,fk)=>{var np=ck(),lk={};for(let t of Object.keys(np))lk[np[t]]=t;var le={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};fk.exports=le;for(let t of Object.keys(le)){if(!("channels"in le[t]))throw new Error("missing channels property: "+t);if(!("labels"in le[t]))throw new Error("missing channel labels property: "+t);if(le[t].labels.length!==le[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=le[t];delete le[t].channels,delete le[t].labels,Object.defineProperty(le[t],"channels",{value:e}),Object.defineProperty(le[t],"labels",{value:r})}le.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),o=Math.max(e,r,n),s=o-i,a,u;o===i?a=0:e===o?a=(r-n)/s:r===o?a=2+(n-e)/s:n===o&&(a=4+(e-r)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+o)/2;return o===i?u=0:c<=.5?u=s/(o+i):u=s/(2-o-i),[a,u*100,c*100]};le.rgb.hsv=function(t){let e,r,n,i,o,s=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(s,a,u),l=c-Math.min(s,a,u),f=function(p){return(c-p)/6/l+1/2};return l===0?(i=0,o=0):(o=l/c,e=f(s),r=f(a),n=f(u),s===c?i=n-r:a===c?i=1/3+e-n:u===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};le.rgb.hwb=function(t){let e=t[0],r=t[1],n=t[2],i=le.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,o*100,n*100]};le.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-r,1-n),o=(1-e-i)/(1-i)||0,s=(1-r-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[o*100,s*100,a*100,i*100]};function VQ(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}le.rgb.keyword=function(t){let e=lk[t];if(e)return e;let r=1/0,n;for(let i of Object.keys(np)){let o=np[i],s=VQ(t,o);s<r&&(r=s,n=i)}return n};le.keyword.rgb=function(t){return np[t]};le.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;let i=e*.4124+r*.3576+n*.1805,o=e*.2126+r*.7152+n*.0722,s=e*.0193+r*.1192+n*.9505;return[i*100,o*100,s*100]};le.rgb.lab=function(t){let e=le.rgb.xyz(t),r=e[0],n=e[1],i=e[2];r/=95.047,n/=100,i/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*n-16,s=500*(r-n),a=200*(n-i);return[o,s,a]};le.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i,o,s;if(r===0)return s=n*255,[s,s,s];n<.5?i=n*(1+r):i=n+r-n*r;let a=2*n-i,u=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(i-a)*6*o:2*o<1?s=i:3*o<2?s=a+(i-a)*(2/3-o)*6:s=a,u[c]=s*255;return u};le.hsl.hsv=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=r,o=Math.max(n,.01);n*=2,r*=n<=1?n:2-n,i*=o<=1?o:2-o;let s=(n+r)/2,a=n===0?2*i/(o+i):2*r/(n+r);return[e,a*100,s*100]};le.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*n*(1-r),a=255*n*(1-r*o),u=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,u,s];case 1:return[a,n,s];case 2:return[s,n,u];case 3:return[s,a,n];case 4:return[u,s,n];case 5:return[n,s,a]}};le.hsv.hsl=function(t){let e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),o,s;s=(2-r)*n;let a=(2-r)*i;return o=r*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};le.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,o;i>1&&(r/=i,n/=i);let s=Math.floor(6*e),a=1-n;o=6*e-s,s&1&&(o=1-o);let u=r+o*(a-r),c,l,f;switch(s){default:case 6:case 0:c=a,l=u,f=r;break;case 1:c=u,l=a,f=r;break;case 2:c=r,l=a,f=u;break;case 3:c=r,l=u,f=a;break;case 4:c=u,l=r,f=a;break;case 5:c=a,l=r,f=u;break}return[c*255,l*255,f*255]};le.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,o=1-Math.min(1,e*(1-i)+i),s=1-Math.min(1,r*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[o*255,s*255,a*255]};le.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,n=t[2]/100,i,o,s;return i=e*3.2406+r*-1.5372+n*-.4986,o=e*-.9689+r*1.8758+n*.0415,s=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[i*255,o*255,s*255]};le.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let i=116*r-16,o=500*(e-r),s=200*(r-n);return[i,o,s]};le.lab.xyz=function(t){let e=t[0],r=t[1],n=t[2],i,o,s;o=(e+16)/116,i=r/500+o,s=o-n/200;let a=o**3,u=i**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,i=u>.008856?u:(i-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,i*=95.047,o*=100,s*=108.883,[i,o,s]};le.lab.lch=function(t){let e=t[0],r=t[1],n=t[2],i;i=Math.atan2(n,r)*360/2/Math.PI,i<0&&(i+=360);let s=Math.sqrt(r*r+n*n);return[e,s,i]};le.lch.lab=function(t){let e=t[0],r=t[1],i=t[2]/360*2*Math.PI,o=r*Math.cos(i),s=r*Math.sin(i);return[e,o,s]};le.rgb.ansi16=function(t,e=null){let[r,n,i]=t,o=e===null?le.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return o===2&&(s+=60),s};le.hsv.ansi16=function(t){return le.rgb.ansi16(le.hsv.rgb(t),t[2])};le.rgb.ansi256=function(t){let e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)};le.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,o=(e>>2&1)*r*255;return[n,i,o]};le.ansi256.rgb=function(t){if(t>=232){let o=(t-232)*10+8;return[o,o,o]}t-=16;let e,r=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[r,n,i]};le.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};le.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(a=>a+a).join(""));let n=parseInt(r,16),i=n>>16&255,o=n>>8&255,s=n&255;return[i,o,s]};le.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),o=Math.min(Math.min(e,r),n),s=i-o,a,u;return s<1?a=o/(1-s):a=0,s<=0?u=0:i===e?u=(r-n)/s%6:i===r?u=2+(n-e)/s:u=4+(e-r)/s,u/=6,u%=1,[u*360,s*100,a*100]};le.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r),i=0;return n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};le.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};le.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];let i=[0,0,0],o=e%1*6,s=o%1,a=1-s,u=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return u=(1-r)*n,[(r*i[0]+u)*255,(r*i[1]+u)*255,(r*i[2]+u)*255]};le.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};le.hcg.hsl=function(t){let e=t[1]/100,n=t[2]/100*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};le.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};le.hwb.hcg=function(t){let e=t[1]/100,n=1-t[2]/100,i=n-e,o=0;return i<1&&(o=(n-i)/(1-i)),[t[0],i*100,o*100]};le.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};le.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};le.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};le.gray.hsl=function(t){return[0,0,t[0]]};le.gray.hsv=le.gray.hsl;le.gray.hwb=function(t){return[0,100,t[0]]};le.gray.cmyk=function(t){return[0,0,0,t[0]]};le.gray.lab=function(t){return[t[0],0,0]};le.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};le.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var dk=b((Z_e,pk)=>{var AH=Yw();function GQ(){let t={},e=Object.keys(AH);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function XQ(t){let e=GQ(),r=[t];for(e[t].distance=0;r.length;){let n=r.pop(),i=Object.keys(AH[n]);for(let o=i.length,s=0;s<o;s++){let a=i[s],u=e[a];u.distance===-1&&(u.distance=e[n].distance+1,u.parent=n,r.unshift(a))}}return e}function KQ(t,e){return function(r){return e(t(r))}}function zQ(t,e){let r=[e[t].parent,t],n=AH[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)r.unshift(e[i].parent),n=KQ(AH[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}pk.exports=function(t){let e=XQ(t),r={},n=Object.keys(e);for(let i=n.length,o=0;o<i;o++){let s=n[o];e[s].parent!==null&&(r[s]=zQ(s,e))}return r}});var mk=b((ewe,hk)=>{var Qw=Yw(),JQ=dk(),Ic={},YQ=Object.keys(Qw);function QQ(t){let e=function(...r){let n=r[0];return n==null?n:(n.length>1&&(r=n),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function ZQ(t){let e=function(...r){let n=r[0];if(n==null)return n;n.length>1&&(r=n);let i=t(r);if(typeof i=="object")for(let o=i.length,s=0;s<o;s++)i[s]=Math.round(i[s]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}YQ.forEach(t=>{Ic[t]={},Object.defineProperty(Ic[t],"channels",{value:Qw[t].channels}),Object.defineProperty(Ic[t],"labels",{value:Qw[t].labels});let e=JQ(t);Object.keys(e).forEach(n=>{let i=e[n];Ic[t][n]=ZQ(i),Ic[t][n].raw=QQ(i)})});hk.exports=Ic});var yk=b((twe,gk)=>{var Ac=ak(),qr=mk(),Hk=["keyword","gray","hex"],Zw={};for(let t of Object.keys(qr))Zw[[...qr[t].labels].sort().join("")]=t;var SH={};function Ft(t,e){if(!(this instanceof Ft))return new Ft(t,e);if(e&&e in Hk&&(e=null),e&&!(e in qr))throw new Error("Unknown model: "+e);let r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Ft)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){let i=Ac.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=qr[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=qr[this.model].channels;let i=Array.prototype.slice.call(t,0,n);this.color=eI(i,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;let i=Object.keys(t);"alpha"in t&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);let o=i.sort().join("");if(!(o in Zw))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Zw[o];let{labels:s}=qr[this.model],a=[];for(r=0;r<s.length;r++)a.push(t[s[r]]);this.color=eI(a)}if(SH[this.model])for(n=qr[this.model].channels,r=0;r<n;r++){let i=SH[this.model][r];i&&(this.color[r]=i(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ft.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Ac.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);let r=e.valpha===1?e.color:[...e.color,this.valpha];return Ac.to[e.model](r)},percentString(t){let e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:[...e.color,this.valpha];return Ac.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){let t={},{channels:e}=qr[this.model],{labels:r}=qr[this.model];for(let n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){let t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){let t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new Ft([...this.color.map(tZ(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new Ft([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:ct("rgb",0,Pt(255)),green:ct("rgb",1,Pt(255)),blue:ct("rgb",2,Pt(255)),hue:ct(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:ct("hsl",1,Pt(100)),lightness:ct("hsl",2,Pt(100)),saturationv:ct("hsv",1,Pt(100)),value:ct("hsv",2,Pt(100)),chroma:ct("hcg",1,Pt(100)),gray:ct("hcg",2,Pt(100)),white:ct("hwb",1,Pt(100)),wblack:ct("hwb",2,Pt(100)),cyan:ct("cmyk",0,Pt(100)),magenta:ct("cmyk",1,Pt(100)),yellow:ct("cmyk",2,Pt(100)),black:ct("cmyk",3,Pt(100)),x:ct("xyz",0,Pt(95.047)),y:ct("xyz",1,Pt(100)),z:ct("xyz",2,Pt(108.833)),l:ct("lab",0,Pt(100)),a:ct("lab",1),b:ct("lab",2),keyword(t){return t!==void 0?new Ft(t):qr[this.model].keyword(this.color)},hex(t){return t!==void 0?new Ft(t):Ac.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new Ft(t);let e=this.rgb().round().color,r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),Ac.to.hex(e)+r},rgbNumber(){let t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){let t=this.rgb().color,e=[];for(let[r,n]of t.entries()){let i=n/255;e[r]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){let e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level(t){let e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){let t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){let t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){let e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){let e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){let e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){let e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){let e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){let e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){let t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Ft.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){let e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);let r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,o=2*i-1,s=r.alpha()-n.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,u=1-a;return Ft.rgb(a*r.red()+u*n.red(),a*r.green()+u*n.green(),a*r.blue()+u*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};for(let t of Object.keys(qr)){if(Hk.includes(t))continue;let{channels:e}=qr[t];Ft.prototype[t]=function(...r){return this.model===t?new Ft(this):r.length>0?new Ft(r,t):new Ft([...rZ(qr[this.model][t].raw(this.color)),this.valpha],t)},Ft[t]=function(...r){let n=r[0];return typeof n=="number"&&(n=eI(r,e)),new Ft(n,t)}}function eZ(t,e){return Number(t.toFixed(e))}function tZ(t){return function(e){return eZ(e,t)}}function ct(t,e,r){t=Array.isArray(t)?t:[t];for(let n of t)(SH[n]||(SH[n]=[]))[e]=r;return t=t[0],function(n){let i;return n!==void 0?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function Pt(t){return function(e){return Math.max(0,Math.min(t,e))}}function rZ(t){return Array.isArray(t)?t:[t]}function eI(t,e){for(let r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}gk.exports=Ft});var m1=b(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});og.dataUriToBuffer=void 0;function RZ(t){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let o=0;o<t.length;o+=4){let s=e.indexOf(t.charAt(o)),a=e.indexOf(t.charAt(o+1)),u=t.charAt(o+2)==="="?0:e.indexOf(t.charAt(o+2)),c=t.charAt(o+3)==="="?0:e.indexOf(t.charAt(o+3)),l=s<<2|a>>4,f=(a&15)<<4|u>>2,p=(u&3)<<6|c;r.push(l),t.charAt(o+2)!=="="&&r.push(f),t.charAt(o+3)!=="="&&r.push(p)}let n=new ArrayBuffer(r.length);return new Uint8Array(n).set(r),n}function kZ(t){let e=new ArrayBuffer(t.length),r=new Uint8Array(e);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return e}function OZ(t){if(t=String(t),!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,o=r[0]||"text/plain",s=o;for(let c=1;c<r.length;c++)r[c]==="base64"?i=!0:r[c]&&(s+=`;${r[c]}`,r[c].indexOf("charset=")===0&&(n=r[c].substring(8)));!r[0]&&!n.length&&(s+=";charset=US-ASCII",n="US-ASCII");let a=unescape(t.substring(e+1)),u=i?RZ(a):kZ(a);return{type:o,typeFull:s,charset:n,buffer:u}}og.dataUriToBuffer=OZ});var po=b((fo,sg)=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var H1=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function NZ(t){return H1.includes(t)}var BZ=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...H1];function FZ(t){return BZ.includes(t)}var UZ=["null","undefined","string","number","bigint","boolean","symbol"];function jZ(t){return UZ.includes(t)}function kc(t){return e=>typeof e===t}var{toString:g1}=Object.prototype,mp=t=>{let e=g1.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&A.domElement(t))return"HTMLElement";if(FZ(e))return e},We=t=>e=>mp(e)===t;function A(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(A.observable(t))return"Observable";if(A.array(t))return"Array";if(A.buffer(t))return"Buffer";let e=mp(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}A.undefined=kc("undefined");A.string=kc("string");var WZ=kc("number");A.number=t=>WZ(t)&&!A.nan(t);A.bigint=kc("bigint");A.function_=kc("function");A.null_=t=>t===null;A.class_=t=>A.function_(t)&&t.toString().startsWith("class ");A.boolean=t=>t===!0||t===!1;A.symbol=kc("symbol");A.numericString=t=>A.string(t)&&!A.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));A.array=(t,e)=>Array.isArray(t)?A.function_(e)?t.every(e):!0:!1;A.buffer=t=>{var e,r,n,i;return(i=(n=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||n===void 0?void 0:n.call(r,t))!==null&&i!==void 0?i:!1};A.blob=t=>We("Blob")(t);A.nullOrUndefined=t=>A.null_(t)||A.undefined(t);A.object=t=>!A.null_(t)&&(typeof t=="object"||A.function_(t));A.iterable=t=>{var e;return A.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};A.asyncIterable=t=>{var e;return A.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};A.generator=t=>{var e,r;return A.iterable(t)&&A.function_((e=t)===null||e===void 0?void 0:e.next)&&A.function_((r=t)===null||r===void 0?void 0:r.throw)};A.asyncGenerator=t=>A.asyncIterable(t)&&A.function_(t.next)&&A.function_(t.throw);A.nativePromise=t=>We("Promise")(t);var qZ=t=>{var e,r;return A.function_((e=t)===null||e===void 0?void 0:e.then)&&A.function_((r=t)===null||r===void 0?void 0:r.catch)};A.promise=t=>A.nativePromise(t)||qZ(t);A.generatorFunction=We("GeneratorFunction");A.asyncGeneratorFunction=t=>mp(t)==="AsyncGeneratorFunction";A.asyncFunction=t=>mp(t)==="AsyncFunction";A.boundFunction=t=>A.function_(t)&&!t.hasOwnProperty("prototype");A.regExp=We("RegExp");A.date=We("Date");A.error=We("Error");A.map=t=>We("Map")(t);A.set=t=>We("Set")(t);A.weakMap=t=>We("WeakMap")(t);A.weakSet=t=>We("WeakSet")(t);A.int8Array=We("Int8Array");A.uint8Array=We("Uint8Array");A.uint8ClampedArray=We("Uint8ClampedArray");A.int16Array=We("Int16Array");A.uint16Array=We("Uint16Array");A.int32Array=We("Int32Array");A.uint32Array=We("Uint32Array");A.float32Array=We("Float32Array");A.float64Array=We("Float64Array");A.bigInt64Array=We("BigInt64Array");A.bigUint64Array=We("BigUint64Array");A.arrayBuffer=We("ArrayBuffer");A.sharedArrayBuffer=We("SharedArrayBuffer");A.dataView=We("DataView");A.enumCase=(t,e)=>Object.values(e).includes(t);A.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;A.urlInstance=t=>We("URL")(t);A.urlString=t=>{if(!A.string(t))return!1;try{return new URL(t),!0}catch{return!1}};A.truthy=t=>!!t;A.falsy=t=>!t;A.nan=t=>Number.isNaN(t);A.primitive=t=>A.null_(t)||jZ(typeof t);A.integer=t=>Number.isInteger(t);A.safeInteger=t=>Number.isSafeInteger(t);A.plainObject=t=>{if(g1.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};A.typedArray=t=>NZ(mp(t));var VZ=t=>A.safeInteger(t)&&t>=0;A.arrayLike=t=>!A.nullOrUndefined(t)&&!A.function_(t)&&VZ(t.length);A.inRange=(t,e)=>{if(A.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(A.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var GZ=1,XZ=["innerHTML","ownerDocument","style","attributes","nodeValue"];A.domElement=t=>A.object(t)&&t.nodeType===GZ&&A.string(t.nodeName)&&!A.plainObject(t)&&XZ.every(e=>e in t);A.observable=t=>{var e,r,n,i;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((i=(n=t)["@@observable"])===null||i===void 0?void 0:i.call(n)):!1};A.nodeStream=t=>A.object(t)&&A.function_(t.pipe)&&!A.observable(t);A.infinite=t=>t===1/0||t===-1/0;var y1=t=>e=>A.integer(e)&&Math.abs(e%2)===t;A.evenInteger=y1(0);A.oddInteger=y1(1);A.emptyArray=t=>A.array(t)&&t.length===0;A.nonEmptyArray=t=>A.array(t)&&t.length>0;A.emptyString=t=>A.string(t)&&t.length===0;var KZ=t=>A.string(t)&&!/\S/.test(t);A.emptyStringOrWhitespace=t=>A.emptyString(t)||KZ(t);A.nonEmptyString=t=>A.string(t)&&t.length>0;A.nonEmptyStringAndNotWhitespace=t=>A.string(t)&&!A.emptyStringOrWhitespace(t);A.emptyObject=t=>A.object(t)&&!A.map(t)&&!A.set(t)&&Object.keys(t).length===0;A.nonEmptyObject=t=>A.object(t)&&!A.map(t)&&!A.set(t)&&Object.keys(t).length>0;A.emptySet=t=>A.set(t)&&t.size===0;A.nonEmptySet=t=>A.set(t)&&t.size>0;A.emptyMap=t=>A.map(t)&&t.size===0;A.nonEmptyMap=t=>A.map(t)&&t.size>0;A.propertyKey=t=>A.any([A.string,A.number,A.symbol],t);A.formData=t=>We("FormData")(t);A.urlSearchParams=t=>We("URLSearchParams")(t);var b1=(t,e,r)=>{if(!A.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};A.any=(t,...e)=>(A.array(t)?t:[t]).some(n=>b1(Array.prototype.some,n,e));A.all=(t,...e)=>b1(Array.prototype.every,t,e);var Q=(t,e,r,n={})=>{if(!t){let{multipleValues:i}=n,o=i?`received values of types ${[...new Set(r.map(s=>`\`${A(s)}\``))].join(", ")}`:`received value of type \`${A(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${o}.`)}};fo.assert={undefined:t=>Q(A.undefined(t),"undefined",t),string:t=>Q(A.string(t),"string",t),number:t=>Q(A.number(t),"number",t),bigint:t=>Q(A.bigint(t),"bigint",t),function_:t=>Q(A.function_(t),"Function",t),null_:t=>Q(A.null_(t),"null",t),class_:t=>Q(A.class_(t),"Class",t),boolean:t=>Q(A.boolean(t),"boolean",t),symbol:t=>Q(A.symbol(t),"symbol",t),numericString:t=>Q(A.numericString(t),"string with a number",t),array:(t,e)=>{Q(A.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>Q(A.buffer(t),"Buffer",t),blob:t=>Q(A.blob(t),"Blob",t),nullOrUndefined:t=>Q(A.nullOrUndefined(t),"null or undefined",t),object:t=>Q(A.object(t),"Object",t),iterable:t=>Q(A.iterable(t),"Iterable",t),asyncIterable:t=>Q(A.asyncIterable(t),"AsyncIterable",t),generator:t=>Q(A.generator(t),"Generator",t),asyncGenerator:t=>Q(A.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>Q(A.nativePromise(t),"native Promise",t),promise:t=>Q(A.promise(t),"Promise",t),generatorFunction:t=>Q(A.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>Q(A.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>Q(A.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>Q(A.boundFunction(t),"Function",t),regExp:t=>Q(A.regExp(t),"RegExp",t),date:t=>Q(A.date(t),"Date",t),error:t=>Q(A.error(t),"Error",t),map:t=>Q(A.map(t),"Map",t),set:t=>Q(A.set(t),"Set",t),weakMap:t=>Q(A.weakMap(t),"WeakMap",t),weakSet:t=>Q(A.weakSet(t),"WeakSet",t),int8Array:t=>Q(A.int8Array(t),"Int8Array",t),uint8Array:t=>Q(A.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>Q(A.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>Q(A.int16Array(t),"Int16Array",t),uint16Array:t=>Q(A.uint16Array(t),"Uint16Array",t),int32Array:t=>Q(A.int32Array(t),"Int32Array",t),uint32Array:t=>Q(A.uint32Array(t),"Uint32Array",t),float32Array:t=>Q(A.float32Array(t),"Float32Array",t),float64Array:t=>Q(A.float64Array(t),"Float64Array",t),bigInt64Array:t=>Q(A.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>Q(A.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>Q(A.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>Q(A.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>Q(A.dataView(t),"DataView",t),enumCase:(t,e)=>Q(A.enumCase(t,e),"EnumCase",t),urlInstance:t=>Q(A.urlInstance(t),"URL",t),urlString:t=>Q(A.urlString(t),"string with a URL",t),truthy:t=>Q(A.truthy(t),"truthy",t),falsy:t=>Q(A.falsy(t),"falsy",t),nan:t=>Q(A.nan(t),"NaN",t),primitive:t=>Q(A.primitive(t),"primitive",t),integer:t=>Q(A.integer(t),"integer",t),safeInteger:t=>Q(A.safeInteger(t),"integer",t),plainObject:t=>Q(A.plainObject(t),"plain object",t),typedArray:t=>Q(A.typedArray(t),"TypedArray",t),arrayLike:t=>Q(A.arrayLike(t),"array-like",t),domElement:t=>Q(A.domElement(t),"HTMLElement",t),observable:t=>Q(A.observable(t),"Observable",t),nodeStream:t=>Q(A.nodeStream(t),"Node.js Stream",t),infinite:t=>Q(A.infinite(t),"infinite number",t),emptyArray:t=>Q(A.emptyArray(t),"empty array",t),nonEmptyArray:t=>Q(A.nonEmptyArray(t),"non-empty array",t),emptyString:t=>Q(A.emptyString(t),"empty string",t),emptyStringOrWhitespace:t=>Q(A.emptyStringOrWhitespace(t),"empty string or whitespace",t),nonEmptyString:t=>Q(A.nonEmptyString(t),"non-empty string",t),nonEmptyStringAndNotWhitespace:t=>Q(A.nonEmptyStringAndNotWhitespace(t),"non-empty string and not whitespace",t),emptyObject:t=>Q(A.emptyObject(t),"empty object",t),nonEmptyObject:t=>Q(A.nonEmptyObject(t),"non-empty object",t),emptySet:t=>Q(A.emptySet(t),"empty set",t),nonEmptySet:t=>Q(A.nonEmptySet(t),"non-empty set",t),emptyMap:t=>Q(A.emptyMap(t),"empty map",t),nonEmptyMap:t=>Q(A.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>Q(A.propertyKey(t),"PropertyKey",t),formData:t=>Q(A.formData(t),"FormData",t),urlSearchParams:t=>Q(A.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>Q(A.evenInteger(t),"even integer",t),oddInteger:t=>Q(A.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>Q(A.directInstanceOf(t,e),"T",t),inRange:(t,e)=>Q(A.inRange(t,e),"in range",t),any:(t,...e)=>Q(A.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>Q(A.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(A,{class:{value:A.class_},function:{value:A.function_},null:{value:A.null_}});Object.defineProperties(fo.assert,{class:{value:fo.assert.class_},function:{value:fo.assert.function_},null:{value:fo.assert.null_}});fo.default=A;sg.exports=A;sg.exports.default=A;sg.exports.assert=fo.assert});var v1=b((P0e,RI)=>{"use strict";var ag=class extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}},ug=class t{static fn(e){return(...r)=>new t((n,i,o)=>{r.push(o),e(...r).then(n,i)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,n)=>{this._reject=n;let i=a=>{(!this._isCanceled||!s.shouldReject)&&(this._isPending=!1,r(a))},o=a=>{this._isPending=!1,n(a)},s=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),e(i,o,s)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new ag(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(ug.prototype,Promise.prototype);RI.exports=ug;RI.exports.CancelError=ag});var _1=b((OI,NI)=>{"use strict";Object.defineProperty(OI,"__esModule",{value:!0});function zZ(t){return t.encrypted}var kI=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let n=typeof r.connect=="function",i=typeof r.secureConnect=="function",o=typeof r.close=="function",s=()=>{n&&r.connect(),zZ(t)&&i&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),o&&t.once("close",r.close)};t.writable&&!t.connecting?s():t.connecting?t.once("connect",s):t.destroyed&&o&&r.close(t._hadError)};OI.default=kI;NI.exports=kI;NI.exports.default=kI});var w1=b((FI,UI)=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});var JZ=_1(),YZ=require("util"),QZ=Number(process.versions.node.split(".")[0]),BI=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=a=>{let u=a.emit.bind(a);a.emit=(c,...l)=>(c==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,a.emit=u),u(c,...l))};r(t);let n=()=>{e.abort=Date.now(),(!e.response||QZ>=13)&&(e.phases.total=Date.now()-e.start)};t.prependOnceListener("abort",n);let i=a=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,YZ.types.isProxy(a))return;let u=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};a.prependOnceListener("lookup",u),JZ.default(a,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(a.removeListener("lookup",u),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?i(t.socket):t.prependOnceListener("socket",i);let o=()=>{var a;e.upload=Date.now(),e.phases.request=e.upload-((a=e.secureConnect)!==null&&a!==void 0?a:e.connect)};return(()=>typeof t.writableFinished=="boolean"?t.writableFinished:t.finished&&t.outputSize===0&&(!t.socket||t.socket.writableLength===0))()?o():t.prependOnceListener("finish",o),t.prependOnceListener("response",a=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,a.timings=e,r(a),a.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),a.prependOnceListener("aborted",n)}),e};FI.default=BI;UI.exports=BI;UI.exports.default=BI});var x1=b((x0e,qI)=>{"use strict";var{V4MAPPED:ZZ,ADDRCONFIG:eee,ALL:P1,promises:{Resolver:I1},lookup:tee}=require("dns"),{promisify:jI}=require("util"),ree=require("os"),Oc=Symbol("cacheableLookupCreateConnection"),WI=Symbol("cacheableLookupInstance"),A1=Symbol("expires"),nee=typeof P1=="number",S1=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},iee=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},E1=()=>{let t=!1,e=!1;for(let r of Object.values(ree.networkInterfaces()))for(let n of r)if(!n.internal&&(n.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},oee=t=>Symbol.iterator in t,L1={ttl:!0},see={all:!0},cg=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:n=3600,errorTtl:i=.15,resolver:o=new I1,lookup:s=tee}={}){if(this.maxTtl=r,this.errorTtl=i,this._cache=e,this._resolver=o,this._dnsLookup=jI(s),this._resolver instanceof I1?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=jI(this._resolver.resolve4.bind(this._resolver)),this._resolve6=jI(this._resolver.resolve6.bind(this._resolver))),this._iface=E1(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,n<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},n*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,n){if(typeof r=="function"?(n=r,r={}):typeof r=="number"&&(r={family:r}),!n)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(i=>{r.all?n(null,i):n(null,i.address,i.family,i.expires,i.ttl)},n)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let n=await this.query(e);if(r.family===6){let i=n.filter(o=>o.family===6);r.hints&ZZ&&(nee&&r.hints&P1||i.length===0)?iee(n):n=i}else r.family===4&&(n=n.filter(i=>i.family===4));if(r.hints&eee){let{_iface:i}=this;n=n.filter(o=>o.family===6?i.has6:i.has4)}if(n.length===0){let i=new Error(`cacheableLookup ENOTFOUND ${e}`);throw i.code="ENOTFOUND",i.hostname=e,i}return r.all?n:n[0]}async query(e){let r=await this._cache.get(e);if(!r){let n=this._pending[e];if(n)r=await n;else{let i=this.queryAndCache(e);this._pending[e]=i;try{r=await i}finally{delete this._pending[e]}}}return r=r.map(n=>({...n})),r}async _resolve(e){let r=async c=>{try{return await c}catch(l){if(l.code==="ENODATA"||l.code==="ENOTFOUND")return[];throw l}},[n,i]=await Promise.all([this._resolve4(e,L1),this._resolve6(e,L1)].map(c=>r(c))),o=0,s=0,a=0,u=Date.now();for(let c of n)c.family=4,c.expires=u+c.ttl*1e3,o=Math.max(o,c.ttl);for(let c of i)c.family=6,c.expires=u+c.ttl*1e3,s=Math.max(s,c.ttl);return n.length>0?i.length>0?a=Math.min(o,s):a=o:a=s,{entries:[...n,...i],cacheTtl:a}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,n){if(this.maxTtl>0&&n>0){n=Math.min(n,this.maxTtl)*1e3,r[A1]=Date.now()+n;try{await this._cache.set(e,r,n)}catch(i){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=i,o}}oee(this._cache)&&this._tick(n)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,see);let r=await this._resolve(e);r.entries.length===0&&this._fallback&&(r=await this._lookup(e),r.entries.length!==0&&this._hostnamesToFallback.add(e));let n=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,n),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let n=1/0,i=Date.now();for(let[o,s]of this._cache){let a=s[A1];i>=a?this._cache.delete(o):a<n&&(n=a)}n!==1/0&&this._tick(n-i)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(S1(e),Oc in e)throw new Error("CacheableLookup has been already installed");e[Oc]=e.createConnection,e[WI]=this,e.createConnection=(r,n)=>("lookup"in r||(r.lookup=this.lookup),e[Oc](r,n))}uninstall(e){if(S1(e),e[Oc]){if(e[WI]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[Oc],delete e[Oc],delete e[WI]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=E1(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};qI.exports=cg;qI.exports.default=cg});var T1=b((C0e,D1)=>{"use strict";var aee="text/plain",uee="us-ascii",C1=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),cee=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,s=n.split(";");o=e?"":o;let a=!1;s[s.length-1]==="base64"&&(s.pop(),a=!0);let u=(s.shift()||"").toLowerCase(),l=[...s.map(f=>{let[p,m=""]=f.split("=").map(h=>h.trim());return p==="charset"&&(m=m.toLowerCase(),m===uee)?"":`${p}${m?`=${m}`:""}`}).filter(Boolean)];return a&&l.push("base64"),(l.length!==0||u&&u!==aee)&&l.unshift(u),`data:${l.join(";")},${a?i.trim():i}${o?`#${o}`:""}`},lee=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return cee(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname&&(i.pathname=i.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];C1(a,e.removeDirectoryIndex)&&(s=s.slice(0,s.length-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let s of[...i.searchParams.keys()])C1(s,e.removeQueryParameters)&&i.searchParams.delete(s);e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters&&i.searchParams.sort(),e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};D1.exports=lee});var VI=b((D0e,M1)=>{M1.exports=$1;function $1(t,e){if(t&&e)return $1(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(n){r[n]=t[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var o=t.apply(this,n),s=n[n.length-1];return typeof o=="function"&&o!==s&&Object.keys(s).forEach(function(a){o[a]=s[a]}),o}}});var Nc=b((T0e,GI)=>{var R1=VI();GI.exports=R1(lg);GI.exports.strict=R1(k1);lg.proto=lg(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return lg(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return k1(this)},configurable:!0})});function lg(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function k1(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var fg=b(($0e,N1)=>{var fee=Nc(),pee=function(){},dee=function(t){return t.setHeader&&typeof t.abort=="function"},hee=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},O1=function(t,e,r){if(typeof e=="function")return O1(t,null,e);e||(e={}),r=fee(r||pee);var n=t._writableState,i=t._readableState,o=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,a=!1,u=function(){t.writable||c()},c=function(){s=!1,o||r.call(t)},l=function(){o=!1,s||r.call(t)},f=function(y){r.call(t,y?new Error("exited with error code: "+y):null)},p=function(y){r.call(t,y)},m=function(){process.nextTick(h)},h=function(){if(!a){if(o&&!(i&&i.ended&&!i.destroyed))return r.call(t,new Error("premature close"));if(s&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"))}},g=function(){t.req.on("finish",c)};return dee(t)?(t.on("complete",c),t.on("abort",m),t.req?g():t.on("request",g)):s&&!n&&(t.on("end",u),t.on("close",u)),hee(t)&&t.on("exit",f),t.on("end",l),t.on("finish",c),e.error!==!1&&t.on("error",p),t.on("close",m),function(){a=!0,t.removeListener("complete",c),t.removeListener("abort",m),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("exit",f),t.removeListener("end",l),t.removeListener("error",p),t.removeListener("close",m)}};N1.exports=O1});var U1=b((M0e,F1)=>{var mee=Nc(),Hee=fg(),XI=require("fs"),Hp=function(){},gee=/^v?\.0/.test(process.version),pg=function(t){return typeof t=="function"},yee=function(t){return!gee||!XI?!1:(t instanceof(XI.ReadStream||Hp)||t instanceof(XI.WriteStream||Hp))&&pg(t.close)},bee=function(t){return t.setHeader&&pg(t.abort)},vee=function(t,e,r,n){n=mee(n);var i=!1;t.on("close",function(){i=!0}),Hee(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,yee(t))return t.close(Hp);if(bee(t))return t.abort();if(pg(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},B1=function(t){t()},_ee=function(t,e){return t.pipe(e)},wee=function(){var t=Array.prototype.slice.call(arguments),e=pg(t[t.length-1]||Hp)&&t.pop()||Hp;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return vee(i,s,a,function(u){r||(r=u),u&&n.forEach(B1),!s&&(n.forEach(B1),e(r))})});return t.reduce(_ee)};F1.exports=wee});var W1=b((R0e,j1)=>{"use strict";var{PassThrough:Iee}=require("stream");j1.exports=t=>{t={...t};let{array:e}=t,{encoding:r}=t,n=r==="buffer",i=!1;e?i=!(r||n):r=r||"utf8",n&&(r=null);let o=new Iee({objectMode:i});r&&o.setEncoding(r);let s=0,a=[];return o.on("data",u=>{a.push(u),i?s=a.length:s+=u.length}),o.getBufferedValue=()=>e?a:n?Buffer.concat(a,s):a.join(""),o.getBufferedLength=()=>s,o}});var q1=b((k0e,Bc)=>{"use strict";var{constants:Aee}=require("buffer"),See=U1(),Eee=W1(),dg=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function hg(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e={maxBuffer:1/0,...e};let{maxBuffer:r}=e,n;return await new Promise((i,o)=>{let s=a=>{a&&n.getBufferedLength()<=Aee.MAX_LENGTH&&(a.bufferedData=n.getBufferedValue()),o(a)};n=See(t,Eee(e),a=>{if(a){s(a);return}i()}),n.on("data",()=>{n.getBufferedLength()>r&&s(new dg)})}),n.getBufferedValue()}Bc.exports=hg;Bc.exports.default=hg;Bc.exports.buffer=(t,e)=>hg(t,{...e,encoding:"buffer"});Bc.exports.array=(t,e)=>hg(t,{...e,array:!0});Bc.exports.MaxBufferError=dg});var G1=b((N0e,V1)=>{"use strict";var Lee=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Pee=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),xee=new Set([500,502,503,504]),Cee={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Dee={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Da(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Tee(t){return t?xee.has(t.status):!0}function KI(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}function $ee(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}V1.exports=class{constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:s,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=KI(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=KI(e.headers["cache-control"]),s&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":$ee(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Pee.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Lee.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=KI(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Cee[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return Da(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Da(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Da(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+Da(this._rescc["stale-if-error"]),n=e+Da(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Da(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Da(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Tee(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let s in this._resHeaders)i[s]=s in r.headers&&!Dee[s]?r.headers[s]:this._resHeaders[s];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var mg=b((B0e,X1)=>{"use strict";X1.exports=t=>{let e={};for(let[r,n]of Object.entries(t))e[r.toLowerCase()]=n;return e}});var z1=b((F0e,K1)=>{"use strict";var Mee=require("stream").Readable,Ree=mg(),zI=class extends Mee{constructor(e,r,n,i){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(n instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof i!="string")throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=Ree(r),this.body=n,this.url=i}_read(){this.push(this.body),this.push(null)}};K1.exports=zI});var Y1=b((U0e,J1)=>{"use strict";var kee=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];J1.exports=(t,e)=>{let r=new Set(Object.keys(t).concat(kee));for(let n of r)n in e||(e[n]=typeof t[n]=="function"?t[n].bind(t):t[n])}});var Z1=b((j0e,Q1)=>{"use strict";var Oee=require("stream").PassThrough,Nee=Y1(),Bee=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new Oee;return Nee(t,e),t.pipe(e)};Q1.exports=Bee});var eO=b(JI=>{JI.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",n=Array.isArray(e);r=n?"[":"{";var i=!0;for(var o in e){var s=typeof e[o]=="function"||!n&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!s&&(i||(r+=","),i=!1,n?e[o]==null?r+="null":r+=t(e[o]):e[o]!==void 0&&(r+=t(o)+":"+t(e[o])))}return r+=n?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};JI.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var iO=b((q0e,nO)=>{"use strict";var Fee=require("events"),tO=eO(),Uee=t=>{let e={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(t.adapter||t.uri){let r=t.adapter||/^[^:+]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},rO=["sqlite","postgres","mysql","mongo","redis","tiered"],YI=class extends Fee{constructor(e,{emitErrors:r=!0,...n}={}){if(super(),this.opts={namespace:"keyv",serialize:tO.stringify,deserialize:tO.parse,...typeof e=="string"?{uri:e}:e,...n},!this.opts.store){let o={...this.opts};this.opts.store=Uee(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let i=o=>async function*(){for await(let[s,a]of typeof o=="function"?o(this.opts.store.namespace):o){let u=this.opts.deserialize(a);if(!(this.opts.store.namespace&&!s.includes(this.opts.store.namespace))){if(typeof u.expires=="number"&&Date.now()>u.expires){this.delete(s);continue}yield[this._getKeyUnprefix(s),u.value]}}};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=i(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=i(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return rO.includes(this.opts.store.opts.dialect)||rO.findIndex(e=>this.opts.store.opts.url.includes(e))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,r){let{store:n}=this.opts,i=Array.isArray(e),o=i?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(i&&n.getMany===void 0){let s=[];for(let a of o)s.push(Promise.resolve().then(()=>n.get(a)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(a).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(s).then(a=>{let u=[];for(let c of a)u.push(c.value);return u})}return Promise.resolve().then(()=>i?n.getMany(o):n.get(o)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null){if(i){let a=[];for(let u of s){if(typeof u=="string"&&(u=this.opts.deserialize(u)),u==null){a.push(void 0);continue}typeof u.expires=="number"&&Date.now()>u.expires?(this.delete(e).then(()=>{}),a.push(void 0)):a.push(r&&r.raw?u:u.value)}return a}return typeof s.expires=="number"&&Date.now()>s.expires?this.delete(e).then(()=>{}):r&&r.raw?s:s.value}})}set(e,r,n){let i=this._getKeyPrefix(e);typeof n>"u"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:s},this.opts.serialize(r)}).then(s=>o.set(i,s,n)).then(()=>!0)}delete(e){let{store:r}=this.opts;if(Array.isArray(e)){let i=this._getKeyPrefixArray(e);if(r.deleteMany===void 0){let o=[];for(let s of i)o.push(r.delete(s));return Promise.allSettled(o).then(s=>s.every(a=>a.value===!0))}return Promise.resolve().then(()=>r.deleteMany(i))}let n=this._getKeyPrefix(e);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}has(e){let r=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(async()=>typeof n.has=="function"?n.has(r):await n.get(r)!==void 0)}disconnect(){let{store:e}=this.opts;if(typeof e.disconnect=="function")return e.disconnect()}};nO.exports=YI});var aO=b((V0e,sO)=>{"use strict";var jee=require("events"),Hg=require("url"),Wee=T1(),qee=q1(),QI=G1(),oO=z1(),Vee=mg(),Gee=Z1(),Xee=iO(),gp=class t{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new Xee({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,n)=>{let i;if(typeof r=="string")i=ZI(Hg.parse(r)),r={};else if(r instanceof Hg.URL)i=ZI(Hg.parse(r.toString())),r={};else{let[f,...p]=(r.path||"").split("?"),m=p.length>0?`?${p.join("?")}`:"";i=ZI({...r,pathname:f,search:m})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Kee(i)},r.headers=Vee(r.headers);let o=new jee,s=Wee(Hg.format(i),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${s}`,u=!1,c=!1,l=f=>{c=!0;let p=!1,m,h=new Promise(y=>{m=()=>{p||(p=!0,y())}}),g=y=>{if(u&&!f.forceRefresh){y.status=y.statusCode;let C=QI.fromObject(u.cachePolicy).revalidatedPolicy(f,y);if(!C.modified){let N=C.policy.responseHeaders();y=new oO(u.statusCode,N,u.body,u.url),y.cachePolicy=C.policy,y.fromCache=!0}}y.fromCache||(y.cachePolicy=new QI(f,y,f),y.fromCache=!1);let _;f.cache&&y.cachePolicy.storable()?(_=Gee(y),(async()=>{try{let C=qee.buffer(y);if(await Promise.race([h,new Promise(X=>y.once("end",X))]),p)return;let N=await C,D={cachePolicy:y.cachePolicy.toObject(),url:y.url,statusCode:y.fromCache?u.statusCode:y.statusCode,body:N},j=f.strictTtl?y.cachePolicy.timeToLive():void 0;f.maxTtl&&(j=j?Math.min(j,f.maxTtl):f.maxTtl),await this.cache.set(a,D,j)}catch(C){o.emit("error",new t.CacheError(C))}})()):f.cache&&u&&(async()=>{try{await this.cache.delete(a)}catch(C){o.emit("error",new t.CacheError(C))}})(),o.emit("response",_||y),typeof n=="function"&&n(_||y)};try{let y=e(f,g);y.once("error",m),y.once("abort",m),o.emit("request",y)}catch(y){o.emit("error",new t.RequestError(y))}};return(async()=>{let f=async m=>{await Promise.resolve();let h=m.cache?await this.cache.get(a):void 0;if(typeof h>"u")return l(m);let g=QI.fromObject(h.cachePolicy);if(g.satisfiesWithoutRevalidation(m)&&!m.forceRefresh){let y=g.responseHeaders(),_=new oO(h.statusCode,y,h.body,h.url);_.cachePolicy=g,_.fromCache=!0,o.emit("response",_),typeof n=="function"&&n(_)}else u=h,m.headers=g.revalidationHeaders(m),l(m)},p=m=>o.emit("error",new t.CacheError(m));this.cache.once("error",p),o.on("response",()=>this.cache.removeListener("error",p));try{await f(r)}catch(m){r.automaticFailover&&!c&&l(r),o.emit("error",new t.CacheError(m))}})(),o}}};function Kee(t){let e={...t};return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function ZI(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}gp.RequestError=class extends Error{constructor(t){super(t.message),this.name="RequestError",Object.assign(this,t)}};gp.CacheError=class extends Error{constructor(t){super(t.message),this.name="CacheError",Object.assign(this,t)}};sO.exports=gp});var cO=b((K0e,uO)=>{"use strict";var zee=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];uO.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(zee)),n={};for(let i of r)i in e||(n[i]={get(){let o=t[i];return typeof o=="function"?o.bind(t):o},set(o){t[i]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,n),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var fO=b((z0e,lO)=>{"use strict";var{Transform:Jee,PassThrough:Yee}=require("stream"),eA=require("zlib"),Qee=cO();lO.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof eA.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let n=!0,i=new Jee({transform(a,u,c){n=!1,c(null,a)},flush(a){a()}}),o=new Yee({autoDestroy:!1,destroy(a,u){t.destroy(),u(a)}}),s=r?eA.createBrotliDecompress():eA.createUnzip();return s.once("error",a=>{if(n&&!t.readable){o.end();return}o.destroy(a)}),Qee(t,o),t.pipe(i).pipe(s).pipe(o),o}});var rA=b((J0e,pO)=>{"use strict";var tA=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[n,i]of this.oldCache.entries())this.onEviction(n,i);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};pO.exports=tA});var iA=b((Y0e,HO)=>{"use strict";var Zee=require("events"),ete=require("tls"),tte=require("http2"),rte=rA(),wr=Symbol("currentStreamsCount"),dO=Symbol("request"),mn=Symbol("cachedOriginSet"),Fc=Symbol("gracefullyClosing"),nte=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],ite=(t,e,r)=>{let n=0,i=t.length;for(;n<i;){let o=n+i>>>1;r(t[o],e)?n=o+1:i=o}return n},ote=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,nA=(t,e)=>{for(let r of t)r[mn].length<e[mn].length&&r[mn].every(n=>e[mn].includes(n))&&r[wr]+e[wr]<=e.remoteSettings.maxConcurrentStreams&&mO(r)},ste=(t,e)=>{for(let r of t)e[mn].length<r[mn].length&&e[mn].every(n=>r[mn].includes(n))&&e[wr]+r[wr]<=r.remoteSettings.maxConcurrentStreams&&mO(e)},hO=({agent:t,isFree:e})=>{let r={};for(let n in t.sessions){let o=t.sessions[n].filter(s=>{let a=s[Ta.kCurrentStreamsCount]<s.remoteSettings.maxConcurrentStreams;return e?a:!a});o.length!==0&&(r[n]=o)}return r},mO=t=>{t[Fc]=!0,t[wr]===0&&t.close()},Ta=class t extends Zee{constructor({timeout:e=6e4,maxSessions:r=1/0,maxFreeSessions:n=10,maxCachedTlsSessions:i=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxFreeSessions=n,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new rte({maxSize:i})}static normalizeOrigin(e,r){return typeof e=="string"&&(e=new URL(e)),r&&e.hostname!==r&&(e.hostname=r),e.origin}normalizeOptions(e){let r="";if(e)for(let n of nte)e[n]&&(r+=`:${e[n]}`);return r}_tryToCreateNewSession(e,r){if(!(e in this.queue)||!(r in this.queue[e]))return;let n=this.queue[e][r];this._sessionsCount<this.maxSessions&&!n.completed&&(n.completed=!0,n())}getSession(e,r,n){return new Promise((i,o)=>{Array.isArray(n)?(n=[...n],i()):n=[{resolve:i,reject:o}];let s=this.normalizeOptions(r),a=t.normalizeOrigin(e,r&&r.servername);if(a===void 0){for(let{reject:l}of n)l(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(s in this.sessions){let l=this.sessions[s],f=-1,p=-1,m;for(let h of l){let g=h.remoteSettings.maxConcurrentStreams;if(g<f)break;if(h[mn].includes(a)){let y=h[wr];if(y>=g||h[Fc]||h.destroyed)continue;m||(f=g),y>p&&(m=h,p=y)}}if(m){if(n.length!==1){for(let{reject:h}of n){let g=new Error(`Expected the length of listeners to be 1, got ${n.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);h(g)}return}n[0].resolve(m);return}}if(s in this.queue){if(a in this.queue[s]){this.queue[s][a].listeners.push(...n),this._tryToCreateNewSession(s,a);return}}else this.queue[s]={};let u=()=>{s in this.queue&&this.queue[s][a]===c&&(delete this.queue[s][a],Object.keys(this.queue[s]).length===0&&delete this.queue[s])},c=()=>{let l=`${a}:${s}`,f=!1;try{let p=tte.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(l),...r});p[wr]=0,p[Fc]=!1;let m=()=>p[wr]<p.remoteSettings.maxConcurrentStreams,h=!0;p.socket.once("session",y=>{this.tlsSessionCache.set(l,y)}),p.once("error",y=>{for(let{reject:_}of n)_(y);this.tlsSessionCache.delete(l)}),p.setTimeout(this.timeout,()=>{p.destroy()}),p.once("close",()=>{if(f){h&&this._freeSessionsCount--,this._sessionsCount--;let y=this.sessions[s];y.splice(y.indexOf(p),1),y.length===0&&delete this.sessions[s]}else{let y=new Error("Session closed without receiving a SETTINGS frame");y.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:_}of n)_(y);u()}this._tryToCreateNewSession(s,a)});let g=()=>{if(!(!(s in this.queue)||!m())){for(let y of p[mn])if(y in this.queue[s]){let{listeners:_}=this.queue[s][y];for(;_.length!==0&&m();)_.shift().resolve(p);let C=this.queue[s];if(C[y].listeners.length===0&&(delete C[y],Object.keys(C).length===0)){delete this.queue[s];break}if(!m())break}}};p.on("origin",()=>{p[mn]=p.originSet,m()&&(g(),nA(this.sessions[s],p))}),p.once("remoteSettings",()=>{if(p.ref(),p.unref(),this._sessionsCount++,c.destroyed){let y=new Error("Agent has been destroyed");for(let _ of n)_.reject(y);p.destroy();return}p[mn]=p.originSet;{let y=this.sessions;if(s in y){let _=y[s];_.splice(ite(_,p,ote),0,p)}else y[s]=[p]}this._freeSessionsCount+=1,f=!0,this.emit("session",p),g(),u(),p[wr]===0&&this._freeSessionsCount>this.maxFreeSessions&&p.close(),n.length!==0&&(this.getSession(a,r,n),n.length=0),p.on("remoteSettings",()=>{g(),nA(this.sessions[s],p)})}),p[dO]=p.request,p.request=(y,_)=>{if(p[Fc])throw new Error("The session is gracefully closing. No new streams are allowed.");let C=p[dO](y,_);return p.ref(),++p[wr],p[wr]===p.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,C.once("close",()=>{if(h=m(),--p[wr],!p.destroyed&&!p.closed&&(ste(this.sessions[s],p),m()&&!p.closed)){h||(this._freeSessionsCount++,h=!0);let N=p[wr]===0;N&&p.unref(),N&&(this._freeSessionsCount>this.maxFreeSessions||p[Fc])?p.close():(nA(this.sessions[s],p),g())}}),C}}catch(p){for(let m of n)m.reject(p);u()}};c.listeners=n,c.completed=!1,c.destroyed=!1,this.queue[s][a]=c,this._tryToCreateNewSession(s,a)})}request(e,r,n,i){return new Promise((o,s)=>{this.getSession(e,r,[{reject:s,resolve:a=>{try{o(a.request(n,i))}catch(u){s(u)}}}])})}createConnection(e,r){return t.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let n=e.port||443,i=e.hostname||e.host;return typeof r.servername>"u"&&(r.servername=i),ete.connect(n,i,r)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let r of e)r[wr]===0&&r.close()}destroy(e){for(let r of Object.values(this.sessions))for(let n of r)n.destroy(e);for(let r of Object.values(this.queue))for(let n of Object.values(r))n.destroyed=!0;this.queue={}}get freeSessions(){return hO({agent:this,isFree:!0})}get busySessions(){return hO({agent:this,isFree:!1})}};Ta.kCurrentStreamsCount=wr;Ta.kGracefullyClosing=Fc;HO.exports={Agent:Ta,globalAgent:new Ta}});var sA=b((Q0e,gO)=>{"use strict";var{Readable:ate}=require("stream"),oA=class extends ate{constructor(e,r){super({highWaterMark:r,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};gO.exports=oA});var aA=b((Z0e,yO)=>{"use strict";yO.exports=t=>{let e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return typeof t.port=="string"&&t.port.length!==0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var vO=b((eEe,bO)=>{"use strict";bO.exports=(t,e,r)=>{for(let n of r)t.on(n,(...i)=>e.emit(n,...i))}});var wO=b((tEe,_O)=>{"use strict";_O.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var AO=b((nEe,IO)=>{"use strict";var Uc=(t,e,r)=>{IO.exports[e]=class extends t{constructor(...i){super(typeof r=="string"?r:r(i)),this.name=`${super.name} [${e}]`,this.code=e}}};Uc(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],n=Array.isArray(r);return n&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${n?"one of":"of"} type ${r}. Received ${typeof t[2]}`});Uc(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);Uc(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);Uc(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);Uc(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);Uc(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`)});var pA=b((iEe,DO)=>{"use strict";var ute=require("http2"),{Writable:cte}=require("stream"),{Agent:SO,globalAgent:lte}=iA(),fte=sA(),pte=aA(),dte=vO(),hte=wO(),{ERR_INVALID_ARG_TYPE:uA,ERR_INVALID_PROTOCOL:mte,ERR_HTTP_HEADERS_SENT:EO,ERR_INVALID_HTTP_TOKEN:Hte,ERR_HTTP_INVALID_HEADER_VALUE:gte,ERR_INVALID_CHAR:yte}=AO(),{HTTP2_HEADER_STATUS:LO,HTTP2_HEADER_METHOD:PO,HTTP2_HEADER_PATH:xO,HTTP2_METHOD_CONNECT:bte}=ute.constants,pr=Symbol("headers"),cA=Symbol("origin"),lA=Symbol("session"),CO=Symbol("options"),gg=Symbol("flushedHeaders"),yp=Symbol("jobs"),vte=/^[\^`\-\w!#$%&*+.|~]+$/,_te=/[^\t\u0020-\u007E\u0080-\u00FF]/,fA=class extends cte{constructor(e,r,n){super({autoDestroy:!1});let i=typeof e=="string"||e instanceof URL;if(i&&(e=pte(e instanceof URL?e:new URL(e))),typeof r=="function"||r===void 0?(n=r,r=i?e:{...e}):r={...e,...r},r.h2session)this[lA]=r.h2session;else if(r.agent===!1)this.agent=new SO({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new SO({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=lte;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new uA("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new mte(r.protocol,"https:");let o=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,s=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[pr]=Object.create(null),this[yp]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[u,c]of Object.entries(r.headers))this.setHeader(u,c);r.auth&&!("authorization"in this[pr])&&(this[pr].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[CO]=r,o===443?(this[cA]=`https://${s}`,":authority"in this[pr]||(this[pr][":authority"]=s)):(this[cA]=`https://${s}:${o}`,":authority"in this[pr]||(this[pr][":authority"]=`${s}:${o}`)),a&&this.setTimeout(a),n&&this.once("response",n),this[gg]=!1}get method(){return this[pr][PO]}set method(e){e&&(this[pr][PO]=e.toUpperCase())}get path(){return this[pr][xO]}set path(e){e&&(this[pr][xO]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,n){if(this._mustNotHaveABody){n(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let i=()=>this._request.write(e,r,n);this._request?i():this[yp].push(i)}_final(e){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?r():this[yp].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(e)}async flushHeaders(){if(this[gg]||this.destroyed)return;this[gg]=!0;let e=this.method===bte,r=n=>{if(this._request=n,this.destroyed){n.destroy();return}e||dte(n,this,["timeout","continue","close","error"]);let i=s=>(...a)=>{!this.writable&&!this.destroyed?s(...a):this.once("finish",()=>{s(...a)})};n.once("response",i((s,a,u)=>{let c=new fte(this.socket,n.readableHighWaterMark);this.res=c,c.req=this,c.statusCode=s[LO],c.headers=s,c.rawHeaders=u,c.once("end",()=>{this.aborted?(c.aborted=!0,c.emit("aborted")):(c.complete=!0,c.socket=null,c.connection=null)}),e?(c.upgrade=!0,this.emit("connect",c,n,Buffer.alloc(0))?this.emit("close"):n.destroy()):(n.on("data",l=>{!c._dumped&&!c.push(l)&&n.pause()}),n.once("end",()=>{c.push(null)}),this.emit("response",c)||c._dump())})),n.once("headers",i(s=>this.emit("information",{statusCode:s[LO]}))),n.once("trailers",i((s,a,u)=>{let{res:c}=this;c.trailers=s,c.rawTrailers=u}));let{socket:o}=n.session;this.socket=o,this.connection=o;for(let s of this[yp])s();this.emit("socket",this.socket)};if(this[lA])try{r(this[lA].request(this[pr]))}catch(n){this.emit("error",n)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[cA],this[CO],this[pr]))}catch(n){this.emit("error",n)}}}getHeader(e){if(typeof e!="string")throw new uA("name","string",e);return this[pr][e.toLowerCase()]}get headersSent(){return this[gg]}removeHeader(e){if(typeof e!="string")throw new uA("name","string",e);if(this.headersSent)throw new EO("remove");delete this[pr][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new EO("set");if(typeof e!="string"||!vte.test(e)&&!hte(e))throw new Hte("Header name",e);if(typeof r>"u")throw new gte(r,e);if(_te.test(r))throw new yte("header content",e);this[pr][e.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let n=()=>this._request.setTimeout(e,r);return this._request?n():this[yp].push(n),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};DO.exports=fA});var $O=b((oEe,TO)=>{"use strict";var wte=require("tls");TO.exports=(t={},e=wte.connect)=>new Promise((r,n)=>{let i=!1,o,s=async()=>{await u,o.off("timeout",a),o.off("error",n),t.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:i}),i&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:i}))},a=async()=>{i=!0,s()},u=(async()=>{try{o=await e(t,s),o.on("error",n),o.once("timeout",a)}catch(c){n(c)}})()})});var RO=b((sEe,MO)=>{"use strict";var Ite=require("net");MO.exports=t=>{let e=t.host,r=t.headers&&t.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?e=r:e=r.slice(1,-1):e=r.split(":",1)[0]),Ite.isIP(e)?"":e}});var NO=b((aEe,hA)=>{"use strict";var kO=require("http"),dA=require("https"),Ate=$O(),Ste=rA(),Ete=pA(),Lte=RO(),Pte=aA(),yg=new Ste({maxSize:100}),bp=new Map,OO=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let n=()=>{t.emit("free",e,r)};e.on("free",n);let i=()=>{t.removeSocket(e,r)};e.on("close",i);let o=()=>{t.removeSocket(e,r),e.off("close",i),e.off("free",n),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},xte=async t=>{let e=`${t.host}:${t.port}:${t.ALPNProtocols.sort()}`;if(!yg.has(e)){if(bp.has(e))return(await bp.get(e)).alpnProtocol;let{path:r,agent:n}=t;t.path=t.socketPath;let i=Ate(t);bp.set(e,i);try{let{socket:o,alpnProtocol:s}=await i;if(yg.set(e,s),t.path=r,s==="h2")o.destroy();else{let{globalAgent:a}=dA,u=dA.Agent.prototype.createConnection;n?n.createConnection===u?OO(n,o,t):o.destroy():a.createConnection===u?OO(a,o,t):o.destroy()}return bp.delete(e),s}catch(o){throw bp.delete(e),o}}return yg.get(e)};hA.exports=async(t,e,r)=>{if((typeof t=="string"||t instanceof URL)&&(t=Pte(new URL(t))),typeof e=="function"&&(r=e,e=void 0),e={ALPNProtocols:["h2","http/1.1"],...t,...e,resolveSocket:!0},!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let n=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Lte(e),e.port=e.port||(n?443:80),e._defaultAgent=n?dA.globalAgent:kO.globalAgent;let i=e.agent;if(i){if(i.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=i[n?"https":"http"]}return n&&await xte(e)==="h2"?(i&&(e.agent=i.http2),new Ete(e,r)):kO.request(e,r)};hA.exports.protocolCache=yg});var FO=b((uEe,BO)=>{"use strict";var Cte=require("http2"),Dte=iA(),mA=pA(),Tte=sA(),$te=NO(),Mte=(t,e,r)=>new mA(t,e,r),Rte=(t,e,r)=>{let n=new mA(t,e,r);return n.end(),n};BO.exports={...Cte,ClientRequest:mA,IncomingMessage:Tte,...Dte,request:Mte,get:Rte,auto:$te}});var gA=b(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});var UO=po();HA.default=t=>UO.default.nodeStream(t)&&UO.default.function_(t.getBoundary)});var VO=b(yA=>{"use strict";Object.defineProperty(yA,"__esModule",{value:!0});var WO=require("fs"),qO=require("util"),jO=po(),kte=gA(),Ote=qO.promisify(WO.stat);yA.default=async(t,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(jO.default.string(t))return Buffer.byteLength(t);if(jO.default.buffer(t))return t.length;if(kte.default(t))return qO.promisify(t.getLength.bind(t))();if(t instanceof WO.ReadStream){let{size:r}=await Ote(t.path);return r===0?void 0:r}}});var vA=b(bA=>{"use strict";Object.defineProperty(bA,"__esModule",{value:!0});function Nte(t,e,r){let n={};for(let i of r)n[i]=(...o)=>{e.emit(i,...o)},t.on(i,n[i]);return()=>{for(let i of r)t.off(i,n[i])}}bA.default=Nte});var GO=b(_A=>{"use strict";Object.defineProperty(_A,"__esModule",{value:!0});_A.default=()=>{let t=[];return{once(e,r,n){e.once(r,n),t.push({origin:e,event:r,fn:n})},unhandleAll(){for(let e of t){let{origin:r,event:n,fn:i}=e;r.removeListener(n,i)}t.length=0}}}});var KO=b(vp=>{"use strict";Object.defineProperty(vp,"__esModule",{value:!0});vp.TimeoutError=void 0;var Bte=require("net"),Fte=GO(),XO=Symbol("reentry"),Ute=()=>{},bg=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`),this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};vp.TimeoutError=bg;vp.default=(t,e,r)=>{if(XO in t)return Ute;t[XO]=!0;let n=[],{once:i,unhandleAll:o}=Fte.default(),s=(f,p,m)=>{var h;let g=setTimeout(p,f,f,m);(h=g.unref)===null||h===void 0||h.call(g);let y=()=>{clearTimeout(g)};return n.push(y),y},{host:a,hostname:u}=r,c=(f,p)=>{t.destroy(new bg(f,p))},l=()=>{for(let f of n)f();o()};if(t.once("error",f=>{if(l(),t.listenerCount("error")===0)throw f}),t.once("close",l),i(t,"response",f=>{i(f,"end",l)}),typeof e.request<"u"&&s(e.request,c,"request"),typeof e.socket<"u"){let f=()=>{c(e.socket,"socket")};t.setTimeout(e.socket,f),n.push(()=>{t.removeListener("timeout",f)})}return i(t,"socket",f=>{var p;let{socketPath:m}=t;if(f.connecting){let h=!!(m??Bte.isIP((p=u??a)!==null&&p!==void 0?p:"")!==0);if(typeof e.lookup<"u"&&!h&&typeof f.address().address>"u"){let g=s(e.lookup,c,"lookup");i(f,"lookup",g)}if(typeof e.connect<"u"){let g=()=>s(e.connect,c,"connect");h?i(f,"connect",g()):i(f,"lookup",y=>{y===null&&i(f,"connect",g())})}typeof e.secureConnect<"u"&&r.protocol==="https:"&&i(f,"connect",()=>{let g=s(e.secureConnect,c,"secureConnect");i(f,"secureConnect",g)})}if(typeof e.send<"u"){let h=()=>s(e.send,c,"send");f.connecting?i(f,"connect",()=>{i(t,"upload-complete",h())}):i(t,"upload-complete",h())}}),typeof e.response<"u"&&i(t,"upload-complete",()=>{let f=s(e.response,c,"response");i(t,"response",f)}),l}});var JO=b(wA=>{"use strict";Object.defineProperty(wA,"__esModule",{value:!0});var zO=po();wA.default=t=>{t=t;let e={protocol:t.protocol,hostname:zO.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return zO.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var YO=b(IA=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});var jte=require("url"),Wte=["protocol","host","hostname","port","pathname","search"];IA.default=(t,e)=>{var r,n;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!t){if(!e.protocol)throw new TypeError("No URL protocol specified");t=`${e.protocol}//${(n=(r=e.hostname)!==null&&r!==void 0?r:e.host)!==null&&n!==void 0?n:""}`}let i=new jte.URL(t);if(e.path){let o=e.path.indexOf("?");o===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,o),e.search=e.path.slice(o+1)),delete e.path}for(let o of Wte)e[o]&&(i[o]=e[o].toString());return i}});var QO=b(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});var AA=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};SA.default=AA});var LA=b(EA=>{"use strict";Object.defineProperty(EA,"__esModule",{value:!0});var qte=async t=>{let e=[],r=0;for await(let n of t)e.push(n),r+=Buffer.byteLength(n);return Buffer.isBuffer(e[0])?Buffer.concat(e,r):Buffer.from(e.join(""))};EA.default=qte});var eN=b($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.dnsLookupIpVersionToFamily=$a.isDnsLookupIpVersion=void 0;var ZO={auto:0,ipv4:4,ipv6:6};$a.isDnsLookupIpVersion=t=>t in ZO;$a.dnsLookupIpVersionToFamily=t=>{if($a.isDnsLookupIpVersion(t))return ZO[t];throw new Error("Invalid DNS lookup IP version")}});var PA=b(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.isResponseOk=void 0;vg.isResponseOk=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304}});var rN=b(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});var tN=new Set;xA.default=t=>{tN.has(t)||(tN.add(t),process.emitWarning(`Got: ${t}`,{type:"DeprecationWarning"}))}});var nN=b(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});var Ke=po(),Vte=(t,e)=>{if(Ke.default.null_(t.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");Ke.assert.any([Ke.default.string,Ke.default.undefined],t.encoding),Ke.assert.any([Ke.default.boolean,Ke.default.undefined],t.resolveBodyOnly),Ke.assert.any([Ke.default.boolean,Ke.default.undefined],t.methodRewriting),Ke.assert.any([Ke.default.boolean,Ke.default.undefined],t.isStream),Ke.assert.any([Ke.default.string,Ke.default.undefined],t.responseType),t.responseType===void 0&&(t.responseType="text");let{retry:r}=t;if(e?t.retry={...e.retry}:t.retry={calculateDelay:n=>n.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},Ke.default.object(r)?(t.retry={...t.retry,...r},t.retry.methods=[...new Set(t.retry.methods.map(n=>n.toUpperCase()))],t.retry.statusCodes=[...new Set(t.retry.statusCodes)],t.retry.errorCodes=[...new Set(t.retry.errorCodes)]):Ke.default.number(r)&&(t.retry.limit=r),Ke.default.undefined(t.retry.maxRetryAfter)&&(t.retry.maxRetryAfter=Math.min(...[t.timeout.request,t.timeout.connect].filter(Ke.default.number))),Ke.default.object(t.pagination)){e&&(t.pagination={...e.pagination,...t.pagination});let{pagination:n}=t;if(!Ke.default.function_(n.transform))throw new Error("`options.pagination.transform` must be implemented");if(!Ke.default.function_(n.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!Ke.default.function_(n.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!Ke.default.function_(n.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return t.responseType==="json"&&t.headers.accept===void 0&&(t.headers.accept="application/json"),t};CA.default=Vte});var iN=b(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.retryAfterStatusCodes=void 0;_p.retryAfterStatusCodes=new Set([413,429,503]);var Gte=({attemptCount:t,retryOptions:e,error:r,retryAfter:n})=>{if(t>e.limit)return 0;let i=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),s=r.response&&e.statusCodes.includes(r.response.statusCode);if(!i||!o&&!s)return 0;if(r.response){if(n)return e.maxRetryAfter===void 0||n>e.maxRetryAfter?0:n;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(t-1)*1e3+a};_p.default=Gte});var Ap=b(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.UnsupportedProtocolError=De.ReadError=De.TimeoutError=De.UploadError=De.CacheError=De.HTTPError=De.MaxRedirectsError=De.RequestError=De.setNonEnumerableProperties=De.knownHookEvents=De.withoutBody=De.kIsNormalizedAlready=void 0;var oN=require("util"),sN=require("stream"),Xte=require("fs"),fs=require("url"),aN=require("http"),DA=require("http"),Kte=require("https"),zte=w1(),Jte=x1(),uN=aO(),Yte=fO(),Qte=FO(),Zte=mg(),B=po(),ere=VO(),cN=gA(),tre=vA(),lN=KO(),rre=JO(),fN=YO(),nre=QO(),ire=LA(),pN=eN(),ore=PA(),ps=rN(),sre=nN(),are=iN(),TA,Jt=Symbol("request"),Ig=Symbol("response"),jc=Symbol("responseSize"),Wc=Symbol("downloadedSize"),qc=Symbol("bodySize"),Vc=Symbol("uploadedSize"),_g=Symbol("serverResponsesPiped"),dN=Symbol("unproxyEvents"),hN=Symbol("isFromCache"),$A=Symbol("cancelTimeouts"),mN=Symbol("startedReading"),Gc=Symbol("stopReading"),wg=Symbol("triggerRead"),ds=Symbol("body"),wp=Symbol("jobs"),HN=Symbol("originalResponse"),gN=Symbol("retryTimeout");De.kIsNormalizedAlready=Symbol("isNormalizedAlready");var ure=B.default.string(process.versions.brotli);De.withoutBody=new Set(["GET","HEAD"]);De.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function cre(t){for(let e in t){let r=t[e];if(!B.default.string(r)&&!B.default.number(r)&&!B.default.boolean(r)&&!B.default.null_(r)&&!B.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function lre(t){return B.default.object(t)&&!("statusCode"in t)}var MA=new nre.default,fre=async t=>new Promise((e,r)=>{let n=i=>{r(i)};t.pending||e(),t.once("error",n),t.once("ready",()=>{t.off("error",n),e()})}),pre=new Set([300,301,302,303,304,307,308]),dre=["context","body","json","form"];De.setNonEnumerableProperties=(t,e)=>{let r={};for(let n of t)if(n)for(let i of dre)i in n&&(r[i]={writable:!0,configurable:!0,enumerable:!1,value:n[i]});Object.defineProperties(e,r)};var gt=class extends Error{constructor(e,r,n){var i,o;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(i=r.code)!==null&&i!==void 0?i:"ERR_GOT_REQUEST_ERROR",n instanceof Cg?(Object.defineProperty(this,"request",{enumerable:!1,value:n}),Object.defineProperty(this,"response",{enumerable:!1,value:n[Ig]}),Object.defineProperty(this,"options",{enumerable:!1,value:n.options})):Object.defineProperty(this,"options",{enumerable:!1,value:n}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,B.default.string(r.stack)&&B.default.string(this.stack)){let s=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(s).split(`
`).reverse(),u=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;u.length!==0&&u[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,s)}${a.reverse().join(`
`)}${u.reverse().join(`
`)}`}}};De.RequestError=gt;var Ag=class extends gt{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};De.MaxRedirectsError=Ag;var Sg=class extends gt{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};De.HTTPError=Sg;var Eg=class extends gt{constructor(e,r){super(e.message,e,r),this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};De.CacheError=Eg;var Lg=class extends gt{constructor(e,r){super(e.message,e,r),this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};De.UploadError=Lg;var Pg=class extends gt{constructor(e,r,n){super(e.message,e,n),this.name="TimeoutError",this.event=e.event,this.timings=r}};De.TimeoutError=Pg;var Ip=class extends gt{constructor(e,r){super(e.message,e,r),this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};De.ReadError=Ip;var xg=class extends gt{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};De.UnsupportedProtocolError=xg;var hre=["socket","connect","continue","information","upgrade","timeout"],Cg=class extends sN.Duplex{constructor(e,r={},n){super({autoDestroy:!1,highWaterMark:0}),this[Wc]=0,this[Vc]=0,this.requestInitialized=!1,this[_g]=new Set,this.redirects=[],this[Gc]=!1,this[wg]=!1,this[wp]=[],this.retryCount=0,this._progressCallbacks=[];let i=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",c=>{c.prependListener("data",i),c.on("data",o),c.prependListener("end",i),c.on("end",o)}),this.on("unpipe",c=>{c.off("data",i),c.off("data",o),c.off("end",i),c.off("end",o)}),this.on("pipe",c=>{c instanceof DA.IncomingMessage&&(this.options.headers={...c.headers,...this.options.headers})});let{json:s,body:a,form:u}=r;if((s||a||u)&&this._lockWrite(),De.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,n)}catch(c){B.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(c);return}(async()=>{var c;try{this.options.body instanceof Xte.ReadStream&&await fre(this.options.body);let{url:l}=this.options;if(!l)throw new TypeError("Missing `url` property");if(this.requestUrl=l.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(c=this[Jt])===null||c===void 0||c.destroy();return}for(let f of this[wp])f();this[wp].length=0,this.requestInitialized=!0}catch(l){if(l instanceof gt){this._beforeError(l);return}this.destroyed||this.destroy(l)}})()}static normalizeArguments(e,r,n){var i,o,s,a,u;let c=r;if(B.default.object(e)&&!B.default.urlInstance(e))r={...n,...e,...r};else{if(e&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...n,...r},e!==void 0&&(r.url=e),B.default.urlInstance(r.url)&&(r.url=new fs.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),B.assert.any([B.default.string,B.default.undefined],r.method),B.assert.any([B.default.object,B.default.undefined],r.headers),B.assert.any([B.default.string,B.default.urlInstance,B.default.undefined],r.prefixUrl),B.assert.any([B.default.object,B.default.undefined],r.cookieJar),B.assert.any([B.default.object,B.default.string,B.default.undefined],r.searchParams),B.assert.any([B.default.object,B.default.string,B.default.undefined],r.cache),B.assert.any([B.default.object,B.default.number,B.default.undefined],r.timeout),B.assert.any([B.default.object,B.default.undefined],r.context),B.assert.any([B.default.object,B.default.undefined],r.hooks),B.assert.any([B.default.boolean,B.default.undefined],r.decompress),B.assert.any([B.default.boolean,B.default.undefined],r.ignoreInvalidCookies),B.assert.any([B.default.boolean,B.default.undefined],r.followRedirect),B.assert.any([B.default.number,B.default.undefined],r.maxRedirects),B.assert.any([B.default.boolean,B.default.undefined],r.throwHttpErrors),B.assert.any([B.default.boolean,B.default.undefined],r.http2),B.assert.any([B.default.boolean,B.default.undefined],r.allowGetBody),B.assert.any([B.default.string,B.default.undefined],r.localAddress),B.assert.any([pN.isDnsLookupIpVersion,B.default.undefined],r.dnsLookupIpVersion),B.assert.any([B.default.object,B.default.undefined],r.https),B.assert.any([B.default.boolean,B.default.undefined],r.rejectUnauthorized),r.https&&(B.assert.any([B.default.boolean,B.default.undefined],r.https.rejectUnauthorized),B.assert.any([B.default.function_,B.default.undefined],r.https.checkServerIdentity),B.assert.any([B.default.string,B.default.object,B.default.array,B.default.undefined],r.https.certificateAuthority),B.assert.any([B.default.string,B.default.object,B.default.array,B.default.undefined],r.https.key),B.assert.any([B.default.string,B.default.object,B.default.array,B.default.undefined],r.https.certificate),B.assert.any([B.default.string,B.default.undefined],r.https.passphrase),B.assert.any([B.default.string,B.default.buffer,B.default.array,B.default.undefined],r.https.pfx)),B.assert.any([B.default.object,B.default.undefined],r.cacheOptions),B.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===n?.headers?r.headers={...r.headers}:r.headers=Zte({...n?.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==n?.searchParams){let m;if(B.default.string(r.searchParams)||r.searchParams instanceof fs.URLSearchParams)m=new fs.URLSearchParams(r.searchParams);else{cre(r.searchParams),m=new fs.URLSearchParams;for(let h in r.searchParams){let g=r.searchParams[h];g===null?m.append(h,""):g!==void 0&&m.append(h,g)}}(i=n?.searchParams)===null||i===void 0||i.forEach((h,g)=>{m.has(g)||m.append(g,h)}),r.searchParams=m}if(r.username=(o=r.username)!==null&&o!==void 0?o:"",r.password=(s=r.password)!==null&&s!==void 0?s:"",B.default.undefined(r.prefixUrl)?r.prefixUrl=(a=n?.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),B.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=fN.default(r.prefixUrl+r.url,r)}else(B.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=fN.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:m}=r;Object.defineProperty(r,"prefixUrl",{set:g=>{let y=r.url;if(!y.href.startsWith(g))throw new Error(`Cannot change \`prefixUrl\` from ${m} to ${g}: ${y.href}`);r.url=new fs.URL(g+y.href.slice(m.length)),m=g},get:()=>m});let{protocol:h}=r.url;if(h==="unix:"&&(h="http:",r.url=new fs.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),h!=="http:"&&h!=="https:")throw new xg(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:l}=r;if(l){let{setCookie:m,getCookieString:h}=l;B.assert.function_(m),B.assert.function_(h),m.length===4&&h.length===0&&(m=oN.promisify(m.bind(r.cookieJar)),h=oN.promisify(h.bind(r.cookieJar)),r.cookieJar={setCookie:m,getCookieString:h})}let{cache:f}=r;if(f&&(MA.has(f)||MA.set(f,new uN((m,h)=>{let g=m[Jt](m,h);return B.default.promise(g)&&(g.once=(y,_)=>{if(y==="error")g.catch(_);else if(y==="abort")(async()=>{try{(await g).once("abort",_)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${y}`);return g}),g},f))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)TA||(TA=new Jte.default),r.dnsCache=TA;else if(!B.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${B.default(r.dnsCache)}`);B.default.number(r.timeout)?r.timeout={request:r.timeout}:n&&r.timeout!==n.timeout?r.timeout={...n.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let p=r.hooks===n?.hooks;r.hooks={...r.hooks};for(let m of De.knownHookEvents)if(m in r.hooks)if(B.default.array(r.hooks[m]))r.hooks[m]=[...r.hooks[m]];else throw new TypeError(`Parameter \`${m}\` must be an Array, got ${B.default(r.hooks[m])}`);else r.hooks[m]=[];if(n&&!p)for(let m of De.knownHookEvents)n.hooks[m].length>0&&(r.hooks[m]=[...n.hooks[m],...r.hooks[m]]);if("family"in r&&ps.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),n?.https&&(r.https={...n.https,...r.https}),"rejectUnauthorized"in r&&ps.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&ps.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&ps.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&ps.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&ps.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&ps.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&ps.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let m in r.agent)if(m!=="http"&&m!=="https"&&m!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${m}\``)}return r.maxRedirects=(u=r.maxRedirects)!==null&&u!==void 0?u:0,De.setNonEnumerableProperties([n,c],r),sre.default(r,n)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,n=!B.default.undefined(e.form),i=!B.default.undefined(e.json),o=!B.default.undefined(e.body),s=n||i||o,a=De.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=a,s){if(a)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([o,n,i].filter(u=>u).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(e.body instanceof sN.Readable)&&!B.default.string(e.body)&&!B.default.buffer(e.body)&&!cN.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(n&&!B.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let u=!B.default.string(r["content-type"]);o?(cN.default(e.body)&&u&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[ds]=e.body):n?(u&&(r["content-type"]="application/x-www-form-urlencoded"),this[ds]=new fs.URLSearchParams(e.form).toString()):(u&&(r["content-type"]="application/json"),this[ds]=e.stringifyJson(e.json));let c=await ere.default(this[ds],e.headers);B.default.undefined(r["content-length"])&&B.default.undefined(r["transfer-encoding"])&&!a&&!B.default.undefined(c)&&(r["content-length"]=String(c))}}else a?this._lockWrite():this._unlockWrite();this[qc]=Number(r["content-length"])||void 0}async _onResponseBase(e){let{options:r}=this,{url:n}=r;this[HN]=e,r.decompress&&(e=Yte(e));let i=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:aN.STATUS_CODES[i],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[hN]=o.isFromCache,this[jc]=Number(e.headers["content-length"])||void 0,this[Ig]=e,e.once("end",()=>{this[jc]=this[Wc],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",a=>{e.destroy(),this._beforeError(new Ip(a,this))}),e.once("aborted",()=>{this._beforeError(new Ip({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let s=e.headers["set-cookie"];if(B.default.object(r.cookieJar)&&s){let a=s.map(async u=>r.cookieJar.setCookie(u,n.toString()));r.ignoreInvalidCookies&&(a=a.map(async u=>u.catch(()=>{})));try{await Promise.all(a)}catch(u){this._beforeError(u);return}}if(r.followRedirect&&e.headers.location&&pre.has(i)){if(e.resume(),this[Jt]&&(this[$A](),delete this[Jt],this[dN]()),(i===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[ds]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new Ag(this));return}try{let f=function(p){return p.protocol==="unix:"||p.hostname==="unix"},u=Buffer.from(e.headers.location,"binary").toString(),c=new fs.URL(u,n),l=c.toString();if(decodeURI(l),!f(n)&&f(c)){this._beforeError(new gt("Cannot redirect to UNIX socket",{},this));return}c.hostname!==n.hostname||c.port!==n.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(c.username=r.username,c.password=r.password),this.redirects.push(l),r.url=c;for(let p of r.hooks.beforeRedirect)await p(r,o);this.emit("redirect",o,r),await this._makeRequest()}catch(u){this._beforeError(u);return}return}if(r.isStream&&r.throwHttpErrors&&!ore.isResponseOk(o)){this._beforeError(new Sg(o));return}e.on("readable",()=>{this[wg]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let a of this[_g])if(!a.headersSent){for(let u in e.headers){let c=r.decompress?u!=="content-encoding":!0,l=e.headers[u];c&&a.setHeader(u,l)}a.statusCode=i}}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:n,url:i}=r;zte.default(e),this[$A]=lN.default(e,n,i);let o=r.cache?"cacheableResponse":"response";e.once(o,u=>{this._onResponse(u)}),e.once("error",u=>{var c;e.destroy(),(c=e.res)===null||c===void 0||c.removeAllListeners("end"),u=u instanceof lN.TimeoutError?new Pg(u,this.timings,this):new gt(u.message,u,this),this._beforeError(u)}),this[dN]=tre.default(e,this,hre),this[Jt]=e,this.emit("uploadProgress",this.uploadProgress);let s=this[ds],a=this.redirects.length===0?this:e;B.default.nodeStream(s)?(s.pipe(a),s.once("error",u=>{this._beforeError(new Lg(u,this))})):(this._unlockWrite(),B.default.undefined(s)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(s,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,r){return new Promise((n,i)=>{Object.assign(r,rre.default(e)),delete r.url;let o,s=MA.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",a),n(a)});r.url=e,s.once("error",i),s.once("request",async a=>{o=a,n(o)})})}async _makeRequest(){var e,r,n,i,o;let{options:s}=this,{headers:a}=s;for(let _ in a)if(B.default.undefined(a[_]))delete a[_];else if(B.default.null_(a[_]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${_}\` header`);if(s.decompress&&B.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=ure?"gzip, deflate, br":"gzip, deflate"),s.cookieJar){let _=await s.cookieJar.getCookieString(s.url.toString());B.default.nonEmptyString(_)&&(s.headers.cookie=_)}for(let _ of s.hooks.beforeRequest){let C=await _(s);if(!B.default.undefined(C)){s.request=()=>C;break}}s.body&&this[ds]!==s.body&&(this[ds]=s.body);let{agent:u,request:c,timeout:l,url:f}=s;if(s.dnsCache&&!("lookup"in s)&&(s.lookup=s.dnsCache.lookup),f.hostname==="unix"){let _=/(?<socketPath>.+?):(?<path>.+)/.exec(`${f.pathname}${f.search}`);if(_?.groups){let{socketPath:C,path:N}=_.groups;Object.assign(s,{socketPath:C,path:N,host:""})}}let p=f.protocol==="https:",m;s.http2?m=Qte.auto:m=p?Kte.request:aN.request;let h=(e=s.request)!==null&&e!==void 0?e:m,g=s.cache?this._createCacheableRequest:h;u&&!s.http2&&(s.agent=u[p?"https":"http"]),s[Jt]=h,delete s.request,delete s.timeout;let y=s;if(y.shared=(r=s.cacheOptions)===null||r===void 0?void 0:r.shared,y.cacheHeuristic=(n=s.cacheOptions)===null||n===void 0?void 0:n.cacheHeuristic,y.immutableMinTimeToLive=(i=s.cacheOptions)===null||i===void 0?void 0:i.immutableMinTimeToLive,y.ignoreCargoCult=(o=s.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,s.dnsLookupIpVersion!==void 0)try{y.family=pN.dnsLookupIpVersionToFamily(s.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}s.https&&("rejectUnauthorized"in s.https&&(y.rejectUnauthorized=s.https.rejectUnauthorized),s.https.checkServerIdentity&&(y.checkServerIdentity=s.https.checkServerIdentity),s.https.certificateAuthority&&(y.ca=s.https.certificateAuthority),s.https.certificate&&(y.cert=s.https.certificate),s.https.key&&(y.key=s.https.key),s.https.passphrase&&(y.passphrase=s.https.passphrase),s.https.pfx&&(y.pfx=s.https.pfx));try{let _=await g(f,y);B.default.undefined(_)&&(_=m(f,y)),s.request=c,s.timeout=l,s.agent=u,s.https&&("rejectUnauthorized"in s.https&&delete y.rejectUnauthorized,s.https.checkServerIdentity&&delete y.checkServerIdentity,s.https.certificateAuthority&&delete y.ca,s.https.certificate&&delete y.cert,s.https.key&&delete y.key,s.https.passphrase&&delete y.passphrase,s.https.pfx&&delete y.pfx),lre(_)?this._onRequest(_):this.writable?(this.once("finish",()=>{this._onResponse(_)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(_)}catch(_){throw _ instanceof uN.CacheError?new Eg(_,this):new gt(_.message,_,this)}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new gt(r.message,r,this)}this.destroy(e)}_beforeError(e){if(this[Gc])return;let{options:r}=this,n=this.retryCount+1;this[Gc]=!0,e instanceof gt||(e=new gt(e.message,e,this));let i=e,{response:o}=i;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await ire.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let s;try{let a;o&&"retry-after"in o.headers&&(a=Number(o.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(o.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),s=await r.retry.calculateDelay({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:are.default({attemptCount:n,retryOptions:r.retry,error:i,retryAfter:a,computedValue:0})})}catch(a){this._error(new gt(a.message,a,this));return}if(s){let a=async()=>{try{for(let u of this.options.hooks.beforeRetry)await u(this.options,i,n)}catch(u){this._error(new gt(u.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",n,e))};this[gN]=setTimeout(a,s);return}}this._error(i)})()}_read(){this[wg]=!0;let e=this[Ig];if(e&&!this[Gc]){e.readableLength&&(this[wg]=!1);let r;for(;(r=e.read())!==null;){this[Wc]+=r.length,this[mN]=!0;let n=this.downloadProgress;n.percent<1&&this.emit("downloadProgress",n),this.push(r)}}}_write(e,r,n){let i=()=>{this._writeRequest(e,r,n)};this.requestInitialized?i():this[wp].push(i)}_writeRequest(e,r,n){this[Jt].destroyed||(this._progressCallbacks.push(()=>{this[Vc]+=Buffer.byteLength(e,r);let i=this.uploadProgress;i.percent<1&&this.emit("uploadProgress",i)}),this[Jt].write(e,r,i=>{!i&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),n(i)}))}_final(e){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(Jt in this)){e();return}if(this[Jt].destroyed){e();return}this[Jt].end(n=>{n||(this[qc]=this[Vc],this.emit("uploadProgress",this.uploadProgress),this[Jt].emit("upload-complete")),e(n)})};this.requestInitialized?r():this[wp].push(r)}_destroy(e,r){var n;this[Gc]=!0,clearTimeout(this[gN]),Jt in this&&(this[$A](),!((n=this[Ig])===null||n===void 0)&&n.complete||this[Jt].destroy()),e!==null&&!B.default.undefined(e)&&!(e instanceof gt)&&(e=new gt(e.message,e,this)),r(e)}get _isAboutToError(){return this[Gc]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,r,n;return((r=(e=this[Jt])===null||e===void 0?void 0:e.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!(!((n=this[HN])===null||n===void 0)&&n.complete)}get socket(){var e,r;return(r=(e=this[Jt])===null||e===void 0?void 0:e.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let e;return this[jc]?e=this[Wc]/this[jc]:this[jc]===this[Wc]?e=1:e=0,{percent:e,transferred:this[Wc],total:this[jc]}}get uploadProgress(){let e;return this[qc]?e=this[Vc]/this[qc]:this[qc]===this[Vc]?e=1:e=0,{percent:e,transferred:this[Vc],total:this[qc]}}get timings(){var e;return(e=this[Jt])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[hN]}pipe(e,r){if(this[mN])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof DA.ServerResponse&&this[_g].add(e),super.pipe(e,r)}unpipe(e){return e instanceof DA.ServerResponse&&this[_g].delete(e),super.unpipe(e),this}};De.default=Cg});var Sp=b(Fn=>{"use strict";var mre=Fn&&Fn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hre=Fn&&Fn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mre(e,t,r)};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.CancelError=Fn.ParseError=void 0;var yN=Ap(),RA=class extends yN.RequestError{constructor(e,r){let{options:n}=r.request;super(`${e.message} in "${n.url.toString()}"`,e,r.request),this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};Fn.ParseError=RA;var kA=class extends yN.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};Fn.CancelError=kA;Hre(Ap(),Fn)});var vN=b(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});var bN=Sp(),gre=(t,e,r,n)=>{let{rawBody:i}=t;try{if(e==="text")return i.toString(n);if(e==="json")return i.length===0?"":r(i.toString());if(e==="buffer")return i;throw new bN.ParseError({message:`Unknown body type '${e}'`,name:"Error"},t)}catch(o){throw new bN.ParseError(o,t)}};OA.default=gre});var NA=b(hs=>{"use strict";var yre=hs&&hs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bre=hs&&hs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yre(e,t,r)};Object.defineProperty(hs,"__esModule",{value:!0});var vre=require("events"),_re=po(),wre=v1(),Dg=Sp(),_N=vN(),wN=Ap(),Ire=vA(),Are=LA(),IN=PA(),Sre=["request","response","redirect","uploadProgress","downloadProgress"];function AN(t){let e,r,n=new vre.EventEmitter,i=new wre((s,a,u)=>{let c=l=>{let f=new wN.default(void 0,t);f.retryCount=l,f._noPipe=!0,u(()=>f.destroy()),u.shouldReject=!1,u(()=>a(new Dg.CancelError(f))),e=f,f.once("response",async h=>{var g;if(h.retryCount=l,h.request.aborted)return;let y;try{y=await Are.default(f),h.rawBody=y}catch{return}if(f._isAboutToError)return;let _=((g=h.headers["content-encoding"])!==null&&g!==void 0?g:"").toLowerCase(),C=["gzip","deflate","br"].includes(_),{options:N}=f;if(C&&!N.decompress)h.body=y;else try{h.body=_N.default(h,N.responseType,N.parseJson,N.encoding)}catch(D){if(h.body=y.toString(),IN.isResponseOk(h)){f._beforeError(D);return}}try{for(let[D,j]of N.hooks.afterResponse.entries())h=await j(h,async X=>{let G=wN.default.normalizeArguments(void 0,{...X,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},N);G.hooks.afterResponse=G.hooks.afterResponse.slice(0,D);for(let k of G.hooks.beforeRetry)await k(G);let U=AN(G);return u(()=>{U.catch(()=>{}),U.cancel()}),U})}catch(D){f._beforeError(new Dg.RequestError(D.message,D,f));return}if(r=h,!IN.isResponseOk(h)){f._beforeError(new Dg.HTTPError(h));return}f.destroy(),s(f.options.resolveBodyOnly?h.body:h)});let p=h=>{if(i.isCanceled)return;let{options:g}=f;if(h instanceof Dg.HTTPError&&!g.throwHttpErrors){let{response:y}=h;s(f.options.resolveBodyOnly?y.body:y);return}a(h)};f.once("error",p);let m=f.options.body;f.once("retry",(h,g)=>{var y,_;if(m===((y=g.request)===null||y===void 0?void 0:y.options.body)&&_re.default.nodeStream((_=g.request)===null||_===void 0?void 0:_.options.body)){p(g);return}c(h)}),Ire.default(f,n,Sre)};c(0)});i.on=(s,a)=>(n.on(s,a),i);let o=s=>{let a=(async()=>{await i;let{options:u}=r.request;return _N.default(r,s,u.parseJson,u.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)),a};return i.json=()=>{let{headers:s}=e.options;return!e.writableFinished&&s.accept===void 0&&(s.accept="application/json"),o("json")},i.buffer=()=>o("buffer"),i.text=()=>o("text"),i}hs.default=AN;bre(Sp(),hs)});var SN=b(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});var Ere=Sp();function Lre(t,...e){let r=(async()=>{if(t instanceof Ere.RequestError)try{for(let i of e)if(i)for(let o of i)t=await o(t)}catch(i){t=i}throw t})(),n=()=>r;return r.json=n,r.text=n,r.buffer=n,r.on=n,r}BA.default=Lre});var PN=b(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});var EN=po();function LN(t){for(let e of Object.values(t))(EN.default.plainObject(e)||EN.default.array(e))&&LN(e);return Object.freeze(t)}FA.default=LN});var CN=b(xN=>{"use strict";Object.defineProperty(xN,"__esModule",{value:!0})});var UA=b(gn=>{"use strict";var Pre=gn&&gn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xre=gn&&gn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Pre(e,t,r)};Object.defineProperty(gn,"__esModule",{value:!0});gn.defaultHandler=void 0;var DN=po(),Hn=NA(),Cre=SN(),$g=Ap(),Dre=PN(),Tre={RequestError:Hn.RequestError,CacheError:Hn.CacheError,ReadError:Hn.ReadError,HTTPError:Hn.HTTPError,MaxRedirectsError:Hn.MaxRedirectsError,TimeoutError:Hn.TimeoutError,ParseError:Hn.ParseError,CancelError:Hn.CancelError,UnsupportedProtocolError:Hn.UnsupportedProtocolError,UploadError:Hn.UploadError},$re=async t=>new Promise(e=>{setTimeout(e,t)}),{normalizeArguments:Tg}=$g.default,TN=(...t)=>{let e;for(let r of t)e=Tg(void 0,r,e);return e},Mre=t=>t.isStream?new $g.default(void 0,t):Hn.default(t),Rre=t=>"defaults"in t&&"options"in t.defaults,kre=["get","post","put","patch","head","delete"];gn.defaultHandler=(t,e)=>e(t);var $N=(t,e)=>{if(t)for(let r of t)r(e)},MN=t=>{t._rawHandlers=t.handlers,t.handlers=t.handlers.map(n=>(i,o)=>{let s,a=n(i,u=>(s=o(u),s));if(a!==s&&!i.isStream&&s){let u=a,{then:c,catch:l,finally:f}=u;Object.setPrototypeOf(u,Object.getPrototypeOf(s)),Object.defineProperties(u,Object.getOwnPropertyDescriptors(s)),u.then=c,u.catch=l,u.finally=f}return a});let e=(n,i={},o)=>{var s,a;let u=0,c=l=>t.handlers[u++](l,u===t.handlers.length?Mre:c);if(DN.default.plainObject(n)){let l={...n,...i};$g.setNonEnumerableProperties([n,i],l),i=l,n=void 0}try{let l;try{$N(t.options.hooks.init,i),$N((s=i.hooks)===null||s===void 0?void 0:s.init,i)}catch(p){l=p}let f=Tg(n,i,o??t.options);if(f[$g.kIsNormalizedAlready]=!0,l)throw new Hn.RequestError(l.message,l,f);return c(f)}catch(l){if(i.isStream)throw l;return Cre.default(l,t.options.hooks.beforeError,(a=i.hooks)===null||a===void 0?void 0:a.beforeError)}};e.extend=(...n)=>{let i=[t.options],o=[...t._rawHandlers],s;for(let a of n)Rre(a)?(i.push(a.defaults.options),o.push(...a.defaults._rawHandlers),s=a.defaults.mutableDefaults):(i.push(a),"handlers"in a&&o.push(...a.handlers),s=a.mutableDefaults);return o=o.filter(a=>a!==gn.defaultHandler),o.length===0&&o.push(gn.defaultHandler),MN({options:TN(...i),handlers:o,mutableDefaults:!!s})};let r=async function*(n,i){let o=Tg(n,i,t.options);o.resolveBodyOnly=!1;let s=o.pagination;if(!DN.default.object(s))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:u}=s,c=0;for(;c<s.requestLimit;){c!==0&&await $re(s.backoff);let l=await e(void 0,void 0,o),f=await s.transform(l),p=[];for(let h of f)if(s.filter(h,a,p)&&(!s.shouldContinue(h,a,p)||(yield h,s.stackAllItems&&a.push(h),p.push(h),--u<=0)))return;let m=s.paginate(l,a,p);if(m===!1)return;m===l.request.options?o=l.request.options:m!==void 0&&(o=Tg(void 0,m,o)),c++}};e.paginate=r,e.paginate.all=async(n,i)=>{let o=[];for await(let s of r(n,i))o.push(s);return o},e.paginate.each=r,e.stream=(n,i)=>e(n,{...i,isStream:!0});for(let n of kre)e[n]=(i,o)=>e(i,{...o,method:n}),e.stream[n]=(i,o)=>e(i,{...o,method:n,isStream:!0});return Object.assign(e,Tre),Object.defineProperty(e,"defaults",{value:t.mutableDefaults?t:Dre.default(t),writable:t.mutableDefaults,configurable:t.mutableDefaults,enumerable:!0}),e.mergeOptions=TN,e};gn.default=MN;xre(CN(),gn)});var ON=b((ho,Mg)=>{"use strict";var Ore=ho&&ho.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),RN=ho&&ho.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ore(e,t,r)};Object.defineProperty(ho,"__esModule",{value:!0});var Nre=require("url"),kN=UA(),Bre={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:t=>{if(!Reflect.has(t.headers,"link"))return!1;let e=t.headers.link.split(","),r;for(let n of e){let i=n.split(";");if(i[1].includes("next")){r=i[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new Nre.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:t=>JSON.parse(t),stringifyJson:t=>JSON.stringify(t),cacheOptions:{}},handlers:[kN.defaultHandler],mutableDefaults:!1},jA=kN.default(Bre);ho.default=jA;Mg.exports=jA;Mg.exports.default=jA;Mg.exports.__esModule=!0;RN(UA(),ho);RN(NA(),ho)});var GN=b((MLe,Og)=>{var xt=function(t){"use strict";var e=1e7,r=7,n=9007199254740992,i=p(n),o="0123456789abcdefghijklmnopqrstuvwxyz",s=typeof BigInt=="function";function a(d,H,v,w){return typeof d>"u"?a[0]:typeof H<"u"?+H==10&&!v?He(d):ot(d,H,v,w):He(d)}function u(d,H){this.value=d,this.sign=H,this.isSmall=!1}u.prototype=Object.create(a.prototype);function c(d){this.value=d,this.sign=d<0,this.isSmall=!0}c.prototype=Object.create(a.prototype);function l(d){this.value=d}l.prototype=Object.create(a.prototype);function f(d){return-n<d&&d<n}function p(d){return d<1e7?[d]:d<1e14?[d%1e7,Math.floor(d/1e7)]:[d%1e7,Math.floor(d/1e7)%1e7,Math.floor(d/1e14)]}function m(d){h(d);var H=d.length;if(H<4&&te(d,i)<0)switch(H){case 0:return 0;case 1:return d[0];case 2:return d[0]+d[1]*e;default:return d[0]+(d[1]+d[2]*e)*e}return d}function h(d){for(var H=d.length;d[--H]===0;);d.length=H+1}function g(d){for(var H=new Array(d),v=-1;++v<d;)H[v]=0;return H}function y(d){return d>0?Math.floor(d):Math.ceil(d)}function _(d,H){var v=d.length,w=H.length,L=new Array(v),x=0,R=e,O,T;for(T=0;T<w;T++)O=d[T]+H[T]+x,x=O>=R?1:0,L[T]=O-x*R;for(;T<v;)O=d[T]+x,x=O===R?1:0,L[T++]=O-x*R;return x>0&&L.push(x),L}function C(d,H){return d.length>=H.length?_(d,H):_(H,d)}function N(d,H){var v=d.length,w=new Array(v),L=e,x,R;for(R=0;R<v;R++)x=d[R]-L+H,H=Math.floor(x/L),w[R]=x-H*L,H+=1;for(;H>0;)w[R++]=H%L,H=Math.floor(H/L);return w}u.prototype.add=function(d){var H=He(d);if(this.sign!==H.sign)return this.subtract(H.negate());var v=this.value,w=H.value;return H.isSmall?new u(N(v,Math.abs(w)),this.sign):new u(C(v,w),this.sign)},u.prototype.plus=u.prototype.add,c.prototype.add=function(d){var H=He(d),v=this.value;if(v<0!==H.sign)return this.subtract(H.negate());var w=H.value;if(H.isSmall){if(f(v+w))return new c(v+w);w=p(Math.abs(w))}return new u(N(w,Math.abs(v)),v<0)},c.prototype.plus=c.prototype.add,l.prototype.add=function(d){return new l(this.value+He(d).value)},l.prototype.plus=l.prototype.add;function D(d,H){var v=d.length,w=H.length,L=new Array(v),x=0,R=e,O,T;for(O=0;O<w;O++)T=d[O]-x-H[O],T<0?(T+=R,x=1):x=0,L[O]=T;for(O=w;O<v;O++){if(T=d[O]-x,T<0)T+=R;else{L[O++]=T;break}L[O]=T}for(;O<v;O++)L[O]=d[O];return h(L),L}function j(d,H,v){var w;return te(d,H)>=0?w=D(d,H):(w=D(H,d),v=!v),w=m(w),typeof w=="number"?(v&&(w=-w),new c(w)):new u(w,v)}function X(d,H,v){var w=d.length,L=new Array(w),x=-H,R=e,O,T;for(O=0;O<w;O++)T=d[O]+x,x=Math.floor(T/R),T%=R,L[O]=T<0?T+R:T;return L=m(L),typeof L=="number"?(v&&(L=-L),new c(L)):new u(L,v)}u.prototype.subtract=function(d){var H=He(d);if(this.sign!==H.sign)return this.add(H.negate());var v=this.value,w=H.value;return H.isSmall?X(v,Math.abs(w),this.sign):j(v,w,this.sign)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(d){var H=He(d),v=this.value;if(v<0!==H.sign)return this.add(H.negate());var w=H.value;return H.isSmall?new c(v-w):X(w,Math.abs(v),v>=0)},c.prototype.minus=c.prototype.subtract,l.prototype.subtract=function(d){return new l(this.value-He(d).value)},l.prototype.minus=l.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},c.prototype.negate=function(){var d=this.sign,H=new c(-this.value);return H.sign=!d,H},l.prototype.negate=function(){return new l(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)};function G(d,H){var v=d.length,w=H.length,L=v+w,x=g(L),R=e,O,T,Z,se,de;for(Z=0;Z<v;++Z){se=d[Z];for(var Se=0;Se<w;++Se)de=H[Se],O=se*de+x[Z+Se],T=Math.floor(O/R),x[Z+Se]=O-T*R,x[Z+Se+1]+=T}return h(x),x}function U(d,H){var v=d.length,w=new Array(v),L=e,x=0,R,O;for(O=0;O<v;O++)R=d[O]*H+x,x=Math.floor(R/L),w[O]=R-x*L;for(;x>0;)w[O++]=x%L,x=Math.floor(x/L);return w}function k(d,H){for(var v=[];H-- >0;)v.push(0);return v.concat(d)}function M(d,H){var v=Math.max(d.length,H.length);if(v<=30)return G(d,H);v=Math.ceil(v/2);var w=d.slice(v),L=d.slice(0,v),x=H.slice(v),R=H.slice(0,v),O=M(L,R),T=M(w,x),Z=M(C(L,w),C(R,x)),se=C(C(O,k(D(D(Z,O),T),v)),k(T,2*v));return h(se),se}function E(d,H){return-.012*d-.012*H+15e-6*d*H>0}u.prototype.multiply=function(d){var H=He(d),v=this.value,w=H.value,L=this.sign!==H.sign,x;if(H.isSmall){if(w===0)return a[0];if(w===1)return this;if(w===-1)return this.negate();if(x=Math.abs(w),x<e)return new u(U(v,x),L);w=p(x)}return E(v.length,w.length)?new u(M(v,w),L):new u(G(v,w),L)},u.prototype.times=u.prototype.multiply;function q(d,H,v){return d<e?new u(U(H,d),v):new u(G(H,p(d)),v)}c.prototype._multiplyBySmall=function(d){return f(d.value*this.value)?new c(d.value*this.value):q(Math.abs(d.value),p(Math.abs(this.value)),this.sign!==d.sign)},u.prototype._multiplyBySmall=function(d){return d.value===0?a[0]:d.value===1?this:d.value===-1?this.negate():q(Math.abs(d.value),this.value,this.sign!==d.sign)},c.prototype.multiply=function(d){return He(d)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,l.prototype.multiply=function(d){return new l(this.value*He(d).value)},l.prototype.times=l.prototype.multiply;function F(d){var H=d.length,v=g(H+H),w=e,L,x,R,O,T;for(R=0;R<H;R++){O=d[R],x=0-O*O;for(var Z=R;Z<H;Z++)T=d[Z],L=2*(O*T)+v[R+Z]+x,x=Math.floor(L/w),v[R+Z]=L-x*w;v[R+H]=x}return h(v),v}u.prototype.square=function(){return new u(F(this.value),!1)},c.prototype.square=function(){var d=this.value*this.value;return f(d)?new c(d):new u(F(p(Math.abs(this.value))),!1)},l.prototype.square=function(d){return new l(this.value*this.value)};function V(d,H){var v=d.length,w=H.length,L=e,x=g(H.length),R=H[w-1],O=Math.ceil(L/(2*R)),T=U(d,O),Z=U(H,O),se,de,Se,kr,Ir,Xb,Kb;for(T.length<=v&&T.push(0),Z.push(0),R=Z[w-1],de=v-w;de>=0;de--){for(se=L-1,T[de+w]!==R&&(se=Math.floor((T[de+w]*L+T[de+w-1])/R)),Se=0,kr=0,Xb=Z.length,Ir=0;Ir<Xb;Ir++)Se+=se*Z[Ir],Kb=Math.floor(Se/L),kr+=T[de+Ir]-(Se-Kb*L),Se=Kb,kr<0?(T[de+Ir]=kr+L,kr=-1):(T[de+Ir]=kr,kr=0);for(;kr!==0;){for(se-=1,Se=0,Ir=0;Ir<Xb;Ir++)Se+=T[de+Ir]-L+Z[Ir],Se<0?(T[de+Ir]=Se+L,Se=0):(T[de+Ir]=Se,Se=1);kr+=Se}x[de]=se}return T=P(T,O)[0],[m(x),m(T)]}function S(d,H){for(var v=d.length,w=H.length,L=[],x=[],R=e,O,T,Z,se,de;v;){if(x.unshift(d[--v]),h(x),te(x,H)<0){L.push(0);continue}T=x.length,Z=x[T-1]*R+x[T-2],se=H[w-1]*R+H[w-2],T>w&&(Z=(Z+1)*R),O=Math.ceil(Z/se);do{if(de=U(H,O),te(de,x)<=0)break;O--}while(O);L.push(O),x=D(x,de)}return L.reverse(),[m(L),m(x)]}function P(d,H){var v=d.length,w=g(v),L=e,x,R,O,T;for(O=0,x=v-1;x>=0;--x)T=O*L+d[x],R=y(T/H),O=T-R*H,w[x]=R|0;return[w,O|0]}function oe(d,H){var v,w=He(H);if(s)return[new l(d.value/w.value),new l(d.value%w.value)];var L=d.value,x=w.value,R;if(x===0)throw new Error("Cannot divide by zero");if(d.isSmall)return w.isSmall?[new c(y(L/x)),new c(L%x)]:[a[0],d];if(w.isSmall){if(x===1)return[d,a[0]];if(x==-1)return[d.negate(),a[0]];var O=Math.abs(x);if(O<e){v=P(L,O),R=m(v[0]);var T=v[1];return d.sign&&(T=-T),typeof R=="number"?(d.sign!==w.sign&&(R=-R),[new c(R),new c(T)]):[new u(R,d.sign!==w.sign),new c(T)]}x=p(O)}var Z=te(L,x);if(Z===-1)return[a[0],d];if(Z===0)return[a[d.sign===w.sign?1:-1],a[0]];L.length+x.length<=200?v=V(L,x):v=S(L,x),R=v[0];var se=d.sign!==w.sign,de=v[1],Se=d.sign;return typeof R=="number"?(se&&(R=-R),R=new c(R)):R=new u(R,se),typeof de=="number"?(Se&&(de=-de),de=new c(de)):de=new u(de,Se),[R,de]}u.prototype.divmod=function(d){var H=oe(this,d);return{quotient:H[0],remainder:H[1]}},l.prototype.divmod=c.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(d){return oe(this,d)[0]},l.prototype.over=l.prototype.divide=function(d){return new l(this.value/He(d).value)},c.prototype.over=c.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(d){return oe(this,d)[1]},l.prototype.mod=l.prototype.remainder=function(d){return new l(this.value%He(d).value)},c.prototype.remainder=c.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(d){var H=He(d),v=this.value,w=H.value,L,x,R;if(w===0)return a[1];if(v===0)return a[0];if(v===1)return a[1];if(v===-1)return H.isEven()?a[1]:a[-1];if(H.sign)return a[0];if(!H.isSmall)throw new Error("The exponent "+H.toString()+" is too large.");if(this.isSmall&&f(L=Math.pow(v,w)))return new c(y(L));for(x=this,R=a[1];w&!0&&(R=R.times(x),--w),w!==0;)w/=2,x=x.square();return R},c.prototype.pow=u.prototype.pow,l.prototype.pow=function(d){var H=He(d),v=this.value,w=H.value,L=BigInt(0),x=BigInt(1),R=BigInt(2);if(w===L)return a[1];if(v===L)return a[0];if(v===x)return a[1];if(v===BigInt(-1))return H.isEven()?a[1]:a[-1];if(H.isNegative())return new l(L);for(var O=this,T=a[1];(w&x)===x&&(T=T.times(O),--w),w!==L;)w/=R,O=O.square();return T},u.prototype.modPow=function(d,H){if(d=He(d),H=He(H),H.isZero())throw new Error("Cannot take modPow with modulus 0");var v=a[1],w=this.mod(H);for(d.isNegative()&&(d=d.multiply(a[-1]),w=w.modInv(H));d.isPositive();){if(w.isZero())return a[0];d.isOdd()&&(v=v.multiply(w).mod(H)),d=d.divide(2),w=w.square().mod(H)}return v},l.prototype.modPow=c.prototype.modPow=u.prototype.modPow;function te(d,H){if(d.length!==H.length)return d.length>H.length?1:-1;for(var v=d.length-1;v>=0;v--)if(d[v]!==H[v])return d[v]>H[v]?1:-1;return 0}u.prototype.compareAbs=function(d){var H=He(d),v=this.value,w=H.value;return H.isSmall?1:te(v,w)},c.prototype.compareAbs=function(d){var H=He(d),v=Math.abs(this.value),w=H.value;return H.isSmall?(w=Math.abs(w),v===w?0:v>w?1:-1):-1},l.prototype.compareAbs=function(d){var H=this.value,v=He(d).value;return H=H>=0?H:-H,v=v>=0?v:-v,H===v?0:H>v?1:-1},u.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var H=He(d),v=this.value,w=H.value;return this.sign!==H.sign?H.sign?1:-1:H.isSmall?this.sign?-1:1:te(v,w)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var H=He(d),v=this.value,w=H.value;return H.isSmall?v==w?0:v>w?1:-1:v<0!==H.sign?v<0?-1:1:v<0?1:-1},c.prototype.compareTo=c.prototype.compare,l.prototype.compare=function(d){if(d===1/0)return-1;if(d===-1/0)return 1;var H=this.value,v=He(d).value;return H===v?0:H>v?1:-1},l.prototype.compareTo=l.prototype.compare,u.prototype.equals=function(d){return this.compare(d)===0},l.prototype.eq=l.prototype.equals=c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(d){return this.compare(d)!==0},l.prototype.neq=l.prototype.notEquals=c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(d){return this.compare(d)>0},l.prototype.gt=l.prototype.greater=c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(d){return this.compare(d)<0},l.prototype.lt=l.prototype.lesser=c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(d){return this.compare(d)>=0},l.prototype.geq=l.prototype.greaterOrEquals=c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(d){return this.compare(d)<=0},l.prototype.leq=l.prototype.lesserOrEquals=c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return(this.value[0]&1)===0},c.prototype.isEven=function(){return(this.value&1)===0},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return(this.value[0]&1)===1},c.prototype.isOdd=function(){return(this.value&1)===1},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=c.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=c.prototype.isNegative,u.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return Math.abs(this.value)===1},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return this.value===0},l.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(d){var H=He(d);return H.isZero()?!1:H.isUnit()?!0:H.compareAbs(2)===0?this.isEven():this.mod(H).isZero()},l.prototype.isDivisibleBy=c.prototype.isDivisibleBy=u.prototype.isDivisibleBy;function fe(d){var H=d.abs();if(H.isUnit())return!1;if(H.equals(2)||H.equals(3)||H.equals(5))return!0;if(H.isEven()||H.isDivisibleBy(3)||H.isDivisibleBy(5))return!1;if(H.lesser(49))return!0}function ue(d,H){for(var v=d.prev(),w=v,L=0,x,R,O,T;w.isEven();)w=w.divide(2),L++;e:for(O=0;O<H.length;O++)if(!d.lesser(H[O])&&(T=xt(H[O]).modPow(w,d),!(T.isUnit()||T.equals(v)))){for(x=L-1;x!=0;x--){if(T=T.square().mod(d),T.isUnit())return!1;if(T.equals(v))continue e}return!1}return!0}u.prototype.isPrime=function(d){var H=fe(this);if(H!==t)return H;var v=this.abs(),w=v.bitLength();if(w<=64)return ue(v,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var L=Math.log(2)*w.toJSNumber(),x=Math.ceil(d===!0?2*Math.pow(L,2):L),R=[],O=0;O<x;O++)R.push(xt(O+2));return ue(v,R)},l.prototype.isPrime=c.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(d,H){var v=fe(this);if(v!==t)return v;for(var w=this.abs(),L=d===t?5:d,x=[],R=0;R<L;R++)x.push(xt.randBetween(2,w.minus(2),H));return ue(w,x)},l.prototype.isProbablePrime=c.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(d){for(var H=xt.zero,v=xt.one,w=He(d),L=this.abs(),x,R,O;!L.isZero();)x=w.divide(L),R=H,O=w,H=v,w=L,v=R.subtract(x.multiply(v)),L=O.subtract(x.multiply(L));if(!w.isUnit())throw new Error(this.toString()+" and "+d.toString()+" are not co-prime");return H.compare(0)===-1&&(H=H.add(d)),this.isNegative()?H.negate():H},l.prototype.modInv=c.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var d=this.value;return this.sign?X(d,1,this.sign):new u(N(d,1),this.sign)},c.prototype.next=function(){var d=this.value;return d+1<n?new c(d+1):new u(i,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},u.prototype.prev=function(){var d=this.value;return this.sign?new u(N(d,1),!0):X(d,1,this.sign)},c.prototype.prev=function(){var d=this.value;return d-1>-n?new c(d-1):new u(i,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var ee=[1];2*ee[ee.length-1]<=e;)ee.push(2*ee[ee.length-1]);var pe=ee.length,be=ee[pe-1];function ge(d){return Math.abs(d)<=e}u.prototype.shiftLeft=function(d){var H=He(d).toJSNumber();if(!ge(H))throw new Error(String(H)+" is too large for shifting.");if(H<0)return this.shiftRight(-H);var v=this;if(v.isZero())return v;for(;H>=pe;)v=v.multiply(be),H-=pe-1;return v.multiply(ee[H])},l.prototype.shiftLeft=c.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(d){var H,v=He(d).toJSNumber();if(!ge(v))throw new Error(String(v)+" is too large for shifting.");if(v<0)return this.shiftLeft(-v);for(var w=this;v>=pe;){if(w.isZero()||w.isNegative()&&w.isUnit())return w;H=oe(w,be),w=H[1].isNegative()?H[0].prev():H[0],v-=pe-1}return H=oe(w,ee[v]),H[1].isNegative()?H[0].prev():H[0]},l.prototype.shiftRight=c.prototype.shiftRight=u.prototype.shiftRight;function qt(d,H,v){H=He(H);for(var w=d.isNegative(),L=H.isNegative(),x=w?d.not():d,R=L?H.not():H,O=0,T=0,Z=null,se=null,de=[];!x.isZero()||!R.isZero();)Z=oe(x,be),O=Z[1].toJSNumber(),w&&(O=be-1-O),se=oe(R,be),T=se[1].toJSNumber(),L&&(T=be-1-T),x=Z[0],R=se[0],de.push(v(O,T));for(var Se=v(w?1:0,L?1:0)!==0?xt(-1):xt(0),kr=de.length-1;kr>=0;kr-=1)Se=Se.multiply(be).add(xt(de[kr]));return Se}u.prototype.not=function(){return this.negate().prev()},l.prototype.not=c.prototype.not=u.prototype.not,u.prototype.and=function(d){return qt(this,d,function(H,v){return H&v})},l.prototype.and=c.prototype.and=u.prototype.and,u.prototype.or=function(d){return qt(this,d,function(H,v){return H|v})},l.prototype.or=c.prototype.or=u.prototype.or,u.prototype.xor=function(d){return qt(this,d,function(H,v){return H^v})},l.prototype.xor=c.prototype.xor=u.prototype.xor;var me=1<<30,mr=(e&-e)*(e&-e)|me;function Rr(d){var H=d.value,v=typeof H=="number"?H|me:typeof H=="bigint"?H|BigInt(me):H[0]+H[1]*e|mr;return v&-v}function J(d,H){if(H.compareTo(d)<=0){var v=J(d,H.square(H)),w=v.p,L=v.e,x=w.multiply(H);return x.compareTo(d)<=0?{p:x,e:L*2+1}:{p:w,e:L*2}}return{p:xt(1),e:0}}u.prototype.bitLength=function(){var d=this;return d.compareTo(xt(0))<0&&(d=d.negate().subtract(xt(1))),d.compareTo(xt(0))===0?xt(0):xt(J(d,xt(2)).e).add(xt(1))},l.prototype.bitLength=c.prototype.bitLength=u.prototype.bitLength;function Ie(d,H){return d=He(d),H=He(H),d.greater(H)?d:H}function z(d,H){return d=He(d),H=He(H),d.lesser(H)?d:H}function he(d,H){if(d=He(d).abs(),H=He(H).abs(),d.equals(H))return d;if(d.isZero())return H;if(H.isZero())return d;for(var v=a[1],w,L;d.isEven()&&H.isEven();)w=z(Rr(d),Rr(H)),d=d.divide(w),H=H.divide(w),v=v.multiply(w);for(;d.isEven();)d=d.divide(Rr(d));do{for(;H.isEven();)H=H.divide(Rr(H));d.greater(H)&&(L=H,H=d,d=L),H=H.subtract(d)}while(!H.isZero());return v.isUnit()?d:d.multiply(v)}function Te(d,H){return d=He(d).abs(),H=He(H).abs(),d.divide(he(d,H)).multiply(H)}function Ze(d,H,v){d=He(d),H=He(H);var w=v||Math.random,L=z(d,H),x=Ie(d,H),R=x.subtract(L).add(1);if(R.isSmall)return L.add(Math.floor(w()*R));for(var O=qs(R,e).value,T=[],Z=!0,se=0;se<O.length;se++){var de=Z?O[se]:e,Se=y(w()*de);T.push(Se),Se<de&&(Z=!1)}return L.add(a.fromArray(T,e,!1))}var ot=function(d,H,v,w){v=v||o,d=String(d),w||(d=d.toLowerCase(),v=v.toLowerCase());var L=d.length,x,R=Math.abs(H),O={};for(x=0;x<v.length;x++)O[v[x]]=x;for(x=0;x<L;x++){var T=d[x];if(T!=="-"&&T in O&&O[T]>=R){if(T==="1"&&R===1)continue;throw new Error(T+" is not a valid digit in base "+H+".")}}H=He(H);var Z=[],se=d[0]==="-";for(x=se?1:0;x<d.length;x++){var T=d[x];if(T in O)Z.push(He(O[T]));else if(T==="<"){var de=x;do x++;while(d[x]!==">"&&x<d.length);Z.push(He(d.slice(de+1,x)))}else throw new Error(T+" is not a valid character")}return To(Z,H,se)};function To(d,H,v){var w=a[0],L=a[1],x;for(x=d.length-1;x>=0;x--)w=w.add(d[x].times(L)),L=L.times(H);return v?w.negate():w}function $o(d,H){return H=H||o,d<H.length?H[d]:"<"+d+">"}function qs(d,H){if(H=xt(H),H.isZero()){if(d.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(H.equals(-1)){if(d.isZero())return{value:[0],isNegative:!1};if(d.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-d.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var v=Array.apply(null,Array(d.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return v.unshift([1]),{value:[].concat.apply([],v),isNegative:!1}}var w=!1;if(d.isNegative()&&H.isPositive()&&(w=!0,d=d.abs()),H.isUnit())return d.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(d.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:w};for(var L=[],x=d,R;x.isNegative()||x.compareAbs(H)>=0;){R=x.divmod(H),x=R.quotient;var O=R.remainder;O.isNegative()&&(O=H.minus(O).abs(),x=x.next()),L.push(O.toJSNumber())}return L.push(x.toJSNumber()),{value:L.reverse(),isNegative:w}}function du(d,H,v){var w=qs(d,H);return(w.isNegative?"-":"")+w.value.map(function(L){return $o(L,v)}).join("")}u.prototype.toArray=function(d){return qs(this,d)},c.prototype.toArray=function(d){return qs(this,d)},l.prototype.toArray=function(d){return qs(this,d)},u.prototype.toString=function(d,H){if(d===t&&(d=10),d!==10)return du(this,d,H);for(var v=this.value,w=v.length,L=String(v[--w]),x="0000000",R;--w>=0;)R=String(v[w]),L+=x.slice(R.length)+R;var O=this.sign?"-":"";return O+L},c.prototype.toString=function(d,H){return d===t&&(d=10),d!=10?du(this,d,H):String(this.value)},l.prototype.toString=c.prototype.toString,l.prototype.toJSON=u.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};function $d(d){if(f(+d)){var H=+d;if(H===y(H))return s?new l(BigInt(H)):new c(H);throw new Error("Invalid integer: "+d)}var v=d[0]==="-";v&&(d=d.slice(1));var w=d.split(/e/i);if(w.length>2)throw new Error("Invalid integer: "+w.join("e"));if(w.length===2){var L=w[1];if(L[0]==="+"&&(L=L.slice(1)),L=+L,L!==y(L)||!f(L))throw new Error("Invalid integer: "+L+" is not a valid exponent.");var x=w[0],R=x.indexOf(".");if(R>=0&&(L-=x.length-R-1,x=x.slice(0,R)+x.slice(R+1)),L<0)throw new Error("Cannot include negative exponent part for integers");x+=new Array(L+1).join("0"),d=x}var O=/^([0-9][0-9]*)$/.test(d);if(!O)throw new Error("Invalid integer: "+d);if(s)return new l(BigInt(v?"-"+d:d));for(var T=[],Z=d.length,se=r,de=Z-se;Z>0;)T.push(+d.slice(de,Z)),de-=se,de<0&&(de=0),Z-=se;return h(T),new u(T,v)}function Gb(d){if(s)return new l(BigInt(d));if(f(d)){if(d!==y(d))throw new Error(d+" is not an integer.");return new c(d)}return $d(d.toString())}function He(d){return typeof d=="number"?Gb(d):typeof d=="string"?$d(d):typeof d=="bigint"?new l(d):d}for(var Ln=0;Ln<1e3;Ln++)a[Ln]=He(Ln),Ln>0&&(a[-Ln]=He(-Ln));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=Ie,a.min=z,a.gcd=he,a.lcm=Te,a.isInstance=function(d){return d instanceof u||d instanceof c||d instanceof l},a.randBetween=Ze,a.fromArray=function(d,H,v){return To(d.map(He),He(H||10),v)},a}();typeof Og<"u"&&Og.hasOwnProperty("exports")&&(Og.exports=xt);typeof define=="function"&&define.amd&&define(function(){return xt})});var XN=b(Ct=>{"use strict";var Wre=require("fs"),qre=GN(),ys=!1;Ct.maxObjectSize=100*1e3*1e3;Ct.maxObjectCount=32768;var Vre=9783072e5,Gre=Ct.UID=function(t){this.UID=t},RLe=Ct.parseFile=function(t,e){function r(n){var i=null,o;try{o=Xre(n)}catch(s){i=s}e(i,o)}if(Buffer.isBuffer(t))return r(t);Wre.readFile(t,function(n,i){if(n)return e(n);r(i)})},Xre=Ct.parseBuffer=function(t){var e={},r=t.slice(0,6).toString("utf8");if(r!=="bplist")throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");var n=t.slice(t.length-32,t.length),i=n.readUInt8(6);ys&&console.log("offsetSize: "+i);var o=n.readUInt8(7);ys&&console.log("objectRefSize: "+o);var s=WA(n,8);ys&&console.log("numObjects: "+s);var a=WA(n,16);ys&&console.log("topObject: "+a);var u=WA(n,24);if(ys&&console.log("offsetTableOffset: "+u),s>Ct.maxObjectCount)throw new Error("maxObjectCount exceeded");for(var c=[],l=0;l<s;l++){var f=t.slice(u+l*i,u+(l+1)*i);c[l]=Mr(f,0),ys&&console.log("Offset for Object #"+l+" is "+c[l]+" ["+c[l].toString(16)+"]")}function p(m){var h=c[m],g=t[h],y=(g&240)>>4,_=g&15;switch(y){case 0:return C();case 1:return D();case 8:return j();case 2:return X();case 3:return G();case 4:return U();case 5:return k();case 6:return k(!0);case 10:return M();case 13:return E();default:throw new Error("Unhandled type 0x"+y.toString(16))}function C(){switch(_){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+y.toString(16))}}function N(q){var F="",V;for(V=0;V<q.length&&q[V]==0;V++);for(;V<q.length;V++){var S="00"+q[V].toString(16);F+=S.substr(S.length-2)}return F}function D(){var q=Math.pow(2,_);if(q>4){var F=t.slice(h+1,h+1+q),V=N(F);return qre(V,16)}if(q<Ct.maxObjectSize)return Mr(t.slice(h+1,h+1+q));throw new Error("To little heap space available! Wanted to read "+q+" bytes, but only "+Ct.maxObjectSize+" are available.")}function j(){var q=_+1;if(q<Ct.maxObjectSize)return new Gre(Mr(t.slice(h+1,h+1+q)));throw new Error("To little heap space available! Wanted to read "+q+" bytes, but only "+Ct.maxObjectSize+" are available.")}function X(){var q=Math.pow(2,_);if(q<Ct.maxObjectSize){var F=t.slice(h+1,h+1+q);if(q===4)return F.readFloatBE(0);if(q===8)return F.readDoubleBE(0)}else throw new Error("To little heap space available! Wanted to read "+q+" bytes, but only "+Ct.maxObjectSize+" are available.")}function G(){_!=3&&console.error("Unknown date type :"+_+". Parsing anyway...");var q=t.slice(h+1,h+9);return new Date(Vre+1e3*q.readDoubleBE(0))}function U(){var q=1,F=_;if(_==15){var V=t[h+1],S=(V&240)/16;S!=1&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+S);var P=V&15,oe=Math.pow(2,P);q=2+oe,oe<3,F=Mr(t.slice(h+2,h+2+oe))}if(F<Ct.maxObjectSize)return t.slice(h+q,h+q+F);throw new Error("To little heap space available! Wanted to read "+F+" bytes, but only "+Ct.maxObjectSize+" are available.")}function k(q){q=q||0;var F="utf8",V=_,S=1;if(_==15){var P=t[h+1],oe=(P&240)/16;oe!=1&&console.err("UNEXPECTED LENGTH-INT TYPE! "+oe);var te=P&15,fe=Math.pow(2,te),S=2+fe;fe<3,V=Mr(t.slice(h+2,h+2+fe))}if(V*=q+1,V<Ct.maxObjectSize){var ue=new Buffer(t.slice(h+S,h+S+V));return q&&(ue=Kre(ue),F="ucs2"),ue.toString(F)}else throw new Error("To little heap space available! Wanted to read "+V+" bytes, but only "+Ct.maxObjectSize+" are available.")}function M(){var q=_,F=1;if(_==15){var V=t[h+1],S=(V&240)/16;S!=1&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+S);var P=V&15,oe=Math.pow(2,P);F=2+oe,oe<3,q=Mr(t.slice(h+2,h+2+oe))}if(q*o>Ct.maxObjectSize)throw new Error("To little heap space available!");for(var te=[],fe=0;fe<q;fe++){var ue=Mr(t.slice(h+F+fe*o,h+F+(fe+1)*o));te[fe]=p(ue)}return te}function E(){var q=_,F=1;if(_==15){var V=t[h+1],S=(V&240)/16;S!=1&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+S);var P=V&15,oe=Math.pow(2,P);F=2+oe,oe<3,q=Mr(t.slice(h+2,h+2+oe))}if(q*2*o>Ct.maxObjectSize)throw new Error("To little heap space available!");ys&&console.log("Parsing dictionary #"+m);for(var te={},fe=0;fe<q;fe++){var ue=Mr(t.slice(h+F+fe*o,h+F+(fe+1)*o)),ee=Mr(t.slice(h+F+q*o+fe*o,h+F+q*o+(fe+1)*o)),pe=p(ue),be=p(ee);ys&&console.log("  DICT #"+m+": Mapped "+pe+" to "+be),te[pe]=be}return te}}return[p(a)]};function Mr(t,e){e=e||0;for(var r=0,n=e;n<t.length;n++)r<<=8,r|=t[n]&255;return r}function WA(t,e){var r=t.slice(e,e+8);return r.readUInt32BE(4,8)}function Kre(t){for(var e=t.length,r=0;r<e;r+=2){var n=t[r];t[r]=t[r+1],t[r+1]=n}return t}});var JN=b((OLe,zN)=>{"use strict";var KN=require("os");function zre(){var t=process.env,e=t.HOME,r=t.LOGNAME||t.USER||t.LNAME||t.USERNAME;return process.platform==="win32"?t.USERPROFILE||t.HOMEDRIVE+t.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}zN.exports=typeof KN.homedir=="function"?KN.homedir:zre});var ZN=b((NLe,QN)=>{"use strict";var Jre=JN(),YN=Jre();QN.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return YN?t.replace(/^~($|\/|\\)/,YN+"$1"):t}});var qA=b((BLe,rB)=>{"use strict";var eB=function(t,e,r){return function(){for(var n=this,i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=arguments[o];return new e(function(s,a){i.push(function(u,c){if(u)a(u);else if(r.multiArgs){for(var l=new Array(arguments.length-1),f=1;f<arguments.length;f++)l[f-1]=arguments[f];s(l)}else s(c)}),t.apply(n,i)})}},tB=rB.exports=function(t,e,r){typeof e!="function"&&(r=e,e=Promise),r=r||{},r.exclude=r.exclude||[/.+Sync$/];var n=function(o){var s=function(a){return typeof a=="string"?o===a:a.test(o)};return r.include?r.include.some(s):!r.exclude.some(s)},i=typeof t=="function"?function(){return r.excludeMain?t.apply(this,arguments):eB(t,e,r).apply(this,arguments)}:{};return Object.keys(t).reduce(function(o,s){var a=t[s];return o[s]=typeof a=="function"&&n(s)?eB(a,e,r):a,o},i)};tB.all=tB});var iB=b((FLe,nB)=>{"use strict";var Yre=require("os"),Qre=XN(),Zre=ZN(),ene=qA(),tne=Number(Yre.release().split(".")[0]),rne=Zre(tne>=14?"~/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure.plist":"~/Library/Preferences/com.apple.LaunchServices.plist");nB.exports=()=>{if(process.platform!=="darwin")return Promise.reject(new Error("Only OS X is supported"));let t="com.apple.Safari";return ene(Qre.parseFile)(rne).then(e=>{let r=e&&e[0].LSHandlers;if(!r||r.length===0)return t;for(let n of r)if(n.LSHandlerURLScheme==="http"&&n.LSHandlerRoleAll){t=n.LSHandlerRoleAll;break}return t})}});var pB=b((ULe,fB)=>{"use strict";var GA="pending",oB="settled",Ng="fulfilled",Bg="rejected",nne=function(){},sB=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",ine=typeof setImmediate>"u"?setTimeout:setImmediate,Lp=[],VA;function one(){for(var t=0;t<Lp.length;t++)Lp[t][0](Lp[t][1]);Lp=[],VA=!1}function Fg(t,e){Lp.push([t,e]),VA||(VA=!0,ine(one,0))}function sne(t,e){function r(i){XA(e,i)}function n(i){Pp(e,i)}try{t(r,n)}catch(i){n(i)}}function aB(t){var e=t.owner,r=e._state,n=e._data,i=t[r],o=t.then;if(typeof i=="function"){r=Ng;try{n=i(n)}catch(s){Pp(o,s)}}uB(o,n)||(r===Ng&&XA(o,n),r===Bg&&Pp(o,n))}function uB(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&(typeof e=="function"||typeof e=="object")){var n=e.then;if(typeof n=="function")return n.call(e,function(i){r||(r=!0,e===i?cB(t,i):XA(t,i))},function(i){r||(r=!0,Pp(t,i))}),!0}}catch(i){return r||Pp(t,i),!0}return!1}function XA(t,e){(t===e||!uB(t,e))&&cB(t,e)}function cB(t,e){t._state===GA&&(t._state=oB,t._data=e,Fg(ane,t))}function Pp(t,e){t._state===GA&&(t._state=oB,t._data=e,Fg(une,t))}function lB(t){t._then=t._then.forEach(aB)}function ane(t){t._state=Ng,lB(t)}function une(t){t._state=Bg,lB(t),!t._handled&&sB&&global.process.emit("unhandledRejection",t._data,t)}function cne(t){global.process.emit("rejectionHandled",t)}function Xr(t){if(typeof t!="function")throw new TypeError("Promise resolver "+t+" is not a function");if(!(this instanceof Xr))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],sne(t,this)}Xr.prototype={constructor:Xr,_state:GA,_then:null,_data:void 0,_handled:!1,then:function(t,e){var r={owner:this,then:new this.constructor(nne),fulfilled:t,rejected:e};return(e||t)&&!this._handled&&(this._handled=!0,this._state===Bg&&sB&&Fg(cne,this)),this._state===Ng||this._state===Bg?Fg(aB,r):this._then.push(r),r.then},catch:function(t){return this.then(null,t)}};Xr.all=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new Xr(function(e,r){var n=[],i=0;function o(u){return i++,function(c){n[u]=c,--i||e(n)}}for(var s=0,a;s<t.length;s++)a=t[s],a&&typeof a.then=="function"?a.then(o(s),r):n[s]=a;i||e(n)})};Xr.race=function(t){if(!Array.isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new Xr(function(e,r){for(var n=0,i;n<t.length;n++)i=t[n],i&&typeof i.then=="function"?i.then(e,r):e(i)})};Xr.resolve=function(t){return t&&typeof t=="object"&&t.constructor===Xr?t:new Xr(function(e){e(t)})};Xr.reject=function(t){return new Xr(function(e,r){r(t)})};fB.exports=Xr});var hB=b((jLe,dB)=>{"use strict";dB.exports=typeof Promise=="function"?Promise:pB()});var gB=b((WLe,HB)=>{"use strict";var lne=require("child_process").execFile,mB=hB(),fne=qA();HB.exports=function(t){return process.platform!=="darwin"?mB.reject(new Error("Only OS X systems are supported")):fne(lne,mB)("osascript",["-e",t]).then(function(e){return e.trim()})}});var bB=b((qLe,yB)=>{"use strict";var pne=gB();yB.exports=t=>pne(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)});var IB=b((VLe,wB)=>{var vB=Object.prototype.hasOwnProperty;wB.exports=Kr;function Kr(t){if(!(this instanceof Kr))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof Kr||typeof Map=="function"&&t instanceof Map)t.forEach(function(e,r){this.set(r,e)},this);else if(Array.isArray(t))t.forEach(function(e){this.set(e[0],e[1])},this);else throw new TypeError("invalid argument")}Kr.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach(function(r){r!=="size"&&t.call(e,this._data[r].value,this._data[r].key)},this)};Kr.prototype.has=function(t){return!!KA(this._data,t)};Kr.prototype.get=function(t){var e=KA(this._data,t);return e&&e.value};Kr.prototype.set=function(t,e){hne(this._data,t,e)};Kr.prototype.delete=function(t){var e=KA(this._data,t);e&&(delete this._data[e._index],this._data.size--)};Kr.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})};Object.defineProperty(Kr.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0});Kr.prototype.values=Kr.prototype.keys=Kr.prototype.entries=function(){throw new Error("iterators are not implemented in this version")};function _B(t,e){return t===e||t!==t&&e!==e}function dne(t,e,r){this.key=t,this.value=e,this._index=r}function KA(t,e){for(var r=0,n="_"+e,i=n;vB.call(t,i);i=n+r++)if(_B(t[i].key,e))return t[i]}function hne(t,e,r){for(var n=0,i="_"+e,o=i;vB.call(t,o);o=i+n++)if(_B(t[o].key,e)){t[o].value=r;return}t.size++,t[o]=new dne(e,r,o)}});var AB=b((GLe,zA)=>{process.env.npm_package_name==="pseudomap"&&process.env.npm_lifecycle_script==="test"&&(process.env.TEST_PSEUDOMAP="true");typeof Map=="function"&&!process.env.TEST_PSEUDOMAP?zA.exports=Map:zA.exports=IB()});var EB=b((XLe,SB)=>{SB.exports=ke;ke.Node=xp;ke.create=ke;function ke(t){var e=this;if(e instanceof ke||(e=new ke),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}ke.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null};ke.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};ke.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};ke.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)mne(this,arguments[t]);return this.length};ke.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Hne(this,arguments[t]);return this.length};ke.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};ke.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};ke.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};ke.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};ke.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};ke.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};ke.prototype.map=function(t,e){e=e||this;for(var r=new ke,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};ke.prototype.mapReverse=function(t,e){e=e||this;for(var r=new ke,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};ke.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};ke.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};ke.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};ke.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};ke.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ke;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};ke.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new ke;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};ke.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function mne(t,e){t.tail=new xp(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Hne(t,e){t.head=new xp(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function xp(t,e,r,n){if(!(this instanceof xp))return new xp(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}});var YA=b((KLe,xB)=>{"use strict";xB.exports=ze;var gne=AB(),Cp=require("util"),yne=EB(),bne=typeof Symbol=="function"&&process.env._nodeLRUCacheForceNoSymbol!=="1",jn;bne?jn=function(t){return Symbol(t)}:jn=function(t){return"_"+t};var Ho=jn("max"),Ri=jn("length"),ka=jn("lengthCalculator"),zc=jn("allowStale"),bs=jn("maxAge"),mo=jn("dispose"),LB=jn("noDisposeOnSet"),Dt=jn("lruList"),Un=jn("cache");function Dp(){return 1}function ze(t){if(!(this instanceof ze))return new ze(t);typeof t=="number"&&(t={max:t}),t||(t={});var e=this[Ho]=t.max;(!e||typeof e!="number"||e<=0)&&(this[Ho]=1/0);var r=t.length||Dp;typeof r!="function"&&(r=Dp),this[ka]=r,this[zc]=t.stale||!1,this[bs]=t.maxAge||0,this[mo]=t.dispose,this[LB]=t.noDisposeOnSet||!1,this.reset()}Object.defineProperty(ze.prototype,"max",{set:function(t){(!t||typeof t!="number"||t<=0)&&(t=1/0),this[Ho]=t,Tp(this)},get:function(){return this[Ho]},enumerable:!0});Object.defineProperty(ze.prototype,"allowStale",{set:function(t){this[zc]=!!t},get:function(){return this[zc]},enumerable:!0});Object.defineProperty(ze.prototype,"maxAge",{set:function(t){(!t||typeof t!="number"||t<0)&&(t=0),this[bs]=t,Tp(this)},get:function(){return this[bs]},enumerable:!0});Object.defineProperty(ze.prototype,"lengthCalculator",{set:function(t){typeof t!="function"&&(t=Dp),t!==this[ka]&&(this[ka]=t,this[Ri]=0,this[Dt].forEach(function(e){e.length=this[ka](e.value,e.key),this[Ri]+=e.length},this)),Tp(this)},get:function(){return this[ka]},enumerable:!0});Object.defineProperty(ze.prototype,"length",{get:function(){return this[Ri]},enumerable:!0});Object.defineProperty(ze.prototype,"itemCount",{get:function(){return this[Dt].length},enumerable:!0});ze.prototype.rforEach=function(t,e){e=e||this;for(var r=this[Dt].tail;r!==null;){var n=r.prev;PB(this,t,r,e),r=n}};function PB(t,e,r,n){var i=r.value;$p(t,i)&&(Jc(t,r),t[zc]||(i=void 0)),i&&e.call(n,i.value,i.key,t)}ze.prototype.forEach=function(t,e){e=e||this;for(var r=this[Dt].head;r!==null;){var n=r.next;PB(this,t,r,e),r=n}};ze.prototype.keys=function(){return this[Dt].toArray().map(function(t){return t.key},this)};ze.prototype.values=function(){return this[Dt].toArray().map(function(t){return t.value},this)};ze.prototype.reset=function(){this[mo]&&this[Dt]&&this[Dt].length&&this[Dt].forEach(function(t){this[mo](t.key,t.value)},this),this[Un]=new gne,this[Dt]=new yne,this[Ri]=0};ze.prototype.dump=function(){return this[Dt].map(function(t){if(!$p(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}},this).toArray().filter(function(t){return t})};ze.prototype.dumpLru=function(){return this[Dt]};ze.prototype.inspect=function(t,e){var r="LRUCache {",n=!1,i=this[zc];i&&(r+=`
  allowStale: true`,n=!0);var o=this[Ho];o&&o!==1/0&&(n&&(r+=","),r+=`
  max: `+Cp.inspect(o,e),n=!0);var s=this[bs];s&&(n&&(r+=","),r+=`
  maxAge: `+Cp.inspect(s,e),n=!0);var a=this[ka];a&&a!==Dp&&(n&&(r+=","),r+=`
  length: `+Cp.inspect(this[Ri],e),n=!0);var u=!1;return this[Dt].forEach(function(c){u?r+=`,
  `:(n&&(r+=`,
`),u=!0,r+=`
  `);var l=Cp.inspect(c.key).split(`
`).join(`
  `),f={value:c.value};c.maxAge!==s&&(f.maxAge=c.maxAge),a!==Dp&&(f.length=c.length),$p(this,c)&&(f.stale=!0),f=Cp.inspect(f,e).split(`
`).join(`
  `),r+=l+" => "+f}),(u||n)&&(r+=`
`),r+="}",r};ze.prototype.set=function(t,e,r){r=r||this[bs];var n=r?Date.now():0,i=this[ka](e,t);if(this[Un].has(t)){if(i>this[Ho])return Jc(this,this[Un].get(t)),!1;var o=this[Un].get(t),s=o.value;return this[mo]&&(this[LB]||this[mo](t,s.value)),s.now=n,s.maxAge=r,s.value=e,this[Ri]+=i-s.length,s.length=i,this.get(t),Tp(this),!0}var a=new vne(t,e,i,n,r);return a.length>this[Ho]?(this[mo]&&this[mo](t,e),!1):(this[Ri]+=a.length,this[Dt].unshift(a),this[Un].set(t,this[Dt].head),Tp(this),!0)};ze.prototype.has=function(t){if(!this[Un].has(t))return!1;var e=this[Un].get(t).value;return!$p(this,e)};ze.prototype.get=function(t){return JA(this,t,!0)};ze.prototype.peek=function(t){return JA(this,t,!1)};ze.prototype.pop=function(){var t=this[Dt].tail;return t?(Jc(this,t),t.value):null};ze.prototype.del=function(t){Jc(this,this[Un].get(t))};ze.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var n=t[r],i=n.e||0;if(i===0)this.set(n.k,n.v);else{var o=i-e;o>0&&this.set(n.k,n.v,o)}}};ze.prototype.prune=function(){var t=this;this[Un].forEach(function(e,r){JA(t,r,!1)})};function JA(t,e,r){var n=t[Un].get(e);if(n){var i=n.value;$p(t,i)?(Jc(t,n),t[zc]||(i=void 0)):r&&t[Dt].unshiftNode(n),i&&(i=i.value)}return i}function $p(t,e){if(!e||!e.maxAge&&!t[bs])return!1;var r=!1,n=Date.now()-e.now;return e.maxAge?r=n>e.maxAge:r=t[bs]&&n>t[bs],r}function Tp(t){if(t[Ri]>t[Ho])for(var e=t[Dt].tail;t[Ri]>t[Ho]&&e!==null;){var r=e.prev;Jc(t,e),e=r}}function Jc(t,e){if(e){var r=e.value;t[mo]&&t[mo](r.key,r.value),t[Ri]-=r.length,t[Un].delete(r.key),t[Dt].removeNode(e)}}function vne(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}});var kB=b((zLe,RB)=>{RB.exports=MB;MB.sync=wne;var QA=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",CB=require("path"),_ne=QA?";":":",DB=lv();function TB(t){var e=new Error("not found: "+t);return e.code="ENOENT",e}function $B(t,e){var r=e.colon||_ne,n=e.path||process.env.PATH||"",i=[""];n=n.split(r);var o="";return QA&&(n.unshift(process.cwd()),o=e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM",i=o.split(r),t.indexOf(".")!==-1&&i[0]!==""&&i.unshift("")),(t.match(/\//)||QA&&t.match(/\\/))&&(n=[""]),{env:n,ext:i,extExe:o}}function MB(t,e,r){typeof e=="function"&&(r=e,e={});var n=$B(t,e),i=n.env,o=n.ext,s=n.extExe,a=[];(function u(c,l){if(c===l)return e.all&&a.length?r(null,a):r(TB(t));var f=i[c];f.charAt(0)==='"'&&f.slice(-1)==='"'&&(f=f.slice(1,-1));var p=CB.join(f,t);!f&&/^\.[\\\/]/.test(t)&&(p=t.slice(0,2)+p),function m(h,g){if(h===g)return u(c+1,l);var y=o[h];DB(p+y,{pathExt:s},function(_,C){if(!_&&C)if(e.all)a.push(p+y);else return r(null,p+y);return m(h+1,g)})}(0,o.length)})(0,i.length)}function wne(t,e){e=e||{};for(var r=$B(t,e),n=r.env,i=r.ext,o=r.extExe,s=[],a=0,u=n.length;a<u;a++){var c=n[a];c.charAt(0)==='"'&&c.slice(-1)==='"'&&(c=c.slice(1,-1));var l=CB.join(c,t);!c&&/^\.[\\\/]/.test(t)&&(l=t.slice(0,2)+l);for(var f=0,p=i.length;f<p;f++){var m=l+i[f],h;try{if(h=DB.sync(m,{pathExt:o}),h)if(e.all)s.push(m);else return m}catch{}}}if(e.all&&s.length)return s;if(e.nothrow)return null;throw TB(t)}});var FB=b((JLe,BB)=>{"use strict";var OB=require("path"),NB=kB(),Ine=YA(),Ug=new Ine({max:50,maxAge:30*1e3}),Ane=new RegExp(process.platform==="win32"?/[\/\\]/:/\//);function Sne(t,e){var r;if(Ane.test(t)&&(t=OB.resolve(t)),e=!!e,r=Ug.get(t+"!"+e),Ug.has(t))return Ug.get(t);try{r=e?NB.sync(t,{pathExt:OB.delimiter+(process.env.PATHEXT||"")}):NB.sync(t)}catch{}return Ug.set(t+"!"+e,r),r}BB.exports=Sne});var qB=b((YLe,WB)=>{"use strict";var ZA=require("fs"),Ene=YA(),UB=FB(),Lne=process.platform==="win32",eS=new Ene({max:50,maxAge:30*1e3});function Pne(t){var e,r,n,i;if(eS.has(t))return eS.get(t);e=new Buffer(150);try{r=ZA.openSync(t,"r"),ZA.readSync(r,e,0,150,0),ZA.closeSync(r)}catch{}return n=e.toString().trim().match(/#!(.+)/i),n&&(i=n[1].replace(/\/usr\/bin\/env\s+/i,"")),eS.set(t,i),i}function jB(t,e){return t=""+t,e?(t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t='"'+t+'"'):t=t.replace(/([\(\)%!\^<>&|;,"'\s])/g,"^$1"),t}function xne(t){return/^[a-z0-9_-]+$/i.test(t)?t:jB(t,!0)}function Cne(t,e,r){var n,i,o,s;return e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=r||{},s=t,Lne&&(o=UB(t),o=o||UB(t,!0),n=o&&Pne(o),n&&(e.unshift(o),t=n),i=t!=="echo",t=xne(t),e=e.map(function(a){return jB(a,i)}),e=["/s","/c",'"'+t+(e.length?" "+e.join(" "):"")+'"'],t=process.env.comspec||"cmd.exe",r.windowsVerbatimArguments=!0),{command:t,args:e,options:r,file:o,original:s}}WB.exports=Cne});var KB=b((QLe,jg)=>{"use strict";var VB=process.platform==="win32";function GB(t,e){var r;return r=new Error(e+" "+t+" ENOENT"),r.code=r.errno="ENOENT",r.syscall=e+" "+t,r}function Dne(t,e){var r;VB&&(r=t.emit,t.emit=function(n,i){var o;return n==="exit"&&(o=XB(i,e,"spawn"),o)?r.call(t,"error",o):r.apply(t,arguments)})}function XB(t,e,r){return VB&&t===1&&!e.file?GB(e.original,r):null}jg.exports.hookChildProcess=Dne;jg.exports.verifyENOENT=XB;jg.exports.notFoundError=GB});var QB=b((ZLe,Mp)=>{"use strict";var Tne=require("child_process"),zB=qB(),JB=KB();function YB(t,e,r){var n,i;return n=zB(t,e,r),i=Tne.spawn(n.command,n.args,n.options),JB.hookChildProcess(i,n),i}Mp.exports=YB;Mp.exports.spawn=YB;Mp.exports._parse=zB;Mp.exports._enoent=JB});var eF=b((ePe,ZB)=>{"use strict";ZB.exports=function(t){var e=typeof t=="string"?`
`:`
`.charCodeAt(),r=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,t.length-1)),t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t}});var nF=b((tPe,rF)=>{"use strict";var tF=Object.getOwnPropertySymbols,$ne=Object.prototype.hasOwnProperty,Mne=Object.prototype.propertyIsEnumerable;function Rne(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function kne(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(o){return e[o]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}rF.exports=kne()?Object.assign:function(t,e){for(var r,n=Rne(t),i,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var s in r)$ne.call(r,s)&&(n[s]=r[s]);if(tF){i=tF(r);for(var a=0;a<i.length;a++)Mne.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}});var tS=b((rPe,iF)=>{"use strict";iF.exports=function(t){t=t||{};var e=t.env||process.env,r=t.platform||process.platform;return r!=="win32"?"PATH":Object.keys(e).filter(function(n){return n.toUpperCase()==="PATH"})[0]||"Path"}});var sF=b((nPe,oF)=>{"use strict";var Rp=require("path"),One=tS();oF.exports=function(t){t=t||{};for(var e,r=Rp.resolve(t.cwd||"."),n=[];e!==r;)n.push(Rp.join(r,"node_modules/.bin")),e=r,r=Rp.resolve(r,"..");return n.push(Rp.dirname(process.execPath)),n.concat(t.path||process.env[One()]).join(Rp.delimiter)}});var uF=b((iPe,kp)=>{"use strict";var Nne=require("child_process"),rS=QB(),Bne=eF(),nS=nF(),Fne=sF(),aF=tS()(),Une=1024*1024*10;kp.exports=function(t,e,r){return new Promise(function(n,i){var o=rS._parse(t,e,r);r=nS({maxBuffer:Une,stripEof:!0,preferLocal:!0},o.options);var s=function(u){return r.stripEof&&(u=Bne(u)),u};r.preferLocal&&(r.env=nS({},r.env||process.env),r.env[aF]=Fne({cwd:r.cwd,path:r.env[aF]}));var a=Nne.execFile(o.command,o.args,r,function(u,c,l){if(u){u.stdout=c,u.stderr=l,i(u);return}n({stdout:s(c),stderr:s(l)})});rS._enoent.hookChildProcess(a,o)})};kp.exports.shell=function(t,e){var r,n;return e=nS({},e),process.platform==="win32"?(r=process.env.comspec||"cmd.exe",n=["/s","/c",'"'+t+'"'],e.windowsVerbatimArguments=!0):(r="/bin/sh",n=["-c",t]),e.shell&&(r=e.shell),kp.exports(r,n,e)};kp.exports.spawn=rS});var lF=b((oPe,cF)=>{"use strict";cF.exports=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.toLowerCase().replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})}});var pF=b((sPe,fF)=>{"use strict";var jne=uF(),Wne=lF();fF.exports=function(){return process.platform!=="linux"?Promise.reject(new Error("Only Linux systems are supported")):jne("xdg-mime",["query","default","x-scheme-handler/http"]).then(t=>{let e=t.stdout.trim();return{name:Wne(e.replace(/.desktop$/,"").replace("-"," ")),id:e}})}});var hF=b((aPe,dF)=>{"use strict";var qne=iB(),Vne=bB();dF.exports=()=>process.platform==="linux"?pF()():process.platform==="darwin"?qne().then(t=>Vne(t).then(e=>({name:e,id:t}))):Promise.reject(new Error("Only macOS and Linux are supported"))});var go=b((DPe,oS)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?oS.exports={nextTick:Kne}:oS.exports=process;function Kne(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,s;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return process.nextTick(function(){t.apply(null,o)})}}});var sS=b((TPe,wF)=>{var zne={}.toString;wF.exports=Array.isArray||function(t){return zne.call(t)=="[object Array]"}});var aS=b(($Pe,IF)=>{IF.exports=require("stream")});var bo=b((uS,SF)=>{var Xg=require("buffer"),yo=Xg.Buffer;function AF(t,e){for(var r in t)e[r]=t[r]}yo.from&&yo.alloc&&yo.allocUnsafe&&yo.allocUnsafeSlow?SF.exports=Xg:(AF(Xg,uS),uS.Buffer=Qc);function Qc(t,e,r){return yo(t,e,r)}AF(yo,Qc);Qc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return yo(t,e,r)};Qc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=yo(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Qc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return yo(t)};Qc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Xg.SlowBuffer(t)}});var Wn=b(dr=>{function Jne(t){return Array.isArray?Array.isArray(t):Kg(t)==="[object Array]"}dr.isArray=Jne;function Yne(t){return typeof t=="boolean"}dr.isBoolean=Yne;function Qne(t){return t===null}dr.isNull=Qne;function Zne(t){return t==null}dr.isNullOrUndefined=Zne;function eie(t){return typeof t=="number"}dr.isNumber=eie;function tie(t){return typeof t=="string"}dr.isString=tie;function rie(t){return typeof t=="symbol"}dr.isSymbol=rie;function nie(t){return t===void 0}dr.isUndefined=nie;function iie(t){return Kg(t)==="[object RegExp]"}dr.isRegExp=iie;function oie(t){return typeof t=="object"&&t!==null}dr.isObject=oie;function sie(t){return Kg(t)==="[object Date]"}dr.isDate=sie;function aie(t){return Kg(t)==="[object Error]"||t instanceof Error}dr.isError=aie;function uie(t){return typeof t=="function"}dr.isFunction=uie;function cie(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}dr.isPrimitive=cie;dr.isBuffer=Buffer.isBuffer;function Kg(t){return Object.prototype.toString.call(t)}});var EF=b((RPe,cS)=>{typeof Object.create=="function"?cS.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:cS.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Tt=b((kPe,fS)=>{try{if(lS=require("util"),typeof lS.inherits!="function")throw"";fS.exports=lS.inherits}catch{fS.exports=EF()}var lS});var PF=b((OPe,pS)=>{"use strict";function lie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var LF=bo().Buffer,Np=require("util");function fie(t,e,r){t.copy(e,r)}pS.exports=function(){function t(){lie(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return LF.alloc(0);if(this.length===1)return this.head.data;for(var n=LF.allocUnsafe(r>>>0),i=this.head,o=0;i;)fie(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();Np&&Np.inspect&&Np.inspect.custom&&(pS.exports.prototype[Np.inspect.custom]=function(){var t=Np.inspect({length:this.length});return this.constructor.name+" "+t})});var dS=b((NPe,DF)=>{"use strict";var xF=go();function pie(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&xF.nextTick(CF,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(xF.nextTick(CF,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function die(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function CF(t,e){t.emit("error",e)}DF.exports={destroy:pie,undestroy:die}});var zg=b((BPe,TF)=>{TF.exports=require("util").deprecate});var mS=b((FPe,FF)=>{"use strict";var Na=go();FF.exports=wt;function MF(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Die(e,t)}}var hie=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Na.nextTick,Zc;wt.WritableState=Fp;var RF=Object.create(Wn());RF.inherits=Tt();var mie={deprecate:zg()},kF=aS(),Yg=bo().Buffer,Hie=global.Uint8Array||function(){};function gie(t){return Yg.from(t)}function yie(t){return Yg.isBuffer(t)||t instanceof Hie}var OF=dS();RF.inherits(wt,kF);function bie(){}function Fp(t,e){Zc=Zc||Ba(),t=t||{};var r=e instanceof Zc;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Eie(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new MF(this)}Fp.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Fp.prototype,"buffer",{get:mie.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Jg;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Jg=Function.prototype[Symbol.hasInstance],Object.defineProperty(wt,Symbol.hasInstance,{value:function(t){return Jg.call(this,t)?!0:this!==wt?!1:t&&t._writableState instanceof Fp}})):Jg=function(t){return t instanceof this};function wt(t){if(Zc=Zc||Ba(),!Jg.call(wt,this)&&!(this instanceof Zc))return new wt(t);this._writableState=new Fp(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),kF.call(this)}wt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function vie(t,e){var r=new Error("write after end");t.emit("error",r),Na.nextTick(e,r)}function _ie(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),Na.nextTick(n,o),i=!1),i}wt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&yie(t);return o&&!Yg.isBuffer(t)&&(t=gie(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=bie),n.ended?vie(this,r):(o||_ie(this,n,t,r))&&(n.pendingcb++,i=Iie(this,n,o,t,e,r)),i};wt.prototype.cork=function(){var t=this._writableState;t.corked++};wt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&NF(this,t))};wt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function wie(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Yg.from(e,r)),e}Object.defineProperty(wt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Iie(t,e,r,n,i,o){if(!r){var s=wie(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else hS(t,e,!1,a,n,i,o);return u}function hS(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Aie(t,e,r,n,i){--e.pendingcb,r?(Na.nextTick(i,n),Na.nextTick(Bp,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Bp(t,e))}function Sie(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Eie(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Sie(r),e)Aie(t,r,n,e,i);else{var o=BF(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&NF(t,r),n?hie($F,t,r,o,i):$F(t,r,o,i)}}function $F(t,e,r,n){r||Lie(t,e),e.pendingcb--,n(),Bp(t,e)}function Lie(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function NF(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,hS(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new MF(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(hS(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}wt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};wt.prototype._writev=null;wt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Cie(this,n,r)};function BF(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Pie(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Bp(t,e)})}function xie(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Na.nextTick(Pie,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Bp(t,e){var r=BF(e);return r&&(xie(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function Cie(t,e,r){e.ending=!0,Bp(t,e),r&&(e.finished?Na.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Die(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(wt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});wt.prototype.destroy=OF.destroy;wt.prototype._undestroy=OF.undestroy;wt.prototype._destroy=function(t,e){this.end(),e(t)}});var Ba=b((UPe,qF)=>{"use strict";var UF=go(),Tie=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};qF.exports=vo;var jF=Object.create(Wn());jF.inherits=Tt();var WF=yS(),gS=mS();jF.inherits(vo,WF);for(HS=Tie(gS.prototype),Qg=0;Qg<HS.length;Qg++)Zg=HS[Qg],vo.prototype[Zg]||(vo.prototype[Zg]=gS.prototype[Zg]);var HS,Zg,Qg;function vo(t){if(!(this instanceof vo))return new vo(t);WF.call(this,t),gS.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",$ie)}Object.defineProperty(vo.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function $ie(){this.allowHalfOpen||this._writableState.ended||UF.nextTick(Mie,this)}function Mie(t){t.end()}Object.defineProperty(vo.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});vo.prototype._destroy=function(t,e){this.push(null),this.end(),UF.nextTick(e,t)}});var _S=b(GF=>{"use strict";var vS=bo().Buffer,VF=vS.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Rie(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function kie(t){var e=Rie(t);if(typeof e!="string"&&(vS.isEncoding===VF||!VF(t)))throw new Error("Unknown encoding: "+t);return e||t}GF.StringDecoder=Up;function Up(t){this.encoding=kie(t);var e;switch(this.encoding){case"utf16le":this.text=jie,this.end=Wie,e=4;break;case"utf8":this.fillLast=Bie,e=4;break;case"base64":this.text=qie,this.end=Vie,e=3;break;default:this.write=Gie,this.end=Xie;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=vS.allocUnsafe(e)}Up.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Up.prototype.end=Uie;Up.prototype.text=Fie;Up.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function bS(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Oie(t,e,r){var n=e.length-1;if(n<r)return 0;var i=bS(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=bS(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=bS(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Nie(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Bie(t){var e=this.lastTotal-this.lastNeed,r=Nie(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Fie(t,e){var r=Oie(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Uie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function jie(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Wie(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function qie(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Vie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Gie(t){return t.toString(this.encoding)}function Xie(t){return t&&t.length?this.write(t):""}});var yS=b((qPe,iU)=>{"use strict";var tl=go();iU.exports=Je;var Kie=sS(),jp;Je.ReadableState=ZF;var WPe=require("events").EventEmitter,JF=function(t,e){return t.listeners(e).length},ES=aS(),Wp=bo().Buffer,zie=global.Uint8Array||function(){};function Jie(t){return Wp.from(t)}function Yie(t){return Wp.isBuffer(t)||t instanceof zie}var YF=Object.create(Wn());YF.inherits=Tt();var wS=require("util"),Me=void 0;wS&&wS.debuglog?Me=wS.debuglog("stream"):Me=function(){};var Qie=PF(),QF=dS(),el;YF.inherits(Je,ES);var IS=["error","close","destroy","pause","resume"];function Zie(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Kie(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function ZF(t,e){jp=jp||Ba(),t=t||{};var r=e instanceof jp;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Qie,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(el||(el=_S().StringDecoder),this.decoder=new el(t.encoding),this.encoding=t.encoding)}function Je(t){if(jp=jp||Ba(),!(this instanceof Je))return new Je(t);this._readableState=new ZF(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ES.call(this)}Object.defineProperty(Je.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Je.prototype.destroy=QF.destroy;Je.prototype._undestroy=QF.undestroy;Je.prototype._destroy=function(t,e){this.push(null),e(t)};Je.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Wp.from(t,e),e=""),n=!0),eU(this,t,e,!1,n)};Je.prototype.unshift=function(t){return eU(this,t,null,!0,!1)};function eU(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,noe(t,o);else{var s;i||(s=eoe(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Wp.prototype&&(e=Jie(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):AS(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?AS(t,o,e,!1):tU(t,o)):AS(t,o,e,!1))):n||(o.reading=!1)}return toe(o)}function AS(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ey(t)),tU(t,e)}function eoe(t,e){var r;return!Yie(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function toe(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Je.prototype.isPaused=function(){return this._readableState.flowing===!1};Je.prototype.setEncoding=function(t){return el||(el=_S().StringDecoder),this._readableState.decoder=new el(t),this._readableState.encoding=t,this};var XF=8388608;function roe(t){return t>=XF?t=XF:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function KF(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=roe(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Je.prototype.read=function(t){Me("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Me("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?SS(this):ey(this),null;if(t=KF(t,e),t===0&&e.ended)return e.length===0&&SS(this),null;var n=e.needReadable;Me("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Me("length less than watermark",n)),e.ended||e.reading?(n=!1,Me("reading or ended",n)):n&&(Me("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=KF(r,e)));var i;return t>0?i=rU(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&SS(this)),i!==null&&this.emit("data",i),i};function noe(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,ey(t)}}function ey(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Me("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?tl.nextTick(zF,t):zF(t))}function zF(t){Me("emit readable"),t.emit("readable"),LS(t)}function tU(t,e){e.readingMore||(e.readingMore=!0,tl.nextTick(ioe,t,e))}function ioe(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Me("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}Je.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};Je.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Me("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:y;n.endEmitted?tl.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,C){Me("onunpipe"),_===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,l())}function a(){Me("onend"),t.end()}var u=ooe(r);t.on("drain",u);var c=!1;function l(){Me("cleanup"),t.removeListener("close",h),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",p),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var f=!1;r.on("data",p);function p(_){Me("ondata"),f=!1;var C=t.write(_);C===!1&&!f&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&nU(n.pipes,t)!==-1)&&!c&&(Me("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function m(_){Me("onerror",_),y(),t.removeListener("error",m),JF(t,"error")===0&&t.emit("error",_)}Zie(t,"error",m);function h(){t.removeListener("finish",g),y()}t.once("close",h);function g(){Me("onfinish"),t.removeListener("close",h),y()}t.once("finish",g);function y(){Me("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Me("pipe resume"),r.resume()),t};function ooe(t){return function(){var e=t._readableState;Me("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&JF(t,"data")&&(e.flowing=!0,LS(t))}}Je.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=nU(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Je.prototype.on=function(t,e){var r=ES.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ey(this):tl.nextTick(soe,this))}return r};Je.prototype.addListener=Je.prototype.on;function soe(t){Me("readable nexttick read 0"),t.read(0)}Je.prototype.resume=function(){var t=this._readableState;return t.flowing||(Me("resume"),t.flowing=!0,aoe(this,t)),this};function aoe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,tl.nextTick(uoe,t,e))}function uoe(t,e){e.reading||(Me("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),LS(t),e.flowing&&!e.reading&&t.read(0)}Je.prototype.pause=function(){return Me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Me("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function LS(t){var e=t._readableState;for(Me("flow",e.flowing);e.flowing&&t.read()!==null;);}Je.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Me("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Me("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<IS.length;o++)t.on(IS[o],this.emit.bind(this,IS[o]));return this._read=function(s){Me("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(Je.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Je._fromList=rU;function rU(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=coe(t,e.buffer,e.decoder),r}function coe(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?loe(t,e):foe(t,e),n}function loe(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function foe(t,e){var r=Wp.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function SS(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,tl.nextTick(poe,e,t))}function poe(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function nU(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var PS=b((VPe,aU)=>{"use strict";aU.exports=_o;var ty=Ba(),sU=Object.create(Wn());sU.inherits=Tt();sU.inherits(_o,ty);function doe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function _o(t){if(!(this instanceof _o))return new _o(t);ty.call(this,t),this._transformState={afterTransform:doe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",hoe)}function hoe(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){oU(t,e,r)}):oU(this,null,null)}_o.prototype.push=function(t,e){return this._transformState.needTransform=!1,ty.prototype.push.call(this,t,e)};_o.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};_o.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};_o.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};_o.prototype._destroy=function(t,e){var r=this;ty.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function oU(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var fU=b((GPe,lU)=>{"use strict";lU.exports=qp;var uU=PS(),cU=Object.create(Wn());cU.inherits=Tt();cU.inherits(qp,uU);function qp(t){if(!(this instanceof qp))return new qp(t);uU.call(this,t)}qp.prototype._transform=function(t,e,r){r(null,t)}});var pU=b((Yt,ry)=>{var ki=require("stream");process.env.READABLE_STREAM==="disable"&&ki?(ry.exports=ki,Yt=ry.exports=ki.Readable,Yt.Readable=ki.Readable,Yt.Writable=ki.Writable,Yt.Duplex=ki.Duplex,Yt.Transform=ki.Transform,Yt.PassThrough=ki.PassThrough,Yt.Stream=ki):(Yt=ry.exports=yS(),Yt.Stream=ki||Yt,Yt.Readable=Yt,Yt.Writable=mS(),Yt.Duplex=Ba(),Yt.Transform=PS(),Yt.PassThrough=fU())});var mU=b((XPe,hU)=>{var dU=pU(),moe=require("util");function Hoe(t){return!(typeof t.pipe!="function"||!t.readable||typeof t._read!="function"||!t._readableState)}function goe(t,e){if(!Hoe(e))throw new Error("All input streams must be readable");var r=this;e._buffer=[],e.on("readable",function(){for(var n=e.read();n;)this===t[0]?r.push(n):this._buffer.push(n),n=e.read()}),e.on("end",function(){for(var n=t[0];n&&n._readableState.ended;n=t[0]){for(;n._buffer.length;)r.push(n._buffer.shift());t.shift()}t.length||r.push(null)}),e.on("error",this.emit.bind(this,"error")),t.push(e)}function Vp(t,e){if(!(this instanceof Vp))return new Vp(t,e);if(t=t||[],e=e||{},e.objectMode=!0,dU.call(this,e),Array.isArray(t)||(t=[t]),!t.length)return this.push(null);var r=goe.bind(this,[]);t.forEach(function(n){Array.isArray(n)?n.forEach(r):r(n)})}moe.inherits(Vp,dU);Vp.prototype._read=function(){};hU.exports=Vp});var xS=b((KPe,HU)=>{HU.exports=require("stream")});var yU=b((zPe,CS)=>{"use strict";function yoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var gU=bo().Buffer,Gp=require("util");function boe(t,e,r){t.copy(e,r)}CS.exports=function(){function t(){yoe(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return gU.alloc(0);if(this.length===1)return this.head.data;for(var n=gU.allocUnsafe(r>>>0),i=this.head,o=0;i;)boe(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();Gp&&Gp.inspect&&Gp.inspect.custom&&(CS.exports.prototype[Gp.inspect.custom]=function(){var t=Gp.inspect({length:this.length});return this.constructor.name+" "+t})});var DS=b((JPe,_U)=>{"use strict";var bU=go();function voe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(!this._writableState||!this._writableState.errorEmitted)&&bU.nextTick(vU,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?(bU.nextTick(vU,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(o)}),this)}function _oe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function vU(t,e){t.emit("error",e)}_U.exports={destroy:voe,undestroy:_oe}});var $S=b((YPe,xU)=>{"use strict";var Fa=go();xU.exports=It;function IU(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Boe(e,t)}}var woe=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Fa.nextTick,rl;It.WritableState=Kp;var AU=Wn();AU.inherits=Tt();var Ioe={deprecate:zg()},SU=xS(),iy=bo().Buffer,Aoe=global.Uint8Array||function(){};function Soe(t){return iy.from(t)}function Eoe(t){return iy.isBuffer(t)||t instanceof Aoe}var EU=DS();AU.inherits(It,SU);function Loe(){}function Kp(t,e){rl=rl||Ua(),t=t||{};var r=e instanceof rl;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Moe(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new IU(this)}Kp.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Kp.prototype,"buffer",{get:Ioe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ny;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ny=Function.prototype[Symbol.hasInstance],Object.defineProperty(It,Symbol.hasInstance,{value:function(t){return ny.call(this,t)?!0:this!==It?!1:t&&t._writableState instanceof Kp}})):ny=function(t){return t instanceof this};function It(t){if(rl=rl||Ua(),!ny.call(It,this)&&!(this instanceof rl))return new It(t);this._writableState=new Kp(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),SU.call(this)}It.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Poe(t,e){var r=new Error("write after end");t.emit("error",r),Fa.nextTick(e,r)}function xoe(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),Fa.nextTick(n,o),i=!1),i}It.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&Eoe(t);return o&&!iy.isBuffer(t)&&(t=Soe(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Loe),n.ended?Poe(this,r):(o||xoe(this,n,t,r))&&(n.pendingcb++,i=Doe(this,n,o,t,e,r)),i};It.prototype.cork=function(){var t=this._writableState;t.corked++};It.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&LU(this,t))};It.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Coe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=iy.from(e,r)),e}Object.defineProperty(It.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Doe(t,e,r,n,i,o){if(!r){var s=Coe(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else TS(t,e,!1,a,n,i,o);return u}function TS(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Toe(t,e,r,n,i){--e.pendingcb,r?(Fa.nextTick(i,n),Fa.nextTick(Xp,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Xp(t,e))}function $oe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Moe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if($oe(r),e)Toe(t,r,n,e,i);else{var o=PU(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&LU(t,r),n?woe(wU,t,r,o,i):wU(t,r,o,i)}}function wU(t,e,r,n){r||Roe(t,e),e.pendingcb--,n(),Xp(t,e)}function Roe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function LU(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,TS(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new IU(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(TS(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}It.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};It.prototype._writev=null;It.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&Noe(this,n,r)};function PU(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function koe(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Xp(t,e)})}function Ooe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Fa.nextTick(koe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Xp(t,e){var r=PU(e);return r&&(Ooe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function Noe(t,e,r){e.ending=!0,Xp(t,e),r&&(e.finished?Fa.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Boe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}Object.defineProperty(It.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});It.prototype.destroy=EU.destroy;It.prototype._undestroy=EU.undestroy;It.prototype._destroy=function(t,e){this.end(),e(t)}});var Ua=b((QPe,$U)=>{"use strict";var CU=go(),Foe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};$U.exports=wo;var DU=Wn();DU.inherits=Tt();var TU=kS(),RS=$S();DU.inherits(wo,TU);for(MS=Foe(RS.prototype),oy=0;oy<MS.length;oy++)sy=MS[oy],wo.prototype[sy]||(wo.prototype[sy]=RS.prototype[sy]);var MS,sy,oy;function wo(t){if(!(this instanceof wo))return new wo(t);TU.call(this,t),RS.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Uoe)}Object.defineProperty(wo.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Uoe(){this.allowHalfOpen||this._writableState.ended||CU.nextTick(joe,this)}function joe(t){t.end()}Object.defineProperty(wo.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});wo.prototype._destroy=function(t,e){this.push(null),this.end(),CU.nextTick(e,t)}});var BS=b(RU=>{"use strict";var NS=bo().Buffer,MU=NS.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Woe(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function qoe(t){var e=Woe(t);if(typeof e!="string"&&(NS.isEncoding===MU||!MU(t)))throw new Error("Unknown encoding: "+t);return e||t}RU.StringDecoder=zp;function zp(t){this.encoding=qoe(t);var e;switch(this.encoding){case"utf16le":this.text=Joe,this.end=Yoe,e=4;break;case"utf8":this.fillLast=Xoe,e=4;break;case"base64":this.text=Qoe,this.end=Zoe,e=3;break;default:this.write=ese,this.end=tse;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=NS.allocUnsafe(e)}zp.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};zp.prototype.end=zoe;zp.prototype.text=Koe;zp.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function OS(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Voe(t,e,r){var n=e.length-1;if(n<r)return 0;var i=OS(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=OS(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=OS(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Goe(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Xoe(t){var e=this.lastTotal-this.lastNeed,r=Goe(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Koe(t,e){var r=Voe(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function zoe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Joe(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Yoe(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Qoe(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Zoe(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function ese(t){return t.toString(this.encoding)}function tse(t){return t&&t.length?this.write(t):""}});var kS=b((txe,XU)=>{"use strict";var il=go();XU.exports=Ye;var rse=sS(),Jp;Ye.ReadableState=jU;var exe=require("events").EventEmitter,BU=function(t,e){return t.listeners(e).length},qS=xS(),Yp=bo().Buffer,nse=global.Uint8Array||function(){};function ise(t){return Yp.from(t)}function ose(t){return Yp.isBuffer(t)||t instanceof nse}var FU=Wn();FU.inherits=Tt();var FS=require("util"),Re=void 0;FS&&FS.debuglog?Re=FS.debuglog("stream"):Re=function(){};var sse=yU(),UU=DS(),nl;FU.inherits(Ye,qS);var US=["error","close","destroy","pause","resume"];function ase(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):rse(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function jU(t,e){Jp=Jp||Ua(),t=t||{};var r=e instanceof Jp;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new sse,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(nl||(nl=BS().StringDecoder),this.decoder=new nl(t.encoding),this.encoding=t.encoding)}function Ye(t){if(Jp=Jp||Ua(),!(this instanceof Ye))return new Ye(t);this._readableState=new jU(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),qS.call(this)}Object.defineProperty(Ye.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Ye.prototype.destroy=UU.destroy;Ye.prototype._undestroy=UU.undestroy;Ye.prototype._destroy=function(t,e){this.push(null),e(t)};Ye.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Yp.from(t,e),e=""),n=!0),WU(this,t,e,!1,n)};Ye.prototype.unshift=function(t){return WU(this,t,null,!0,!1)};function WU(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,fse(t,o);else{var s;i||(s=use(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Yp.prototype&&(e=ise(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):jS(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?jS(t,o,e,!1):qU(t,o)):jS(t,o,e,!1))):n||(o.reading=!1)}return cse(o)}function jS(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ay(t)),qU(t,e)}function use(t,e){var r;return!ose(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function cse(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Ye.prototype.isPaused=function(){return this._readableState.flowing===!1};Ye.prototype.setEncoding=function(t){return nl||(nl=BS().StringDecoder),this._readableState.decoder=new nl(t),this._readableState.encoding=t,this};var kU=8388608;function lse(t){return t>=kU?t=kU:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function OU(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=lse(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ye.prototype.read=function(t){Re("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Re("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?WS(this):ay(this),null;if(t=OU(t,e),t===0&&e.ended)return e.length===0&&WS(this),null;var n=e.needReadable;Re("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Re("length less than watermark",n)),e.ended||e.reading?(n=!1,Re("reading or ended",n)):n&&(Re("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=OU(r,e)));var i;return t>0?i=VU(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&WS(this)),i!==null&&this.emit("data",i),i};function fse(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,ay(t)}}function ay(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Re("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?il.nextTick(NU,t):NU(t))}function NU(t){Re("emit readable"),t.emit("readable"),VS(t)}function qU(t,e){e.readingMore||(e.readingMore=!0,il.nextTick(pse,t,e))}function pse(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Re("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}Ye.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};Ye.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Re("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:y;n.endEmitted?il.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(_,C){Re("onunpipe"),_===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,l())}function a(){Re("onend"),t.end()}var u=dse(r);t.on("drain",u);var c=!1;function l(){Re("cleanup"),t.removeListener("close",h),t.removeListener("finish",g),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",p),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}var f=!1;r.on("data",p);function p(_){Re("ondata"),f=!1;var C=t.write(_);C===!1&&!f&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&GU(n.pipes,t)!==-1)&&!c&&(Re("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,f=!0),r.pause())}function m(_){Re("onerror",_),y(),t.removeListener("error",m),BU(t,"error")===0&&t.emit("error",_)}ase(t,"error",m);function h(){t.removeListener("finish",g),y()}t.once("close",h);function g(){Re("onfinish"),t.removeListener("close",h),y()}t.once("finish",g);function y(){Re("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Re("pipe resume"),r.resume()),t};function dse(t){return function(){var e=t._readableState;Re("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&BU(t,"data")&&(e.flowing=!0,VS(t))}}Ye.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=GU(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Ye.prototype.on=function(t,e){var r=qS.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&ay(this):il.nextTick(hse,this))}return r};Ye.prototype.addListener=Ye.prototype.on;function hse(t){Re("readable nexttick read 0"),t.read(0)}Ye.prototype.resume=function(){var t=this._readableState;return t.flowing||(Re("resume"),t.flowing=!0,mse(this,t)),this};function mse(t,e){e.resumeScheduled||(e.resumeScheduled=!0,il.nextTick(Hse,t,e))}function Hse(t,e){e.reading||(Re("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),VS(t),e.flowing&&!e.reading&&t.read(0)}Ye.prototype.pause=function(){return Re("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Re("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function VS(t){var e=t._readableState;for(Re("flow",e.flowing);e.flowing&&t.read()!==null;);}Ye.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Re("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Re("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(s){return function(){return t[s].apply(t,arguments)}}(i));for(var o=0;o<US.length;o++)t.on(US[o],this.emit.bind(this,US[o]));return this._read=function(s){Re("wrapped _read",s),n&&(n=!1,t.resume())},this};Object.defineProperty(Ye.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Ye._fromList=VU;function VU(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=gse(t,e.buffer,e.decoder),r}function gse(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?yse(t,e):bse(t,e),n}function yse(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),t-=s,t===0){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}function bse(t,e){var r=Yp.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),t-=s,t===0){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}function WS(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,il.nextTick(vse,e,t))}function vse(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function GU(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var GS=b((rxe,JU)=>{"use strict";JU.exports=Io;var uy=Ua(),zU=Wn();zU.inherits=Tt();zU.inherits(Io,uy);function _se(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Io(t){if(!(this instanceof Io))return new Io(t);uy.call(this,t),this._transformState={afterTransform:_se.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",wse)}function wse(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){KU(t,e,r)}):KU(this,null,null)}Io.prototype.push=function(t,e){return this._transformState.needTransform=!1,uy.prototype.push.call(this,t,e)};Io.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Io.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Io.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Io.prototype._destroy=function(t,e){var r=this;uy.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function KU(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var e3=b((nxe,ZU)=>{"use strict";ZU.exports=Qp;var YU=GS(),QU=Wn();QU.inherits=Tt();QU.inherits(Qp,YU);function Qp(t){if(!(this instanceof Qp))return new Qp(t);YU.call(this,t)}Qp.prototype._transform=function(t,e,r){r(null,t)}});var t3=b((Qt,cy)=>{var Oi=require("stream");process.env.READABLE_STREAM==="disable"&&Oi?(cy.exports=Oi,Qt=cy.exports=Oi.Readable,Qt.Readable=Oi.Readable,Qt.Writable=Oi.Writable,Qt.Duplex=Oi.Duplex,Qt.Transform=Oi.Transform,Qt.PassThrough=Oi.PassThrough,Qt.Stream=Oi):(Qt=cy.exports=kS(),Qt.Stream=Oi||Qt,Qt.Readable=Qt,Qt.Writable=$S(),Qt.Duplex=Ua(),Qt.Transform=GS(),Qt.PassThrough=e3())});var XS=b((ixe,r3)=>{r3.exports=Ase;var Ise=Object.prototype.hasOwnProperty;function Ase(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)Ise.call(r,n)&&(t[n]=r[n])}return t}});var s3=b((oxe,ly)=>{var n3=t3().Transform,i3=require("util").inherits,o3=XS();function ol(t){n3.call(this,t),this._destroyed=!1}i3(ol,n3);ol.prototype.destroy=function(t){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})}};function Sse(t,e,r){r(null,t)}function KS(t){return function(e,r,n){return typeof e=="function"&&(n=r,r=e,e={}),typeof r!="function"&&(r=Sse),typeof n!="function"&&(n=null),t(e,r,n)}}ly.exports=KS(function(t,e,r){var n=new ol(t);return n._transform=e,r&&(n._flush=r),n});ly.exports.ctor=KS(function(t,e,r){function n(i){if(!(this instanceof n))return new n(i);this.options=o3(t,i),ol.call(this,this.options)}return i3(n,ol),n.prototype._transform=e,r&&(n.prototype._flush=r),n});ly.exports.obj=KS(function(t,e,r){var n=new ol(o3({objectMode:!0,highWaterMark:16},t));return n._transform=e,r&&(n._flush=r),n})});var c3=b((sxe,Zp)=>{"use strict";Zp.exports=u3;Zp.exports.ctor=zS;Zp.exports.objCtor=Lse;Zp.exports.obj=Pse;var Ese=s3(),a3=XS();function zS(t,e){typeof t=="function"&&(e=t,t={});var r=Ese.ctor(t,function(n,i,o){this.options.wantStrings&&(n=n.toString());try{return e.call(this,n,this._index++)&&this.push(n),o()}catch(s){return o(s)}});return r.prototype._index=0,r}function Lse(t,e){return typeof t=="function"&&(e=t,t={}),t=a3({objectMode:!0,highWaterMark:16},t),zS(t,e)}function u3(t,e){return zS(t,e)()}function Pse(t,e){return typeof t=="function"&&(e=t,t={}),t=a3({objectMode:!0,highWaterMark:16},t),u3(t,e)}});var f3=b((axe,l3)=>{l3.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=e.space||"";typeof r=="number"&&(r=Array(r+1).join(" "));var n=typeof e.cycles=="boolean"?e.cycles:!1,i=e.replacer||function(a,u){return u},o=e.cmp&&function(a){return function(u){return function(c,l){var f={key:c,value:u[c]},p={key:l,value:u[l]};return a(f,p)}}}(e.cmp),s=[];return function a(u,c,l,f){var p=r?`
`+new Array(f+1).join(r):"",m=r?": ":":";if(l&&l.toJSON&&typeof l.toJSON=="function"&&(l=l.toJSON()),l=i.call(u,c,l),l!==void 0){if(typeof l!="object"||l===null)return JSON.stringify(l);if(xse(l)){for(var h=[],g=0;g<l.length;g++){var y=a(l,g,l[g],f+1)||JSON.stringify(null);h.push(p+r+y)}return"["+h.join(",")+p+"]"}else{if(s.indexOf(l)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else s.push(l);for(var _=Cse(l).sort(o&&o(l)),h=[],g=0;g<_.length;g++){var c=_[g],C=a(l,c,l[c],f+1);if(C){var N=JSON.stringify(c)+m+C;h.push(p+r+N)}}return s.splice(s.indexOf(l),1),"{"+h.join(",")+p+"}"}}}({"":t},"",t,0)};var xse=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},Cse=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in t)e.call(t,n)&&r.push(n);return r}});var d3=b((uxe,p3)=>{"use strict";var Dse=c3().obj,Tse=f3(),JS;typeof global.Set=="function"?JS=global.Set:JS=function(){this.keys=[],this.has=function(t){return this.keys.indexOf(t)!==-1},this.add=function(t){this.keys.push(t)}};function $se(t){return function(e){return e[t]}}p3.exports=Mse;function Mse(t,e){e=e||new JS;var r=Tse;return typeof t=="string"?r=$se(t):typeof t=="function"&&(r=t),Dse(function(n){var i=r(n);return e.has(i)?!1:(e.add(i),!0)})}});var H3=b((cxe,m3)=>{var Rse=Nc(),kse=fg(),YS=require("fs"),ed=function(){},Ose=/^v?\.0/.test(process.version),fy=function(t){return typeof t=="function"},Nse=function(t){return!Ose||!YS?!1:(t instanceof(YS.ReadStream||ed)||t instanceof(YS.WriteStream||ed))&&fy(t.close)},Bse=function(t){return t.setHeader&&fy(t.abort)},Fse=function(t,e,r,n){n=Rse(n);var i=!1;t.on("close",function(){i=!0}),kse(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Nse(t))return t.close(ed);if(Bse(t))return t.abort();if(fy(t.destroy))return t.destroy();n(s||new Error("stream was destroyed"))}}},h3=function(t){t()},Use=function(t,e){return t.pipe(e)},jse=function(){var t=Array.prototype.slice.call(arguments),e=fy(t[t.length-1]||ed)&&t.pop()||ed;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,n=t.map(function(i,o){var s=o<t.length-1,a=o>0;return Fse(i,s,a,function(u){r||(r=u),u&&n.forEach(h3),!s&&(n.forEach(h3),e(r))})});return t.reduce(Use)};m3.exports=jse});var QS=b((lxe,g3)=>{g3.exports=require("stream")});var _3=b((fxe,v3)=>{"use strict";function y3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wse(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(r),!0).forEach(function(n){qse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qse(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gse(t,e,r){return e&&b3(t.prototype,e),r&&b3(t,r),t}var Xse=require("buffer"),py=Xse.Buffer,Kse=require("util"),ZS=Kse.inspect,zse=ZS&&ZS.custom||"inspect";function Jse(t,e,r){py.prototype.copy.call(t,e,r)}v3.exports=function(){function t(){Vse(this,t),this.head=null,this.tail=null,this.length=0}return Gse(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return py.alloc(0);for(var n=py.allocUnsafe(r>>>0),i=this.head,o=0;i;)Jse(i.data,n,o),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,o=n.data;for(r-=o.length;n=n.next;){var s=n.data,a=r>s.length?s.length:r;if(a===s.length?o+=s:o+=s.slice(0,r),r-=a,r===0){a===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(a));break}++i}return this.length-=i,o}},{key:"_getBuffer",value:function(r){var n=py.allocUnsafe(r),i=this.head,o=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var s=i.data,a=r>s.length?s.length:r;if(s.copy(n,n.length-r,0,a),r-=a,r===0){a===s.length?(++o,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++o}return this.length-=o,n}},{key:zse,value:function(r,n){return ZS(this,Wse({},n,{depth:0,customInspect:!1}))}}]),t}()});var t0=b((pxe,I3)=>{"use strict";function Yse(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(e0,this,t)):process.nextTick(e0,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(dy,r):(r._writableState.errorEmitted=!0,process.nextTick(w3,r,o)):process.nextTick(w3,r,o):e?(process.nextTick(dy,r),e(o)):process.nextTick(dy,r)}),this)}function w3(t,e){e0(t,e),dy(t)}function dy(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Qse(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function e0(t,e){t.emit("error",e)}function Zse(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}I3.exports={destroy:Yse,undestroy:Qse,errorOrDestroy:Zse}});var vs=b((dxe,E3)=>{"use strict";var S3={};function vn(t,e,r){r||(r=Error);function n(o,s,a){return typeof e=="string"?e:e(o,s,a)}class i extends r{constructor(s,a,u){super(n(s,a,u))}}i.prototype.name=r.name,i.prototype.code=t,S3[t]=i}function A3(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function eae(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function tae(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function rae(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}vn("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);vn("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&eae(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(tae(t," argument"))i=`The ${t} ${n} ${A3(e,"type")}`;else{let o=rae(t,".")?"property":"argument";i=`The "${t}" ${o} ${n} ${A3(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);vn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");vn("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});vn("ERR_STREAM_PREMATURE_CLOSE","Premature close");vn("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});vn("ERR_MULTIPLE_CALLBACK","Callback called multiple times");vn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");vn("ERR_STREAM_WRITE_AFTER_END","write after end");vn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);vn("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);vn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");E3.exports.codes=S3});var r0=b((hxe,L3)=>{"use strict";var nae=vs().codes.ERR_INVALID_OPT_VALUE;function iae(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function oae(t,e,r,n){var i=iae(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var o=n?r:"highWaterMark";throw new nae(o,i)}return Math.floor(i)}return t.objectMode?16:16*1024}L3.exports={getHighWaterMark:oae}});var o0=b((mxe,$3)=>{"use strict";$3.exports=lt;function x3(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Tae(e,t)}}var sl;lt.WritableState=rd;var sae={deprecate:zg()},C3=QS(),my=require("buffer").Buffer,aae=global.Uint8Array||function(){};function uae(t){return my.from(t)}function cae(t){return my.isBuffer(t)||t instanceof aae}var i0=t0(),lae=r0(),fae=lae.getHighWaterMark,_s=vs().codes,pae=_s.ERR_INVALID_ARG_TYPE,dae=_s.ERR_METHOD_NOT_IMPLEMENTED,hae=_s.ERR_MULTIPLE_CALLBACK,mae=_s.ERR_STREAM_CANNOT_PIPE,Hae=_s.ERR_STREAM_DESTROYED,gae=_s.ERR_STREAM_NULL_VALUES,yae=_s.ERR_STREAM_WRITE_AFTER_END,bae=_s.ERR_UNKNOWN_ENCODING,al=i0.errorOrDestroy;Tt()(lt,C3);function vae(){}function rd(t,e,r){sl=sl||ja(),t=t||{},typeof r!="boolean"&&(r=e instanceof sl),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=fae(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Lae(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new x3(this)}rd.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(rd.prototype,"buffer",{get:sae.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var hy;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(hy=Function.prototype[Symbol.hasInstance],Object.defineProperty(lt,Symbol.hasInstance,{value:function(e){return hy.call(this,e)?!0:this!==lt?!1:e&&e._writableState instanceof rd}})):hy=function(e){return e instanceof this};function lt(t){sl=sl||ja();var e=this instanceof sl;if(!e&&!hy.call(lt,this))return new lt(t);this._writableState=new rd(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),C3.call(this)}lt.prototype.pipe=function(){al(this,new mae)};function _ae(t,e){var r=new yae;al(t,r),process.nextTick(e,r)}function wae(t,e,r,n){var i;return r===null?i=new gae:typeof r!="string"&&!e.objectMode&&(i=new pae("chunk",["string","Buffer"],r)),i?(al(t,i),process.nextTick(n,i),!1):!0}lt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&cae(t);return o&&!my.isBuffer(t)&&(t=uae(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=vae),n.ending?_ae(this,r):(o||wae(this,n,t,r))&&(n.pendingcb++,i=Aae(this,n,o,t,e,r)),i};lt.prototype.cork=function(){this._writableState.corked++};lt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&D3(this,t))};lt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new bae(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(lt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Iae(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=my.from(e,r)),e}Object.defineProperty(lt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Aae(t,e,r,n,i,o){if(!r){var s=Iae(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else n0(t,e,!1,a,n,i,o);return u}function n0(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Hae("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function Sae(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(td,t,e),t._writableState.errorEmitted=!0,al(t,n)):(i(n),t._writableState.errorEmitted=!0,al(t,n),td(t,e))}function Eae(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Lae(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new hae;if(Eae(r),e)Sae(t,r,n,e,i);else{var o=T3(r)||t.destroyed;!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&D3(t,r),n?process.nextTick(P3,t,r,o,i):P3(t,r,o,i)}}function P3(t,e,r,n){r||Pae(t,e),e.pendingcb--,n(),td(t,e)}function Pae(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function D3(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var s=0,a=!0;r;)i[s]=r,r.isBuf||(a=!1),r=r.next,s+=1;i.allBuffers=a,n0(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new x3(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(n0(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}lt.prototype._write=function(t,e,r){r(new dae("_write()"))};lt.prototype._writev=null;lt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Dae(this,n,r),this};Object.defineProperty(lt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T3(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function xae(t,e){t._final(function(r){e.pendingcb--,r&&al(t,r),e.prefinished=!0,t.emit("prefinish"),td(t,e)})}function Cae(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(xae,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function td(t,e){var r=T3(e);if(r&&(Cae(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Dae(t,e,r){e.ending=!0,td(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Tae(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(lt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});lt.prototype.destroy=i0.destroy;lt.prototype._undestroy=i0.undestroy;lt.prototype._destroy=function(t,e){e(t)}});var ja=b((Hxe,R3)=>{"use strict";var $ae=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};R3.exports=Ni;var M3=u0(),a0=o0();Tt()(Ni,M3);for(s0=$ae(a0.prototype),Hy=0;Hy<s0.length;Hy++)gy=s0[Hy],Ni.prototype[gy]||(Ni.prototype[gy]=a0.prototype[gy]);var s0,gy,Hy;function Ni(t){if(!(this instanceof Ni))return new Ni(t);M3.call(this,t),a0.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Mae)))}Object.defineProperty(Ni.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Ni.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Ni.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Mae(){this._writableState.ended||process.nextTick(Rae,this)}function Rae(t){t.end()}Object.defineProperty(Ni.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var N3=b((c0,O3)=>{var yy=require("buffer"),Bi=yy.Buffer;function k3(t,e){for(var r in t)e[r]=t[r]}Bi.from&&Bi.alloc&&Bi.allocUnsafe&&Bi.allocUnsafeSlow?O3.exports=yy:(k3(yy,c0),c0.Buffer=Wa);function Wa(t,e,r){return Bi(t,e,r)}Wa.prototype=Object.create(Bi.prototype);k3(Bi,Wa);Wa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Bi(t,e,r)};Wa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Bi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Wa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Bi(t)};Wa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return yy.SlowBuffer(t)}});var p0=b(F3=>{"use strict";var f0=N3().Buffer,B3=f0.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function kae(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Oae(t){var e=kae(t);if(typeof e!="string"&&(f0.isEncoding===B3||!B3(t)))throw new Error("Unknown encoding: "+t);return e||t}F3.StringDecoder=nd;function nd(t){this.encoding=Oae(t);var e;switch(this.encoding){case"utf16le":this.text=Wae,this.end=qae,e=4;break;case"utf8":this.fillLast=Fae,e=4;break;case"base64":this.text=Vae,this.end=Gae,e=3;break;default:this.write=Xae,this.end=Kae;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=f0.allocUnsafe(e)}nd.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};nd.prototype.end=jae;nd.prototype.text=Uae;nd.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function l0(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Nae(t,e,r){var n=e.length-1;if(n<r)return 0;var i=l0(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=l0(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=l0(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Bae(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Fae(t){var e=this.lastTotal-this.lastNeed,r=Bae(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Uae(t,e){var r=Nae(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function jae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Wae(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function qae(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Vae(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Gae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Xae(t){return t.toString(this.encoding)}function Kae(t){return t&&t.length?this.write(t):""}});var by=b((yxe,W3)=>{"use strict";var U3=vs().codes.ERR_STREAM_PREMATURE_CLOSE;function zae(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Jae(){}function Yae(t){return t.setHeader&&typeof t.abort=="function"}function j3(t,e,r){if(typeof e=="function")return j3(t,null,e);e||(e={}),r=zae(r||Jae);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,o=function(){t.writable||a()},s=t._writableState&&t._writableState.finished,a=function(){i=!1,s=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(h){r.call(t,h)},f=function(){var h;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(h=new U3),r.call(t,h);if(i&&!s)return(!t._writableState||!t._writableState.ended)&&(h=new U3),r.call(t,h)},p=function(){t.req.on("finish",a)};return Yae(t)?(t.on("complete",a),t.on("abort",f),t.req?p():t.on("request",p)):i&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",p),t.req&&t.req.removeListener("finish",a),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",f)}}W3.exports=j3});var V3=b((bxe,q3)=>{"use strict";var vy;function ws(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Qae=by(),Is=Symbol("lastResolve"),qa=Symbol("lastReject"),id=Symbol("error"),_y=Symbol("ended"),Va=Symbol("lastPromise"),d0=Symbol("handlePromise"),Ga=Symbol("stream");function As(t,e){return{value:t,done:e}}function Zae(t){var e=t[Is];if(e!==null){var r=t[Ga].read();r!==null&&(t[Va]=null,t[Is]=null,t[qa]=null,e(As(r,!1)))}}function eue(t){process.nextTick(Zae,t)}function tue(t,e){return function(r,n){t.then(function(){if(e[_y]){r(As(void 0,!0));return}e[d0](r,n)},n)}}var rue=Object.getPrototypeOf(function(){}),nue=Object.setPrototypeOf((vy={get stream(){return this[Ga]},next:function(){var e=this,r=this[id];if(r!==null)return Promise.reject(r);if(this[_y])return Promise.resolve(As(void 0,!0));if(this[Ga].destroyed)return new Promise(function(s,a){process.nextTick(function(){e[id]?a(e[id]):s(As(void 0,!0))})});var n=this[Va],i;if(n)i=new Promise(tue(n,this));else{var o=this[Ga].read();if(o!==null)return Promise.resolve(As(o,!1));i=new Promise(this[d0])}return this[Va]=i,i}},ws(vy,Symbol.asyncIterator,function(){return this}),ws(vy,"return",function(){var e=this;return new Promise(function(r,n){e[Ga].destroy(null,function(i){if(i){n(i);return}r(As(void 0,!0))})})}),vy),rue),iue=function(e){var r,n=Object.create(nue,(r={},ws(r,Ga,{value:e,writable:!0}),ws(r,Is,{value:null,writable:!0}),ws(r,qa,{value:null,writable:!0}),ws(r,id,{value:null,writable:!0}),ws(r,_y,{value:e._readableState.endEmitted,writable:!0}),ws(r,d0,{value:function(o,s){var a=n[Ga].read();a?(n[Va]=null,n[Is]=null,n[qa]=null,o(As(a,!1))):(n[Is]=o,n[qa]=s)},writable:!0}),r));return n[Va]=null,Qae(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var o=n[qa];o!==null&&(n[Va]=null,n[Is]=null,n[qa]=null,o(i)),n[id]=i;return}var s=n[Is];s!==null&&(n[Va]=null,n[Is]=null,n[qa]=null,s(As(void 0,!0))),n[_y]=!0}),e.on("readable",eue.bind(null,n)),n};q3.exports=iue});var z3=b((vxe,K3)=>{"use strict";function G3(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(c){r(c);return}a.done?e(u):Promise.resolve(u).then(n,i)}function oue(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(u){G3(o,n,i,s,a,"next",u)}function a(u){G3(o,n,i,s,a,"throw",u)}s(void 0)})}}function X3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(r),!0).forEach(function(n){aue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aue(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uue=vs().codes.ERR_INVALID_ARG_TYPE;function cue(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new uue("iterable",["Iterable"],e);var i=new t(sue({objectMode:!0},r)),o=!1;i._read=function(){o||(o=!0,s())};function s(){return a.apply(this,arguments)}function a(){return a=oue(function*(){try{var u=yield n.next(),c=u.value,l=u.done;l?i.push(null):i.push(yield c)?s():o=!1}catch(f){i.destroy(f)}}),a.apply(this,arguments)}return i}K3.exports=cue});var u0=b((wxe,oj)=>{"use strict";oj.exports=Le;var ul;Le.ReadableState=Z3;var _xe=require("events").EventEmitter,Q3=function(e,r){return e.listeners(r).length},sd=QS(),wy=require("buffer").Buffer,lue=global.Uint8Array||function(){};function fue(t){return wy.from(t)}function pue(t){return wy.isBuffer(t)||t instanceof lue}var h0=require("util"),_e;h0&&h0.debuglog?_e=h0.debuglog("stream"):_e=function(){};var due=_3(),_0=t0(),hue=r0(),mue=hue.getHighWaterMark,Iy=vs().codes,Hue=Iy.ERR_INVALID_ARG_TYPE,gue=Iy.ERR_STREAM_PUSH_AFTER_EOF,yue=Iy.ERR_METHOD_NOT_IMPLEMENTED,bue=Iy.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,cl,m0,H0;Tt()(Le,sd);var od=_0.errorOrDestroy,g0=["error","close","destroy","pause","resume"];function vue(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Z3(t,e,r){ul=ul||ja(),t=t||{},typeof r!="boolean"&&(r=e instanceof ul),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=mue(this,t,"readableHighWaterMark",r),this.buffer=new due,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(cl||(cl=p0().StringDecoder),this.decoder=new cl(t.encoding),this.encoding=t.encoding)}function Le(t){if(ul=ul||ja(),!(this instanceof Le))return new Le(t);var e=this instanceof ul;this._readableState=new Z3(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),sd.call(this)}Object.defineProperty(Le.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Le.prototype.destroy=_0.destroy;Le.prototype._undestroy=_0.undestroy;Le.prototype._destroy=function(t,e){e(t)};Le.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=wy.from(t,e),e=""),n=!0),ej(this,t,e,!1,n)};Le.prototype.unshift=function(t){return ej(this,t,null,!0,!1)};function ej(t,e,r,n,i){_e("readableAddChunk",e);var o=t._readableState;if(e===null)o.reading=!1,Iue(t,o);else{var s;if(i||(s=_ue(o,e)),s)od(t,s);else if(o.objectMode||e&&e.length>0)if(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==wy.prototype&&(e=fue(e)),n)o.endEmitted?od(t,new bue):y0(t,o,e,!0);else if(o.ended)od(t,new gue);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?y0(t,o,e,!1):v0(t,o)):y0(t,o,e,!1)}else n||(o.reading=!1,v0(t,o))}return!o.ended&&(o.length<o.highWaterMark||o.length===0)}function y0(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Ay(t)),v0(t,e)}function _ue(t,e){var r;return!pue(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new Hue("chunk",["string","Buffer","Uint8Array"],e)),r}Le.prototype.isPaused=function(){return this._readableState.flowing===!1};Le.prototype.setEncoding=function(t){cl||(cl=p0().StringDecoder);var e=new cl(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var J3=1073741824;function wue(t){return t>=J3?t=J3:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Y3(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=wue(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Le.prototype.read=function(t){_e("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return _e("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?b0(this):Ay(this),null;if(t=Y3(t,e),t===0&&e.ended)return e.length===0&&b0(this),null;var n=e.needReadable;_e("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,_e("length less than watermark",n)),e.ended||e.reading?(n=!1,_e("reading or ended",n)):n&&(_e("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Y3(r,e)));var i;return t>0?i=nj(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&b0(this)),i!==null&&this.emit("data",i),i};function Iue(t,e){if(_e("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Ay(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,tj(t)))}}function Ay(t){var e=t._readableState;_e("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(_e("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(tj,t))}function tj(t){var e=t._readableState;_e("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,w0(t)}function v0(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Aue,t,e))}function Aue(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(_e("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Le.prototype._read=function(t){od(this,new yue("_read()"))};Le.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,_e("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?a:g;n.endEmitted?process.nextTick(o):r.once("end",o),t.on("unpipe",s);function s(y,_){_e("onunpipe"),y===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,l())}function a(){_e("onend"),t.end()}var u=Sue(r);t.on("drain",u);var c=!1;function l(){_e("cleanup"),t.removeListener("close",m),t.removeListener("finish",h),t.removeListener("drain",u),t.removeListener("error",p),t.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",f);function f(y){_e("ondata");var _=t.write(y);_e("dest.write",_),_===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&ij(n.pipes,t)!==-1)&&!c&&(_e("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(y){_e("onerror",y),g(),t.removeListener("error",p),Q3(t,"error")===0&&od(t,y)}vue(t,"error",p);function m(){t.removeListener("finish",h),g()}t.once("close",m);function h(){_e("onfinish"),t.removeListener("close",m),g()}t.once("finish",h);function g(){_e("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(_e("pipe resume"),r.resume()),t};function Sue(t){return function(){var r=t._readableState;_e("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Q3(t,"data")&&(r.flowing=!0,w0(t))}}Le.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=ij(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Le.prototype.on=function(t,e){var r=sd.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,_e("on readable",n.length,n.reading),n.length?Ay(this):n.reading||process.nextTick(Eue,this)),r};Le.prototype.addListener=Le.prototype.on;Le.prototype.removeListener=function(t,e){var r=sd.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(rj,this),r};Le.prototype.removeAllListeners=function(t){var e=sd.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(rj,this),e};function rj(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function Eue(t){_e("readable nexttick read 0"),t.read(0)}Le.prototype.resume=function(){var t=this._readableState;return t.flowing||(_e("resume"),t.flowing=!t.readableListening,Lue(this,t)),t.paused=!1,this};function Lue(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(Pue,t,e))}function Pue(t,e){_e("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),w0(t),e.flowing&&!e.reading&&t.read(0)}Le.prototype.pause=function(){return _e("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_e("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function w0(t){var e=t._readableState;for(_e("flow",e.flowing);e.flowing&&t.read()!==null;);}Le.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(_e("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(_e("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var a=e.push(s);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<g0.length;o++)t.on(g0[o],this.emit.bind(this,g0[o]));return this._read=function(s){_e("wrapped _read",s),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Le.prototype[Symbol.asyncIterator]=function(){return m0===void 0&&(m0=V3()),m0(this)});Object.defineProperty(Le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Le._fromList=nj;Object.defineProperty(Le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function nj(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function b0(t){var e=t._readableState;_e("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(xue,e,t))}function xue(t,e){if(_e("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Le.from=function(t,e){return H0===void 0&&(H0=z3()),H0(Le,t,e)});function ij(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var I0=b((Ixe,aj)=>{"use strict";aj.exports=Ao;var Sy=vs().codes,Cue=Sy.ERR_METHOD_NOT_IMPLEMENTED,Due=Sy.ERR_MULTIPLE_CALLBACK,Tue=Sy.ERR_TRANSFORM_ALREADY_TRANSFORMING,$ue=Sy.ERR_TRANSFORM_WITH_LENGTH_0,Ey=ja();Tt()(Ao,Ey);function Mue(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new Due);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ao(t){if(!(this instanceof Ao))return new Ao(t);Ey.call(this,t),this._transformState={afterTransform:Mue.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Rue)}function Rue(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){sj(t,e,r)}):sj(this,null,null)}Ao.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ey.prototype.push.call(this,t,e)};Ao.prototype._transform=function(t,e,r){r(new Cue("_transform()"))};Ao.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ao.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ao.prototype._destroy=function(t,e){Ey.prototype._destroy.call(this,t,function(r){e(r)})};function sj(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new $ue;if(t._transformState.transforming)throw new Tue;return t.push(null)}});var lj=b((Axe,cj)=>{"use strict";cj.exports=ad;var uj=I0();Tt()(ad,uj);function ad(t){if(!(this instanceof ad))return new ad(t);uj.call(this,t)}ad.prototype._transform=function(t,e,r){r(null,t)}});var mj=b((Sxe,hj)=>{"use strict";var A0;function kue(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var dj=vs().codes,Oue=dj.ERR_MISSING_ARGS,Nue=dj.ERR_STREAM_DESTROYED;function fj(t){if(t)throw t}function Bue(t){return t.setHeader&&typeof t.abort=="function"}function Fue(t,e,r,n){n=kue(n);var i=!1;t.on("close",function(){i=!0}),A0===void 0&&(A0=by()),A0(t,{readable:e,writable:r},function(s){if(s)return n(s);i=!0,n()});var o=!1;return function(s){if(!i&&!o){if(o=!0,Bue(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(s||new Nue("pipe"))}}}function pj(t){t()}function Uue(t,e){return t.pipe(e)}function jue(t){return!t.length||typeof t[t.length-1]!="function"?fj:t.pop()}function Wue(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=jue(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Oue("streams");var i,o=e.map(function(s,a){var u=a<e.length-1,c=a>0;return Fue(s,u,c,function(l){i||(i=l),l&&o.forEach(pj),!u&&(o.forEach(pj),n(i))})});return e.reduce(Uue)}hj.exports=Wue});var S0=b((_n,cd)=>{var ud=require("stream");process.env.READABLE_STREAM==="disable"&&ud?(cd.exports=ud.Readable,Object.assign(cd.exports,ud),cd.exports.Stream=ud):(_n=cd.exports=u0(),_n.Stream=ud||_n,_n.Readable=_n,_n.Writable=o0(),_n.Duplex=ja(),_n.Transform=I0(),_n.PassThrough=lj(),_n.finished=by(),_n.pipeline=mj())});var gj=b((Exe,Hj)=>{Hj.exports=que;function que(t){var e=t._readableState;return e?e.objectMode?t.read():t.read(Vue(e)):null}function Vue(t){return t.buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length}});var wj=b((Lxe,_j)=>{var Ly=S0(),yj=fg(),Gue=Tt(),Xue=gj(),bj=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),E0=function(t,e){t._corked?t.once("uncork",e):e()},Kue=function(t,e){t._autoDestroy&&t.destroy(e)},vj=function(t,e){return function(r){r?Kue(t,r.message==="premature close"?null:r):e&&!t._ended&&t.end()}},zue=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},Jue=function(){},Yue=function(t){return new Ly.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},Zt=function(t,e,r){if(!(this instanceof Zt))return new Zt(t,e,r);Ly.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||r.autoDestroy!==!1,this._forwardDestroy=!r||r.destroy!==!1,this._forwardEnd=!r||r.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};Gue(Zt,Ly.Duplex);Zt.obj=function(t,e,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new Zt(t,e,r)};Zt.prototype.cork=function(){++this._corked===1&&this.emit("cork")};Zt.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};Zt.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,r=yj(t,{writable:!0,readable:!1},vj(this,this._forwardEnd)),n=function(){var o=e._ondrain;e._ondrain=null,o&&o()},i=function(){e._writable.removeListener("drain",n),r()};this._unwrite&&process.nextTick(n),this._writable=t,this._writable.on("drain",n),this._unwrite=i,this.uncork()};Zt.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,r=yj(t,{writable:!1,readable:!0},vj(this)),n=function(){e._forward()},i=function(){e.push(null)},o=function(){e._readable2.removeListener("readable",n),e._readable2.removeListener("end",i),r()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:Yue(t),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=o,this._forward()};Zt.prototype._read=function(){this._drained=!0,this._forward()};Zt.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=Xue(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};Zt.prototype.destroy=function(t,e){if(e||(e=Jue),this.destroyed)return e(null);this.destroyed=!0;var r=this;process.nextTick(function(){r._destroy(t),e(null)})};Zt.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};Zt.prototype._write=function(t,e,r){if(!this.destroyed){if(this._corked)return E0(this,this._write.bind(this,t,e,r));if(t===bj)return this._finish(r);if(!this._writable)return r();this._writable.write(t)===!1?this._ondrain=r:this.destroyed||r()}};Zt.prototype._finish=function(t){var e=this;this.emit("preend"),E0(this,function(){zue(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),E0(e,t)})})};Zt.prototype.end=function(t,e,r){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(bj),Ly.Writable.prototype.end.call(this,r))};_j.exports=Zt});var Sj=b((Pxe,Py)=>{var Que=H3(),Zue=Tt(),Ij=wj(),Aj=function(t){return t.length?Array.isArray(t[0])?t[0]:Array.prototype.slice.call(t):[]},L0=function(t){var e=function(){var r=Aj(arguments);if(!(this instanceof e))return new e(r);Ij.call(this,null,null,t),r.length&&this.setPipeline(r)};return Zue(e,Ij),e.prototype.setPipeline=function(){var r=Aj(arguments),n=this,i=!1,o=r[0],s=r[r.length-1];s=s.readable?s:null,o=o.writable?o:null;var a=function(){r[0].emit("error",new Error("stream was destroyed"))};if(this.on("close",a),this.on("prefinish",function(){i||n.cork()}),Que(r,function(u){if(n.removeListener("close",a),u)return n.destroy(u.message==="premature close"?null:u);i=!0,n._autoDestroy===!1&&(n._autoDestroy=!0),n.uncork()}),this.destroyed)return a();this.setWritable(o),this.setReadable(s)},e};Py.exports=L0({autoDestroy:!1,destroy:!1});Py.exports.obj=L0({autoDestroy:!1,destroy:!1,objectMode:!0,highWaterMark:16});Py.exports.ctor=L0});var P0=b((xxe,Ej)=>{"use strict";Ej.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");var e={negated:!1,pattern:t,original:t};return t.charAt(0)==="!"&&t.charAt(1)!=="("&&(e.negated=!0,e.pattern=t.slice(1)),e}});var x0=b((Cxe,Mj)=>{"use strict";var xy=Object.prototype.hasOwnProperty,$j=Object.prototype.toString,Lj=Object.defineProperty,Pj=Object.getOwnPropertyDescriptor,xj=function(e){return typeof Array.isArray=="function"?Array.isArray(e):$j.call(e)==="[object Array]"},Cj=function(e){if(!e||$j.call(e)!=="[object Object]")return!1;var r=xy.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&xy.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i>"u"||xy.call(e,i)},Dj=function(e,r){Lj&&r.name==="__proto__"?Lj(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},Tj=function(e,r){if(r==="__proto__")if(xy.call(e,r)){if(Pj)return Pj(e,r).value}else return;return e[r]};Mj.exports=function t(){var e,r,n,i,o,s,a=arguments[0],u=1,c=arguments.length,l=!1;for(typeof a=="boolean"&&(l=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(r in e)n=Tj(a,r),i=Tj(e,r),a!==i&&(l&&i&&(Cj(i)||(o=xj(i)))?(o?(o=!1,s=n&&xj(n)?n:[]):s=n&&Cj(n)?n:{},Dj(a,{name:r,newValue:t(l,s,i)})):typeof i<"u"&&Dj(a,{name:r,newValue:i}));return a}});var Rj=b(C0=>{var Xa=require("path"),Es=process.platform==="win32",Ss=require("fs"),ece=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function tce(){var t;if(ece){var e=new Error;t=r}else t=n;return t;function r(i){i&&(e.message=i.message,i=e,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var o="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(o):console.error(o)}}}}function rce(t){return typeof t=="function"?t:tce()}var Dxe=Xa.normalize;Es?So=/(.*?)(?:[\/\\]+|$)/g:So=/(.*?)(?:[\/]+|$)/g;var So;Es?ld=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ld=/^[\/]*/;var ld;C0.realpathSync=function(e,r){if(e=Xa.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return r[e];var n=e,i={},o={},s,a,u,c;l();function l(){var y=ld.exec(e);s=y[0].length,a=y[0],u=y[0],c="",Es&&!o[u]&&(Ss.lstatSync(u),o[u]=!0)}for(;s<e.length;){So.lastIndex=s;var f=So.exec(e);if(c=a,a+=f[0],u=c+f[1],s=So.lastIndex,!(o[u]||r&&r[u]===u)){var p;if(r&&Object.prototype.hasOwnProperty.call(r,u))p=r[u];else{var m=Ss.lstatSync(u);if(!m.isSymbolicLink()){o[u]=!0,r&&(r[u]=u);continue}var h=null;if(!Es){var g=m.dev.toString(32)+":"+m.ino.toString(32);i.hasOwnProperty(g)&&(h=i[g])}h===null&&(Ss.statSync(u),h=Ss.readlinkSync(u)),p=Xa.resolve(c,h),r&&(r[u]=p),Es||(i[g]=h)}e=Xa.resolve(p,e.slice(s)),l()}}return r&&(r[n]=e),e};C0.realpath=function(e,r,n){if(typeof n!="function"&&(n=rce(r),r=null),e=Xa.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return process.nextTick(n.bind(null,null,r[e]));var i=e,o={},s={},a,u,c,l;f();function f(){var y=ld.exec(e);a=y[0].length,u=y[0],c=y[0],l="",Es&&!s[c]?Ss.lstat(c,function(_){if(_)return n(_);s[c]=!0,p()}):process.nextTick(p)}function p(){if(a>=e.length)return r&&(r[i]=e),n(null,e);So.lastIndex=a;var y=So.exec(e);return l=u,u+=y[0],c=l+y[1],a=So.lastIndex,s[c]||r&&r[c]===c?process.nextTick(p):r&&Object.prototype.hasOwnProperty.call(r,c)?g(r[c]):Ss.lstat(c,m)}function m(y,_){if(y)return n(y);if(!_.isSymbolicLink())return s[c]=!0,r&&(r[c]=c),process.nextTick(p);if(!Es){var C=_.dev.toString(32)+":"+_.ino.toString(32);if(o.hasOwnProperty(C))return h(null,o[C],c)}Ss.stat(c,function(N){if(N)return n(N);Ss.readlink(c,function(D,j){Es||(o[C]=j),h(D,j)})})}function h(y,_,C){if(y)return n(y);var N=Xa.resolve(l,_);r&&(r[C]=N),g(N)}function g(y){e=Xa.resolve(y,e.slice(a)),f()}}});var M0=b(($xe,Bj)=>{Bj.exports=Ls;Ls.realpath=Ls;Ls.sync=$0;Ls.realpathSync=$0;Ls.monkeypatch=ice;Ls.unmonkeypatch=oce;var ll=require("fs"),D0=ll.realpath,T0=ll.realpathSync,nce=process.version,kj=/^v[0-5]\./.test(nce),Oj=Rj();function Nj(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function Ls(t,e,r){if(kj)return D0(t,e,r);typeof e=="function"&&(r=e,e=null),D0(t,e,function(n,i){Nj(n)?Oj.realpath(t,e,r):r(n,i)})}function $0(t,e){if(kj)return T0(t,e);try{return T0(t,e)}catch(r){if(Nj(r))return Oj.realpathSync(t,e);throw r}}function ice(){ll.realpath=Ls,ll.realpathSync=$0}function oce(){ll.realpath=D0,ll.realpathSync=T0}});var Uj=b((Mxe,Fj)=>{Fj.exports=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);sce(i)?r.push.apply(r,i):r.push(i)}return r};var sce=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Gj=b((Rxe,Vj)=>{"use strict";Vj.exports=Wj;function Wj(t,e,r){t instanceof RegExp&&(t=jj(t,r)),e instanceof RegExp&&(e=jj(e,r));var n=qj(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function jj(t,e){var r=e.match(t);return r?r[0]:null}Wj.range=qj;function qj(t,e,r){var n,i,o,s,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(n=[],o=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<o&&(o=i,s=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}});var e2=b((kxe,Zj)=>{var ace=Uj(),Xj=Gj();Zj.exports=lce;var Kj="\0SLASH"+Math.random()+"\0",zj="\0OPEN"+Math.random()+"\0",k0="\0CLOSE"+Math.random()+"\0",Jj="\0COMMA"+Math.random()+"\0",Yj="\0PERIOD"+Math.random()+"\0";function R0(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function uce(t){return t.split("\\\\").join(Kj).split("\\{").join(zj).split("\\}").join(k0).split("\\,").join(Jj).split("\\.").join(Yj)}function cce(t){return t.split(Kj).join("\\").split(zj).join("{").split(k0).join("}").split(Jj).join(",").split(Yj).join(".")}function Qj(t){if(!t)return[""];var e=[],r=Xj("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var a=Qj(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function lce(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),fl(uce(t),!0).map(cce)):[]}function fce(t){return"{"+t+"}"}function pce(t){return/^-?0\d/.test(t)}function dce(t,e){return t<=e}function hce(t,e){return t>=e}function fl(t,e){var r=[],n=Xj("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||o,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+k0+n.post,fl(t)):[t];var u;if(s)u=n.body.split(/\.\./);else if(u=Qj(n.body),u.length===1&&(u=fl(u[0],!1).map(fce),u.length===1)){var l=n.post.length?fl(n.post,!1):[""];return l.map(function(E){return n.pre+u[0]+E})}var c=n.pre,l=n.post.length?fl(n.post,!1):[""],f;if(s){var p=R0(u[0]),m=R0(u[1]),h=Math.max(u[0].length,u[1].length),g=u.length==3?Math.abs(R0(u[2])):1,y=dce,_=m<p;_&&(g*=-1,y=hce);var C=u.some(pce);f=[];for(var N=p;y(N,m);N+=g){var D;if(o)D=String.fromCharCode(N),D==="\\"&&(D="");else if(D=String(N),C){var j=h-D.length;if(j>0){var X=new Array(j+1).join("0");N<0?D="-"+X+D.slice(1):D=X+D}}f.push(D)}}else f=ace(u,function(M){return fl(M,!1)});for(var G=0;G<f.length;G++)for(var U=0;U<l.length;U++){var k=c+f[G]+l[U];(!e||s||k)&&r.push(k)}return r}});var Ty=b((Oxe,o2)=>{o2.exports=zr;zr.Minimatch=er;var fd=function(){try{return require("path")}catch{}}()||{sep:"/"};zr.sep=fd.sep;var B0=zr.GLOBSTAR=er.GLOBSTAR={},mce=e2(),t2={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},O0="[^/]",N0=O0+"*?",Hce="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",gce="(?:(?!(?:\\/|^)\\.).)*?",r2=yce("().*{}+?[]^$\\!");function yce(t){return t.split("").reduce(function(e,r){return e[r]=!0,e},{})}var n2=/\/+/;zr.filter=bce;function bce(t,e){return e=e||{},function(r,n,i){return zr(r,t,e)}}function Ps(t,e){e=e||{};var r={};return Object.keys(t).forEach(function(n){r[n]=t[n]}),Object.keys(e).forEach(function(n){r[n]=e[n]}),r}zr.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return zr;var e=zr,r=function(i,o,s){return e(i,o,Ps(t,s))};return r.Minimatch=function(i,o){return new e.Minimatch(i,Ps(t,o))},r.Minimatch.defaults=function(i){return e.defaults(Ps(t,i)).Minimatch},r.filter=function(i,o){return e.filter(i,Ps(t,o))},r.defaults=function(i){return e.defaults(Ps(t,i))},r.makeRe=function(i,o){return e.makeRe(i,Ps(t,o))},r.braceExpand=function(i,o){return e.braceExpand(i,Ps(t,o))},r.match=function(n,i,o){return e.match(n,i,Ps(t,o))},r};er.defaults=function(t){return zr.defaults(t).Minimatch};function zr(t,e,r){return Dy(e),r||(r={}),!r.nocomment&&e.charAt(0)==="#"?!1:new er(e,r).match(t)}function er(t,e){if(!(this instanceof er))return new er(t,e);Dy(t),e||(e={}),t=t.trim(),!e.allowWindowsEscape&&fd.sep!=="/"&&(t=t.split(fd.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}er.prototype.debug=function(){};er.prototype.make=vce;function vce(){var t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(n2)}),this.debug(this.pattern,r),r=r.map(function(n,i,o){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}er.prototype.parseNegate=_ce;function _ce(){var t=this.pattern,e=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,o=t.length;i<o&&t.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=t.substr(n)),this.negate=e}}zr.braceExpand=function(t,e){return i2(t,e)};er.prototype.braceExpand=i2;function i2(t,e){return e||(this instanceof er?e=this.options:e={}),t=typeof t>"u"?this.pattern:t,Dy(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:mce(t)}var wce=1024*64,Dy=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>wce)throw new TypeError("pattern is too long")};er.prototype.parse=Ice;var Cy={};function Ice(t,e){Dy(t);var r=this.options;if(t==="**")if(r.noglobstar)t="*";else return B0;if(t==="")return"";var n="",i=!!r.nocase,o=!1,s=[],a=[],u,c=!1,l=-1,f=-1,p=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function h(){if(u){switch(u){case"*":n+=N0,i=!0;break;case"?":n+=O0,i=!0;break;default:n+="\\"+u;break}m.debug("clearStateChar %j %j",u,n),u=!1}}for(var g=0,y=t.length,_;g<y&&(_=t.charAt(g));g++){if(this.debug("%s	%s %s %j",t,g,n,_),o&&r2[_]){n+="\\"+_,o=!1;continue}switch(_){case"/":return!1;case"\\":h(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,g,n,_),c){this.debug("  in class"),_==="!"&&g===f+1&&(_="^"),n+=_;continue}m.debug("call clearStateChar %j",u),h(),u=_,r.noext&&h();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:g-1,reStart:n.length,open:t2[u].open,close:t2[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}h(),i=!0;var C=s.pop();n+=C.close,C.type==="!"&&a.push(C),C.reEnd=n.length;continue;case"|":if(c||!s.length||o){n+="\\|",o=!1;continue}h(),n+="|";continue;case"[":if(h(),c){n+="\\"+_;continue}c=!0,f=g,l=n.length,n+=_;continue;case"]":if(g===f+1||!c){n+="\\"+_,o=!1;continue}var N=t.substring(f+1,g);try{RegExp("["+N+"]")}catch{var D=this.parse(N,Cy);n=n.substr(0,l)+"\\["+D[0]+"\\]",i=i||D[1],c=!1;continue}i=!0,c=!1,n+=_;continue;default:h(),o?o=!1:r2[_]&&!(_==="^"&&c)&&(n+="\\"),n+=_}}for(c&&(N=t.substr(f+1),D=this.parse(N,Cy),n=n.substr(0,l)+"\\["+D[0],i=i||D[1]),C=s.pop();C;C=s.pop()){var j=n.slice(C.reStart+C.open.length);this.debug("setting tail",n,C),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ue,ee,pe){return pe||(pe="\\"),ee+ee+pe+"|"}),this.debug(`tail=%j
   %s`,j,j,C,n);var X=C.type==="*"?N0:C.type==="?"?O0:"\\"+C.type;i=!0,n=n.slice(0,C.reStart)+X+"\\("+j}h(),o&&(n+="\\\\");var G=!1;switch(n.charAt(0)){case"[":case".":case"(":G=!0}for(var U=a.length-1;U>-1;U--){var k=a[U],M=n.slice(0,k.reStart),E=n.slice(k.reStart,k.reEnd-8),q=n.slice(k.reEnd-8,k.reEnd),F=n.slice(k.reEnd);q+=F;var V=M.split("(").length-1,S=F;for(g=0;g<V;g++)S=S.replace(/\)[+*?]?/,"");F=S;var P="";F===""&&e!==Cy&&(P="$");var oe=M+E+F+P+q;n=oe}if(n!==""&&i&&(n="(?=.)"+n),G&&(n=p+n),e===Cy)return[n,i];if(!i)return Sce(t);var te=r.nocase?"i":"";try{var fe=new RegExp("^"+n+"$",te)}catch{return new RegExp("$.")}return fe._glob=t,fe._src=n,fe}zr.makeRe=function(t,e){return new er(t,e||{}).makeRe()};er.prototype.makeRe=Ace;function Ace(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?N0:e.dot?Hce:gce,n=e.nocase?"i":"",i=t.map(function(o){return o.map(function(s){return s===B0?r:typeof s=="string"?Ece(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}zr.match=function(t,e,r){r=r||{};var n=new er(e,r);return t=t.filter(function(i){return n.match(i)}),n.options.nonull&&!t.length&&t.push(e),t};er.prototype.match=function(e,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;var n=this.options;fd.sep!=="/"&&(e=e.split(fd.sep).join("/")),e=e.split(n2),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o,s;for(s=e.length-1;s>=0&&(o=e[s],!o);s--);for(s=0;s<i.length;s++){var a=i[s],u=e;n.matchBase&&a.length===1&&(u=[o]);var c=this.matchOne(u,a,r);if(c)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};er.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,s=t.length,a=e.length;i<s&&o<a;i++,o++){this.debug("matchOne loop");var u=e[o],c=t[i];if(this.debug(e,u,c),u===!1)return!1;if(u===B0){this.debug("GLOBSTAR",[e,u,c]);var l=i,f=o+1;if(f===a){for(this.debug("** at the end");i<s;i++)if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return!1;return!0}for(;l<s;){var p=t[l];if(this.debug(`
globstar while`,t,l,e,f,p),this.matchOne(t.slice(l),e.slice(f),r))return this.debug("globstar found match!",l,s,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",t,l,e,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,l,e,f),l===s))}var m;if(typeof u=="string"?(m=c===u,this.debug("string match",u,c,m)):(m=c.match(u),this.debug("pattern match",u,c,m)),!m)return!1}if(i===s&&o===a)return!0;if(i===s)return r;if(o===a)return i===s-1&&t[i]==="";throw new Error("wtf?")};function Sce(t){return t.replace(/\\(.)/g,"$1")}function Ece(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var My=b((Nxe,$y)=>{"use strict";function s2(t){return t.charAt(0)==="/"}function a2(t){var e=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=e.exec(t),n=r[1]||"",i=!!(n&&n.charAt(1)!==":");return!!(r[2]||i)}$y.exports=process.platform==="win32"?a2:s2;$y.exports.posix=s2;$y.exports.win32=a2});var U0=b(xs=>{xs.setopts=Tce;xs.ownProp=u2;xs.makeAbs=pd;xs.finish=$ce;xs.mark=Mce;xs.isIgnored=l2;xs.childrenIgnored=Rce;function u2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Lce=require("fs"),pl=require("path"),Pce=Ty(),c2=My(),F0=Pce.Minimatch;function xce(t,e){return t.localeCompare(e,"en")}function Cce(t,e){t.ignore=e.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Dce))}function Dce(t){var e=null;if(t.slice(-3)==="/**"){var r=t.replace(/(\/\*\*)+$/,"");e=new F0(r,{dot:!0})}return{matcher:new F0(t,{dot:!0}),gmatcher:e}}function Tce(t,e,r){if(r||(r={}),r.matchBase&&e.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");e="**/"+e}t.silent=!!r.silent,t.pattern=e,t.strict=r.strict!==!1,t.realpath=!!r.realpath,t.realpathCache=r.realpathCache||Object.create(null),t.follow=!!r.follow,t.dot=!!r.dot,t.mark=!!r.mark,t.nodir=!!r.nodir,t.nodir&&(t.mark=!0),t.sync=!!r.sync,t.nounique=!!r.nounique,t.nonull=!!r.nonull,t.nosort=!!r.nosort,t.nocase=!!r.nocase,t.stat=!!r.stat,t.noprocess=!!r.noprocess,t.absolute=!!r.absolute,t.fs=r.fs||Lce,t.maxLength=r.maxLength||1/0,t.cache=r.cache||Object.create(null),t.statCache=r.statCache||Object.create(null),t.symlinks=r.symlinks||Object.create(null),Cce(t,r),t.changedCwd=!1;var n=process.cwd();u2(r,"cwd")?(t.cwd=pl.resolve(r.cwd),t.changedCwd=t.cwd!==n):t.cwd=n,t.root=r.root||pl.resolve(t.cwd,"/"),t.root=pl.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=c2(t.cwd)?t.cwd:pd(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,t.minimatch=new F0(e,r),t.options=t.minimatch.options}function $ce(t){for(var e=t.nounique,r=e?[]:Object.create(null),n=0,i=t.matches.length;n<i;n++){var o=t.matches[n];if(!o||Object.keys(o).length===0){if(t.nonull){var s=t.minimatch.globSet[n];e?r.push(s):r[s]=!0}}else{var a=Object.keys(o);e?r.push.apply(r,a):a.forEach(function(u){r[u]=!0})}}if(e||(r=Object.keys(r)),t.nosort||(r=r.sort(xce)),t.mark){for(var n=0;n<r.length;n++)r[n]=t._mark(r[n]);t.nodir&&(r=r.filter(function(u){var c=!/\/$/.test(u),l=t.cache[u]||t.cache[pd(t,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}t.ignore.length&&(r=r.filter(function(u){return!l2(t,u)})),t.found=r}function Mce(t,e){var r=pd(t,e),n=t.cache[r],i=e;if(n){var o=n==="DIR"||Array.isArray(n),s=e.slice(-1)==="/";if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==e){var a=pd(t,i);t.statCache[a]=t.statCache[r],t.cache[a]=t.cache[r]}}return i}function pd(t,e){var r=e;return e.charAt(0)==="/"?r=pl.join(t.root,e):c2(e)||e===""?r=e:t.changedCwd?r=pl.resolve(t.cwd,e):r=pl.resolve(e),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function l2(t,e){return t.ignore.length?t.ignore.some(function(r){return r.matcher.match(e)||!!(r.gmatcher&&r.gmatcher.match(e))}):!1}function Rce(t,e){return t.ignore.length?t.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(e))}):!1}});var m2=b((Wxe,h2)=>{h2.exports=d2;d2.GlobSync=$t;var kce=M0(),f2=Ty(),Fxe=f2.Minimatch,Uxe=q0().Glob,jxe=require("util"),j0=require("path"),p2=require("assert"),Ry=My(),Ka=U0(),Oce=Ka.setopts,W0=Ka.ownProp,Nce=Ka.childrenIgnored,Bce=Ka.isIgnored;function d2(t,e){if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new $t(t,e).found}function $t(t,e){if(!t)throw new Error("must provide pattern");if(typeof e=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof $t))return new $t(t,e);if(Oce(this,t,e),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}$t.prototype._finish=function(){if(p2(this instanceof $t),this.realpath){var t=this;this.matches.forEach(function(e,r){var n=t.matches[r]=Object.create(null);for(var i in e)try{i=t._makeAbs(i);var o=kce.realpathSync(i,t.realpathCache);n[o]=!0}catch(s){if(s.syscall==="stat")n[t._makeAbs(i)]=!0;else throw s}})}Ka.finish(this)};$t.prototype._process=function(t,e,r){p2(this instanceof $t);for(var n=0;typeof t[n]=="string";)n++;var i;switch(n){case t.length:this._processSimple(t.join("/"),e);return;case 0:i=null;break;default:i=t.slice(0,n).join("/");break}var o=t.slice(n),s;i===null?s=".":((Ry(i)||Ry(t.join("/")))&&(!i||!Ry(i))&&(i="/"+i),s=i);var a=this._makeAbs(s);if(!Nce(this,s)){var u=o[0]===f2.GLOBSTAR;u?this._processGlobStar(i,s,a,o,e,r):this._processReaddir(i,s,a,o,e,r)}};$t.prototype._processReaddir=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){for(var a=n[0],u=!!this.minimatch.negate,c=a._glob,l=this.dot||c.charAt(0)===".",f=[],p=0;p<s.length;p++){var m=s[p];if(m.charAt(0)!=="."||l){var h;u&&!t?h=!m.match(a):h=m.match(a),h&&f.push(m)}}var g=f.length;if(g!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<g;p++){var m=f[p];t&&(t.slice(-1)!=="/"?m=t+"/"+m:m=t+m),m.charAt(0)==="/"&&!this.nomount&&(m=j0.join(this.root,m)),this._emitMatch(i,m)}return}n.shift();for(var p=0;p<g;p++){var m=f[p],y;t?y=[t,m]:y=[m],this._process(y.concat(n),i,o)}}}};$t.prototype._emitMatch=function(t,e){if(!Bce(this,e)){var r=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0,this.stat&&this._stat(e)}}};$t.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var e,r,n;try{r=this.fs.lstatSync(t)}catch(o){if(o.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[t]=i,!i&&r&&!r.isDirectory()?this.cache[t]="FILE":e=this._readdir(t,!1),e};$t.prototype._readdir=function(t,e){var r;if(e&&!W0(this.symlinks,t))return this._readdirInGlobStar(t);if(W0(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(i){return this._readdirError(t,i),null}};$t.prototype._readdirEntries=function(t,e){if(!this.mark&&!this.stat)for(var r=0;r<e.length;r++){var n=e[r];t==="/"?n=t+n:n=t+"/"+n,this.cache[n]=!0}return this.cache[t]=e,e};$t.prototype._readdirError=function(t,e){switch(e.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(t);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(e.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=e.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw e;this.silent||console.error("glob error",e);break}};$t.prototype._processGlobStar=function(t,e,r,n,i,o){var s=this._readdir(r,o);if(s){var a=n.slice(1),u=t?[t]:[],c=u.concat(a);this._process(c,i,!1);var l=s.length,f=this.symlinks[r];if(!(f&&o))for(var p=0;p<l;p++){var m=s[p];if(!(m.charAt(0)==="."&&!this.dot)){var h=u.concat(s[p],a);this._process(h,i,!0);var g=u.concat(s[p],n);this._process(g,i,!0)}}}};$t.prototype._processSimple=function(t,e){var r=this._stat(t);if(this.matches[e]||(this.matches[e]=Object.create(null)),!!r){if(t&&Ry(t)&&!this.nomount){var n=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=j0.join(this.root,t):(t=j0.resolve(this.root,t),n&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t)}};$t.prototype._stat=function(t){var e=this._makeAbs(t),r=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&W0(this.cache,e)){var s=this.cache[e];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var n,i=this.statCache[e];if(!i){var o;try{o=this.fs.lstatSync(e)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[e]=!1,!1}if(o&&o.isSymbolicLink())try{i=this.fs.statSync(e)}catch{i=o}else i=o}this.statCache[e]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,r&&s==="FILE"?!1:s};$t.prototype._mark=function(t){return Ka.mark(this,t)};$t.prototype._makeAbs=function(t){return Ka.makeAbs(this,t)}});var g2=b((qxe,H2)=>{var Fce=VI(),dd=Object.create(null),Uce=Nc();H2.exports=Fce(jce);function jce(t,e){return dd[t]?(dd[t].push(e),null):(dd[t]=[e],Wce(t))}function Wce(t){return Uce(function e(){var r=dd[t],n=r.length,i=qce(arguments);try{for(var o=0;o<n;o++)r[o].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){e.apply(null,i)})):delete dd[t]}})}function qce(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n]=t[n];return r}});var q0=b((Xxe,b2)=>{b2.exports=za;var Vce=M0(),y2=Ty(),Vxe=y2.Minimatch,Gce=Tt(),Xce=require("events").EventEmitter,V0=require("path"),G0=require("assert"),hd=My(),K0=m2(),Ja=U0(),Kce=Ja.setopts,X0=Ja.ownProp,z0=g2(),Gxe=require("util"),zce=Ja.childrenIgnored,Jce=Ja.isIgnored,Yce=Nc();function za(t,e,r){if(typeof e=="function"&&(r=e,e={}),e||(e={}),e.sync){if(r)throw new TypeError("callback provided to sync glob");return K0(t,e)}return new Oe(t,e,r)}za.sync=K0;var Qce=za.GlobSync=K0.GlobSync;za.glob=za;function Zce(t,e){if(e===null||typeof e!="object")return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}za.hasMagic=function(t,e){var r=Zce({},e);r.noprocess=!0;var n=new Oe(t,r),i=n.minimatch.set;if(!t)return!1;if(i.length>1)return!0;for(var o=0;o<i[0].length;o++)if(typeof i[0][o]!="string")return!0;return!1};za.Glob=Oe;Gce(Oe,Xce);function Oe(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&e.sync){if(r)throw new TypeError("callback provided to sync glob");return new Qce(t,e)}if(!(this instanceof Oe))return new Oe(t,e,r);Kce(this,t,e),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=Yce(r),this.on("error",r),this.on("end",function(u){r(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return a();for(var o=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,a);o=!1;function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}}Oe.prototype._finish=function(){if(G0(this instanceof Oe),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Ja.finish(this),this.emit("end",this.found)}};Oe.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var e=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--t===0&&e._finish()}};Oe.prototype._realpathSet=function(t,e){var r=this.matches[t];if(!r)return e();var n=Object.keys(r),i=this,o=n.length;if(o===0)return e();var s=this.matches[t]=Object.create(null);n.forEach(function(a,u){a=i._makeAbs(a),Vce.realpath(a,i.realpathCache,function(c,l){c?c.syscall==="stat"?s[a]=!0:i.emit("error",c):s[l]=!0,--o===0&&(i.matches[t]=s,e())})})};Oe.prototype._mark=function(t){return Ja.mark(this,t)};Oe.prototype._makeAbs=function(t){return Ja.makeAbs(this,t)};Oe.prototype.abort=function(){this.aborted=!0,this.emit("abort")};Oe.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};Oe.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var e=0;e<t.length;e++){var r=t[e];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var e=0;e<n.length;e++){var i=n[e];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};Oe.prototype._process=function(t,e,r,n){if(G0(this instanceof Oe),G0(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,e,r,n]);return}for(var i=0;typeof t[i]=="string";)i++;var o;switch(i){case t.length:this._processSimple(t.join("/"),e,n);return;case 0:o=null;break;default:o=t.slice(0,i).join("/");break}var s=t.slice(i),a;o===null?a=".":((hd(o)||hd(t.join("/")))&&(!o||!hd(o))&&(o="/"+o),a=o);var u=this._makeAbs(a);if(zce(this,a))return n();var c=s[0]===y2.GLOBSTAR;c?this._processGlobStar(o,a,u,s,e,r,n):this._processReaddir(o,a,u,s,e,r,n)}};Oe.prototype._processReaddir=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){return a._processReaddir2(t,e,r,n,i,o,c,s)})};Oe.prototype._processReaddir2=function(t,e,r,n,i,o,s,a){if(!s)return a();for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,f=this.dot||l.charAt(0)===".",p=[],m=0;m<s.length;m++){var h=s[m];if(h.charAt(0)!=="."||f){var g;c&&!t?g=!h.match(u):g=h.match(u),g&&p.push(h)}}var y=p.length;if(y===0)return a();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var m=0;m<y;m++){var h=p[m];t&&(t!=="/"?h=t+"/"+h:h=t+h),h.charAt(0)==="/"&&!this.nomount&&(h=V0.join(this.root,h)),this._emitMatch(i,h)}return a()}n.shift();for(var m=0;m<y;m++){var h=p[m],_;t&&(t!=="/"?h=t+"/"+h:h=t+h),this._process([h].concat(n),i,o,a)}a()};Oe.prototype._emitMatch=function(t,e){if(!this.aborted&&!Jce(this,e)){if(this.paused){this._emitQueue.push([t,e]);return}var r=hd(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=r),!this.matches[t][e]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[t][e]=!0;var i=this.statCache[r];i&&this.emit("stat",e,i),this.emit("match",e)}}};Oe.prototype._readdirInGlobStar=function(t,e){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,e);var r="lstat\0"+t,n=this,i=z0(r,o);i&&n.fs.lstat(t,i);function o(s,a){if(s&&s.code==="ENOENT")return e();var u=a&&a.isSymbolicLink();n.symlinks[t]=u,!u&&a&&!a.isDirectory()?(n.cache[t]="FILE",e()):n._readdir(t,!1,e)}};Oe.prototype._readdir=function(t,e,r){if(!this.aborted&&(r=z0("readdir\0"+t+"\0"+e,r),!!r)){if(e&&!X0(this.symlinks,t))return this._readdirInGlobStar(t,r);if(X0(this.cache,t)){var n=this.cache[t];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(t,ele(this,t,r))}};function ele(t,e,r){return function(n,i){n?t._readdirError(e,n,r):t._readdirEntries(e,i,r)}}Oe.prototype._readdirEntries=function(t,e,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<e.length;n++){var i=e[n];t==="/"?i=t+i:i=t+"/"+i,this.cache[i]=!0}return this.cache[t]=e,r(null,e)}};Oe.prototype._readdirError=function(t,e,r){if(!this.aborted){switch(e.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(e.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=e.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",e),this.abort()),this.silent||console.error("glob error",e);break}return r()}};Oe.prototype._processGlobStar=function(t,e,r,n,i,o,s){var a=this;this._readdir(r,o,function(u,c){a._processGlobStar2(t,e,r,n,i,o,c,s)})};Oe.prototype._processGlobStar2=function(t,e,r,n,i,o,s,a){if(!s)return a();var u=n.slice(1),c=t?[t]:[],l=c.concat(u);this._process(l,i,!1,a);var f=this.symlinks[r],p=s.length;if(f&&o)return a();for(var m=0;m<p;m++){var h=s[m];if(!(h.charAt(0)==="."&&!this.dot)){var g=c.concat(s[m],u);this._process(g,i,!0,a);var y=c.concat(s[m],n);this._process(y,i,!0,a)}}a()};Oe.prototype._processSimple=function(t,e,r){var n=this;this._stat(t,function(i,o){n._processSimple2(t,e,i,o,r)})};Oe.prototype._processSimple2=function(t,e,r,n,i){if(this.matches[e]||(this.matches[e]=Object.create(null)),!n)return i();if(t&&hd(t)&&!this.nomount){var o=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=V0.join(this.root,t):(t=V0.resolve(this.root,t),o&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(e,t),i()};Oe.prototype._stat=function(t,e){var r=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return e();if(!this.stat&&X0(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return e(null,i);if(n&&i==="FILE")return e()}var o,s=this.statCache[r];if(s!==void 0){if(s===!1)return e(null,s);var a=s.isDirectory()?"DIR":"FILE";return n&&a==="FILE"?e():e(null,a,s)}var u=this,c=z0("stat\0"+r,l);c&&u.fs.lstat(r,c);function l(f,p){if(p&&p.isSymbolicLink())return u.fs.stat(r,function(m,h){m?u._stat2(t,r,null,p,e):u._stat2(t,r,m,h,e)});u._stat2(t,r,f,p,e)}};Oe.prototype._stat2=function(t,e,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[e]=!1,i();var o=t.slice(-1)==="/";if(this.statCache[e]=n,e.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[e]=this.cache[e]||s,o&&s==="FILE"?i():i(null,s,n)}});var _2=b((Kxe,v2)=>{v2.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var r;r=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(r[2])return!0;e=e.slice(r.index+r[0].length)}return!1}});var A2=b((zxe,I2)=>{var tle=_2(),w2={"{":"}","(":")","[":"]"},rle=function(t){if(t[0]==="!")return!0;for(var e=0,r=-2,n=-2,i=-2,o=-2,s=-2;e<t.length;){if(t[e]==="*"||t[e+1]==="?"&&/[\].+)]/.test(t[e])||n!==-1&&t[e]==="["&&t[e+1]!=="]"&&(n<e&&(n=t.indexOf("]",e)),n>e&&(s===-1||s>n||(s=t.indexOf("\\",e),s===-1||s>n)))||i!==-1&&t[e]==="{"&&t[e+1]!=="}"&&(i=t.indexOf("}",e),i>e&&(s=t.indexOf("\\",e),s===-1||s>i))||o!==-1&&t[e]==="("&&t[e+1]==="?"&&/[:!=]/.test(t[e+2])&&t[e+3]!==")"&&(o=t.indexOf(")",e),o>e&&(s=t.indexOf("\\",e),s===-1||s>o))||r!==-1&&t[e]==="("&&t[e+1]!=="|"&&(r<e&&(r=t.indexOf("|",e)),r!==-1&&t[r+1]!==")"&&(o=t.indexOf(")",r),o>r&&(s=t.indexOf("\\",r),s===-1||s>o))))return!0;if(t[e]==="\\"){var a=t[e+1];e+=2;var u=w2[a];if(u){var c=t.indexOf(u,e);c!==-1&&(e=c+1)}if(t[e]==="!")return!0}else e++}return!1},nle=function(t){if(t[0]==="!")return!0;for(var e=0;e<t.length;){if(/[*?{}()[\]]/.test(t[e]))return!0;if(t[e]==="\\"){var r=t[e+1];e+=2;var n=w2[r];if(n){var i=t.indexOf(n,e);i!==-1&&(e=i+1)}if(t[e]==="!")return!0}else e++}return!1};I2.exports=function(e,r){if(typeof e!="string"||e==="")return!1;if(tle(e))return!0;var n=rle;return r&&r.strict===!1&&(n=nle),n(e)}});var E2=b((Jxe,S2)=>{"use strict";var ile=A2(),ole=require("path").posix.dirname,sle=require("os").platform()==="win32",ky="/",ale=/\\/g,ule=/\\([!*?|[\](){}])/g;S2.exports=function(e,r){var n=Object.assign({flipBackslashes:!0},r);n.flipBackslashes&&sle&&e.indexOf(ky)<0&&(e=e.replace(ale,ky)),cle(e)&&(e+=ky),e+="a";do e=ole(e);while(lle(e));return e.replace(ule,"$1")};function cle(t){var e=t.slice(-1),r;switch(e){case"}":r="{";break;case"]":r="[";break;default:return!1}var n=t.indexOf(r);return n<0?!1:t.slice(n+1,-1).includes(ky)}function lle(t){return/\([^()]+$/.test(t)||t[0]==="{"||t[0]==="["||/[^\\][{[]/.test(t)?!0:ile(t)}});var P2=b((Yxe,L2)=>{"use strict";L2.exports=function(){return/^[\\\/]{2,}[^\\\/]+[\\\/]+[^\\\/]+/}});var C2=b((Qxe,x2)=>{"use strict";var fle=P2()();x2.exports=function(t){if(typeof t!="string")throw new TypeError("expected a string");return fle.test(t)}});var T2=b((Zxe,D2)=>{"use strict";var ple=C2();D2.exports=function(e){if(typeof e!="string")throw new TypeError("expected filepath to be a string");return!ple(e)&&!/^([a-z]:)?[\\\/]/i.test(e)}});var $2=b((J0,Y0)=>{(function(t){J0&&typeof J0=="object"&&typeof Y0<"u"?Y0.exports=t():typeof define=="function"&&define.amd?define([],t):typeof window<"u"?window.isWindows=t():typeof global<"u"?global.isWindows=t():typeof self<"u"?self.isWindows=t():this.isWindows=t()})(function(){"use strict";return function(){return process&&(process.platform==="win32"||/^(msys|cygwin)$/.test(process.env.OSTYPE))}})});var R2=b((eCe,M2)=>{"use strict";var dle=T2(),hle=$2();M2.exports=md;function md(t){if(typeof t!="string")throw new TypeError("isAbsolute expects a string.");return hle()?md.win32(t):md.posix(t)}md.posix=function(e){return e.charAt(0)==="/"};md.win32=function(e){return/[a-z]/i.test(e.charAt(0))&&e.charAt(1)===":"&&e.charAt(2)==="\\"||e.slice(0,2)==="\\\\"?!0:!dle(e)}});var Z0=b((tCe,B2)=>{"use strict";var k2=require("path"),mle=P0(),O2=R2();B2.exports=function(t,e){var r=e||{},n=k2.resolve(r.cwd?r.cwd:process.cwd());n=Q0(n);var i=r.root;i&&(i=Q0(i),(process.platform==="win32"||!O2(i))&&(i=Q0(k2.resolve(i)))),t.slice(0,2)==="./"&&(t=t.slice(2)),t.length===1&&t==="."&&(t="");var o=t.slice(-1),s=mle(t);return t=s.pattern,i&&t.charAt(0)==="/"?t=N2(i,t):(!O2(t)||t.slice(0,1)==="\\")&&(t=N2(n,t)),o==="/"&&t.slice(-1)!=="/"&&(t+="/"),s.negated?"!"+t:t};function Q0(t){return t.replace(/\\/g,"/")}function N2(t,e){return t.charAt(t.length-1)==="/"&&(t=t.slice(0,-1)),e.charAt(0)==="/"&&(e=e.slice(1)),e?t+"/"+e:t}});var U2=b((rCe,F2)=>{var Hle=process.platform==="win32";F2.exports=function(t){var e=t.length-1;if(e<2)return t;for(;gle(t,e);)e--;return t.substr(0,e+1)};function gle(t,e){var r=t[e];return e>0&&(r==="/"||Hle&&r==="\\")}});var q2=b((nCe,W2)=>{"use strict";var yle=require("util").inherits,ble=q0(),vle=x0(),j2=S0().Readable,_le=E2(),eE=Z0(),wle=U2(),Ile="File not found with singular glob: ",Ale=" (if this was purposeful, use `allowEmpty` option)";function Sle(t,e){return _le(eE(t,e))}function Ele(t){var e=t.minimatch.set;return e.length!==1?!1:e[0].every(function(n){return typeof n=="string"})}function dl(t,e,r){if(!(this instanceof dl))return new dl(t,e,r);var n=vle({},r);j2.call(this,{objectMode:!0,highWaterMark:n.highWaterMark||16}),delete n.highWaterMark;var i=this;function o(m){return eE(m,n)}var s=e.map(o);n.ignore=s;var a=n.cwd,u=n.allowEmpty||!1,c=n.base||Sle(t,n);t=eE(t,n),delete n.root;var l=new ble.Glob(t,n);this._globber=l;var f=!1;l.on("match",function(m){f=!0;var h={cwd:a,base:c,path:wle(m)};i.push(h)||l.pause()}),l.once("end",function(){if(u!==!0&&!f&&Ele(l)){var m=new Error(Ile+t+Ale);return i.destroy(m)}i.push(null)});function p(m){i.destroy(m)}l.once("error",p)}yle(dl,j2);dl.prototype._read=function(){this._globber.resume()};dl.prototype.destroy=function(t){var e=this;this._globber.abort(),process.nextTick(function(){t&&e.emit("error",t),e.emit("close")})};W2.exports=dl});var G2=b((iCe,V2)=>{"use strict";var Lle=mU(),Ple=d3(),xle=Sj(),Cle=P0(),Dle=x0(),Tle=q2();function $le(t,e){e||(e={});var r=Dle({},e),n=r.ignore;r.cwd=typeof r.cwd=="string"?r.cwd:process.cwd(),r.dot=typeof r.dot=="boolean"?r.dot:!1,r.silent=typeof r.silent=="boolean"?r.silent:!0,r.cwdbase=typeof r.cwdbase=="boolean"?r.cwdbase:!1,r.uniqueBy=typeof r.uniqueBy=="string"||typeof r.uniqueBy=="function"?r.uniqueBy:"path",r.cwdbase&&(r.base=r.cwd),typeof n=="string"&&(n=[n]),Array.isArray(n)||(n=[]),Array.isArray(t)||(t=[t]);var i=[],o=[];t.forEach(s);function s(f,p){if(typeof f!="string")throw new Error("Invalid glob at index "+p);var m=Cle(f),h=m.negated?o:i;h.push({index:p,glob:m.pattern})}if(i.length===0)throw new Error("Missing positive glob");var a=i.map(l),u=new Lle(a),c=Ple(r.uniqueBy);return xle.obj(u,c);function l(f){var p=o.filter(Mle(f.index)).map(Rle).concat(n);return new Tle(f.glob,p,r)}}function Mle(t){return function(e){return e.index>t}}function Rle(t){return t.glob}V2.exports=$le});var Vy=b((JCe,nW)=>{"use strict";var{Transform:Fle}=require("stream"),{StringDecoder:Ule}=require("string_decoder"),$s=Symbol("last"),qy=Symbol("decoder");function jle(t,e,r){let n;if(this.overflow){if(n=this[qy].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[$s]+=this[qy].write(t),n=this[$s].split(this.matcher);this[$s]=n.pop();for(let i=0;i<n.length;i++)try{rW(this,this.mapper(n[i]))}catch(o){return r(o)}if(this.overflow=this[$s].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Wle(t){if(this[$s]+=this[qy].end(),this[$s])try{rW(this,this.mapper(this[$s]))}catch(e){return t(e)}t()}function rW(t,e){e!==void 0&&t.push(e)}function tW(t){return t}function qle(t,e,r){switch(t=t||/\r?\n/,e=e||tW,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=tW)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=jle,r.flush=Wle,r.readableObjectMode=!0;let n=new Fle(r);return n[$s]="",n[qy]=new Ule("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,o){this._writableState.errorEmitted=!1,o(i)},n}nW.exports=qle});var EW,SW=XV(()=>{EW="./w32appcontainertokens-XTRA77NA.node"});var PW=b((A$e,LW)=>{SW();try{LW.exports=require(EW)}catch{}});var CW=b(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.getAppContainerProcessTokens=void 0;var Jle=require("path"),xW,Yle=()=>{if(process.platform==="win32")return xW??=PW(),xW},Qle=t=>Yle()?.getAppContainerProcessTokens().map(e=>(0,Jle.join)(e,t));Qy.getAppContainerProcessTokens=Qle});var XW=b((wRe,sfe)=>{sfe.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var YW=b((IRe,Co)=>{var KW=require("fs"),HE=require("path"),afe=require("os"),ufe=require("crypto"),cfe=XW(),gE=cfe.version,lfe=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function ffe(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=lfe.exec(r))!=null;){let i=n[1],o=n[2]||"";o=o.trim();let s=o[0];o=o.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),s==='"'&&(o=o.replace(/\\n/g,`
`),o=o.replace(/\\r/g,"\r")),e[i]=o}return e}function pfe(t){let e=JW(t),r=Wt.configDotenv({path:e});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);let n=zW(t).split(","),i=n.length,o;for(let s=0;s<i;s++)try{let a=n[s].trim(),u=mfe(r,a);o=Wt.decrypt(u.ciphertext,u.key);break}catch(a){if(s+1>=i)throw a}return Wt.parse(o)}function dfe(t){console.log(`[dotenv@${gE}][INFO] ${t}`)}function hfe(t){console.log(`[dotenv@${gE}][WARN] ${t}`)}function mE(t){console.log(`[dotenv@${gE}][DEBUG] ${t}`)}function zW(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function mfe(t,e){let r;try{r=new URL(e)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let i=r.searchParams.get("environment");if(!i)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let o=`DOTENV_VAULT_${i.toUpperCase()}`,s=t.parsed[o];if(!s)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);return{ciphertext:s,key:n}}function JW(t){let e=HE.resolve(process.cwd(),".env");return t&&t.path&&t.path.length>0&&(e=t.path),e.endsWith(".vault")?e:`${e}.vault`}function Hfe(t){return t[0]==="~"?HE.join(afe.homedir(),t.slice(1)):t}function gfe(t){dfe("Loading env from encrypted .env.vault");let e=Wt._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),Wt.populate(r,e,t),{parsed:e}}function yfe(t){let e=HE.resolve(process.cwd(),".env"),r="utf8",n=!!(t&&t.debug);t&&(t.path!=null&&(e=Hfe(t.path)),t.encoding!=null&&(r=t.encoding));try{let i=Wt.parse(KW.readFileSync(e,{encoding:r})),o=process.env;return t&&t.processEnv!=null&&(o=t.processEnv),Wt.populate(o,i,t),{parsed:i}}catch(i){return n&&mE(`Failed to load ${e} ${i.message}`),{error:i}}}function bfe(t){let e=JW(t);return zW(t).length===0?Wt.configDotenv(t):KW.existsSync(e)?Wt._configVault(t):(hfe(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Wt.configDotenv(t))}function vfe(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.slice(0,12),o=n.slice(-16);n=n.slice(12,-16);try{let s=ufe.createDecipheriv("aes-256-gcm",r,i);return s.setAuthTag(o),`${s.update(n)}${s.final()}`}catch(s){let a=s instanceof RangeError,u=s.message==="Invalid key length",c=s.message==="Unsupported state or unable to authenticate data";if(a||u){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(c){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",s.code),console.error("Error: ",s.message),s}}function _fe(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override);if(typeof e!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(i===!0&&(t[o]=e[o]),n&&mE(i===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):t[o]=e[o]}var Wt={configDotenv:yfe,_configVault:gfe,_parseVault:pfe,config:bfe,decrypt:vfe,parse:ffe,populate:_fe};Co.exports.configDotenv=Wt.configDotenv;Co.exports._configVault=Wt._configVault;Co.exports._parseVault=Wt._parseVault;Co.exports.config=Wt.config;Co.exports.decrypt=Wt.decrypt;Co.exports.parse=Wt.parse;Co.exports.populate=Wt.populate;Co.exports=Wt});var sV=b(AE=>{var oV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");AE.encode=function(t){if(0<=t&&t<oV.length)return oV[t];throw new TypeError("Must be between 0 and 63: "+t)};AE.decode=function(t){var e=65,r=90,n=97,i=122,o=48,s=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+c:o<=t&&t<=s?t-o+l:t==a?62:t==u?63:-1}});var LE=b(EE=>{var aV=sV(),SE=5,uV=1<<SE,cV=uV-1,lV=uV;function qfe(t){return t<0?(-t<<1)+1:(t<<1)+0}function Vfe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}EE.encode=function(e){var r="",n,i=qfe(e);do n=i&cV,i>>>=SE,i>0&&(n|=lV),r+=aV.encode(n);while(i>0);return r};EE.decode=function(e,r,n){var i=e.length,o=0,s=0,a,u;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(u=aV.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&lV),u&=cV,o=o+(u<<s),s+=SE}while(a);n.value=Vfe(o),n.rest=r}});var ql=b(hr=>{function Gfe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}hr.getArg=Gfe;var fV=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Xfe=/^data:.+\,.+$/;function Pd(t){var e=t.match(fV);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}hr.urlParse=Pd;function jl(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}hr.urlGenerate=jl;function PE(t){var e=t,r=Pd(t);if(r){if(!r.path)return t;e=r.path}for(var n=hr.isAbsolute(e),i=e.split(/\/+/),o,s=0,a=i.length-1;a>=0;a--)o=i[a],o==="."?i.splice(a,1):o===".."?s++:s>0&&(o===""?(i.splice(a+1,s),s=0):(i.splice(a,2),s--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,jl(r)):e}hr.normalize=PE;function pV(t,e){t===""&&(t="."),e===""&&(e=".");var r=Pd(e),n=Pd(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),jl(r);if(r||e.match(Xfe))return e;if(n&&!n.host&&!n.path)return n.host=e,jl(n);var i=e.charAt(0)==="/"?e:PE(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,jl(n)):i}hr.join=pV;hr.isAbsolute=function(t){return t.charAt(0)==="/"||fV.test(t)};function Kfe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}hr.relative=Kfe;var dV=function(){var t=Object.create(null);return!("__proto__"in t)}();function hV(t){return t}function zfe(t){return mV(t)?"$"+t:t}hr.toSetString=dV?hV:zfe;function Jfe(t){return mV(t)?t.slice(1):t}hr.fromSetString=dV?hV:Jfe;function mV(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Yfe(t,e,r){var n=Wl(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Wl(t.name,e.name)}hr.compareByOriginalPositions=Yfe;function Qfe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Wl(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Wl(t.name,e.name)}hr.compareByGeneratedPositionsDeflated=Qfe;function Wl(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Zfe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Wl(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Wl(t.name,e.name)}hr.compareByGeneratedPositionsInflated=Zfe;function epe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}hr.parseSourceMapInput=epe;function tpe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=Pd(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=pV(jl(n),e)}return PE(e)}hr.computeSourceURL=tpe});var DE=b(HV=>{var xE=ql(),CE=Object.prototype.hasOwnProperty,cu=typeof Map<"u";function Do(){this._array=[],this._set=cu?new Map:Object.create(null)}Do.fromArray=function(e,r){for(var n=new Do,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n};Do.prototype.size=function(){return cu?this._set.size:Object.getOwnPropertyNames(this._set).length};Do.prototype.add=function(e,r){var n=cu?e:xE.toSetString(e),i=cu?this.has(e):CE.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(cu?this._set.set(e,o):this._set[n]=o)};Do.prototype.has=function(e){if(cu)return this._set.has(e);var r=xE.toSetString(e);return CE.call(this._set,r)};Do.prototype.indexOf=function(e){if(cu){var r=this._set.get(e);if(r>=0)return r}else{var n=xE.toSetString(e);if(CE.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Do.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Do.prototype.toArray=function(){return this._array.slice()};HV.ArraySet=Do});var bV=b(yV=>{var gV=ql();function rpe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||gV.compareByGeneratedPositionsInflated(t,e)<=0}function Rb(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Rb.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};Rb.prototype.add=function(e){rpe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Rb.prototype.toArray=function(){return this._sorted||(this._array.sort(gV.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};yV.MappingList=Rb});var TE=b(vV=>{var xd=LE(),St=ql(),kb=DE().ArraySet,npe=bV().MappingList;function En(t){t||(t={}),this._file=St.getArg(t,"file",null),this._sourceRoot=St.getArg(t,"sourceRoot",null),this._skipValidation=St.getArg(t,"skipValidation",!1),this._sources=new kb,this._names=new kb,this._mappings=new npe,this._sourcesContents=null}En.prototype._version=3;En.fromSourceMap=function(e){var r=e.sourceRoot,n=new En({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=St.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=St.relative(r,i)),n._sources.has(o)||n._sources.add(o);var s=e.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n};En.prototype.addMapping=function(e){var r=St.getArg(e,"generated"),n=St.getArg(e,"original",null),i=St.getArg(e,"source",null),o=St.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})};En.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=St.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[St.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[St.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};En.prototype.applySourceMap=function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=St.relative(o,i));var s=new kb,a=new kb;this._mappings.unsortedForEach(function(u){if(u.source===i&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=St.join(n,u.source)),o!=null&&(u.source=St.relative(o,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!s.has(l)&&s.add(l);var f=u.name;f!=null&&!a.has(f)&&a.add(f)},this),this._sources=s,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=St.join(n,u)),o!=null&&(u=St.relative(o,u)),this.setSourceContent(u,c))},this)};En.prototype._validateMapping=function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}};En.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,i=0,o=0,s=0,a="",u,c,l,f,p=this._mappings.toArray(),m=0,h=p.length;m<h;m++){if(c=p[m],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(m>0){if(!St.compareByGeneratedPositionsInflated(c,p[m-1]))continue;u+=","}u+=xd.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(f=this._sources.indexOf(c.source),u+=xd.encode(f-s),s=f,u+=xd.encode(c.originalLine-1-i),i=c.originalLine-1,u+=xd.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=xd.encode(l-o),o=l)),a+=u}return a};En.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=St.relative(r,n));var i=St.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};En.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};En.prototype.toString=function(){return JSON.stringify(this.toJSON())};vV.SourceMapGenerator=En});var _V=b(lu=>{lu.GREATEST_LOWER_BOUND=1;lu.LEAST_UPPER_BOUND=2;function $E(t,e,r,n,i,o){var s=Math.floor((e-t)/2)+t,a=i(r,n[s],!0);return a===0?s:a>0?e-s>1?$E(s,e,r,n,i,o):o==lu.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?$E(t,s,r,n,i,o):o==lu.LEAST_UPPER_BOUND?s:t<0?-1:t}lu.search=function(e,r,n,i){if(r.length===0)return-1;var o=$E(-1,r.length,e,r,n,i||lu.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o}});var IV=b(wV=>{function ME(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function ipe(t,e){return Math.round(t+Math.random()*(e-t))}function RE(t,e,r,n){if(r<n){var i=ipe(r,n),o=r-1;ME(t,i,n);for(var s=t[n],a=r;a<n;a++)e(t[a],s)<=0&&(o+=1,ME(t,o,a));ME(t,o+1,a);var u=o+1;RE(t,e,r,u-1),RE(t,e,u+1,n)}}wV.quickSort=function(t,e){RE(t,e,0,t.length-1)}});var SV=b(Ob=>{var ce=ql(),kE=_V(),Vl=DE().ArraySet,ope=LE(),Cd=IV().quickSort;function Qe(t,e){var r=t;return typeof t=="string"&&(r=ce.parseSourceMapInput(t)),r.sections!=null?new zn(r,e):new tr(r,e)}Qe.fromSourceMap=function(t,e){return tr.fromSourceMap(t,e)};Qe.prototype._version=3;Qe.prototype.__generatedMappings=null;Object.defineProperty(Qe.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Qe.prototype.__originalMappings=null;Object.defineProperty(Qe.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Qe.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Qe.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Qe.GENERATED_ORDER=1;Qe.ORIGINAL_ORDER=2;Qe.GREATEST_LOWER_BOUND=1;Qe.LEAST_UPPER_BOUND=2;Qe.prototype.eachMapping=function(e,r,n){var i=r||null,o=n||Qe.GENERATED_ORDER,s;switch(o){case Qe.GENERATED_ORDER:s=this._generatedMappings;break;case Qe.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;s.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=ce.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,i)};Qe.prototype.allGeneratedPositionsFor=function(e){var r=ce.getArg(e,"line"),n={source:ce.getArg(e,"source"),originalLine:r,originalColumn:ce.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",ce.compareByOriginalPositions,kE.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)i.push({line:ce.getArg(s,"generatedLine",null),column:ce.getArg(s,"generatedColumn",null),lastColumn:ce.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var u=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==u;)i.push({line:ce.getArg(s,"generatedLine",null),column:ce.getArg(s,"generatedColumn",null),lastColumn:ce.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return i};Ob.SourceMapConsumer=Qe;function tr(t,e){var r=t;typeof t=="string"&&(r=ce.parseSourceMapInput(t));var n=ce.getArg(r,"version"),i=ce.getArg(r,"sources"),o=ce.getArg(r,"names",[]),s=ce.getArg(r,"sourceRoot",null),a=ce.getArg(r,"sourcesContent",null),u=ce.getArg(r,"mappings"),c=ce.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=ce.normalize(s)),i=i.map(String).map(ce.normalize).map(function(l){return s&&ce.isAbsolute(s)&&ce.isAbsolute(l)?ce.relative(s,l):l}),this._names=Vl.fromArray(o.map(String),!0),this._sources=Vl.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(l){return ce.computeSourceURL(s,l,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}tr.prototype=Object.create(Qe.prototype);tr.prototype.consumer=Qe;tr.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=ce.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};tr.fromSourceMap=function(e,r){var n=Object.create(tr.prototype),i=n._names=Vl.fromArray(e._names.toArray(),!0),o=n._sources=Vl.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(m){return ce.computeSourceURL(n.sourceRoot,m,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=s.length;c<l;c++){var f=s[c],p=new AV;p.generatedLine=f.generatedLine,p.generatedColumn=f.generatedColumn,f.source&&(p.source=o.indexOf(f.source),p.originalLine=f.originalLine,p.originalColumn=f.originalColumn,f.name&&(p.name=i.indexOf(f.name)),u.push(p)),a.push(p)}return Cd(n.__originalMappings,ce.compareByOriginalPositions),n};tr.prototype._version=3;Object.defineProperty(tr.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function AV(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}tr.prototype._parseMappings=function(e,r){for(var n=1,i=0,o=0,s=0,a=0,u=0,c=e.length,l=0,f={},p={},m=[],h=[],g,y,_,C,N;l<c;)if(e.charAt(l)===";")n++,l++,i=0;else if(e.charAt(l)===",")l++;else{for(g=new AV,g.generatedLine=n,C=l;C<c&&!this._charIsMappingSeparator(e,C);C++);if(y=e.slice(l,C),_=f[y],_)l+=y.length;else{for(_=[];l<C;)ope.decode(e,l,p),N=p.value,l=p.rest,_.push(N);if(_.length===2)throw new Error("Found a source, but no line and column");if(_.length===3)throw new Error("Found a source and line, but no column");f[y]=_}g.generatedColumn=i+_[0],i=g.generatedColumn,_.length>1&&(g.source=a+_[1],a+=_[1],g.originalLine=o+_[2],o=g.originalLine,g.originalLine+=1,g.originalColumn=s+_[3],s=g.originalColumn,_.length>4&&(g.name=u+_[4],u+=_[4])),h.push(g),typeof g.originalLine=="number"&&m.push(g)}Cd(h,ce.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,Cd(m,ce.compareByOriginalPositions),this.__originalMappings=m};tr.prototype._findMapping=function(e,r,n,i,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return kE.search(e,r,o,s)};tr.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};tr.prototype.originalPositionFor=function(e){var r={generatedLine:ce.getArg(e,"line"),generatedColumn:ce.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",ce.compareByGeneratedPositionsDeflated,ce.getArg(e,"bias",Qe.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=ce.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=ce.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=ce.getArg(i,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:ce.getArg(i,"originalLine",null),column:ce.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};tr.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};tr.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=ce.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=ce.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')};tr.prototype.generatedPositionFor=function(e){var r=ce.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:ce.getArg(e,"line"),originalColumn:ce.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",ce.compareByOriginalPositions,ce.getArg(e,"bias",Qe.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:ce.getArg(o,"generatedLine",null),column:ce.getArg(o,"generatedColumn",null),lastColumn:ce.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Ob.BasicSourceMapConsumer=tr;function zn(t,e){var r=t;typeof t=="string"&&(r=ce.parseSourceMapInput(t));var n=ce.getArg(r,"version"),i=ce.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Vl,this._names=new Vl;var o={line:-1,column:0};this._sections=i.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=ce.getArg(s,"offset"),u=ce.getArg(a,"line"),c=ce.getArg(a,"column");if(u<o.line||u===o.line&&c<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Qe(ce.getArg(s,"map"),e)}})}zn.prototype=Object.create(Qe.prototype);zn.prototype.constructor=Qe;zn.prototype._version=3;Object.defineProperty(zn.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});zn.prototype.originalPositionFor=function(e){var r={generatedLine:ce.getArg(e,"line"),generatedColumn:ce.getArg(e,"column")},n=kE.search(r,this._sections,function(o,s){var a=o.generatedLine-s.generatedOffset.generatedLine;return a||o.generatedColumn-s.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};zn.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};zn.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};zn.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(ce.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};zn.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var a=o[s],u=i.consumer._sources.at(a.source);u=ce.computeSourceURL(i.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=i.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(i.generatedOffset.generatedLine===a.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}Cd(this.__generatedMappings,ce.compareByGeneratedPositionsDeflated),Cd(this.__originalMappings,ce.compareByOriginalPositions)};Ob.IndexedSourceMapConsumer=zn});var LV=b(EV=>{var spe=TE().SourceMapGenerator,Nb=ql(),ape=/(\r?\n)/,upe=10,Gl="$$$isSourceNode$$$";function en(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Gl]=!0,n!=null&&this.add(n)}en.fromStringWithSourceMap=function(e,r,n){var i=new en,o=e.split(ape),s=0,a=function(){var p=h(),m=h()||"";return p+m;function h(){return s<o.length?o[s++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(p){if(l!==null)if(u<p.generatedLine)f(l,a()),u++,c=0;else{var m=o[s]||"",h=m.substr(0,p.generatedColumn-c);o[s]=m.substr(p.generatedColumn-c),c=p.generatedColumn,f(l,h),l=p;return}for(;u<p.generatedLine;)i.add(a()),u++;if(c<p.generatedColumn){var m=o[s]||"";i.add(m.substr(0,p.generatedColumn)),o[s]=m.substr(p.generatedColumn),c=p.generatedColumn}l=p},this),s<o.length&&(l&&f(l,a()),i.add(o.splice(s).join(""))),r.sources.forEach(function(p){var m=r.sourceContentFor(p);m!=null&&(n!=null&&(p=Nb.join(n,p)),i.setSourceContent(p,m))}),i;function f(p,m){if(p===null||p.source===void 0)i.add(m);else{var h=n?Nb.join(n,p.source):p.source;i.add(new en(p.originalLine,p.originalColumn,h,m,p.name))}}};en.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Gl]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};en.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Gl]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};en.prototype.walk=function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Gl]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};en.prototype.join=function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};en.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Gl]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};en.prototype.setSourceContent=function(e,r){this.sourceContents[Nb.toSetString(e)]=r};en.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Gl]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(Nb.fromSetString(i[r]),this.sourceContents[i[r]])};en.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};en.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new spe(e),i=!1,o=null,s=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((o!==l.source||s!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),o=l.source,s=l.line,a=l.column,u=l.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var f=0,p=c.length;f<p;f++)c.charCodeAt(f)===upe?(r.line++,r.column=0,f+1===p?(o=null,i=!1):i&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};EV.SourceNode=en});var PV=b(Bb=>{Bb.SourceMapGenerator=TE().SourceMapGenerator;Bb.SourceMapConsumer=SV().SourceMapConsumer;Bb.SourceNode=LV().SourceNode});var CV=b((MUe,xV)=>{var cpe=Object.prototype.toString,OE=typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function lpe(t){return cpe.call(t).slice(8,-1)==="ArrayBuffer"}function fpe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return OE?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}function ppe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return OE?Buffer.from(t,e):new Buffer(t,e)}function dpe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return lpe(t)?fpe(t,e,r):typeof t=="string"?ppe(t,e):OE?Buffer.from(t):new Buffer(t)}xV.exports=dpe});var NV=b((pu,UE)=>{var hpe=PV().SourceMapConsumer,NE=require("path"),Xi;try{Xi=require("fs"),(!Xi.existsSync||!Xi.readFileSync)&&(Xi=null)}catch{}var mpe=CV();function DV(t,e){return t.require(e)}var TV=!1,$V=!1,BE=!1,Dd="auto",fu={},Td={},Hpe=/^data:application\/json[^,]+base64,/,js=[],Ws=[];function jE(){return Dd==="browser"?!0:Dd==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function gpe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function ype(){return typeof process=="object"&&process!==null?process.version:""}function bpe(){if(typeof process=="object"&&process!==null)return process.stderr}function vpe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}function Fb(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}var WE=Fb(js);js.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in fu)return fu[t];var e="";try{if(Xi)Xi.existsSync(t)&&(e=Xi.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return fu[t]=e});function FE(t,e){if(!t)return e;var r=NE.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+NE.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+NE.resolve(r.slice(i.length),e)}function _pe(t){var e;if(jE())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=WE(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,s;s=i.exec(e);)o=s;return o?o[1]:null}var qE=Fb(Ws);Ws.push(function(t){var e=_pe(t);if(!e)return null;var r;if(Hpe.test(e)){var n=e.slice(e.indexOf(",")+1);r=mpe(n,"base64").toString(),e=t}else e=FE(t,e),r=WE(e);return r?{url:e,map:r}:null});function VE(t){var e=Td[t.source];if(!e){var r=qE(t.source);r?(e=Td[t.source]={url:r.url,map:new hpe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var s=e.map.sourcesContent[o];if(s){var a=FE(e.url,i);fu[a]=s}})):e=Td[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=FE(e.url,n.source),n}return t}function RV(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=VE({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+RV(e[2])+")":t}function wpe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor(),u=!(this.isToplevel()||a);if(u){var c=this.getTypeName();c==="[object Object]"&&(c="null");var l=this.getMethodName();o?(c&&o.indexOf(c)!=0&&(i+=c+"."),i+=o,l&&o.indexOf("."+l)!=o.length-l.length-1&&(i+=" [as "+l+"]")):i+=c+"."+(l||"<anonymous>")}else a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,s=!1);return s&&(i+=" ("+e+")"),i}function MV(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=wpe,e}function kV(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=o.test(ype())?0:62;n===1&&i>s&&!jE()&&!t.isEval()&&(i-=s);var a=VE({source:r,line:n,column:i});e.curPosition=a,t=MV(t);var u=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?u():e.nextPosition.name||u()},t.getFileName=function(){return a.source},t.getLineNumber=function(){return a.line},t.getColumnNumber=function(){return a.column+1},t.getScriptNameOrSourceURL=function(){return a.source},t}var c=t.isEval()&&t.getEvalOrigin();return c&&(c=RV(c),t=MV(t),t.getEvalOrigin=function(){return c}),t}function Ipe(t,e){BE&&(fu={},Td={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},s=[],a=e.length-1;a>=0;a--)s.push(`
    at `+kV(e[a],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+s.reverse().join("")}function OV(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=fu[r];if(!o&&Xi&&Xi.existsSync(r))try{o=Xi.readFileSync(r,"utf8")}catch{o=""}if(o){var s=o.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return r+":"+n+`
`+s+`
`+new Array(i).join(" ")+"^"}}return null}function Ape(t){var e=OV(t),r=bpe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),vpe(1)}function Spe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return Ape(arguments[1])}return t.apply(this,arguments)}}var Epe=js.slice(0),Lpe=Ws.slice(0);pu.wrapCallSite=kV;pu.getErrorSource=OV;pu.mapSourcePosition=VE;pu.retrieveSourceMap=qE;pu.install=function(t){if(t=t||{},t.environment&&(Dd=t.environment,["node","browser","auto"].indexOf(Dd)===-1))throw new Error("environment "+Dd+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(js.length=0),js.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Ws.length=0),Ws.unshift(t.retrieveSourceMap)),t.hookRequire&&!jE()){var e=DV(UE,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,s){return fu[s]=o,Td[s]=void 0,r.call(this,o,s)},e.prototype._compile.__sourceMapSupport=!0)}if(BE||(BE="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),TV||(TV=!0,Error.prepareStackTrace=Ipe),!$V){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=DV(UE,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&gpe()&&($V=!0,Spe())}};pu.resetRetrieveHandlers=function(){js.length=0,Ws.length=0,js=Epe.slice(0),Ws=Lpe.slice(0),qE=Fb(Ws),WE=Fb(js)}});var Vb=$(ut()),BV=$(require("fs")),FV=$(require("net")),UV=$(require("os")),jV=$(require("path"));var eL;(function(t){(function(e){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=i(t);typeof r.Reflect>"u"?r.Reflect=t:n=i(r.Reflect,n),e(n);function i(o,s){return function(a,u){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:u}),s&&s(a,u)}}})(function(e){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",i=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!s&&!a,c={create:s?function(){return Ln(Object.create(null))}:a?function(){return Ln({__proto__:null})}:function(){return Ln({})},has:u?function(d,H){return r.call(d,H)}:function(d,H){return H in d},get:u?function(d,H){return r.call(d,H)?d[H]:void 0}:function(d,H){return d[H]}},l=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",p=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:$d(),m=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Gb(),h=!f&&typeof WeakMap=="function"?WeakMap:He(),g=new h;function y(d,H,v,w){if(ee(v)){if(!Ie(d))throw new TypeError;if(!he(H))throw new TypeError;return M(d,H)}else{if(!Ie(d))throw new TypeError;if(!ge(H))throw new TypeError;if(!ge(w)&&!ee(w)&&!pe(w))throw new TypeError;return pe(w)&&(w=void 0),v=J(v),E(d,H,v,w)}}e("decorate",y);function _(d,H){function v(w,L){if(!ge(w))throw new TypeError;if(!ee(L)&&!Te(L))throw new TypeError;oe(d,H,w,L)}return v}e("metadata",_);function C(d,H,v,w){if(!ge(v))throw new TypeError;return ee(w)||(w=J(w)),oe(d,H,v,w)}e("defineMetadata",C);function N(d,H,v){if(!ge(H))throw new TypeError;return ee(v)||(v=J(v)),F(d,H,v)}e("hasMetadata",N);function D(d,H,v){if(!ge(H))throw new TypeError;return ee(v)||(v=J(v)),V(d,H,v)}e("hasOwnMetadata",D);function j(d,H,v){if(!ge(H))throw new TypeError;return ee(v)||(v=J(v)),S(d,H,v)}e("getMetadata",j);function X(d,H,v){if(!ge(H))throw new TypeError;return ee(v)||(v=J(v)),P(d,H,v)}e("getOwnMetadata",X);function G(d,H){if(!ge(d))throw new TypeError;return ee(H)||(H=J(H)),te(d,H)}e("getMetadataKeys",G);function U(d,H){if(!ge(d))throw new TypeError;return ee(H)||(H=J(H)),fe(d,H)}e("getOwnMetadataKeys",U);function k(d,H,v){if(!ge(H))throw new TypeError;ee(v)||(v=J(v));var w=q(H,v,!1);if(ee(w)||!w.delete(d))return!1;if(w.size>0)return!0;var L=g.get(H);return L.delete(v),L.size>0||g.delete(H),!0}e("deleteMetadata",k);function M(d,H){for(var v=d.length-1;v>=0;--v){var w=d[v],L=w(H);if(!ee(L)&&!pe(L)){if(!he(L))throw new TypeError;H=L}}return H}function E(d,H,v,w){for(var L=d.length-1;L>=0;--L){var x=d[L],R=x(H,v,w);if(!ee(R)&&!pe(R)){if(!ge(R))throw new TypeError;w=R}}return w}function q(d,H,v){var w=g.get(d);if(ee(w)){if(!v)return;w=new p,g.set(d,w)}var L=w.get(H);if(ee(L)){if(!v)return;L=new p,w.set(H,L)}return L}function F(d,H,v){var w=V(d,H,v);if(w)return!0;var L=du(H);return pe(L)?!1:F(d,L,v)}function V(d,H,v){var w=q(H,v,!1);return ee(w)?!1:mr(w.has(d))}function S(d,H,v){var w=V(d,H,v);if(w)return P(d,H,v);var L=du(H);if(!pe(L))return S(d,L,v)}function P(d,H,v){var w=q(H,v,!1);if(!ee(w))return w.get(d)}function oe(d,H,v,w){var L=q(v,w,!0);L.set(d,H)}function te(d,H){var v=fe(d,H),w=du(d);if(w===null)return v;var L=te(w,H);if(L.length<=0)return v;if(v.length<=0)return L;for(var x=new m,R=[],O=0,T=v;O<T.length;O++){var Z=T[O],se=x.has(Z);se||(x.add(Z),R.push(Z))}for(var de=0,Se=L;de<Se.length;de++){var Z=Se[de],se=x.has(Z);se||(x.add(Z),R.push(Z))}return R}function fe(d,H){var v=[],w=q(d,H,!1);if(ee(w))return v;for(var L=w.keys(),x=ot(L),R=0;;){var O=$o(x);if(!O)return v.length=R,v;var T=To(O);try{v[R]=T}catch(Z){try{qs(x)}finally{throw Z}}R++}}function ue(d){if(d===null)return 1;switch(typeof d){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return d===null?1:6;default:return 6}}function ee(d){return d===void 0}function pe(d){return d===null}function be(d){return typeof d=="symbol"}function ge(d){return typeof d=="object"?d!==null:typeof d=="function"}function qt(d,H){switch(ue(d)){case 0:return d;case 1:return d;case 2:return d;case 3:return d;case 4:return d;case 5:return d}var v=H===3?"string":H===5?"number":"default",w=Ze(d,i);if(w!==void 0){var L=w.call(d,v);if(ge(L))throw new TypeError;return L}return me(d,v==="default"?"number":v)}function me(d,H){if(H==="string"){var v=d.toString;if(z(v)){var w=v.call(d);if(!ge(w))return w}var L=d.valueOf;if(z(L)){var w=L.call(d);if(!ge(w))return w}}else{var L=d.valueOf;if(z(L)){var w=L.call(d);if(!ge(w))return w}var x=d.toString;if(z(x)){var w=x.call(d);if(!ge(w))return w}}throw new TypeError}function mr(d){return!!d}function Rr(d){return""+d}function J(d){var H=qt(d,3);return be(H)?H:Rr(H)}function Ie(d){return Array.isArray?Array.isArray(d):d instanceof Object?d instanceof Array:Object.prototype.toString.call(d)==="[object Array]"}function z(d){return typeof d=="function"}function he(d){return typeof d=="function"}function Te(d){switch(ue(d)){case 3:return!0;case 4:return!0;default:return!1}}function Ze(d,H){var v=d[H];if(v!=null){if(!z(v))throw new TypeError;return v}}function ot(d){var H=Ze(d,o);if(!z(H))throw new TypeError;var v=H.call(d);if(!ge(v))throw new TypeError;return v}function To(d){return d.value}function $o(d){var H=d.next();return H.done?!1:H}function qs(d){var H=d.return;H&&H.call(d)}function du(d){var H=Object.getPrototypeOf(d);if(typeof d!="function"||d===l||H!==l)return H;var v=d.prototype,w=v&&Object.getPrototypeOf(v);if(w==null||w===Object.prototype)return H;var L=w.constructor;return typeof L!="function"||L===d?H:L}function $d(){var d={},H=[],v=function(){function R(O,T,Z){this._index=0,this._keys=O,this._values=T,this._selector=Z}return R.prototype["@@iterator"]=function(){return this},R.prototype[o]=function(){return this},R.prototype.next=function(){var O=this._index;if(O>=0&&O<this._keys.length){var T=this._selector(this._keys[O],this._values[O]);return O+1>=this._keys.length?(this._index=-1,this._keys=H,this._values=H):this._index++,{value:T,done:!1}}return{value:void 0,done:!0}},R.prototype.throw=function(O){throw this._index>=0&&(this._index=-1,this._keys=H,this._values=H),O},R.prototype.return=function(O){return this._index>=0&&(this._index=-1,this._keys=H,this._values=H),{value:O,done:!0}},R}();return function(){function R(){this._keys=[],this._values=[],this._cacheKey=d,this._cacheIndex=-2}return Object.defineProperty(R.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),R.prototype.has=function(O){return this._find(O,!1)>=0},R.prototype.get=function(O){var T=this._find(O,!1);return T>=0?this._values[T]:void 0},R.prototype.set=function(O,T){var Z=this._find(O,!0);return this._values[Z]=T,this},R.prototype.delete=function(O){var T=this._find(O,!1);if(T>=0){for(var Z=this._keys.length,se=T+1;se<Z;se++)this._keys[se-1]=this._keys[se],this._values[se-1]=this._values[se];return this._keys.length--,this._values.length--,O===this._cacheKey&&(this._cacheKey=d,this._cacheIndex=-2),!0}return!1},R.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=d,this._cacheIndex=-2},R.prototype.keys=function(){return new v(this._keys,this._values,w)},R.prototype.values=function(){return new v(this._keys,this._values,L)},R.prototype.entries=function(){return new v(this._keys,this._values,x)},R.prototype["@@iterator"]=function(){return this.entries()},R.prototype[o]=function(){return this.entries()},R.prototype._find=function(O,T){return this._cacheKey!==O&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=O)),this._cacheIndex<0&&T&&(this._cacheIndex=this._keys.length,this._keys.push(O),this._values.push(void 0)),this._cacheIndex},R}();function w(R,O){return R}function L(R,O){return O}function x(R,O){return[R,O]}}function Gb(){return function(){function d(){this._map=new p}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(H){return this._map.has(H)},d.prototype.add=function(H){return this._map.set(H,H),this},d.prototype.delete=function(H){return this._map.delete(H)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.values()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[o]=function(){return this.keys()},d}()}function He(){var d=16,H=c.create(),v=w();return function(){function T(){this._key=w()}return T.prototype.has=function(Z){var se=L(Z,!1);return se!==void 0?c.has(se,this._key):!1},T.prototype.get=function(Z){var se=L(Z,!1);return se!==void 0?c.get(se,this._key):void 0},T.prototype.set=function(Z,se){var de=L(Z,!0);return de[this._key]=se,this},T.prototype.delete=function(Z){var se=L(Z,!1);return se!==void 0?delete se[this._key]:!1},T.prototype.clear=function(){this._key=w()},T}();function w(){var T;do T="@@WeakMap@@"+O();while(c.has(H,T));return H[T]=!0,T}function L(T,Z){if(!r.call(T,v)){if(!Z)return;Object.defineProperty(T,v,{value:c.create()})}return T[v]}function x(T,Z){for(var se=0;se<Z;++se)T[se]=Math.random()*255|0;return T}function R(T){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(T)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(T)):x(new Uint8Array(T),T):x(new Array(T),T)}function O(){var T=R(d);T[6]=T[6]&79|64,T[8]=T[8]&191|128;for(var Z="",se=0;se<d;++se){var de=T[se];(se===4||se===6||se===8)&&(Z+="-"),de<16&&(Z+="0"),Z+=de.toString(16).toLowerCase()}return Z}}function Ln(d){return d.__=void 0,delete d.__,d}})})(eL||(eL={}));var l8={"pwa-extensionHost":null,"node-terminal":null,"pwa-node":null,"pwa-chrome":null,"pwa-msedge":null},f8={"extension.js-debug.addCustomBreakpoints":null,"extension.js-debug.addXHRBreakpoints":null,"extension.js-debug.editXHRBreakpoints":null,"extension.pwa-node-debug.attachNodeProcess":null,"extension.js-debug.clearAutoAttachVariables":null,"extension.js-debug.setAutoAttachVariables":null,"extension.js-debug.autoAttachToProcess":null,"extension.js-debug.createDebuggerTerminal":null,"extension.js-debug.createDiagnostics":null,"extension.js-debug.getDiagnosticLogs":null,"extension.js-debug.debugLink":null,"extension.js-debug.npmScript":null,"extension.js-debug.pickNodeProcess":null,"extension.js-debug.prettyPrint":null,"extension.js-debug.removeXHRBreakpoint":null,"extension.js-debug.removeAllCustomBreakpoints":null,"extension.js-debug.revealPage":null,"extension.js-debug.startProfile":null,"extension.js-debug.stopProfile":null,"extension.js-debug.toggleSkippingFile":null,"extension.node-debug.startWithStopOnEntry":null,"extension.js-debug.requestCDPProxy":null,"extension.js-debug.openEdgeDevTools":null,"extension.js-debug.callers.add":null,"extension.js-debug.callers.goToCaller":null,"extension.js-debug.callers.gotToTarget":null,"extension.js-debug.callers.remove":null,"extension.js-debug.callers.removeAll":null,"extension.js-debug.enableSourceMapStepping":null,"extension.js-debug.disableSourceMapStepping":null},Dpe=new Set(Object.keys(f8)),Tpe=new Set(Object.keys(l8));var we=t=>isFinite(t)?new Promise(e=>setTimeout(e,t)):new Promise(()=>{}),tL=(t,e)=>{let r=setTimeout(t,e);return{dispose:()=>clearTimeout(r)}};function hu(t){return new Promise((e,r)=>{let n=t.length;for(let i of t)i.then(o=>{o?(e(o),n=-1):--n===0&&e(void 0)}).catch(r)})}function $e(){let t=null,e=null,r=!1,n,i=new Promise((o,s)=>{t=a=>{r=!0,n=a,o(a)},e=a=>{r=!0,s(a)}});return{resolve:t,reject:e,promise:i,get settledValue(){return n},hasSettled:()=>r}}var Sb=$(uv()),Fq=$(Cv()),Ab=require("fs"),Eb=$(ae());var xf=require("fs"),Ot=$(ae()),Sm=$(require("path"));var Gt=t=>!!t,xu=t=>Oh(t,e=>e!==null),IC=t=>Oh(t,e=>e!==void 0),Ks=t=>e=>e instanceof t,kh=(t,e)=>{debugger;throw new Error(e.replace("{value}",JSON.stringify(t)))};function Oh(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];e(i,n)&&(r[n]=i)}return r}function Yi(t,e){let r={};for(let n of Object.keys(t)){let i=t[n];r[n]=e(i,n)}return r}function AC(t,e){let r={};for(let n of Object.keys(t))e(n,t[n])&&(r[n]=t[n]);return r}function SC(...t){if(t.length===0)return{};let e={},r=Object.create(null);for(let n of t)if(n)for(let i of Object.keys(n)){let o=i.toLowerCase();r[o]?e[r[o]]=n[i]:(r[o]=i,e[i]=n[i])}return e}function EC(t,e){if(t.hasOwnProperty(e))return t[e];let r=e.toLowerCase();for(let n of Object.keys(t))if(n.toLowerCase()===r)return t[n]}var u_=Symbol("unset");function ye(t){let e=u_,r=(...n)=>(e===u_&&(r.value=e=t(...n)),e);return r.forget=()=>{e=u_,r.value=void 0},r.value=void 0,r}function zs(t){let e=new Map,r=n=>{if(e.has(n))return e.get(n);let i=t(n);return e.set(n,i),i};return r.clear=()=>e.clear(),r}function LC(t){let e,r=n=>(e?.arg===n||(e={arg:n,val:t(n)}),e.val);return r.clear=()=>e=void 0,r}function PC(t,e){let r,n=()=>{r!==void 0&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e()},t)};return n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}function xC(t,e){let r,n=()=>{r===void 0&&(r=setTimeout(()=>{r=void 0,e()},t))};return n.queued=()=>!!r,n.clear=()=>{r&&(clearTimeout(r),r=void 0)},n}async function CC(t,e){let r=[],n=[];for(let i of t)await e(i)?r.push(i):n.push(i);return[r,n]}function Js(t){let e=[];for(let r of t)e=e.concat(r);return e}var DK=2**31-1,Nh=()=>{let t=0;return()=>t++&DK};var K=class{constructor(){this._listeners=new Set;this.event=(e,r,n)=>{let i={listener:e,thisArg:r};this._listeners.add(i);let o={dispose:()=>{o.dispose=()=>{},this._listeners.delete(i)}};return n&&n.push(o),o}}get size(){return this._listeners.size}fire(e){let r=!this._deliveryQueue;this._deliveryQueue||(this._deliveryQueue=[]);for(let n of this._listeners)this._deliveryQueue.push({data:n,event:e});if(r){for(let n=0;n<this._deliveryQueue.length;n++){let{data:i,event:o}=this._deliveryQueue[n];i.listener.call(i.thisArg,o)}this._deliveryQueue=void 0}}dispose(){this._listeners.clear(),this._deliveryQueue&&(this._deliveryQueue=[])}},uf=class{constructor(){this.map=new Map;this.listeners=this.map}listen(e,r){let n=this.map.get(e);n||(n=new K,this.map.set(e,n));let i=n.event(r);return{dispose:ye(()=>{i.dispose(),n?.size===0&&this.map.delete(e)})}}emit(e,r){this.listeners.get(e)?.fire(r)}};var Ys=$(ae()),hf=$(require("path"));var Ee=Symbol("AnyLaunchConfiguration"),DC={type:"",name:"",request:"",trace:!1,outputCapture:"console",timeout:1e4,timeouts:{},showAsyncStacks:!0,skipFiles:[],smartStep:!0,sourceMaps:!0,sourceMapRenames:!0,pauseForSourceMap:!0,resolveSourceMapLocations:null,rootPath:"${workspaceFolder}",outFiles:["${workspaceFolder}/**/*.(m|c|)js","!**/node_modules/**"],sourceMapPathOverrides:l_("${workspaceFolder}"),enableContentValidation:!0,cascadeTerminateToConfigurations:[],enableDWARF:!0,__workspaceFolder:"",__remoteFilePrefix:void 0,__breakOnConditionalError:!1,customDescriptionGenerator:void 0,customPropertiesGenerator:void 0},lf={...DC,cwd:"${workspaceFolder}",env:{},envFile:null,pauseForSourceMap:!1,sourceMaps:!0,localRoot:null,remoteRoot:null,resolveSourceMapLocations:["**","!**/node_modules/**"],autoAttachChildProcesses:!0,runtimeSourcemapPausePatterns:[],skipFiles:["<node_internals>/**"]},TC={...lf,showAsyncStacks:{onceBreakpointResolved:16},type:"node-terminal",request:"launch",name:"JavaScript Debug Terminal"},TK={...lf,type:"node-terminal",request:"attach",name:TC.name,showAsyncStacks:{onceBreakpointResolved:16},delegateId:-1},$K={...lf,type:"pwa-extensionHost",name:"Debug Extension",request:"launch",args:["--extensionDevelopmentPath=${workspaceFolder}"],outFiles:["${workspaceFolder}/out/**/*.js"],resolveSourceMapLocations:["${workspaceFolder}/**","!**/node_modules/**"],rendererDebugOptions:{},runtimeExecutable:"${execPath}",autoAttachChildProcesses:!1,debugWebviews:!1,debugWebWorkerHost:!1,__sessionId:""},MK={...lf,type:"pwa-node",request:"launch",program:"",cwd:"${workspaceFolder}",stopOnEntry:!1,console:"internalConsole",restart:!1,args:[],runtimeExecutable:"node",runtimeVersion:"default",runtimeArgs:[],profileStartup:!1,attachSimplePort:null,killBehavior:"forceful"},c_={...DC,type:"pwa-chrome",request:"attach",address:"localhost",port:0,disableNetworkCache:!0,pathMapping:{},url:null,restart:!1,urlFilter:"",sourceMapPathOverrides:l_("${webRoot}"),webRoot:"${workspaceFolder}",server:null,browserAttachLocation:"workspace",targetSelection:"automatic",vueComponentPaths:["${workspaceFolder}/**/*.vue","!**/node_modules/**"],perScriptSourcemaps:"auto"},RK={...c_,type:"pwa-msedge",useWebView:!1},$C={...c_,type:"pwa-chrome",request:"launch",cwd:null,file:null,env:{},urlFilter:"*",includeDefaultArgs:!0,includeLaunchArgs:!0,runtimeArgs:null,runtimeExecutable:"*",userDataDir:!0,browserLaunchLocation:"workspace",profileStartup:!1,cleanUp:"wholeBrowser"},kK={...$C,type:"pwa-msedge",useWebView:!1},OK={...lf,type:"pwa-node",attachExistingChildren:!0,address:"localhost",port:9229,restart:!1,request:"attach",continueOnAttach:!1};function l_(t){return{"webpack:///./~/*":`${t}/node_modules/*`,"webpack:////*":"/*","webpack://@?:*/?:*/*":`${t}/*`,"webpack://?:*/*":`${t}/*`,"webpack:///([a-z]):/(.+)":"$1:/$2","meteor://\u{1F4BB}app/*":`${t}/*`}}var MC=t=>{!t.sourceMapPathOverrides&&t.cwd&&(t.sourceMapPathOverrides=l_(t.cwd)),t.resolveSourceMapLocations===void 0&&(t.resolveSourceMapLocations=t.outFiles)};function NK({...t}){return MC(t),t.request==="attach"?{...OK,...t}:{...MK,...t}}function BK(t,e){return t.request==="attach"?{...c_,browserAttachLocation:e,...t}:{...$C,browserLaunchLocation:e,...t}}function FK(t,e){return t.request==="attach"?{...RK,browserAttachLocation:e,...t}:{...kK,browserLaunchLocation:e,...t}}function UK(t){let e={...$K,...t};return e.skipFiles=[...e.skipFiles,"**/node_modules.asar/**","**/bootstrap-fork.js"],e}function jK(t){return MC(t),t.request==="launch"?{...TC,...t}:{...TK,...t}}function Cu(t,e){let r,n=e==="remote"?"ui":"workspace";switch(t.type){case"pwa-node":r=NK(t);break;case"pwa-msedge":r=FK(t,n);break;case"pwa-chrome":r=BK(t,n);break;case"pwa-extensionHost":r=UK(t);break;case"node-terminal":r=jK(t);break;default:throw kh(t,"Unknown config: {value}")}return qK(r)}function WK(t){let e="${workspaceFolder}",r={...t,rootPath:void 0,outFiles:t.outFiles.filter(n=>!n.includes(e)),sourceMapPathOverrides:Oh(t.sourceMapPathOverrides,n=>!n.includes("${workspaceFolder}"))};return"vueComponentPaths"in r&&(r.vueComponentPaths=r.vueComponentPaths.filter(n=>!n.includes(e))),"resolveSourceMapLocations"in r&&(r.resolveSourceMapLocations=r.resolveSourceMapLocations?.filter(n=>!n.includes(e))??null),"cwd"in r&&r.cwd?.includes(e)&&(r.cwd=void 0),"webRoot"in r&&r.webRoot?.includes(e)&&(r.webRoot="/"),r}function qK(t){return t.__workspaceFolder||(t=WK(t)),t=cf(t,"workspaceFolder",t.__workspaceFolder),t=cf(t,"webRoot","webRoot"in t?t.webRoot:t.__workspaceFolder),t}function cf(t,e,r){let n;if(typeof t=="string")n=t.replace(new RegExp(`\\$\\{${e}\\}`,"g"),()=>{if(!r)throw new Error(`Unable to resolve \${${e}} in configuration (${JSON.stringify(e)})`);return r});else if(t instanceof Array)n=t.map(i=>cf(i,e,r));else if(typeof t=="object"&&t){let i={};for(let[o,s]of Object.entries(t))i[cf(o,e,r)]=cf(s,e,r);n=i}else n=t;return n}var Bh="js-debug",ff="1.86.1",VK="ms-vscode",RC=Bh.includes("nightly"),$he=`${VK}.${Bh}`;var NC=require("crypto"),BC=$(Cv()),FC=require("os"),Pe=$(require("path"));var Qi=$(require("fs")),kC=$(require("util"));async function Du({access:t},e){if(!e)return!1;try{return await t(e),!0}catch{return!1}}async function ko({stat:t},e){if(e)try{return await t(e)}catch{return}}function OC(t){return new Promise(e=>{Qi.readFile(t,"utf8",async(r,n)=>{e(r?"":n)})})}var Rhe=kC.promisify(Qi.writeFile);var Lr=Symbol("FsUtils"),Dn=class{constructor(e){this.fs=e}realPath(e){return this.fs.realpath(e)}async exists(e){try{return await this.fs.access(e,Qi.constants.F_OK),!0}catch{return!1}}readFile(e){return this.fs.readFile(e)}},f_=class{constructor(e){this.dap=e}async realPath(){throw new Error("not implemented")}async exists(e){try{let{doesExists:r}=await this.dap.remoteFileExistsRequest({localFilePath:e});return r}catch{return!1}}readFile(){throw new Error("not implemented")}},Fh=class{constructor(e,r,n){this.remoteFilePrefix=e;this.localFsUtils=r;this.remoteFsUtils=n}static create(e,r,n){let i=new Dn(r);return e!==void 0?new this(e.toLowerCase(),i,new f_(n)):i}async exists(e){return this.selectFs(e).exists(e)}async readFile(e){return this.selectFs(e).readFile(e)}async realPath(e){return this.selectFs(e).realPath(e)}selectFs(e){return e.toLowerCase().startsWith(this.remoteFilePrefix)?this.remoteFsUtils:this.localFsUtils}};var GK=process.platform==="win32"?"\\\\.\\pipe\\":(0,FC.tmpdir)(),XK=0,Uh=()=>Pe.join(GK,`node-cdp.${process.pid}-${(0,NC.randomBytes)(4).toString("hex")}-${XK++}.sock`);async function jh(t,e,r){let n;if(process.platform==="win32"){let i=r.WINDIR||"C:\\Windows";n=Pe.join(i,"System32","where.exe")}else n="/usr/bin/which";try{if(await ko(t,n)){let o=(await(0,BC.default)(n,[e],{env:xu(r)})).stdout.split(/\r?\n/);if(process.platform==="win32"){let s=String(r.PATHEXT||".exe").toUpperCase().split(";");for(let a of o){let u=Pe.extname(a).toUpperCase();if(u&&s.includes(u))return a}}else if(o.length>0)return o[0];return}return e}catch{}}async function UC(t,e,r){if(e){if(process.platform==="win32"&&!Pe.extname(e)){let n=r.lookup("PATHEXT");if(n){let i=n.split(";");for(let o of i){let s=e+o;if(await ko(t,s))return s}}}if(await ko(t,e))return e}}var jC=t=>t.includes(`.asar${Pe.sep}`);function Oo(...t){return Pe.posix.isAbsolute(t[0])?et(Pe.posix.join(...t)):Pe.win32.isAbsolute(t[0])?Pe.win32.join(...t):Pe.join(...t)}function Nr(...t){return Pe.posix.isAbsolute(t[0])?Pe.posix.resolve(...t):Pe.win32.isAbsolute(t[0])?Pe.win32.resolve(...t):Pe.resolve(...t)}function df(t,e){return Pe.posix.isAbsolute(t)?Pe.posix.relative(t,e):Pe.win32.isAbsolute(t)?Pe.win32.relative(t,e):Pe.relative(t,e)}var KK=/\/|\\/,pf="file:///",WC=t=>t.startsWith(pf)&&t[pf.length+1]===":",p_=t=>t.split(KK);function d_(t,e=!1){if(!t)return t;if(WC(t)){let r=pf.length;t=pf+t[r].toLowerCase()+t.substr(r+1)}else Wh(t)&&(t=(e?t[0].toUpperCase():t[0].toLowerCase())+t.substr(1));return t}function ft(t,e=!1){if(!t)return t;if(t=d_(t,e),WC(t)){let r=pf.length;t=t.substr(0,r+1)+t.substr(r+1).replace(/\//g,"\\")}else Wh(t)&&(t=t.replace(/\//g,"\\"));return t}function et(t){return t.replace(/\\\//g,"/").replace(/\\/g,"/")}var qC=(t,e)=>{let r=Pe.relative(t,e);return r.length&&!Pe.isAbsolute(r)&&!r.startsWith("..")},VC=(t,e)=>{let r=Pe.relative(t,e);return!Pe.isAbsolute(r)&&!r.startsWith("..")},h_=t=>t.startsWith("\\\\"),Wh=t=>/^[A-Za-z]:/.test(t)||h_(t);var Tu=class{get empty(){return this.patterns.length===0}constructor({rootPath:e,patterns:r}){!e||!r?(this.rootPath="",this.patterns=[]):(this.rootPath=e,this.patterns=r.map(n=>{let i=n.startsWith("!");return{negated:i,pattern:n.slice(i?1:0)}}))}*explode(){for(let e=0;e<this.patterns.length;e++){let{negated:r,pattern:n}=this.patterns[e];if(r)continue;let i=hf.resolve(this.rootPath,n).split(/[\\/]/g),o=i.findIndex(u=>u.includes("*"));if(o===-1){yield{cwd:i.slice(0,-1).join("/"),pattern:i[i.length-1],negations:[]};continue}let s=i.slice(0,o).join("/"),a=[];for(let u=e+1;u<this.patterns.length;u++){let{negated:c,pattern:l}=this.patterns[u];if(c)if(l.startsWith("**"))a.push(et(l));else{let f=hf.relative(s,hf.resolve(this.rootPath,l));f.startsWith("..")||a.push(et(f))}}yield{cwd:s,negations:a,pattern:i.slice(o).join("/")}}}};Tu=W([(0,Ys.injectable)()],Tu);var di=class extends Tu{constructor({rootPath:e,outFiles:r}){super({rootPath:e,patterns:r})}};di=W([(0,Ys.injectable)(),I(0,(0,Ys.inject)(Ee))],di);var Zi=class extends Tu{constructor(e){super({rootPath:e.rootPath,patterns:"vueComponentPaths"in e?e.vueComponentPaths:[]})}};Zi=W([(0,Ys.injectable)(),I(0,(0,Ys.inject)(Ee))],Zi);var XC=require("crypto"),KC=require("os"),zC=$(require("path"));var mf=require("fs"),GC=require("path"),Vh=require("zlib"),JK=(t,e)=>e instanceof Error?{message:e.message,stack:e.stack}:typeof e=="bigint"?e.toString():e,qh=class{constructor(e,r){this.file=e;this.dap=r;try{(0,mf.mkdirSync)((0,GC.dirname)(e),{recursive:!0})}catch{}e.endsWith(".gz")?(this.stream=(0,Vh.createGzip)(),this.stream.pipe((0,mf.createWriteStream)(e))):this.stream=(0,mf.createWriteStream)(e)}async setup(){this.dap?.output({category:"console",output:`Verbose logs are written to:
${this.file}
`})}dispose(){this.stream&&(this.stream.end(),this.stream=void 0)}write(e){this.stream&&(this.stream.write(JSON.stringify(e,JK)+`
`),this.stream.flush?.(Vh.constants.Z_SYNC_FLUSH))}};var YK={runtime:null,"runtime.sourcecreate":null,"runtime.assertion":null,"runtime.launch":null,"runtime.target":null,"runtime.welcome":null,"runtime.exception":null,"runtime.sourcemap":null,"runtime.breakpoints":null,"sourcemap.parsing":null,"perf.function":null,"cdp.send":null,"cdp.receive":null,"dap.send":null,"dap.receive":null,internal:null,proxyActivity:null},Ghe=Object.keys(YK),re=Symbol("ILogger");function QK(t,e=(0,KC.tmpdir)()){if(t===!1)return{stdio:!1,logFile:null};let r={stdio:!0,logFile:zC.join(e,`vscode-debugadapter-${(0,XC.randomBytes)(4).toString("hex")}.json.gz`)};return t===!0?r:{...r,...t}}function JC(t,e){let r=QK(e),n={sinks:[]};return r.logFile&&n.sinks.push(new qh(r.logFile,t)),n}var ZC=",".charCodeAt(0),ZK=";".charCodeAt(0),YC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eD=new Uint8Array(64),tD=new Uint8Array(128);for(let t=0;t<YC.length;t++){let e=YC.charCodeAt(t);eD[t]=e,tD[e]=t}var m_=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString()}}:{decode(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}};function rD(t){let e=new Int32Array(5),r=[],n=0;do{let i=ez(t,n),o=[],s=!0,a=0;e[0]=0;for(let u=n;u<i;u++){let c;u=Hf(t,u,e,0);let l=e[0];l<a&&(s=!1),a=l,QC(t,u,i)?(u=Hf(t,u,e,1),u=Hf(t,u,e,2),u=Hf(t,u,e,3),QC(t,u,i)?(u=Hf(t,u,e,4),c=[l,e[1],e[2],e[3],e[4]]):c=[l,e[1],e[2],e[3]]):c=[l],o.push(c)}s||tz(o),r.push(o),n=i+1}while(n<=t.length);return r}function ez(t,e){let r=t.indexOf(";",e);return r===-1?t.length:r}function Hf(t,e,r,n){let i=0,o=0,s=0;do{let u=t.charCodeAt(e++);s=tD[u],i|=(s&31)<<o,o+=5}while(s&32);let a=i&1;return i>>>=1,a&&(i=-2147483648|-i),r[n]+=i,e}function QC(t,e,r){return e>=r?!1:t.charCodeAt(e)!==ZC}function tz(t){t.sort(rz)}function rz(t,e){return t[0]-e[0]}function Gh(t){let e=new Int32Array(5),r=1024*16,n=r-36,i=new Uint8Array(r),o=i.subarray(0,n),s=0,a="";for(let u=0;u<t.length;u++){let c=t[u];if(u>0&&(s===r&&(a+=m_.decode(i),s=0),i[s++]=ZK),c.length!==0){e[0]=0;for(let l=0;l<c.length;l++){let f=c[l];s>n&&(a+=m_.decode(o),i.copyWithin(0,n,s),s-=n),l>0&&(i[s++]=ZC),s=gf(i,s,e,f,0),f.length!==1&&(s=gf(i,s,e,f,1),s=gf(i,s,e,f,2),s=gf(i,s,e,f,3),f.length!==4&&(s=gf(i,s,e,f,4)))}}}return a+m_.decode(i.subarray(0,s))}function gf(t,e,r,n,i){let o=n[i],s=o-r[i];r[i]=o,s=s<0?-s<<1|1:s<<1;do{let a=s&31;s>>>=5,s>0&&(a|=32),t[e++]=eD[a]}while(s>0);return e}var nz=/^[\w+.-]+:\/\//,iz=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,oz=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i,pt;(function(t){t[t.Empty=1]="Empty",t[t.Hash=2]="Hash",t[t.Query=3]="Query",t[t.RelativePath=4]="RelativePath",t[t.AbsolutePath=5]="AbsolutePath",t[t.SchemeRelative=6]="SchemeRelative",t[t.Absolute=7]="Absolute"})(pt||(pt={}));function sz(t){return nz.test(t)}function az(t){return t.startsWith("//")}function oD(t){return t.startsWith("/")}function uz(t){return t.startsWith("file:")}function nD(t){return/^[.?#]/.test(t)}function Xh(t){let e=iz.exec(t);return sD(e[1],e[2]||"",e[3],e[4]||"",e[5]||"/",e[6]||"",e[7]||"")}function cz(t){let e=oz.exec(t),r=e[2];return sD("file:","",e[1]||"","",oD(r)?r:"/"+r,e[3]||"",e[4]||"")}function sD(t,e,r,n,i,o,s){return{scheme:t,user:e,host:r,port:n,path:i,query:o,hash:s,type:pt.Absolute}}function iD(t){if(az(t)){let r=Xh("http:"+t);return r.scheme="",r.type=pt.SchemeRelative,r}if(oD(t)){let r=Xh("http://foo.com"+t);return r.scheme="",r.host="",r.type=pt.AbsolutePath,r}if(uz(t))return cz(t);if(sz(t))return Xh(t);let e=Xh("http://foo.com/"+t);return e.scheme="",e.host="",e.type=t?t.startsWith("?")?pt.Query:t.startsWith("#")?pt.Hash:pt.RelativePath:pt.Empty,e}function lz(t){if(t.endsWith("/.."))return t;let e=t.lastIndexOf("/");return t.slice(0,e+1)}function fz(t,e){aD(e,e.type),t.path==="/"?t.path=e.path:t.path=lz(e.path)+t.path}function aD(t,e){let r=e<=pt.RelativePath,n=t.path.split("/"),i=1,o=0,s=!1;for(let u=1;u<n.length;u++){let c=n[u];if(!c){s=!0;continue}if(s=!1,c!=="."){if(c===".."){o?(s=!0,o--,i--):r&&(n[i++]=c);continue}n[i++]=c,o++}}let a="";for(let u=1;u<i;u++)a+="/"+n[u];(!a||s&&!a.endsWith("/.."))&&(a+="/"),t.path=a}function uD(t,e){if(!t&&!e)return"";let r=iD(t),n=r.type;if(e&&n!==pt.Absolute){let o=iD(e),s=o.type;switch(n){case pt.Empty:r.hash=o.hash;case pt.Hash:r.query=o.query;case pt.Query:case pt.RelativePath:fz(r,o);case pt.AbsolutePath:r.user=o.user,r.host=o.host,r.port=o.port;case pt.SchemeRelative:r.scheme=o.scheme}s>n&&(n=s)}aD(r,n);let i=r.query+r.hash;switch(n){case pt.Hash:case pt.Query:return i;case pt.RelativePath:{let o=r.path.slice(1);return o?nD(e||t)&&!nD(o)?"./"+o+i:o+i:i||"."}case pt.AbsolutePath:return r.path+i;default:return r.scheme+"//"+r.user+r.host+r.port+r.path+i}}function cD(t,e){return e&&!e.endsWith("/")&&(e+="/"),uD(t,e)}function pz(t){if(!t)return"";let e=t.lastIndexOf("/");return t.slice(0,e+1)}var Tn=0,y_=1,b_=2,v_=3,hD=4,mD=1,HD=2;function dz(t,e){let r=lD(t,0);if(r===t.length)return t;e||(t=t.slice());for(let n=r;n<t.length;n=lD(t,n+1))t[n]=mz(t[n],e);return t}function lD(t,e){for(let r=e;r<t.length;r++)if(!hz(t[r]))return r;return t.length}function hz(t){for(let e=1;e<t.length;e++)if(t[e][Tn]<t[e-1][Tn])return!1;return!0}function mz(t,e){return e||(t=t.slice()),t.sort(Hz)}function Hz(t,e){return t[Tn]-e[Tn]}var Qs=!1;function gz(t,e,r,n){for(;r<=n;){let i=r+(n-r>>1),o=t[i][Tn]-e;if(o===0)return Qs=!0,i;o<0?r=i+1:n=i-1}return Qs=!1,r-1}function __(t,e,r){for(let n=r+1;n<t.length&&t[n][Tn]===e;r=n++);return r}function gD(t,e,r){for(let n=r-1;n>=0&&t[n][Tn]===e;r=n--);return r}function yD(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function bD(t,e,r,n){let{lastKey:i,lastNeedle:o,lastIndex:s}=r,a=0,u=t.length-1;if(n===i){if(e===o)return Qs=s!==-1&&t[s][Tn]===e,s;e>=o?a=s===-1?0:s:u=s}return r.lastKey=n,r.lastNeedle=e,r.lastIndex=gz(t,e,a,u)}function yz(t,e){let r=e.map(vz);for(let n=0;n<t.length;n++){let i=t[n];for(let o=0;o<i.length;o++){let s=i[o];if(s.length===1)continue;let a=s[y_],u=s[b_],c=s[v_],l=r[a],f=l[u]||(l[u]=[]),p=e[a],m=__(f,c,bD(f,c,p,u));bz(f,p.lastIndex=m+1,[c,n,s[Tn]])}}return r}function bz(t,e,r){for(let n=t.length;n>e;n--)t[n]=t[n-1];t[e]=r}function vz(){return{__proto__:null}}var Jh=function(t,e){let r=typeof t=="string"?JSON.parse(t):t;if(!("sections"in r))return new Zs(r,e);let n=[],i=[],o=[],s=[];vD(r,e,n,i,o,s,0,0,1/0,1/0);let a={version:3,file:r.file,names:s,sources:i,sourcesContent:o,mappings:n};return _D(a)};function vD(t,e,r,n,i,o,s,a,u,c){let{sections:l}=t;for(let f=0;f<l.length;f++){let{map:p,offset:m}=l[f],h=u,g=c;if(f+1<l.length){let y=l[f+1].offset;h=Math.min(u,s+y.line),h===u?g=Math.min(c,a+y.column):h<u&&(g=a+y.column)}_z(p,e,r,n,i,o,s+m.line,a+m.column,h,g)}}function _z(t,e,r,n,i,o,s,a,u,c){if("sections"in t)return vD(...arguments);let l=new Zs(t,e),f=n.length,p=o.length,m=eo(l),{resolvedSources:h,sourcesContent:g}=l;if(H_(n,h),H_(o,l.names),g)H_(i,g);else for(let y=0;y<h.length;y++)i.push(null);for(let y=0;y<m.length;y++){let _=s+y;if(_>u)return;let C=wz(r,_),N=y===0?a:0,D=m[y];for(let j=0;j<D.length;j++){let X=D[j],G=N+X[Tn];if(_===u&&G>=c)return;if(X.length===1){C.push([G]);continue}let U=f+X[y_],k=X[b_],M=X[v_];C.push(X.length===4?[G,U,k,M]:[G,U,k,M,p+X[hD]])}}}function H_(t,e){for(let r=0;r<e.length;r++)t.push(e[r])}function wz(t,e){for(let r=t.length;r<=e;r++)t[r]=[];return t[e]}var fD="`line` must be greater than 0 (lines start at line 1)",pD="`column` must be greater than or equal to 0 (columns start at column 0)",$u=-1,No=1,dD,eo,Iz,w_,I_,A_,S_,Az,_D,Sz,Ez,Zs=class{constructor(e,r){let n=typeof e=="string";if(!n&&e._decodedMemo)return e;let i=n?JSON.parse(e):e,{version:o,file:s,names:a,sourceRoot:u,sources:c,sourcesContent:l}=i;this.version=o,this.file=s,this.names=a||[],this.sourceRoot=u,this.sources=c,this.sourcesContent=l;let f=cD(u||"",pz(r));this.resolvedSources=c.map(m=>cD(m||"",f));let{mappings:p}=i;typeof p=="string"?(this._encoded=p,this._decoded=void 0):(this._encoded=void 0,this._decoded=dz(p,n)),this._decodedMemo=yD(),this._bySources=void 0,this._bySourceMemos=void 0}};(()=>{dD=e=>{var r;return(r=e._encoded)!==null&&r!==void 0?r:e._encoded=Gh(e._decoded)},eo=e=>e._decoded||(e._decoded=rD(e._encoded)),Iz=(e,r,n)=>{let i=eo(e);if(r>=i.length)return null;let o=i[r],s=zh(o,e._decodedMemo,r,n,No);return s===-1?null:o[s]},w_=(e,{line:r,column:n,bias:i})=>{if(r--,r<0)throw new Error(fD);if(n<0)throw new Error(pD);let o=eo(e);if(r>=o.length)return Kh(null,null,null,null);let s=o[r],a=zh(s,e._decodedMemo,r,n,i||No);if(a===-1)return Kh(null,null,null,null);let u=s[a];if(u.length===1)return Kh(null,null,null,null);let{names:c,resolvedSources:l}=e;return Kh(l[u[y_]],u[b_]+1,u[v_],u.length===5?c[u[hD]]:null)},A_=(e,{source:r,line:n,column:i,bias:o})=>t(e,r,n,i,o||$u,!0),I_=(e,{source:r,line:n,column:i,bias:o})=>t(e,r,n,i,o||No,!1),S_=(e,r)=>{let n=eo(e),{names:i,resolvedSources:o}=e;for(let s=0;s<n.length;s++){let a=n[s];for(let u=0;u<a.length;u++){let c=a[u],l=s+1,f=c[0],p=null,m=null,h=null,g=null;c.length!==1&&(p=o[c[1]],m=c[2]+1,h=c[3]),c.length===5&&(g=i[c[4]]),r({generatedLine:l,generatedColumn:f,source:p,originalLine:m,originalColumn:h,name:g})}}},Az=(e,r)=>{let{sources:n,resolvedSources:i,sourcesContent:o}=e;if(o==null)return null;let s=n.indexOf(r);return s===-1&&(s=i.indexOf(r)),s===-1?null:o[s]},_D=(e,r)=>{let n=new Zs(g_(e,[]),r);return n._decoded=e.mappings,n},Sz=e=>g_(e,eo(e)),Ez=e=>g_(e,dD(e));function t(e,r,n,i,o,s){if(n--,n<0)throw new Error(fD);if(i<0)throw new Error(pD);let{sources:a,resolvedSources:u}=e,c=a.indexOf(r);if(c===-1&&(c=u.indexOf(r)),c===-1)return s?[]:yf(null,null);let f=(e._bySources||(e._bySources=yz(eo(e),e._bySourceMemos=a.map(yD))))[c][n];if(f==null)return s?[]:yf(null,null);let p=e._bySourceMemos[c];if(s)return Lz(f,p,n,i,o);let m=zh(f,p,n,i,o);if(m===-1)return yf(null,null);let h=f[m];return yf(h[mD]+1,h[HD])}})();function g_(t,e){return{version:t.version,file:t.file,names:t.names,sourceRoot:t.sourceRoot,sources:t.sources,sourcesContent:t.sourcesContent,mappings:e}}function Kh(t,e,r,n){return{source:t,line:e,column:r,name:n}}function yf(t,e){return{line:t,column:e}}function zh(t,e,r,n,i){let o=bD(t,n,e,r);return Qs?o=(i===$u?__:gD)(t,n,o):i===$u&&o++,o===-1||o===t.length?-1:o}function Lz(t,e,r,n,i){let o=zh(t,e,r,n,No);if(!Qs&&i===$u&&o++,o===-1||o===t.length)return[];let s=Qs?n:t[o][Tn];Qs||(o=gD(t,s,o));let a=__(t,s,o),u=[];for(;o<=a;o++){let c=t[o];u.push(yf(c[mD]+1,c[HD]))}return u}var gi=$(ae());var Yh=class extends Error{constructor(r,n,i){super(`Unexpected ${r} response from ${n}: ${i??"<empty body>"}`);this.statusCode=r;this.url=n;this.body=i}},ea=Symbol("IResourceProvider");var Ge=$(ut());var Y=class extends Error{constructor(r){super("__errorMarker"in r?r.error.format:r.format);this._cause="__errorMarker"in r?r.error:r}get cause(){return this._cause}};function wD(t,e){t.output({category:"console",output:e+`
`})}function Ne(t,e=9222){return{__errorMarker:!0,error:{id:e,format:t,showUser:!1}}}function Fe(t,e=9223){return{__errorMarker:!0,error:{id:e,format:t,showUser:!0}}}var E_=()=>Fe(Ge.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvs', 'nvm' or 'fnm' to be installed."),9224),ID=()=>Fe(Ge.t("Attribute 'runtimeVersion' with a flavor/architecture requires 'nvs' to be installed."),9225),AD=()=>Fe(Ge.t("Attribute 'runtimeVersion' requires Node.js version manager 'nvm-windows' or 'nvs'."),9226),L_=(t,e)=>Fe(Ge.t("Node.js version '{0}' not installed using version manager {1}.",t,e),9226),SD=t=>Fe(Ge.t("Cannot launch debug target in terminal ({0}).",t),9227),ED=t=>Fe(Ge.t("Can't load environment variables from file ({0}).",t),9228),LD=t=>Fe(Ge.t("The configured `cwd` {0} does not exist.",t),9245),P_=(t,e)=>Fe(Ge.t(`Can't find Node.js binary "{0}": {1}. Make sure Node.js is installed and in your PATH, or set the "runtimeExecutable" in your launch.json`,t,e),9229),PD=(t,e)=>Fe(Ge.t('The Node version in "{0}" is outdated (version {1}), we require at least Node 8.x.',e,t),9230),x_=t=>Fe(Ge.t('Invalid hit condition "{0}". Expected an expression like "> 42" or "== 2".',t),9231),Mu=()=>Fe(Ge.t("An error occurred taking a profile from the target."),9235),xD=()=>Fe(Ge.t("Please stop the running profile before starting a new one."),9236),CD=t=>Ne(t,9238),Qh=(t,e,r)=>Fe(e==="*"&&!r.length?Ge.t('Unable to find an installation of the browser on your system. Try installing it, or providing an absolute path to the browser in the "runtimeExecutable" in your launch.json.'):Ge.t('Unable to find {0} version {1}. Available auto-discovered versions are: {2}. You can set the "runtimeExecutable" in your launch.json to one of these, or provide an absolute path to the browser executable.',t,e,JSON.stringify([...new Set(r)])),9233),C_=t=>Fe(Ge.t('Unable to launch browser: "{0}"',t.message),9240),bf=t=>Fe(t??Ge.t("Unable to attach to browser"),9242),Zh=()=>Fe(Ge.t('Target page not found. You may need to update your "urlFilter" to match the page you want to debug.'),9241);var DD=()=>Ne(Ge.t("Variables not available in async stacks"),9234),Bo=(t,e)=>Fe(Ge.t("Syntax error setting breakpoint with condition {0} on line {1}: {2}",JSON.stringify(t.condition),t.line,e),9237),D_=()=>Ne(Ge.t("Thread not found"),9244),em=(t,e)=>Fe(Ge.t("Could not read source map for {0}: {1}",t,e)),TD=()=>Fe(Ge.t("UWP webview debugging is not available on your platform.")),$D=()=>Fe(Ge.t("Could not connect to any UWP Webview pipe. Make sure your webview is hosted in debug mode, and that the `pipeName` in your `launch.json` is correct.")),MD=t=>typeof t=="object"&&!!t&&"__errorMarker"in t,RD=(t,e)=>t instanceof Y&&t.cause.id===e,kD=t=>Fe(Ge.t("The browser process exited with code {0} before connecting to the debug server. Make sure the `runtimeExecutable` is configured correctly and that it can run without errors.",t));var OD=new WeakSet;var Pz="Request",xz=t=>t.endsWith("Request"),Pr=Symbol("IDapApi"),ku=Symbol("IRootDapApi"),Ru=class{constructor(e,r){this.transport=e;this.logger=r;this._pendingRequests=new Map;this._requestHandlers=new Map;this._eventListeners=new Map;this.disposables=[];this._initialized=$e();this.closed=!1;this._sequence=1,this.disposables.push(this.transport.messageReceived(n=>this._onMessage(n.message,n.receivedTime))),this._dap=this._createApi()}get initializedBlocker(){return this._initialized.promise}attachTelemetry(e){this.telemetryReporter=e,e.attachDap(this._dap)}dap(){return this._dap}_createApi(){return new Proxy({},{get:(e,r)=>{if(r!=="then")return r==="on"?(n,i)=>(this._requestHandlers.set(n,i),()=>this._requestHandlers.delete(n)):r==="off"?n=>this._requestHandlers.delete(n):n=>{if(xz(r))return this.enqueueRequest(r.slice(0,-Pz.length),n);this._send({seq:0,type:"event",event:r,body:n})}}})}createTestApi(){let e=(i,o)=>{let s=this._eventListeners.get(i);s||(s=new Set,this._eventListeners.set(i,s)),s.add(o)},r=(i,o)=>{let s=this._eventListeners.get(i);s&&s.delete(o)},n=(i,o)=>new Promise(s=>{let a=u=>{o&&!o(u)||(r(i,a),s(u))};e(i,a)});return new Proxy({},{get:(i,o)=>o==="on"?e:o==="off"?r:o==="once"?n:s=>this.enqueueRequest(o,s)})}enqueueRequest(e,r){return new Promise(n=>{let i={seq:0,type:"request",command:e,arguments:r||{}};this._send(i),this._pendingRequests.set(i.seq,n)})}stop(){this.closed=!0,this.transport.close()}_send(e,r){if(this.closed)this.logger.warn("dap.send","Not sending message because the connection has ended",e),r?.();else{e.seq=this._sequence++;let n=e.type!=="event"||!OD.has(e.body);this.transport.send(e,n,r)}}async _onMessage(e,r){if(e.type==="request"){let n={seq:0,type:"response",request_seq:e.seq,command:e.command,success:!0};try{let i=this._requestHandlers.get(e.command);if(!i)console.error(`Unknown request: ${e.command}`);else{let o=await i(e.arguments);if(MD(o))this._send({...n,success:!1,message:o.error.format,body:{error:o.error}});else{let s={...n,body:o};n.command==="initialize"?(this._send(s),this._initialized.resolve(this)):n.command==="disconnect"?this._send({...n,body:o},()=>{this.stop()}):this._send(s)}}this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms)}catch(i){i instanceof Y?this._send({...n,success:!1,body:{error:i.cause}}):(console.error(i),this._send({...n,success:!1,body:{error:{id:9221,format:`Error processing ${e.command}: ${i.stack||i.message}`,showUser:!1,sendTelemetry:!1}}})),this.telemetryReporter?.reportOperation("dapOperation",e.command,r.elapsed().ms,i)}}if(e.type==="event"){let n=this._eventListeners.get(e.event)||new Set;for(let i of n)i(e.body)}if(e.type==="response"){let n=this._pendingRequests.get(e.request_seq);if(!this.logger.assert(n,`Expected callback for request sequence ID ${e.request_seq}`))return;if(this._pendingRequests.delete(e.request_seq),e.success)n(e.body);else{let i=e.body?.error?.format;n(i||e.message||"Unknown error")}}}};var rm=class{constructor(e,r){this.key=e;this.value=r}toString(){return`${this.key}: ${this.value}`}},hi=class{constructor(e,r){this.projection=e;this.initialContents=r;let n=Array.from(r||[]).map(i=>[this.projection(i[0]),new rm(i[0],i[1])]);this.projectionToKeyAndValue=new Map(n)}clear(){this.projectionToKeyAndValue.clear()}delete(e){let r=this.projection(e);return this.projectionToKeyAndValue.delete(r)}forEach(e,r){this.projectionToKeyAndValue.forEach(n=>{e.call(r,n.value,n.key,this)},r)}get(e){let r=this.projection(e),n=this.projectionToKeyAndValue.get(r);return n?n.value:void 0}has(e){return this.projectionToKeyAndValue.has(this.projection(e))}set(e,r){return this.projectionToKeyAndValue.set(this.projection(e),new rm(e,r)),this}get size(){return this.projectionToKeyAndValue.size}*entries(){for(let e of this.projectionToKeyAndValue.values())yield[e.key,e.value]}*keys(){for(let e of this.projectionToKeyAndValue.values())yield e.key}*values(){for(let e of this.projectionToKeyAndValue.values())yield e.value}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return JSON.stringify(Array.from(this.entries()))}toString(){return`MapUsingProjection<${JSON.stringify([...this.entries()])}>`}};var je=Symbol("ISourcePathResolver");var _T=require("dns"),Br=$(require("path")),ro=require("url");var hT=require("url");var fT=require("./vendor/acorn.js"),pT=require("crypto");var ND,Ou,Cz,vf=class{constructor(){this._indexes={__proto__:null},this.array=[]}};ND=(t,e)=>t._indexes[e],Ou=(t,e)=>{let r=ND(t,e);if(r!==void 0)return r;let{array:n,_indexes:i}=t;return i[e]=n.push(e)-1},Cz=t=>{let{array:e,_indexes:r}=t;if(e.length===0)return;let n=e.pop();r[n]=void 0};var jD=0,WD=1,qD=2,VD=3,GD=4,XD=-1,T_,Dz,Tz,$z,$_,nm,Mz,Rz,kz,_f,wf=class{constructor({file:e,sourceRoot:r}={}){this._names=new vf,this._sources=new vf,this._sourcesContent=[],this._mappings=[],this.file=e,this.sourceRoot=r}};T_=(t,e,r,n,i,o,s,a)=>_f(!1,t,e,r,n,i,o,s,a),Tz=(t,e,r,n,i,o,s,a)=>_f(!0,t,e,r,n,i,o,s,a),Dz=(t,e)=>UD(!1,t,e),$z=(t,e)=>UD(!0,t,e),$_=(t,e,r)=>{let{_sources:n,_sourcesContent:i}=t;i[Ou(n,e)]=r},nm=t=>{let{file:e,sourceRoot:r,_mappings:n,_sources:i,_sourcesContent:o,_names:s}=t;return Bz(n),{version:3,file:e||void 0,names:s.array,sourceRoot:r||void 0,sources:i.array,sourcesContent:o,mappings:n}},Mz=t=>{let e=nm(t);return Object.assign(Object.assign({},e),{mappings:Gh(e.mappings)})},kz=t=>{let e=[],{_mappings:r,_sources:n,_names:i}=t;for(let o=0;o<r.length;o++){let s=r[o];for(let a=0;a<s.length;a++){let u=s[a],c={line:o+1,column:u[jD]},l,f,p;u.length!==1&&(l=n.array[u[WD]],f={line:u[qD]+1,column:u[VD]},u.length===5&&(p=i.array[u[GD]])),e.push({generated:c,source:l,original:f,name:p})}}return e},Rz=t=>{let e=new Zs(t),r=new wf({file:e.file,sourceRoot:e.sourceRoot});return FD(r._names,e.names),FD(r._sources,e.sources),r._sourcesContent=e.sourcesContent||e.sources.map(()=>null),r._mappings=eo(e),r},_f=(t,e,r,n,i,o,s,a,u)=>{let{_mappings:c,_sources:l,_sourcesContent:f,_names:p}=e,m=Oz(c,r),h=Nz(m,n);if(!i)return t&&Fz(m,h)?void 0:BD(m,h,[n]);let g=Ou(l,i),y=a?Ou(p,a):XD;if(g===f.length&&(f[g]=u??null),!(t&&Uz(m,h,g,o,s,y)))return BD(m,h,a?[n,g,o,s,y]:[n,g,o,s])};function Oz(t,e){for(let r=t.length;r<=e;r++)t[r]=[];return t[e]}function Nz(t,e){let r=t.length;for(let n=r-1;n>=0;r=n--){let i=t[n];if(e>=i[jD])break}return r}function BD(t,e,r){for(let n=t.length;n>e;n--)t[n]=t[n-1];t[e]=r}function Bz(t){let{length:e}=t,r=e;for(let n=r-1;n>=0&&!(t[n].length>0);r=n,n--);r<e&&(t.length=r)}function FD(t,e){for(let r=0;r<e.length;r++)Ou(t,e[r])}function Fz(t,e){return e===0?!0:t[e-1].length===1}function Uz(t,e,r,n,i,o){if(e===0)return!1;let s=t[e-1];return s.length===1?!1:r===s[WD]&&n===s[qD]&&i===s[VD]&&o===(s.length===5?s[GD]:XD)}function UD(t,e,r){let{generated:n,source:i,original:o,name:s,content:a}=r;if(!i)return _f(t,e,n.line-1,n.column,null,null,null,null,null);let u=i;return _f(t,e,n.line-1,n.column,u,o.line-1,o.column,s,a)}var pm=require("./vendor/acorn.js");var{stringify:Wz}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var im={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},$n=17,qz={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:$n,ClassExpression:$n,FunctionExpression:$n,ObjectExpression:$n,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function Nu(t,e){let{generator:r}=t;if(t.write("("),e!=null&&e.length>0){r[e[0].type](e[0],t);let{length:n}=e;for(let i=1;i<n;i++){let o=e[i];t.write(", "),r[o.type](o,t)}}t.write(")")}function eT(t,e,r,n){let i=t.expressionsPrecedence[e.type];if(i===$n)return!0;let o=t.expressionsPrecedence[r.type];return i!==o?!n&&i===15&&o===14&&r.operator==="**"||i<o:i!==13&&i!==14?!1:e.operator==="**"&&r.operator==="**"?!n:i===13&&o===13&&(e.operator==="??"||r.operator==="??")?!0:n?im[e.operator]<=im[r.operator]:im[e.operator]<im[r.operator]}function om(t,e,r,n){let{generator:i}=t;eT(t,e,r,n)?(t.write("("),i[e.type](e,t),t.write(")")):i[e.type](e,t)}function Vz(t,e,r,n){let i=e.split(`
`),o=i.length-1;if(t.write(i[0].trim()),o>0){t.write(n);for(let s=1;s<o;s++)t.write(r+i[s].trim()+n);t.write(r+i[o].trim())}}function yr(t,e,r,n){let{length:i}=e;for(let o=0;o<i;o++){let s=e[o];t.write(r),s.type[0]==="L"?t.write("// "+s.value.trim()+`
`,s):(t.write("/*"),Vz(t,s.value,r,n),t.write("*/"+n))}}function Gz(t){let e=t;for(;e!=null;){let{type:r}=e;if(r[0]==="C"&&r[1]==="a")return!0;if(r[0]==="M"&&r[1]==="e"&&r[2]==="m")e=e.object;else return!1}}function M_(t,e){let{generator:r}=t,{declarations:n}=e;t.write(e.kind+" ");let{length:i}=n;if(i>0){r.VariableDeclarator(n[0],t);for(let o=1;o<i;o++)t.write(", "),r.VariableDeclarator(n[o],t)}}var KD,zD,JD,YD,QD,ZD,Xz={Program(t,e){let r=e.indent.repeat(e.indentLevel),{lineEnd:n,writeComments:i}=e;i&&t.comments!=null&&yr(e,t.comments,r,n);let o=t.body,{length:s}=o;for(let a=0;a<s;a++){let u=o[a];i&&u.comments!=null&&yr(e,u.comments,r,n),e.write(r),this[u.type](u,e),e.write(n)}i&&t.trailingComments!=null&&yr(e,t.trailingComments,r,n)},BlockStatement:ZD=function(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;e.write("{");let s=t.body;if(s!=null&&s.length>0){e.write(n),i&&t.comments!=null&&yr(e,t.comments,o,n);let{length:a}=s;for(let u=0;u<a;u++){let c=s[u];i&&c.comments!=null&&yr(e,c.comments,o,n),e.write(o),this[c.type](c,e),e.write(n)}e.write(r)}else i&&t.comments!=null&&(e.write(n),yr(e,t.comments,o,n),e.write(r));i&&t.trailingComments!=null&&yr(e,t.trailingComments,o,n),e.write("}"),e.indentLevel--},ClassBody:ZD,StaticBlock(t,e){e.write("static "),this.BlockStatement(t,e)},EmptyStatement(t,e){e.write(";")},ExpressionStatement(t,e){let r=e.expressionsPrecedence[t.expression.type];r===$n||r===3&&t.expression.left.type[0]==="O"?(e.write("("),this[t.expression.type](t.expression,e),e.write(")")):this[t.expression.type](t.expression,e),e.write(";")},IfStatement(t,e){e.write("if ("),this[t.test.type](t.test,e),e.write(") "),this[t.consequent.type](t.consequent,e),t.alternate!=null&&(e.write(" else "),this[t.alternate.type](t.alternate,e))},LabeledStatement(t,e){this[t.label.type](t.label,e),e.write(": "),this[t.body.type](t.body,e)},BreakStatement(t,e){e.write("break"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},ContinueStatement(t,e){e.write("continue"),t.label!=null&&(e.write(" "),this[t.label.type](t.label,e)),e.write(";")},WithStatement(t,e){e.write("with ("),this[t.object.type](t.object,e),e.write(") "),this[t.body.type](t.body,e)},SwitchStatement(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e;e.indentLevel++;let o=r+e.indent,s=o+e.indent;e.write("switch ("),this[t.discriminant.type](t.discriminant,e),e.write(") {"+n);let{cases:a}=t,{length:u}=a;for(let c=0;c<u;c++){let l=a[c];i&&l.comments!=null&&yr(e,l.comments,o,n),l.test?(e.write(o+"case "),this[l.test.type](l.test,e),e.write(":"+n)):e.write(o+"default:"+n);let{consequent:f}=l,{length:p}=f;for(let m=0;m<p;m++){let h=f[m];i&&h.comments!=null&&yr(e,h.comments,s,n),e.write(s),this[h.type](h,e),e.write(n)}}e.indentLevel-=2,e.write(r+"}")},ReturnStatement(t,e){e.write("return"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e)),e.write(";")},ThrowStatement(t,e){e.write("throw "),this[t.argument.type](t.argument,e),e.write(";")},TryStatement(t,e){if(e.write("try "),this[t.block.type](t.block,e),t.handler){let{handler:r}=t;r.param==null?e.write(" catch "):(e.write(" catch ("),this[r.param.type](r.param,e),e.write(") ")),this[r.body.type](r.body,e)}t.finalizer&&(e.write(" finally "),this[t.finalizer.type](t.finalizer,e))},WhileStatement(t,e){e.write("while ("),this[t.test.type](t.test,e),e.write(") "),this[t.body.type](t.body,e)},DoWhileStatement(t,e){e.write("do "),this[t.body.type](t.body,e),e.write(" while ("),this[t.test.type](t.test,e),e.write(");")},ForStatement(t,e){if(e.write("for ("),t.init!=null){let{init:r}=t;r.type[0]==="V"?M_(e,r):this[r.type](r,e)}e.write("; "),t.test&&this[t.test.type](t.test,e),e.write("; "),t.update&&this[t.update.type](t.update,e),e.write(") "),this[t.body.type](t.body,e)},ForInStatement:KD=function(t,e){e.write(`for ${t.await?"await ":""}(`);let{left:r}=t;r.type[0]==="V"?M_(e,r):this[r.type](r,e),e.write(t.type[3]==="I"?" in ":" of "),this[t.right.type](t.right,e),e.write(") "),this[t.body.type](t.body,e)},ForOfStatement:KD,DebuggerStatement(t,e){e.write("debugger;",t)},FunctionDeclaration:zD=function(t,e){e.write((t.async?"async ":"")+(t.generator?"function* ":"function ")+(t.id?t.id.name:""),t),Nu(e,t.params),e.write(" "),this[t.body.type](t.body,e)},FunctionExpression:zD,VariableDeclaration(t,e){M_(e,t),e.write(";")},VariableDeclarator(t,e){this[t.id.type](t.id,e),t.init!=null&&(e.write(" = "),this[t.init.type](t.init,e))},ClassDeclaration(t,e){if(e.write("class "+(t.id?`${t.id.name} `:""),t),t.superClass){e.write("extends ");let{superClass:r}=t,{type:n}=r,i=e.expressionsPrecedence[n];(n[0]!=="C"||n[1]!=="l"||n[5]!=="E")&&(i===$n||i<e.expressionsPrecedence.ClassExpression)?(e.write("("),this[t.superClass.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ")}this.ClassBody(t.body,e)},ImportDeclaration(t,e){e.write("import ");let{specifiers:r}=t,{length:n}=r,i=0;if(n>0){for(;i<n;){i>0&&e.write(", ");let o=r[i],s=o.type[6];if(s==="D")e.write(o.local.name,o),i++;else if(s==="N")e.write("* as "+o.local.name,o),i++;else break}if(i<n){for(e.write("{");;){let o=r[i],{name:s}=o.imported;if(e.write(s,o),s!==o.local.name&&e.write(" as "+o.local.name),++i<n)e.write(", ");else break}e.write("}")}e.write(" from ")}this.Literal(t.source,e),e.write(";")},ImportExpression(t,e){e.write("import("),this[t.source.type](t.source,e),e.write(")")},ExportDefaultDeclaration(t,e){e.write("export default "),this[t.declaration.type](t.declaration,e),e.expressionsPrecedence[t.declaration.type]!=null&&t.declaration.type[0]!=="F"&&e.write(";")},ExportNamedDeclaration(t,e){if(e.write("export "),t.declaration)this[t.declaration.type](t.declaration,e);else{e.write("{");let{specifiers:r}=t,{length:n}=r;if(n>0)for(let i=0;;){let o=r[i],{name:s}=o.local;if(e.write(s,o),s!==o.exported.name&&e.write(" as "+o.exported.name),++i<n)e.write(", ");else break}e.write("}"),t.source&&(e.write(" from "),this.Literal(t.source,e)),e.write(";")}},ExportAllDeclaration(t,e){t.exported!=null?e.write("export * as "+t.exported.name+" from "):e.write("export * from "),this.Literal(t.source,e),e.write(";")},MethodDefinition(t,e){t.static&&e.write("static ");let r=t.kind[0];(r==="g"||r==="s")&&e.write(t.kind+" "),t.value.async&&e.write("async "),t.value.generator&&e.write("*"),t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),Nu(e,t.value.params),e.write(" "),this[t.value.body.type](t.value.body,e)},ClassExpression(t,e){this.ClassDeclaration(t,e)},ArrowFunctionExpression(t,e){e.write(t.async?"async ":"",t);let{params:r}=t;r!=null&&(r.length===1&&r[0].type[0]==="I"?e.write(r[0].name,r[0]):Nu(e,t.params)),e.write(" => "),t.body.type[0]==="O"?(e.write("("),this.ObjectExpression(t.body,e),e.write(")")):this[t.body.type](t.body,e)},ThisExpression(t,e){e.write("this",t)},Super(t,e){e.write("super",t)},RestElement:JD=function(t,e){e.write("..."),this[t.argument.type](t.argument,e)},SpreadElement:JD,YieldExpression(t,e){e.write(t.delegate?"yield*":"yield"),t.argument&&(e.write(" "),this[t.argument.type](t.argument,e))},AwaitExpression(t,e){e.write("await ",t),om(e,t.argument,t)},TemplateLiteral(t,e){let{quasis:r,expressions:n}=t;e.write("`");let{length:i}=n;for(let s=0;s<i;s++){let a=n[s],u=r[s];e.write(u.value.raw,u),e.write("${"),this[a.type](a,e),e.write("}")}let o=r[r.length-1];e.write(o.value.raw,o),e.write("`")},TemplateElement(t,e){e.write(t.value.raw,t)},TaggedTemplateExpression(t,e){om(e,t.tag,t),this[t.quasi.type](t.quasi,e)},ArrayExpression:QD=function(t,e){if(e.write("["),t.elements.length>0){let{elements:r}=t,{length:n}=r;for(let i=0;;){let o=r[i];if(o!=null&&this[o.type](o,e),++i<n)e.write(", ");else{o==null&&e.write(", ");break}}}e.write("]")},ArrayPattern:QD,ObjectExpression(t,e){let r=e.indent.repeat(e.indentLevel++),{lineEnd:n,writeComments:i}=e,o=r+e.indent;if(e.write("{"),t.properties.length>0){e.write(n),i&&t.comments!=null&&yr(e,t.comments,o,n);let s=","+n,{properties:a}=t,{length:u}=a;for(let c=0;;){let l=a[c];if(i&&l.comments!=null&&yr(e,l.comments,o,n),e.write(o),this[l.type](l,e),++c<u)e.write(s);else break}e.write(n),i&&t.trailingComments!=null&&yr(e,t.trailingComments,o,n),e.write(r+"}")}else i?t.comments!=null?(e.write(n),yr(e,t.comments,o,n),t.trailingComments!=null&&yr(e,t.trailingComments,o,n),e.write(r+"}")):t.trailingComments!=null?(e.write(n),yr(e,t.trailingComments,o,n),e.write(r+"}")):e.write("}"):e.write("}");e.indentLevel--},Property(t,e){t.method||t.kind[0]!=="i"?this.MethodDefinition(t,e):(t.shorthand||(t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):this[t.key.type](t.key,e),e.write(": ")),this[t.value.type](t.value,e))},PropertyDefinition(t,e){if(t.static&&e.write("static "),t.computed&&e.write("["),this[t.key.type](t.key,e),t.computed&&e.write("]"),t.value==null){t.key.type[0]!=="F"&&e.write(";");return}e.write(" = "),this[t.value.type](t.value,e),e.write(";")},ObjectPattern(t,e){if(e.write("{"),t.properties.length>0){let{properties:r}=t,{length:n}=r;for(let i=0;this[r[i].type](r[i],e),++i<n;)e.write(", ")}e.write("}")},SequenceExpression(t,e){Nu(e,t.expressions)},UnaryExpression(t,e){if(t.prefix){let{operator:r,argument:n,argument:{type:i}}=t;e.write(r);let o=eT(e,n,t);!o&&(r.length>1||i[0]==="U"&&(i[1]==="n"||i[1]==="p")&&n.prefix&&n.operator[0]===r&&(r==="+"||r==="-"))&&e.write(" "),o?(e.write(r.length>1?" (":"("),this[i](n,e),e.write(")")):this[i](n,e)}else this[t.argument.type](t.argument,e),e.write(t.operator)},UpdateExpression(t,e){t.prefix?(e.write(t.operator),this[t.argument.type](t.argument,e)):(this[t.argument.type](t.argument,e),e.write(t.operator))},AssignmentExpression(t,e){this[t.left.type](t.left,e),e.write(" "+t.operator+" "),this[t.right.type](t.right,e)},AssignmentPattern(t,e){this[t.left.type](t.left,e),e.write(" = "),this[t.right.type](t.right,e)},BinaryExpression:YD=function(t,e){let r=t.operator==="in";r&&e.write("("),om(e,t.left,t,!1),e.write(" "+t.operator+" "),om(e,t.right,t,!0),r&&e.write(")")},LogicalExpression:YD,ConditionalExpression(t,e){let{test:r}=t,n=e.expressionsPrecedence[r.type];n===$n||n<=e.expressionsPrecedence.ConditionalExpression?(e.write("("),this[r.type](r,e),e.write(")")):this[r.type](r,e),e.write(" ? "),this[t.consequent.type](t.consequent,e),e.write(" : "),this[t.alternate.type](t.alternate,e)},NewExpression(t,e){e.write("new ");let r=e.expressionsPrecedence[t.callee.type];r===$n||r<e.expressionsPrecedence.CallExpression||Gz(t.callee)?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),Nu(e,t.arguments)},CallExpression(t,e){let r=e.expressionsPrecedence[t.callee.type];r===$n||r<e.expressionsPrecedence.CallExpression?(e.write("("),this[t.callee.type](t.callee,e),e.write(")")):this[t.callee.type](t.callee,e),t.optional&&e.write("?."),Nu(e,t.arguments)},ChainExpression(t,e){this[t.expression.type](t.expression,e)},MemberExpression(t,e){let r=e.expressionsPrecedence[t.object.type];r===$n||r<e.expressionsPrecedence.MemberExpression?(e.write("("),this[t.object.type](t.object,e),e.write(")")):this[t.object.type](t.object,e),t.computed?(t.optional&&e.write("?."),e.write("["),this[t.property.type](t.property,e),e.write("]")):(t.optional?e.write("?."):e.write("."),this[t.property.type](t.property,e))},MetaProperty(t,e){e.write(t.meta.name+"."+t.property.name,t)},Identifier(t,e){e.write(t.name,t)},PrivateIdentifier(t,e){e.write(`#${t.name}`,t)},Literal(t,e){t.raw!=null?e.write(t.raw,t):t.regex!=null?this.RegExpLiteral(t,e):t.bigint!=null?e.write(t.bigint+"n",t):e.write(Wz(t.value),t)},RegExpLiteral(t,e){let{regex:r}=t;e.write(`/${r.pattern}/${r.flags}`,t)}},Kz={};var R_=class{constructor(e){let r=e??Kz;this.output="",r.output!=null?(this.output=r.output,this.write=this.writeToStream):this.output="",this.generator=r.generator!=null?r.generator:Xz,this.expressionsPrecedence=r.expressionsPrecedence!=null?r.expressionsPrecedence:qz,this.indent=r.indent!=null?r.indent:"  ",this.lineEnd=r.lineEnd!=null?r.lineEnd:`
`,this.indentLevel=r.startingIndentLevel!=null?r.startingIndentLevel:0,this.writeComments=r.comments?r.comments:!1,r.sourceMap!=null&&(this.write=r.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=r.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:r.sourceMap.file||r.sourceMap._file})}write(e){this.output+=e}writeToStream(e){this.output.write(e)}writeAndMap(e,r){this.output+=e,this.map(e,r)}writeToStreamAndMap(e,r){this.output.write(e),this.map(e,r)}map(e,r){if(r!=null){let{type:o}=r;if(o[0]==="L"&&o[2]==="n"){this.column=0,this.line++;return}if(r.loc!=null){let{mapping:s}=this;s.original=r.loc.start,s.name=r.name,this.sourceMap.addMapping(s)}if(o[0]==="T"&&o[8]==="E"||o[0]==="L"&&o[1]==="i"&&typeof r.value=="string"){let{length:s}=e,{column:a,line:u}=this;for(let c=0;c<s;c++)e[c]===`
`?(a=0,u++):a++;this.column=a,this.line=u;return}}let{length:n}=e,{lineEnd:i}=this;n>0&&(this.lineEndSize>0&&(i.length===1?e[n-1]===i:e.endsWith(i))?(this.line+=this.lineEndSize,this.column=0):this.column+=n)}toString(){return this.output}};function to(t,e){let r=new R_(e);return r.generator[t.type](t,r),r.output}var tT=require("./vendor/acorn.js"),um=require("./vendor/acorn-loose.js");var sm={ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],AwaitExpression:["argument"],BinaryExpression:["left","right"],BlockStatement:["body"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExperimentalRestProperty:["argument"],ExperimentalSpreadProperty:["argument"],ExportAllDeclaration:["exported","source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],ForStatement:["init","test","update","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportExpression:["source"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],JSXAttribute:["name","value"],JSXClosingElement:["name"],JSXClosingFragment:[],JSXElement:["openingElement","children","closingElement"],JSXEmptyExpression:[],JSXExpressionContainer:["expression"],JSXFragment:["openingFragment","children","closingFragment"],JSXIdentifier:[],JSXMemberExpression:["object","property"],JSXNamespacedName:["namespace","name"],JSXOpeningElement:["name","attributes"],JSXOpeningFragment:[],JSXSpreadAttribute:["argument"],JSXSpreadChild:["expression"],JSXText:[],LabeledStatement:["label","body"],Literal:[],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],StaticBlock:["body"],Super:[],SwitchCase:["test","consequent"],SwitchStatement:["discriminant","cases"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},zz=Object.keys(sm);for(let t of zz)Object.freeze(sm[t]);Object.freeze(sm);var k_=sm;var O_={ecmaVersion:"latest",locations:!0,allowAwaitOutsideFunction:!0,allowImportExportEverywhere:!0,allowReserved:!0,allowReturnOutsideFunction:!0},Fo=t=>t.start,N_=t=>t.end,rT=(t,e)=>t.slice(Fo(e),N_(e)),mi=(t,e=!1)=>(e?tT.parse:um.parse)(t,O_),cm=t=>{let e=mi(t);for(let r of e.body)r.type==="FunctionDeclaration"&&r.id&&(0,um.isDummy)(r.id)&&(r.id=null);return e.body};function nT(t,e,r){return e.length>1||e[0].type!=="FunctionDeclaration"?sT(t,e,!0,r):iT(t,[{type:"ReturnStatement",argument:{type:"CallExpression",optional:!1,arguments:[{type:"ThisExpression"},...t.map(n=>({type:"Identifier",name:n}))],callee:{type:"MemberExpression",property:{type:"Identifier",name:"call"},computed:!1,optional:!1,object:{type:"FunctionExpression",params:e[0].params,body:e[0].body}}}}],!0,r)}var iT=(t,e,r,n)=>{let i={type:"Identifier",name:"e"},s=n?[{type:"TryStatement",block:{type:"BlockStatement",body:e},handler:{type:"CatchClause",param:i,body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"stack"},computed:!1,optional:!1},operator:"||",right:{type:"MemberExpression",object:i,property:{type:"Identifier",name:"message"},computed:!1,optional:!1}},operator:"||",right:{type:"CallExpression",callee:{type:"Identifier",name:"String"},arguments:[i],optional:!1}}}]}}}]:e;return r?{type:"FunctionExpression",id:{type:"Identifier",name:"_generatedCode"},params:t.map(a=>({type:"Identifier",name:a})),body:{type:"BlockStatement",body:s}}:{type:"ArrowFunctionExpression",params:t.map(a=>({type:"Identifier",name:a})),expression:!1,body:{type:"BlockStatement",body:s}}},Yz=(t,e)=>({type:"CallExpression",arguments:t.map(r=>({type:"Identifier",name:r})),callee:e,optional:!1}),oT=(t,e,r)=>Yz(t,sT(t,e,r,!0));function sT(t,e,r,n){let i=e[e.length-1];if(i.type!=="ReturnStatement"){let o=Qz(i);o&&(e=[...e.slice(0,-1),{type:"ReturnStatement",argument:o}])}return iT(t,e,r,n)}function Qz(t){switch(t.type){case"ExpressionStatement":return t.expression;case"BlockStatement":return{type:"CallExpression",arguments:[],callee:{type:"ArrowFunctionExpression",params:[],expression:!1,body:t},optional:!1};case"ReturnStatement":return t.argument||void 0;default:return}}var Uo=(t,e)=>{am(t,e)},lm=(t,e)=>{let r=am(t,e);return r&&typeof r=="object"?r.replace:t},am=(t,e,r)=>{if(!t)return;let n=e.enter(t,r);if(n===0)return 0;if(n&&typeof n=="object")return n;if(n===1)return;let i=k_[t.type];if(i)for(let o of i){let s=t[o];if(s instanceof Array)for(let[a,u]of s.entries()){let c=am(u,e,t);if(c===0)return 0;c&&typeof c=="object"&&(s[a]=c.replace)}else if(s){let a=am(s,e,t);if(a===0)return 0;a&&typeof a=="object"&&(t[o]=a.replace)}}e.leave?.(t)};var Bu=class t{constructor(e,r,n,i,o){this.original=e;this.metadata=r;this.actualRoot=n;this.actualSources=i;this.hasNames=o;this.sourceActualToOriginal=new Map;this.sourceOriginalToActual=new Map;this.id=t.idCounter++;if(i.length!==e.sources.length)throw new Error("Expected actualSources.length === original.source.length");for(let s=0;s<i.length;s++){let a=i[s],u=e.sources[s];a!==null&&u!==null&&(this.sourceActualToOriginal.set(a,u),this.sourceOriginalToActual.set(u,a))}}static{this.idCounter=0}get sources(){return this.actualSources.slice()}get sourceRoot(){return this.actualRoot}computedSourceUrl(e){return ft(fm(Kt(this.metadata.sourceMapUrl)?this.metadata.compiledPath:this.metadata.sourceMapUrl,this.sourceRoot+e))}originalPositionFor(e){let r=w_(this.original,e);return r.source&&(r.source=this.sourceOriginalToActual.get(r.source)??r.source),r}generatedPositionFor(e){return I_(this.original,{...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}allGeneratedPositionsFor(e){return A_(this.original,{...e,source:this.sourceActualToOriginal.get(e.source)??e.source})}sourceContentFor(e){e=this.sourceActualToOriginal.get(e)??e;let r=this.original.sources.indexOf(e);return r===-1?null:this.original.sourcesContent?.[r]??null}eachMapping(e){S_(this.original,e)}};async function uT(t,e,r,n){let i=pm.Parser.parse(e,{locations:!0,ecmaVersion:"latest"}),o=new wf({file:t}),s=to(i,{sourceMap:{addMapping:a=>T_(o,a.original.line-1,a.original.column,t,a.generated.line-1,a.generated.column)}});return $_(o,t,s),new Bu(new Jh(nm(o)),{sourceMapUrl:n,compiledPath:r},"",[t],!1)}function cT(t){let e;try{e=mi(t)}catch{return}let r=(u,c)=>({type:"ExpressionStatement",expression:{type:"AssignmentExpression",operator:"=",left:u,right:c}}),n=!1,i=!1,o=lm(e,{enter(u,c){switch(u.type){case"ClassDeclaration":return{replace:r(u.id||{type:"Identifier",name:"_default"},{...u,type:"ClassExpression"})};case"FunctionDeclaration":return{replace:r(u.id||{type:"Identifier",name:"_default"},{...u,type:"FunctionExpression"})};case"FunctionExpression":case"ArrowFunctionExpression":case"MethodDefinition":return 1;case"AwaitExpression":n=!0;return;case"ForOfStatement":u.await&&(n=!0);return;case"ReturnStatement":i=!0;return;case"VariableDeclaration":if(!c||!("body"in c)||!(c.body instanceof Array))return;let l=c.body,f=u.declarations.map(p=>({type:"ExpressionStatement",expression:{type:"UnaryExpression",operator:"void",prefix:!0,argument:{type:"AssignmentExpression",operator:"=",left:p.id,right:p.init||{type:"Identifier",name:"undefined"}}}}));l.splice(l.indexOf(u),1,...f)}}});if(!n||i)return;let s=e.body[e.body.length-1];s.type==="ExpressionStatement"&&(e.body[e.body.length-1]={type:"ReturnStatement",argument:s.expression});let a={type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"ArrowFunctionExpression",params:[],generator:!1,expression:!1,async:!0,body:{type:"BlockStatement",body:o.body}},arguments:[],optional:!1}};return to(a)}function If(t){try{let e=(0,pm.parseExpressionAt)(t,0,O_);return e.end<t.length||e.type!=="ObjectExpression"?t:`(${t})`}catch{return t}}function Fu(t){if(!t)return;let e="sourceMappingURL",r=t.length,n=e.length,i=r,o=0;for(;;){if(i=t.lastIndexOf(e,i),i===-1||i<4)return;if(i-=4,t[i]==="/"&&t[i+1]==="/"&&!(t[i+2]!=="#"&&t[i+2]!=="@")&&!(t[i+3]!==" "&&t[i+3]!=="	")&&(o=i+4+n,!(o<r&&t[o]!=="=")))break}let s=t.substring(o+1),a=s.indexOf(`
`);return a!==-1&&(s=s.substring(0,a)),s.trim()}function dm(t,e,r){let n=r.generatedPositionFor({source:t,line:e.lineNumber,column:e.columnNumber-1,bias:No}),i=a=>{if(a.line===null||a.column===null)return 1e11;let u=r.originalPositionFor(a);return u.line!==null?Math.abs(e.lineNumber-u.line):1e11},o=i(n),s=r.allGeneratedPositionsFor({source:t,line:e.lineNumber,column:e.columnNumber-1}).filter(a=>a.line!==null&&a.column!==null).sort((a,u)=>a.line!==u.line?a.line-u.line:a.column-u.column).map(a=>[a,i(a)]);return s.push([n,o]),s.sort(([a,u],[c,l])=>u-l||a.line-c.line||a.column-c.column),s[0][0]}var B_=(t,e)=>!!e&&((e.type==="FunctionExpression"||e.type==="FunctionDeclaration"||e.type==="ArrowFunctionExpression")&&e.params.includes(t)||(e.type==="ForInStatement"||e.type==="ForOfStatement")&&e.left===t||e.type==="VariableDeclarator"&&e.id===t||e.type==="AssignmentPattern"&&e.left===t||e.type==="CatchClause"&&e.param===t||"kind"in e&&e.kind==="init"&&e.value===t||e.type==="RestElement"&&e.argument===t||e.type==="AssignmentPattern"&&e.left===t);function jo(t){try{new Function(t)}catch(e){return e}}function eJ(t,e){let r=mi(t),n,i;return Uo(r,{enter:o=>{let s=o;e>=s.start&&e<s.end&&(o.type==="CallExpression"||o.type==="NewExpression"?i=o:n=o)}}),i||n}var aT=/^[^()]+/g;function lT(t,e){try{let n=eJ(t,e);if(n&&"callee"in n){let i=n.callee;return{text:`${t.slice(i.start,i.end)}(...)`,start:i.start,end:i.end}}else{let i=n;return{text:t.slice(i.start,i.end),start:i.start,end:i.end}}}catch{}aT.lastIndex=e-1;let r=aT.exec(t);if(r)return{text:r[0],start:e,end:e+r[0].length}}var tt=()=>`
//# sourceURL=eval-${(0,pT.randomBytes)(4).toString("hex")}.cdp
`;function ra(t){return tJ(""+t)}function tJ(t){let e=(0,fT.parseExpressionAt)(t,0,{ecmaVersion:"latest",locations:!0});if(e.type!=="FunctionExpression")throw new Error(`Could not find function declaration for:

${t}`);let r=e.params.map(s=>{if(s.type!=="Identifier")throw new Error("Parameter must be identifier");return s.name}),{start:n,end:i}=e.body,o=s=>`
    ${s.map((a,u)=>`let ${r[u]} = ${a}`).join("; ")};
    ${t.slice(n+1,i-1)}
  `;return{expr:(...s)=>`(()=>{${o(s)}})();
${tt()}`,decl:(...s)=>`function(...runtimeArgs){${o(s)};
${tt()}}`}}var ta=class extends Error{constructor(r){super(r.text);this.details=r}},Af=class{constructor(e){this.objectId=e}};function kt(t){let e=(""+t).replace("}",tt()+"}"),r=async({cdp:n,args:i,...o})=>{let s=await n.Runtime.callFunctionOn({functionDeclaration:e,arguments:i.map(a=>a instanceof Af?{objectId:a.objectId}:{value:a}),...o});if(!s)throw new ta({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});if(s.exceptionDetails)throw new ta(s.exceptionDetails);return s.result};return r.source=e,r}var dT=()=>"globalThis.__jsDebugIsReady = true; "+tt();var Sf=new Set(["page","iframe","worker","service_worker"]),Hm=new Set(["page","iframe"]),F_=new Set(["page","iframe"]),rJ=F_,gm=class t{constructor(e,r,n,i,o,s,a,u,c){this._manager=e;this._targetInfo=r;this.launchConfig=s;this.sessionId=a;this.logger=u;this._attached=!1;this._onNameChangedEmitter=new K;this.onNameChanged=this._onNameChangedEmitter.event;this.entryBreakpoint=void 0;this._children=new Map;this.sourcePathResolver=this._manager._sourcePathResolver;this._cdp=n,n.pause(),this.parentTarget=i,this._waitingForDebugger=o,this._updateFromInfo(r),this._ondispose=c}get targetInfo(){return this._targetInfo}get targetId(){return this._targetInfo.targetId}get independentLifeycle(){return F_.has(this.type())}get supplementalConfig(){let e=this.type();return{__browserTargetType:e,__usePerformanceFromParent:e!=="page"}}targetOrigin(){return this._manager._targetOrigin}id(){return this.sessionId}cdp(){return this._cdp}name(){return this._computeName()}fileName(){return this._targetInfo.url}type(){return this._targetInfo.type}afterBind(){return this._cdp.resume(),Promise.resolve()}initialize(){return Promise.resolve()}async runIfWaitingForDebugger(){await Promise.all([this._cdp.Runtime.runIfWaitingForDebugger({}),this._cdp.Runtime.evaluate({expression:dT()})])}parent(){return this.parentTarget&&!Sf.has(this.parentTarget.type())?this.parentTarget.parentTarget:this.parentTarget}children(){let e=[];for(let r of this._children.values())Sf.has(r.type())?e.push(r):e.push(...r.children());return e}canStop(){return rJ.has(this.type())}stop(){if(this._manager.targetList().includes(this))if(this.type()==="service_worker"){if(this._manager.serviceWorkerModel.stopWorker(this.id()),!this.parentTarget)return;this._manager.serviceWorkerModel.stopWorker(this.parentTarget.id())}else this._cdp.Target.closeTarget({targetId:this._targetInfo.targetId})}canRestart(){return F_.has(this.type())}restart(){this._cdp.Page.reload({})}waitingForDebugger(){return this._waitingForDebugger}canAttach(){return!this._attached}async attach(){return this._waitingForDebugger=!1,this._attached=!0,Promise.resolve(this._cdp)}canDetach(){return this._attached}async detach(){this._attached=!1,this._manager._detachedFromTarget(this.sessionId)}executionContextName(e){let r=e.auxData,n=e.name;if(!r)return n;let i=r.frameId,o=i?this._manager.frameModel.frameForId(i):void 0;return o&&r.isDefault&&!o.parentFrame()?"top":o&&r.isDefault?o.displayName():o?`${n}`:n}supportsCustomBreakpoints(){return Hm.has(this.type())}supportsXHRBreakpoints(){return Hm.has(this.type())}scriptUrlToUrl(e){return Wo(this._targetInfo.url,e)||e}_updateFromInfo(e){this._targetInfo={...e,type:this._targetInfo.type},this._onNameChangedEmitter.fire()}setComputeNameFn(e){this._customNameComputeFn=e,this._onNameChangedEmitter.fire()}_computeName(){let e=this._customNameComputeFn?.(this);if(e)return e;if(this.type()==="service_worker"){let i=this._manager.serviceWorkerModel.version(this.id());if(i)return i.label()+" [Service Worker]"}let r=this._targetInfo.title;if(!(r&&this._manager.targetList().some(i=>i instanceof t&&i!==this&&i._targetInfo.title===this._targetInfo.title)))return r;try{let i=new hT.URL(this._targetInfo.url);i.protocol==="data:"?r=" <data>":i?r+=` (${this._targetInfo.url.replace(/^[a-z]+:\/\/|\/$/gi,"")})`:r+=` (${this._targetInfo.url})`}catch{r+=` (${this._targetInfo.url})`}return r}async _detached(){await this._manager.serviceWorkerModel.detached(this._cdp),this._ondispose(this)}};function Ef(t){return t instanceof Array?t:[t]}function mT(t,e,r){let n=0,i=t.length-1;for(;n<=i;){let o=(n+i)/2|0,s=r(t[o],e);if(s<0)n=o+1;else if(s>0)i=o-1;else return o}return n}function HT(t,e){let r=new Map;for(let n of t){let i=e(n),o=r.get(i);o?o.push(n):r.set(i,[n])}return r}function Uu(t){return t.next().value}function Hi(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function ju(t,e){if(t.length<=e)return t;let r=e>>1,n=e-r-1,i=t.codePointAt(t.length-n-1);i&&i>=65536&&(--n,++r);let o=t.codePointAt(r-1);return r>0&&o&&o>=65536&&--r,t.substr(0,r)+"\u2026"+t.substr(t.length-n,n)}var gT="/\\.?*()^${}|[]+",yT=t=>gT.includes(t);function br(t,e){let r=gT.split("").filter(i=>!e||e.indexOf(i)<0).join("").replace(/[\\\]]/g,"\\$&"),n=new RegExp(`[${r}]`,"g");return t.replace(n,"\\$&")}var qo=class{constructor(e){this.source=e;this.lines=[];this.lines.push(0);for(let r=e.indexOf(`
`);r!==-1;r=e.indexOf(`
`,r+1))this.lines.push(r+1)}getLineOffset(e){return e>=this.lines.length?this.source.length:this.lines[e]}convert(e){let r=e.base0;if(r.lineNumber>this.lines.length)return this.source.length;let n=this.lines[r.lineNumber],i=this.lines[r.lineNumber+1]??this.source.length+1;return n+Math.min(i-n-1,r.columnNumber)}};var bm=process.platform!=="win32";function W_(){return bm}function vm(t){return bm?t:t.toLowerCase()}function _m(t,e){return bm?t===e:t.toLowerCase()===e.toLowerCase()}function na(){return W_()?new Map:new hi(vm)}var bT=process.platform==="win32"?process.env.PATHEXT?.toLowerCase().split(";"):void 0,wT=t=>{let e=vm(Br.basename(t));if(bT){for(let r of bT)if(e.endsWith(r))return e.slice(0,-r.length)}return e},iJ=async(t,e)=>{for(;;){if(await e(t))return t;let r=Br.dirname(t);if(r===t)return;t=r}},wm=(t,e,r)=>iJ(e,n=>t.exists(Br.join(n,r))),oJ=new Set(["localhost","127.0.0.1","::1"]);var vT=t=>oJ.has(t.toLowerCase()),sJ=t=>{try{return new ro.URL(t).hostname.replace(/^\[|\]$/g,"")}catch{return t}};var Wu=zs(async t=>{let e=sJ(t);if(vT(e))return!0;try{let r=await _T.promises.lookup(e);return vT(r.address)}catch{return!1}});function Wo(t,e){try{return new ro.URL(e,t).href}catch{}}function fm(t,e){try{return new ro.URL(e),e}catch{}let r;try{r=new ro.URL(t||"")}catch{return e}let n=r.protocol+"//";return r.username&&(n+=r.username+":"+r.password+"@"),n+=r.host,n+=Br.dirname(r.pathname),n[n.length-1]!=="/"&&(n+="/"),n+=e,n}function Im(t){try{return new ro.URL(t),!0}catch{return!1}}function IT(t){return t.replace(/\/$/,"").replace(/\\$/,"")}var aJ=/^https:\/\/([a-z0-9\-]+)\+\.vscode-resource\.vscode-(?:webview|cdn)\.net\/(.+)/i;function st(t){let e=aJ.exec(t);if(e)t=`${e[1]}:///${e[2]}`;else if(t.startsWith("vscode-webview-resource://"))t=new ro.URL(t).pathname.replace(/%2F/gi,"/").replace(/^\/([a-z0-9\-]+)(\/{1,2})/i,(n,i,o)=>o.length===1?`${i}:///`:`${i}://`);else if(!sn(t))return;return t=t.replace("file:///",""),t=decodeURIComponent(t),t.startsWith("/")&&process.platform==="win32"&&t[1]!=="/"&&(t="/"+t),t[0]!=="/"&&!t.match(/^[A-Za-z]:/)&&(t="/"+t),ft(t)}function AT(t){return sn(t)&&(t=t.replace("file:///","\\\\"),t=t.replace(/\//g,"\\"),t=decodeURIComponent(t)),t}function xe(t){return q_==="win32"?"file:///"+Vo(t):"file://"+Vo(t)}function qu(t){return t.startsWith("/")?"file://"+Vo(t):"file:///"+Vo(t)}function ur(t){return Br.posix.isAbsolute(t)||Br.win32.isAbsolute(t)}function Kt(t){return!!t&&t.startsWith("data:")}var U_=(t,e,r)=>{if(!r||t===":"){e.add(t);return}if(t==="/"){e.add(`\\${t}`);return}yT(t)?e.add(`\\${t}`):e.add(t);let n=encodeURIComponent(t);t!=="\\"&&n!==t&&e.add(n)},uJ=t=>{switch(t.size){case 0:return"";case 1:return Uu(t.values());default:let e=[...t];return e.some(r=>r.length>1)?`(?:${e.join("|")})`:`[${e.join("")}]`}},Lf=new Set,j_=(t,e,r,n)=>{let i="";for(let o of t.slice(e,r))bm?U_(o,Lf,n):(U_(o.toLowerCase(),Lf,n),U_(o.toUpperCase(),Lf,n)),i+=uJ(Lf),Lf.clear();return i};function on(t,[e,r]=[0,t.length]){if(r<=e)return t;let n=[],i=j_(t,0,e,!1),o=j_(t,r,t.length,!1),s=t.slice(e,r);for(let a of[decodeURIComponent(s),st(s)]){if(!a)continue;let u=j_(a,0,a.length,!0);n.push(cJ(`${i}${u}${o}`).concat("($|\\?)"))}return n.join("|")}var cJ=t=>t.replace(/^(file:\\\/\\\/\\\/)?([a-z]):/i,(e,r="",n)=>`${r}[${n.toUpperCase()}${n.toLowerCase()}]:`);function sn(t){return t.startsWith("file:///")}var q_=process.platform;function Vo(t){return t=Mn(t),q_==="win32"?(h_(t)&&(t=t.slice(1)),t.split(/[\\//]/g).map((e,r)=>r>0?encodeURIComponent(e):e).join("/")):t.split("/").map(encodeURIComponent).join("/")}function Mn(t){return t&&q_==="win32"&&t[1]===":"?t[0].toUpperCase()+t.substring(1):t}var Go=(t,e=[])=>{let r=t.urlFilter||"file"in t&&t.file||t.url,n=r?fJ(r,...e):void 0;return i=>!i.url.startsWith("devtools://")&&n?.(i.url)!==!1},Vu=t=>e=>e.type==="page"&&t(e);function lJ(t){return!!t&&!Br.isAbsolute(t)&&!!(0,ro.parse)(t).protocol}var fJ=(...t)=>{let e=i=>{i=i.toLowerCase();let o=st(i);o?i=o:lJ(i)&&i.includes("://")&&(i=i.substr(i.indexOf("://")+3)),i.endsWith("/")&&(i=i.substr(0,i.length-1));let s=i.indexOf("#");return s!==-1&&(i=i.slice(0,i[s-1]==="/"?s-1:s)),i},r=t.map(i=>br(e(i),"/*").replace(/(\/\*$)|\*/g,".*")),n=new RegExp("^("+r.join("|")+")$","g");return i=>(n.lastIndex=0,n.test(e(i)))};var yi=Symbol("ISourceMapFactory"),V_=Symbol("IRootSourceMapFactory"),ia=class{constructor(e,r){this.root=e;this.resourceProvider=r}load(e){return this.root.load(this.resourceProvider,e)}guardSourceMapFn(e,r,n){return this.root.guardSourceMapFn(e,r,n)}};ia=W([(0,gi.injectable)(),I(0,(0,gi.inject)(V_)),I(1,(0,gi.inject)(ea))],ia);var Pf=class{constructor(e,r,n){this.pathResolve=e;this.dap=r;this.logger=n;this.hasWarnedAboutMaps=new WeakSet}async load(e,r){let n=await this.parseSourceMap(e,r.sourceMapUrl),i;"sourceRoot"in n&&(i=n.sourceRoot,n.sourceRoot=void 0);let o=!1,s=[];if("sections"in n){s=[];let a=0;for(let u of n.sections){let c=u.map;s.push(...c.sources),c.sources=c.sources.map(()=>`source${a++}.js`),o||=!!c.names?.length}}else"sources"in n&&Array.isArray(n.sources)&&(s=n.sources,n.sources=n.sources.map((a,u)=>`source${u}.js`),o=!!n.names?.length);return new Bu(new Jh(n),r,i??"",s,o)}async parseSourceMap(e,r){let n;try{n=await this.parseSourceMapDirect(e,r)}catch(i){if(n=await this.parsePathMappedSourceMap(e,r),!n)throw i}if("sections"in n){let i=await Promise.all(n.sections.map((o,s)=>"url"in o?this.parseSourceMap(e,o.url).then(a=>({offset:o.offset,map:a})).catch(a=>{this.logger.warn("sourcemap.parsing",`Error parsing nested map ${s}: ${a}`)}):o));n.sections=i.filter(Gt)}return n}async parsePathMappedSourceMap(e,r){if(Kt(r))return;let n=await this.pathResolve.urlToAbsolutePath({url:r});if(n)try{return this.parseSourceMapDirect(e,n)}catch(i){this.logger.info("sourcemap.parsing","Parsing path mapped source map failed.",i)}}guardSourceMapFn(e,r,n){try{return r()}catch(i){if(!/error parsing/i.test(String(i.message)))throw i;if(!this.hasWarnedAboutMaps.has(e)){let o=em(e.metadata.compiledPath,i.message).error;this.dap.output({output:o.format+`
`,category:"stderr"}),this.hasWarnedAboutMaps.add(e)}return n()}}dispose(){}async parseSourceMapDirect(e,r){let n=st(r);n&&(n=this.pathResolve.rebaseRemoteToLocal(n));let i=await e.fetch(n||r);if(!i.ok)throw i.error;let o=i.body;return o.slice(0,3)===")]}"&&(o=o.substring(o.indexOf(`
`))),JSON.parse(o)}};Pf=W([(0,gi.injectable)(),I(0,(0,gi.inject)(je)),I(1,(0,gi.inject)(ku)),I(2,(0,gi.inject)(re))],Pf);var Xo=class extends Pf{constructor(){super(...arguments);this.knownMaps=new hi(r=>r.toLowerCase())}load(r,n){let i=this.knownMaps.get(n.sourceMapUrl);if(!i)return this.loadNewSourceMap(r,n);let o=n.cacheKey,s=i.metadata.cacheKey;return i.reloadIfNoMtime?o&&s&&o===s?(i.reloadIfNoMtime=!1,i.prom):this.loadNewSourceMap(r,n):s&&o&&o!==s?this.loadNewSourceMap(r,n):i.prom}loadNewSourceMap(r,n){let i=super.load(r,n);return this.knownMaps.set(n.sourceMapUrl,{metadata:n,reloadIfNoMtime:!1,prom:i}),i}dispose(){this.knownMaps.clear()}invalidateCache(){for(let r of this.knownMaps.values())r.reloadIfNoMtime=!0}};Xo=W([(0,gi.injectable)()],Xo);var ST=require("path");var Gu=Symbol("ISearchStrategy"),gHe=Symbol("ISearchStrategyFallback"),ET=async(t,e,r)=>{let n,o=`${(0,ST.basename)(t)}.map`;if(e.siblings.includes(o)&&(n=o),n||(typeof r>"u"&&(r=await OC(t)),n=Fu(r)),!(!n||(Kt(n)||(n=Wo(xe(t),n)),!n))&&!(!n.startsWith("data:")&&!n.startsWith("file://")))return{compiledPath:t,sourceMapUrl:n,cacheKey:e.mtime}};var Am=async(t,e,r,n={})=>{let i=Date.now();try{return await r()}finally{t.verbose("perf.function","",{method:e,duration:Date.now()-i,...n})}};var G_=Symbol("InlineSourceMapUrl"),LT=10*1e3,oa=class{constructor(e){e.__workspaceCachePath&&(this.path=Sm.join(e.__workspaceCachePath,"bp-predict.json"))}async load(){if(this.value||!this.path)return this.value;try{this.value=JSON.parse(await xf.promises.readFile(this.path,"utf-8"))}catch{}return this.value}async store(e){this.value=e,this.path&&(await xf.promises.mkdir(Sm.dirname(this.path),{recursive:!0}),await xf.promises.writeFile(this.path,JSON.stringify(e)))}};oa=W([(0,Ot.injectable)(),I(0,(0,Ot.inject)(Ee))],oa);var bi=class{constructor(e,r,n,i,o,s){this.outFiles=e;this.repo=r;this.logger=n;this.sourceMapFactory=i;this.sourcePathResolver=o;this.state=s}async createMapping(e){if(this.outFiles.empty)return new Map;let r=na(),n=await this.state.load();try{let{state:i}=await this.repo.streamChildrenWithSourcemaps({files:this.outFiles,processMap:async o=>{let s=[],a=await this.sourceMapFactory.load(o);for(let u of a.sources){if(u===null)continue;let c=this.sourcePathResolver?await this.sourcePathResolver.urlToAbsolutePath({url:u,map:a}):st(u);c&&s.push({...o,sourceMapUrl:Kt(o.sourceMapUrl)?{[G_]:o.sourceMapUrl}:o.sourceMapUrl,resolvedPath:c,sourceUrl:u})}return{discovered:s,compiledPath:ft(o.compiledPath)}},onProcessedMap:({discovered:o})=>{for(let s of o){let a=r.get(s.resolvedPath);a||(a=new Set,r.set(s.resolvedPath,a)),a.add(s)}},lastState:n,...e});i&&this.state.store(i).catch(o=>this.logger.warn("runtime.exception","Error saving sourcemap cache",{error:o}))}catch(i){this.logger.warn("runtime.exception","Error reading sourcemaps from disk",{error:i})}return r}};bi=W([(0,Ot.injectable)(),I(0,(0,Ot.inject)(di)),I(1,(0,Ot.inject)(Gu)),I(2,(0,Ot.inject)(re)),I(3,(0,Ot.inject)(yi)),I(4,(0,Ot.inject)(je)),I(5,(0,Ot.inject)(oa))],bi);var Xu=class extends bi{async getMetadataForPaths(r){this.sourcePathToCompiled||(this.sourcePathToCompiled=this.createInitialMapping());let n=await this.sourcePathToCompiled;return r.map(i=>n.get(i))}async createInitialMapping(){return Am(this.logger,"BreakpointsPredictor.createInitialMapping",()=>this.createMapping())}};Xu=W([(0,Ot.injectable)()],Xu);var Ku=class extends bi{constructor(){super(...arguments);this.sourcePathToCompiled=new Map}async getMetadataForPaths(r){let n=r.map(s=>this.sourcePathToCompiled.get(s)),i=r.map((s,a)=>a).filter(s=>!n[s]);if(i.length){let s=new Set(i.map(u=>ft(r[u]))),a=this.createMapping({filter:(u,c)=>!c||c.discovered.some(l=>s.has(l.resolvedPath))});for(let u of i)this.sourcePathToCompiled.set(r[u],a),n[u]=a}return await Promise.all(n.map(async(s,a)=>(await s).get(r[a])))}};Ku=W([(0,Ot.injectable)()],Ku);var aa=Symbol("IBreakpointsPredictor"),sa=class{constructor(e,r,n,i){this.bpSearch=e;this.outFiles=r;this.logger=n;this.sourceMapFactory=i;this.predictedLocations=new Map;this.longParseEmitter=new K;this.targetedMode=!1;this.onLongParse=this.longParseEmitter.event}async predictBreakpoints(e){if(!e.source.path||!e.breakpoints?.length)return;let r=await this.getMetadataForPaths([e.source.path]).then(i=>i[0]);if(!r)return;let n=async(i,o,s)=>{let a=typeof s.sourceMapUrl=="string"?s.sourceMapUrl:s.sourceMapUrl.hasOwnProperty(G_)?s.sourceMapUrl[G_]:await xf.promises.readFile(s.compiledPath,"utf8").then(Fu);if(!a)return[];let u=await this.sourceMapFactory.load({...s,sourceMapUrl:a}),c=this.sourceMapFactory.guardSourceMapFn(u,()=>dm(s.sourceUrl,{lineNumber:i,columnNumber:o||1},u),()=>null);if(!c||c.line===null)return[];let l=await this.getMetadataForPaths([s.compiledPath]).then(f=>f[0]);return l?(await Promise.all([...l].map(p=>n(c.line,c.column,p)))).flat():[{absolutePath:s.compiledPath,lineNumber:c.line||1,columnNumber:c.column?c.column+1:1}]};for(let i of e.breakpoints??[]){let o=`${e.source.path}:${i.line}:${i.column||1}`;if(this.predictedLocations.has(o))return;let s=[];this.predictedLocations.set(o,s);for(let a of r)s.push(...await n(i.line,i.column||0,a))}}async getPredictionForSource(e){return this.getMetadataForPaths([e]).then(r=>r[0])}async getMetadataForPaths(e){let r=setTimeout(()=>{this.longParseEmitter.fire(),this.logger.warn("runtime.sourcemap","Long breakpoint predictor runtime",{longPredictionWarning:LT,patterns:[...this.outFiles.explode()].join(", ")})},LT),n=await this.bpSearch.getMetadataForPaths(e);return clearTimeout(r),n}predictedResolvedLocations(e){let r=`${e.absolutePath}:${e.lineNumber}:${e.columnNumber||1}`;return this.predictedLocations.get(r)??[]}};sa=W([(0,Ot.injectable)(),I(0,(0,Ot.inject)(bi)),I(1,(0,Ot.inject)(di)),I(2,(0,Ot.inject)(re)),I(3,(0,Ot.inject)(yi))],sa);var Li=$(ae());var Em=class{constructor(e=!1,r=!1){this.verified=e;this.hit=r}},Lm=class{constructor(){this._statisticsById=new Map}registerBreakpoints(e){e.forEach(r=>{r.id!==void 0&&!this._statisticsById.has(r.id)&&this._statisticsById.set(r.id,new Em(r.verified,!1))})}registerResolvedBreakpoint(e){this.getStatistics(e).verified=!0}registerBreakpointHit(e){this.getStatistics(e).hit=!0}getStatistics(e){let r=this._statisticsById.get(e);if(r!==void 0)return r;{let n=new Em;return this._statisticsById.set(e,n),n}}statistics(){let e=0,r=0,n=0;for(let i of this._statisticsById.values())e++,i.hit&&n++,i.verified&&r++;return{set:e,verified:r,hit:n}}};var rc=$(ae());var t$=require("crypto"),Tf=$(ae());var pJ=0,rt=Symbol("ICdpApi"),ua=class extends Error{constructor(r){super("<<message>>");this.method=r}setCause(r,n){return this.cause={code:r,message:n},this.message=`CDP error ${r} calling method ${this.method}: ${n}`,this.stack=this.stack?.replace("<<message>>",this.message),this}},vt=class{constructor(e,r,n){this.logger=r;this.telemetryReporter=n;this._connectionId=pJ++;this._lastId=1e3;this._disposedSessions=new Map;this._onDisconnectedEmitter=new K;this.waitWrapper=hJ();this.onDisconnected=this._onDisconnectedEmitter.event;this._transport=e,this._transport.onMessage(([i,o])=>this._onMessage(i,o)),this._transport.onEnd(()=>this._onTransportClose()),this._sessions=new Map,this._closed=!1,this._rootSession=new Pm(this,"",this.logger),this._sessions.set("",this._rootSession)}rootSession(){return this._rootSession.cdp()}_send(e,r={},n){let i=++this._lastId,o={id:i,method:e,params:r};n&&(o.sessionId=n);let s=JSON.stringify(o);return this.logger.verbose("cdp.send",void 0,{connectionId:this._connectionId,message:o}),this._transport.send(s),i}_onMessage(e,r){let n=JSON.parse(e),i=n;n.result&&n.result.scriptSource?i={...n,result:{...n.result,scriptSource:"<script source>"}}:n.method==="Debugger.scriptParsed"&&n.params&&Kt(n.params.sourceMapURL)&&(i={...n,params:{...n.params,sourceMapURL:"<data source map url>"}}),this.logger.verbose("cdp.receive",void 0,{connectionId:this._connectionId,message:i});let o=this._sessions.get(n.sessionId||"");if(!o){let u=this._disposedSessions.get(n.sessionId);if(u){let c=(Date.now()-u.getTime())/1e3;this.logger.warn("internal",`Got message for a session disposed ${c} seconds ago`,{sessionId:n.sessionId,disposeOn:u});return}else throw new Error(`Unknown session id: ${n.sessionId} while processing: ${n.method}`)}let s=n.method,a;try{o._onMessage(n)}catch(u){a=u}s&&this.telemetryReporter.reportOperation("cdpOperation",s,r.elapsed().ms,a)}_onTransportClose(){if(!this._closed){this._closed=!0,this._transport.dispose(),this.logger.info("cdp.receive","Connection closed",{connectionId:this._connectionId});for(let e of this._sessions.values())e._onClose();this._sessions.clear(),this._onDisconnectedEmitter.fire()}}close(){this._onTransportClose()}isClosed(){return this._closed}createSession(e){let r=new Pm(this,e,this.logger);return this._sessions.set(e,r),r.cdp()}disposeSession(e){let r=this._sessions.get(e);r&&(r._onClose(),this._disposedSessions.set(r.sessionId(),new Date),this._sessions.delete(r.sessionId()))}},dJ=+process.version.substring(1).split(".")[0]<11,Pm=class{constructor(e,r,n){this.logger=n;this._queue=[];this._prefixListeners=new uf;this._directListeners=new uf;this.paused=!1;this._callbacks=new Map,this._connection=e,this._sessionId=r,this._cdp=this._createApi()}pause(){this.paused=!0}resume(){if(!this.paused)return;this.paused=!1;let e=this._queue;this._queue=[],this.logger.verbose("cdp.receive","Dequeue messages",{message:e});for(let r of e)this._processResponse(r)}cdp(){return this._cdp}sessionId(){return this._sessionId}_createApi(){return new Proxy({},{get:(e,r)=>r==="pause"?()=>this.pause():r==="resume"?()=>this.resume():r==="session"?this:new Proxy({},{get:(n,i)=>{if(i!=="then")return i==="on"?(o,s)=>this.on(`${r}.${o}`,s):o=>this.send(`${r}.${i}`,o)}})})}on(e,r){return this._directListeners.listen(e,r)}onPrefix(e,r){return this._prefixListeners.listen(e,r)}send(e,r={}){return this.sendOrDie(e,r).catch(()=>{})}sendOrDie(e,r={}){if(!this._connection)return Promise.reject(new ua(e).setCause(0,"Connection is closed"));let n=this._connection._send(e,r,this._sessionId);return new Promise((i,o)=>{this._callbacks.set(n,{resolve:i,reject:o,from:new ua(e),method:e})})}_onMessage(e){if(this.paused&&e.id){this._processResponse(e);return}if(this._queue.length>0){this._queue.push(e);return}if(!dJ&&!this.paused){this._processResponse(e);return}this._queue.push(e),this.paused||this._processQueue()}_processQueue(){this._connection?.waitWrapper(()=>{if(this.paused)return;let e=this._queue.shift();e&&(this._processResponse(e),this._queue.length&&this._processQueue())})}_processResponse(e){if(e.id===void 0){let n=e;this._directListeners.emit(n.method,n.params);for(let[i,o]of this._prefixListeners.listeners)n.method.startsWith(i)&&o.fire(n);return}let r=this._callbacks.get(e.id);r&&(this._callbacks.delete(e.id),"error"in e?r.reject(r.from.setCause(e.error.code,e.error.message)):"result"in e&&r.resolve(e.result))}async detach(){if(!this._connection)throw new Error("Session already detached. Most likely the target has been closed.");this._connection._send("Target.detachFromTarget",{},this._sessionId)}isClosed(){return!this._connection}_onClose(){for(let e of this._callbacks.values())e.reject(e.from.setCause(0,"Connection is closed"));this._callbacks.clear(),this._connection=void 0}};function hJ(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let t=!1,e=[],r=()=>{let n=e.shift();if(!n){t=!1;return}setImmediate(r),n()};return n=>{e.push(n),t||(t=!0,setImmediate(r))}}var Qu=$(ae());var VT=$(ut()),GT=require("path"),XT=require("url");var FT=require("path"),UT=require("worker_threads");var ca=$(OT()),J_=require("fs"),Y_=require("worker_threads");var LJ=Buffer.from("(function (exports, require, module, __filename, __dirname) { "),PJ=Buffer.from(`
});`),xJ=Buffer.from("(function (exports, require, module, __filename, __dirname, process, global, Buffer) { return function (exports, require, module, __filename, __dirname) { "),CJ=Buffer.from(`
}.call(this, exports, require, module, __filename, __dirname); });`),DJ=Buffer.from("#!"),TJ=Buffer.from("\r")[0],$J=Buffer.from(`
`)[0],MJ=(t,e)=>t.slice(0,e.length).equals(e),NT=(t,e,r)=>{let n=e.length===64?ca.shaHash:ca.hash;if(n(t)===e)return!0;if(r){if(MJ(t,DJ)){let i=t.indexOf($J);return t[i-1]===TJ&&i--,n(t.slice(i))===e}if(n(Buffer.concat([LJ,t,PJ]))===e)return!0}return n(Buffer.concat([xJ,t,CJ]))===e},BT=t=>t instanceof Buffer?t:Buffer.from(t,"utf-8");async function RJ(t){switch(t.type){case 0:try{let e=await J_.promises.readFile(t.file);return{id:t.id,hash:t.mode===0?(0,ca.hash)(e):(0,ca.shaHash)(e)}}catch{return{id:t.id}}case 1:try{return{id:t.id,hash:(0,ca.hash)(BT(t.data))}}catch{return{id:t.id}}case 2:try{let e=await J_.promises.readFile(t.file);return{id:t.id,matches:NT(e,t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}case 3:try{return{id:t.id,matches:NT(BT(t.data),t.expected,t.checkNode)}}catch{return{id:t.id,matches:!1}}}}function kJ(t){t.on("message",e=>{RJ(e).then(r=>t.postMessage(r))})}Y_.parentPort&&kJ(Y_.parentPort);var Rm=class{constructor(e=3,r=(0,FT.join)(__dirname,"hash.js")){this.maxFailures=e;this.hasherScriptPath=r;this.idCounter=0;this.failureCount=0;this.deferredMap=new Map;this.deferCleanup=PC(3e4,()=>this.cleanup())}async hashBytes(e,r){return(await this.send({type:1,data:r,mode:e,id:this.idCounter++})).hash}async hashFile(e,r){return(await this.send({type:0,file:r,mode:e,id:this.idCounter++})).hash}async verifyBytes(e,r,n){return(await this.send({type:3,data:e,id:this.idCounter++,expected:r,checkNode:n})).matches}async verifyFile(e,r,n){return(await this.send({type:2,file:e,id:this.idCounter++,expected:r,checkNode:n})).matches}dispose(){this.cleanup(),this.deferCleanup.clear()}send(e){let r=this.getProcess();if(!r)throw new Error("hash.js process unexpectedly exited");this.deferCleanup();let n=$e();return this.deferredMap.set(e.id,{deferred:n,request:e}),r.postMessage(e),n.promise}cleanup(){this.instance&&(this.instance.removeAllListeners("exit"),this.instance.terminate(),this.instance=void 0,this.failureCount=0)}getProcess(){if(this.instance)return this.instance;if(this.failureCount>this.maxFailures)return;let e=this.instance=new UT.Worker(this.hasherScriptPath);return e.setMaxListeners(1/0),e.on("message",r=>{let n=r,i=this.deferredMap.get(n.id);i&&(i.deferred.resolve(n),this.deferredMap.delete(n.id))}),e.on("exit",()=>{this.instance=void 0,this.failureCount++;let r=this.getProcess();if(r){this.deferCleanup();for(let{request:n}of this.deferredMap.values())r.postMessage(n)}else{for(let{deferred:n}of this.deferredMap.values())n.reject(new Error("hash.js process unexpectedly exited"));this.deferredMap.clear(),this.deferCleanup.clear()}}),e}};var WT=require("fs"),jT=new Rm;async function qT(t,e,r){return!t||jC(t)?void 0:e?(typeof r=="string"?await jT.verifyBytes(r,e,!0):await jT.verifyFile(t,e,!0))?t:void 0:await new Dn(WT.promises).exists(t)?t:void 0}var la=class{constructor(e,r,n,i,o,s,a,u){this.url=r;this.inlineScriptOffset=s;this.runtimeScriptOffset=a;this.contentHash=u;this._scripts=[];this.sourceReference=e.getSourceReference(r),this._contentGetter=ye(i),this._container=e,this.absolutePath=n||"",this._fqname=this._fullyQualifiedName(),this._name=this._humanName(),this.setSourceMapUrl(o),this._existingAbsolutePath=this.checkContentHash(u)}checkContentHash(e){return qT(this.absolutePath,this.inlineScriptOffset||this.runtimeScriptOffset?void 0:e,this._container._fileContentOverridesForTest.get(this.absolutePath))}offsetScriptToSource(e){return this.runtimeScriptOffset?{...e,lineNumber:Math.max(1,e.lineNumber-this.runtimeScriptOffset.lineOffset),columnNumber:e.columnNumber-this.runtimeScriptOffset.columnOffset}:e}offsetSourceToScript(e){return this.runtimeScriptOffset?{...e,lineNumber:e.lineNumber+this.runtimeScriptOffset.lineOffset,columnNumber:e.columnNumber+this.runtimeScriptOffset.columnOffset}:e}setSourceMapUrl(e){if(!e){this.sourceMap=void 0;return}this.sourceMap={type:0,sourceByUrl:new Map,value:$e(),metadata:e}}addScript(e){this._scripts.push(e)}filterScripts(e){this._scripts=this._scripts.filter(e)}get scripts(){return this._scripts}get getSuggestedMimeType(){if(this.url.endsWith(".wat"))return"text/wat";if(!/\.[^/]+$/.test(this.url)||this.url.includes("?"))return"text/javascript"}async content(){let e=await this._contentGetter();return this.inlineScriptOffset?.lineOffset&&(e=`
`.repeat(this.inlineScriptOffset.lineOffset)+e),e}async prettyPrint(){if(!this._container)return;if(fa(this)&&this.sourceMap.metadata.sourceMapUrl.endsWith("-pretty.map")){let u=this.sourceMap.value.settledValue;return u&&{map:u,source:[...this.sourceMap.sourceByUrl.values()][0]}}let e=await this.content();if(!e)return;let r=this.url||`eval://${this.sourceReference}.js`,n=r+"-pretty.map",o=r.split(/[\/\\]/).pop()+"-pretty.js",s=await uT(o,e,r,n);if(!s)return;this.setSourceMapUrl({compiledPath:this.absolutePath,sourceMapUrl:""}),this.sourceMap.value.resolve(s);let a=this;return await this._container._addSourceMapSources(a,s),{map:s,source:[...a.sourceMap.sourceByUrl.values()][0]}}async toDap(){return this.toDapShallow()}async toDapShallow(){let e=await this._existingAbsolutePath,r={name:this._name,path:this._fqname,sourceReference:this.sourceReference,presentationHint:this.blackboxed()?"deemphasize":void 0,origin:this.blackboxed()?VT.t("Skipped by skipFiles"):void 0};return e&&(r.sourceReference=0,r.path=e),r}existingAbsolutePath(){return this._existingAbsolutePath}async prettyName(){let e=await this._existingAbsolutePath;return e||this._fqname}_humanName(){if(ur(this._fqname)){for(let e of this._container.rootPaths)if(qC(e,this._fqname))return et((0,GT.relative)(e,this._fqname))}return this._fqname}_fullyQualifiedName(){if(!this.url)return"<eval>/VM"+this.sourceReference;if(this.url.endsWith(".repl"))return"repl";if(this.absolutePath.startsWith("<node_internals>"))return this.absolutePath;if(ur(this.url))return this.url;let e=st(this.url);if(e)return e;let r=this.url;try{let n=[],i=new XT.URL(this.url);if(i.protocol==="data:")return"<eval>/VM"+this.sourceReference;i.hostname&&n.push(i.hostname),i.port&&n.push("\uA789"+i.port),i.pathname&&n.push(/^\/[a-z]:/.test(i.pathname)?i.pathname.slice(1):i.pathname);let o=i.searchParams?.toString();o&&n.push("?"+o),r=n.join("")}catch{}return r.endsWith("/")&&(r+="(index)"),this.inlineScriptOffset&&(r+=`\uA789${this.inlineScriptOffset.lineOffset+1}:${this.inlineScriptOffset.columnOffset+1}`),r}blackboxed(){return this._container.isSourceSkipped(this.url)}};var Df;(n=>{async function t(i){return i.value.promise}n.waitForValue=t;function e(i,o){return i.type===0&&i.value.settledValue?Promise.resolve(i.value.settledValue):Promise.race([t(i),we(o)])}n.waitForValueWithTimeout=e;async function r(i){return await t(i),i.sourceByUrl}n.waitForSources=r})(Df||={});var dt=class extends la{constructor(){super(...arguments);this.compiledToSourceUrl=new Map}},km=class extends la{constructor(r,n,i){super(r,n.url,i,()=>Promise.resolve("Binary content not shown, see the decompiled WAT file"),void 0,void 0,void 0,void 0);this.event=n;this.sourceMap={type:1,value:$e(),sourceByUrl:new Map}}checkContentHash(){return Promise.resolve(void 0)}offsetScriptToSource(r){return r}offsetSourceToScript(r){return r}},vr=t=>!!t&&t instanceof la&&!!t.sourceMap,fa=t=>vr(t)&&t.sourceMap.type===0,pa=t=>vr(t)&&t.sourceMap.type===1,Q_=t=>!!t&&typeof t.getDisassembly=="function";function KT(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r+=e.lineOffset,r<=1&&(n+=e.columnOffset)),{...t,lineNumber:r,columnNumber:n}}function zT(t,e){if(!e)return t;let{lineNumber:r,columnNumber:n}=t;return e&&(r=Math.max(1,r-e.lineOffset),r<=1&&(n=Math.max(1,n-e.columnOffset))),{...t,lineNumber:r,columnNumber:n}}var JT=t=>({lineNumber:t.lineNumber+1,columnNumber:t.columnNumber+1}),no=t=>({lineNumber:t.lineNumber-1,columnNumber:t.columnNumber-1});var at=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return this}get base1(){return new _t(this.lineNumber+1,this.columnNumber+1)}get base01(){return new kn(this.lineNumber,this.columnNumber+1)}compare(e){let r=e.base0;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},_t=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new at(this.lineNumber-1,this.columnNumber-1)}get base1(){return this}get base01(){return new kn(this.lineNumber-1,this.columnNumber)}compare(e){let r=e.base1;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber||0}},kn=class{constructor(e,r){this.lineNumber=e;this.columnNumber=r}get base0(){return new at(this.lineNumber-1,this.columnNumber)}get base1(){return new _t(this.lineNumber,this.columnNumber+1)}get base01(){return this}compare(e){let r=e.base01;return this.lineNumber-r.lineNumber||this.columnNumber-r.columnNumber}},On=class t{constructor(e,r){this.begin=e;this.end=r}static{this.ZERO=new t(new at(0,0),new at(0,0))}static{this.INFINITE=new t(new at(0,0),new at(1/0,1/0))}static simplify(e){if(e.length===0)return[];let r=e.slice().sort((o,s)=>o.begin.compare(s.begin)),n=[],i=r[0];for(let o=1;o<r.length;o++){let s=r[o];i.end.compare(s.begin)>=0?i=new t(i.begin,s.end):(n.push(i),i=s)}return n.push(i),n}contains(e){return e.compare(this.begin)>=0&&e.compare(this.end)<=0}toString(){let e=this.begin.base0,r=this.end.base0;return`Range[${e.lineNumber}:${e.columnNumber} -> ${r.lineNumber}:${r.columnNumber}]`}};var YT=require("worker_threads");var zu=require("worker_threads");function Z_(t,e){let r=mi(t),n=(a,{loc:u}=a,{loc:c}=a)=>{if(!u||!c)throw new Error("should include locations");let l=e(u,c);if(o.length>0){let f=o[o.length-1];f.scopeNode.children??=[],f.scopeNode.children.push(l)}o.push({node:a,scopeNode:l})},i=new Set,o=[],s;return Uo(r,{enter:a=>{switch(a.type){case"FunctionDeclaration":case"ArrowFunctionExpression":n(a,a.params[0]||a.body,a.body),i.add(a.body);break;case"Program":n(a),s=o[0].scopeNode;break;case"ForStatement":case"ForOfStatement":case"ForInStatement":n(a),i.add(a.body);break;case"BlockStatement":i.has(a)||n(a);break}},leave:a=>{a===o[o.length-1].node&&o.pop()}}),s}zu.isMainThread||zu.parentPort?.postMessage(Z_(zu.workerData,(t,e)=>({start:t.start,end:e.end})));var Ju=class t{constructor(e){this.range=e}static hydrate(e){let r=new t(new On(new at(e.start.line,e.start.column),new at(e.end.line,e.end.column)));return r.children=e.children?.map(t.hydrate),r}search(e){if(this.range.contains(e)){if(!this.children)return this;for(let r of this.children){let n=r.search(e);if(n)return n}return this}}findDeepest(e,r){if(this.range.contains(e)){if(this.children)for(let n of this.children){let i=n.findDeepest(e,r);if(i!==void 0)return i}return r(this)}}filterHoist(e){if(this.children)for(let r=0;r<this.children.length;r++){let n=this.children[r];if(n.filterHoist(e),!e(n)){let i=n.children||[];this.children.splice(r,1,...i),r--}}}forEach(e){e(this),this.children?.forEach(r=>r.forEach(e))}toJSON(){return{range:this.range,children:this.children}}},OJ=1024*512;function QT(t){return t.length<OJ?NJ(t):new Promise((e,r)=>{let n=new YT.Worker(`${__dirname}/renameWorker.js`,{workerData:t});n.on("message",i=>e(Ju.hydrate(i))),n.on("error",r),n.on("exit",()=>r("rename worker exited"))})}function NJ(t){return Z_(t,(e,r)=>new Ju(new On(new kn(e.start.line,e.start.column).base0,new kn(r.end.line,r.end.column).base0)))}var ZT=/[$a-z_][$0-9A-Z_$]*/iy,Ko=Symbol("IRenameProvider"),Yu=class{constructor(e,r,n){this.logger=e;this.sourceMapFactory=r;this.launchConfig=n;this.renames=new Map}provideOnStackframe(e){if(!this.launchConfig.sourceMapRenames)return an.None;let r=e.uiLocation();return r===void 0?an.None:"then"in r?r.then(n=>this.provideForSource(n?.source)):this.provideForSource(r?.source)}provideForSource(e){if(!this.launchConfig.sourceMapRenames||!(e instanceof dt))return an.None;let r=Uu(e.compiledToSourceUrl.keys());if(!r)throw new Error("unreachable");if(!fa(r))return an.None;let n=this.renames.get(r.url);if(n)return n;let i=this.sourceMapFactory.load(r.sourceMap.metadata).then(async o=>{if(!o?.hasNames)return an.None;let s=await r.content();return s?await this.createFromSourceMap(o,s):an.None}).catch(()=>an.None);return this.renames.set(r.url,i),i}async createFromSourceMap(e,r){let n=Date.now(),i;try{i=await QT(r)}catch(a){return this.logger.info("runtime",`Error parsing content for source tree: ${a}}`,{url:e.metadata.compiledPath}),an.None}let o=new qo(r);e.eachMapping(a=>{if(!a.name)return;let u=new kn(a.generatedLine,a.generatedColumn).base0,c=o.convert(u);ZT.lastIndex=c;let l=ZT.exec(r);if(!l)return;let f=l[0];if(f===a.name)return;let p=i.search(u)||i;p.data??=[],p.data.some(m=>m.compiled==f)||p.data.push({compiled:f,original:a.name})}),i.filterHoist(a=>!!a.data);let s=Date.now();return this.logger.info("runtime",`renames calculated in ${s-n}ms`,{url:e.metadata.compiledPath}),new an(i)}};Yu=W([(0,Qu.injectable)(),I(0,(0,Qu.inject)(re)),I(1,(0,Qu.inject)(yi)),I(2,(0,Qu.inject)(Ee))],Yu);var an=class t{constructor(e){this.renames=e}static{this.None=new t(new Ju(On.ZERO))}getOriginalName(e,r){return this.getClosestRename(r,n=>n.compiled===e)?.original}getCompiledName(e,r){return this.getClosestRename(r,n=>n.original===e)?.compiled}getClosestRename(e,r){return this.renames.findDeepest(e,n=>n.data?.find(r))}};var io="$returnValue",BJ="__js_debug_hoisted_",e$=()=>BJ+(0,t$.randomBytes)(8).toString("hex"),un=Symbol("IEvaluator"),Zu=class{constructor(e,r){this.cdp=e;this.renameProvider=r}get hasReturnValue(){return!!this.returnValue}setReturnedValue(e){this.returnValue=e}prepare(e,{isInternalScript:r,hoist:n,renames:i}={}){r!==!1&&(e+=tt());let o=new Map;o.set(io,e$());for(let u of n??[])o.set(u,e$());let{transformed:s,hoisted:a}=this.replaceVariableInExpression(e,o,i);return a.size?{canEvaluateDirectly:!1,invoke:(u,c={})=>Promise.all([...o].map(([l,f])=>this.hoistValue(l===io?this.returnValue:c[l],f))).then(()=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s}))}:{canEvaluateDirectly:!0,invoke:u=>this.cdp.Debugger.evaluateOnCallFrame({...u,expression:s})}}async evaluate(e,r){if(!("callFrameId"in e))return this.cdp.Runtime.evaluate(e);let n=r;if(r?.stackFrame){let i=await this.renameProvider.provideOnStackframe(r.stackFrame);n={...n,renames:{mapping:i,position:r.stackFrame.rawPosition}}}return this.prepare(e.expression,n).invoke(e)}async hoistValue(e,r){let n=e?.objectId,i=`setTimeout(() => { delete globalThis.${r} }, 0)`;n?await this.cdp.Runtime.callFunctionOn({objectId:n,functionDeclaration:`function() { globalThis.${r} = this; ${i}; ${tt()} }`}):await this.cdp.Runtime.evaluate({expression:`globalThis.${r} = ${JSON.stringify(e?.value)};${i};`+tt()})}replaceVariableInExpression(e,r,n){let i=new Set,o=!1,s=(f,p)=>({type:"ConditionalExpression",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:f}},operator:"!==",right:{type:"Literal",value:"undefined"}},consequent:{type:"Identifier",name:f},alternate:p}),a=[],u=mi(e),c=lm(u,{enter(f,p){let m=f;if(f.type!=="Identifier"||e[m.start-1]===".")return;let h=r.get(f.name);if(h)return i.add(f.name),o=!0,{replace:B_(f,p)?{type:"Identifier",name:h}:s(h,FJ)};let g=n?.mapping.getCompiledName(f.name,n.position);if(g)return o=!0,{replace:B_(f,p)?{type:"Identifier",name:g}:s(g,f)}},leave:()=>{a.pop()}});if(!o)return{hoisted:i,transformed:e};let l=u.body[u.body.length-1].end;return{hoisted:i,transformed:to(c)+e.slice(l)}}};Zu=W([(0,Tf.injectable)(),I(0,(0,Tf.inject)(rt)),I(1,(0,Tf.inject)(Ko))],Zu);var FJ={type:"Identifier",name:"undefined"};var Om=class t{static parse(e,r,n,i){r=ew(r,n);let o=r&&jo(r);if(o)throw new Y(Bo(e,o.message));let{canEvaluateDirectly:s,invoke:a}=i.prepare(r);return new t(s?r:a)}constructor(e){typeof e=="function"?this.invoke=e:this.breakCondition=e}async shouldStayPaused(e){return this.invoke?(await this.invoke({callFrameId:e.callFrames[0].callFrameId,returnByValue:!0}))?.result.value===!0:Promise.resolve(!0)}},ew=(t,e)=>`(()=>{try{return ${t};}catch(e){console.error(\`Breakpoint condition error: \${e.message||e}\`);return ${!!e}}})()`;var UJ=/^(>|>=|={1,3}|<|<=|%)?\s*([0-9]+)$/,ec=class t{constructor(e){this.predicate=e;this.hits=0;this.breakCondition=void 0}shouldStayPaused(){return Promise.resolve(this.predicate(++this.hits))}static parse(e){let r=UJ.exec(e);if(!r)throw new Y(x_(e));let[,n="=",i]=r;return new t(jJ(e,n,Number(i)))}},jJ=(t,e,r)=>{switch(e){case"=":case"==":case"===":return n=>n===r;case">":return n=>n>r;case">=":return n=>n>=r;case"<":return n=>n<r;case"<=":return n=>n<=r;case"%":return n=>n%r===0;default:throw new Y(x_(t))}};var r$=require("crypto"),Bm=$(ae());var Nm=class{constructor(e){this.invoke=e;this.breakCondition=void 0}async shouldStayPaused(e){return await this.invoke({callFrameId:e.callFrames[0].callFrameId}),!1}};var da=class{constructor(e,r){this.breakCondition=r;let n=r&&jo(r);if(n)throw new Y(Bo(e,n.message))}shouldStayPaused(){return Promise.resolve(!0)}};var zo=class{constructor(e){this.evaluator=e}compile(e,r){let n=this.logMessageToExpression(r),i=jo(n);if(i)throw new Y(Bo(e,i.message));let{canEvaluateDirectly:o,invoke:s}=this.evaluator.prepare(n);return o?new da(e,this.logMessageToExpression(r)):new Nm(s)}serializeLogStatements(e){return oT([],e,!1)}logMessageToExpression(e){let r=c=>c.replace(/%/g,"%%"),n=[],i=[],o=0;for(;;){let c=e.indexOf("{",o);if(c===-1){n.push(r(e.slice(o)));break}n.push(r(e.slice(o,c)));let[l]=cm(e.slice(c));if(o=c+l.end,o-1===c+1||e[o-1]!=="}"){n.push(r(e.slice(c,o)));continue}if(l.type!=="BlockStatement")break;i.push(to(this.serializeLogStatements(l.body))),n.push("%O")}let a=`console.log(${[JSON.stringify(n.join("")),...i].join(", ")}), false`,u=(0,r$.createHash)("sha1").update(a).digest("hex").slice(0,7);return a+`
//# sourceURL=logpoint-${u}.cdp`}};zo=W([(0,Bm.injectable)(),I(0,(0,Bm.inject)(un))],zo);var WJ=new da({line:0},void 0),dye=new da({line:0},"false"),Fm=Symbol("IBreakpointConditionFactory"),tc=class{constructor(e,r,n){this.logPointCompiler=e;this.evaluator=r;this.breakOnError=n.__breakOnConditionalError}getConditionFor(e){return e.condition?Om.parse(e,e.condition,this.breakOnError,this.evaluator):e.logMessage?this.logPointCompiler.compile(e,e.logMessage):e.hitCondition?ec.parse(e.hitCondition):WJ}};tc=W([(0,rc.injectable)(),I(0,(0,rc.inject)(zo)),I(1,(0,rc.inject)(un)),I(2,(0,rc.inject)(Ee))],tc);var Wm=require("path");var Um=(t,e)=>t.lineNumber===e.lineNumber&&t.columnNumber===e.columnNumber;var jm=t=>!("location"in t),n$=t=>"location"in t,qJ=(t,e)=>t.url&&e===t.url||t.urlRegex&&new RegExp(t.urlRegex).test(e),nc=class{constructor(e,r,n){this._manager=e;this._source=r;this._originalPosition=n;this.isEnabled=!1;this.setInCdpScriptIds=new Set;this.cdpScriptIds=this.setInCdpScriptIds;this.cdpBreakpoints=[];this._cdpIds=new Set}get enabled(){return this.isEnabled}get cdpIds(){return this._cdpIds}get source(){return this._source}get originalPosition(){return this._originalPosition}async updateSourceLocation(e,r,n){this._source=r,this._originalPosition=n;let i=[];for(let o of this.cdpBreakpoints)o.state===1&&i.push(this.updateUiLocations(e,o.cdpId,o.locations));await Promise.all(i)}async refreshUiLocations(e){await Promise.all(this.cdpBreakpoints.filter(r=>r.state===1).map(r=>this.updateUiLocations(e,r.cdpId,r.locations)))}async enable(e){if(this.isEnabled)return;this.isEnabled=!0;let r=[this._setPredicted(e)],n=this._manager._sourceContainer.source(this.source);if((!n||!(n instanceof dt))&&r.push(this._setByPath(e,n?.offsetSourceToScript(this.originalPosition)||this.originalPosition)),await Promise.all(r),n&&this.isEnabled){let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n});await Promise.all(i.map(o=>this._setByUiLocation(e,n.offsetSourceToScript(o))))}}async updateUiLocations(e,r,n){this.updateExistingCdpRef(r,a=>({...a,locations:n}));let i=(await Promise.all(n.map(a=>e.rawLocationToUiLocation(e.rawLocation(a))))).find(a=>!!a);if(!i)return;let o=this._manager._sourceContainer.source(this.source);if(!o)return;let s=await this._manager._sourceContainer.currentSiblingUiLocations(i);this.updateExistingCdpRef(r,a=>{let u=s.filter(c=>c.source===o);return{...a,locations:n,uiLocations:u.length?u:s}})}compare(e){let r=this.originalPosition,n=e.originalPosition;return r.lineNumber!==n.lineNumber?r.lineNumber-n.lineNumber:r.columnNumber-n.columnNumber}async disable(){if(!this.isEnabled)return;this.isEnabled=!1;let e=this.cdpBreakpoints.map(r=>this.removeCdpBreakpoint(r));await Promise.all(e)}async updateForNewLocations(e,r){let n=this._manager._sourceContainer.source(this.source);if(!n)return[];let i=await this._manager._sourceContainer.currentSiblingUiLocations({lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber,source:n},await r.source);if(!i.length)return[];let o=[];for(let s of i)o.push(this._setForSpecific(e,r,n.offsetSourceToScript(s)));for(let s of this.cdpBreakpoints){if(!jm(s.args)||!qJ(s.args,r.url))continue;let a=s.args;i.some(u=>u.columnNumber-1===a.columnNumber&&u.lineNumber-1===a.lineNumber)||(this._manager.logger.verbose("runtime.sourcemap","Adjusted breakpoint due to overlaid sourcemap",{url:n.url}),o.push(this.removeCdpBreakpoint(s)))}return await Promise.all(o),i}executionContextWasCleared(){this.updateCdpRefs(e=>e.filter(r=>jm(r.args)))}hasResolvedAt(e,r){let{lineNumber:n,columnNumber:i}=r.base0;return this.cdpBreakpoints.some(o=>o.state===1&&o.locations.some(s=>s.scriptId===e&&s.lineNumber===n&&(s.columnNumber===void 0||s.columnNumber===i)))}getBreakCondition(){}updateExistingCdpRef(e,r){this.updateCdpRefs(n=>n.map(i=>i.state!==1||i.cdpId!==e?i:r(i)))}updateCdpRefs(e){let r=this;r.cdpBreakpoints=e(this.cdpBreakpoints);let n=new Set;this.setInCdpScriptIds.clear();for(let i of this.cdpBreakpoints)if(i.state===1){n.add(i.cdpId);for(let o of i.locations)this.setInCdpScriptIds.add(o.scriptId)}this._cdpIds=n}async _setPredicted(e){if(!this.source.path||!this._manager._breakpointsPredictor)return;let r=this._manager._breakpointsPredictor.predictedResolvedLocations({absolutePath:this.source.path,lineNumber:this.originalPosition.lineNumber,columnNumber:this.originalPosition.columnNumber}),n=[];for(let i of r){let o=this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(i.absolutePath);o!==void 0&&(typeof o=="string"?n.push(this._setByUrlRegexp(e,o,i)):n.push(o.then(s=>s?this._setByUrlRegexp(e,s,i):void 0)))}await Promise.all(n)}async _setByUiLocation(e,r){await Promise.all(r.source.scripts.map(n=>this._setForSpecific(e,n,r)))}async _setByPath(e,r){let n=this._manager._sourceContainer.source({path:this.source.path});if(!(n instanceof dt&&[...n.compiledToSourceUrl.keys()].some(o=>o.absolutePath===this.source.path)))if(this.source.path){let i=await this._manager._sourceContainer.sourcePathResolver.absolutePathToUrlRegexp(this.source.path);if(!i)return;await this._setByUrlRegexp(e,i,r)}else{let o=this._manager._sourceContainer.source(this.source)?.url;if(!o)return;await this._setByUrl(e,o,r),this.source.path!==o&&this.source.path!==void 0&&await this._setByUrl(e,xe(this.source.path),r)}}hasSetOnLocation(e,r){return this.cdpBreakpoints.find(n=>e.scriptId&&n$(n.args)&&n.args.location.scriptId===e.scriptId&&Um(n.args.location,r)||e.url&&!e.hasSourceURL&&jm(n.args)&&(n.args.urlRegex?new RegExp(n.args.urlRegex).test(e.url):e.url===n.args.url)&&Um(n.args,r))}hasSetOnLocationByUrl(e,r,n){return this.cdpBreakpoints.find(i=>{if(jm(i.args))return Um(i.args,n)?e==="url"?i.args.urlRegex?new RegExp(i.args.urlRegex).test(r):i.args.url===r:e==="re"&&i.args.urlRegex===r:!1;let o=this._manager._sourceContainer.getScriptById(i.args.location.scriptId);if(o)return Um(i.args.location,n)&&e==="re"?new RegExp(r).test(o.url):o.url===r})}async _setForSpecific(e,r,n){return r.url&&!r.hasSourceURL&&(!r.embedderName||r.embedderName===r.url)?this._setByUrl(e,r.url,n):this._setByScriptId(e,r,n)}async _setByUrl(e,r,n){n=no(n);let i=this.hasSetOnLocationByUrl("url",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{url:r,condition:this.getBreakCondition(),...n})}async _setByUrlRegexp(e,r,n){n=no(n);let i=this.hasSetOnLocationByUrl("re",r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{urlRegex:r,condition:this.getBreakCondition(),...n})}async _setByScriptId(e,r,n){n=no(n);let i=this.hasSetOnLocation(r,n);if(i){i.state===0&&await i.done;return}return this._setAny(e,{condition:this.getBreakCondition(),location:{scriptId:r.scriptId,...n}})}async _setAny(e,r){if(!this.isEnabled)return;let n={state:0,args:r,deadletter:!1};n.done=(async()=>{let i=n$(r)?await e.cdp().Debugger.setBreakpoint(r):await e.cdp().Debugger.setBreakpointByUrl(r);if(!i)return;if(n.deadletter){await e.cdp().Debugger.removeBreakpoint({breakpointId:i.breakpointId});return}let o="actualLocation"in i?[i.actualLocation]:i.locations;this._manager._resolvedBreakpoints.set(i.breakpointId,this);let s={state:1,cdpId:i.breakpointId,args:r,locations:o,uiLocations:[]};return this.updateCdpRefs(a=>a.map(u=>u===n?s:u)),await this.updateUiLocations(e,i.breakpointId,o),s})(),this.updateCdpRefs(i=>[...i,n]),await n.done}async removeCdpBreakpoint(e){this.updateCdpRefs(r=>r.filter(n=>n!==e)),e.state===0?(e.deadletter=!0,await e.done):(await this._manager._thread?.cdp().Debugger.removeBreakpoint({breakpointId:e.cdpId}),this._manager._resolvedBreakpoints.delete(e.cdpId))}};var _i=class t extends nc{constructor(r,n,i){super(r,n,{lineNumber:1,columnNumber:1});this.mode=i}static getModeKeyForSource(r,n){return r===1?(0,Wm.basename)(n,(0,Wm.extname)(n)||void 0):n}_setPredicted(){return Promise.resolve()}_setByPath(r,n){if(!this.source.path)return Promise.resolve();let i=t.getModeKeyForSource(this.mode,this.source.path);return this.mode===1?super._setByUrlRegexp(r,br(i),n):super._setByPath(r,n)}};var o$=$(ut());var cn=class extends nc{constructor(r,n,i,o,s){super(r,i,{lineNumber:o.line,columnNumber:o.column||1});this.dapId=n;this.dapParams=o;this.condition=s;this.completedSet=$e()}equivalentTo(r){return r.dapParams.column===this.dapParams.column&&r.dapParams.line===this.dapParams.line&&r.dapParams.hitCondition===this.dapParams.hitCondition&&r.dapParams.condition===this.dapParams.condition&&r.dapParams.logMessage===this.dapParams.logMessage}untilSetCompleted(){return this.completedSet.promise}markSetCompleted(){this.completedSet.resolve()}testHitCondition(r){return this.condition.shouldStayPaused(r)}async toDap(){let r=this.enabled&&this.getResolvedUiLocation();return r?{id:this.dapId,verified:!0,source:await r.source.toDap(),line:r.lineNumber,column:r.columnNumber}:{id:this.dapId,verified:!1,message:o$.t("Unbound breakpoint")}}diagnosticDump(){return{source:this.source,params:this.dapParams,cdp:this.cdpBreakpoints}}getBreakCondition(){return this.condition.breakCondition}updateCdpRefs(r){let n=this.getResolvedUiLocation();super.updateCdpRefs(r),this.getResolvedUiLocation()!==n&&this.notifyResolved()}getResolvedUiLocation(){for(let r of this.cdpBreakpoints)if(r.state===1&&r.uiLocations.length)return r.uiLocations[0]}async notifyResolved(){await this._manager.notifyBreakpointChange(this,this.completedSet.hasSettled())}};var qm=class extends cn{constructor(e,r,n,i){super(e,r,n,i,new ec(()=>!1))}getResolvedUiLocation(){}};var dM=$(Of());var Nf=class extends _i{constructor(r,n){super(r,{path:n},1);this.pattern=n}async enable(r){if(this.isEnabled)return;this.isEnabled=!0;let n=(0,dM.makeRe)(et(this.pattern),{contains:!0,lookbehinds:!1});await this._setAny(r,{urlRegex:n.source.replace(/([a-z]):/i,(i,o)=>`[${o.toLowerCase()}${o.toUpperCase()}]:`),lineNumber:0,columnNumber:0})}};var ac=$(ae());var sc={dispose:()=>{}},Be=class{constructor(e){this.disposed=!1;this.items=[];e&&(this.items=e.slice())}get isDisposed(){return this.disposed}callback(...e){for(let r of e)this.push({dispose:r})}push(...e){return this.disposed?(e.forEach(r=>r.dispose()),e[0]):(this.items.push(...e),e[0])}disposeObject(e){this.items=this.items.filter(r=>r!==e),e.dispose()}dispose(){let e=Promise.all(this.items.map(r=>r.dispose()));return this.items=[],this.disposed=!0,e}};var Ym=Symbol("IExperimentationService");var zt=Symbol("ITelemetryReporter");var s7=/\/node_modules\/|^node\:/,a7=2,hM=5e3,u7=hM/2,it=class{constructor(e,r,n){this.telemetry=r;this.experimentation=n;this.disposable=new Be;this.hadBreakpoint=!1;this.didVerifyBreakpoint=!1;this.hadNonModuleSourcemap=!1;this.startedAt=Date.now();this.disposable.push(it.didVerifyEmitter.event(()=>{this.didVerifyBreakpoint=!0})),it.consecutiveQualifyingSessions>=a7&&this.disposable.push(tL(async()=>{this.currentlyQualifying&&await this.experimentation.getTreatment("diagnosticPrompt",!0)&&(r.report("diagnosticPrompt",{event:"suggested"}),it.didSuggest=!0,e.suggestDiagnosticTool({}))},hM))}get currentlyQualifying(){return this.hadBreakpoint&&!this.didVerifyBreakpoint&&this.hadNonModuleSourcemap}notifyHadBreakpoint(){this.hadBreakpoint=!0}notifyVerifiedBreakpoint(){this.didVerifyBreakpoint||(it.didVerifyEmitter.fire(),it.didSuggest&&(it.didSuggest=!1,this.telemetry.report("diagnosticPrompt",{event:"resolved"})))}attach(e){if(!this.hadNonModuleSourcemap){let r=this.disposable.push(e.Debugger.on("scriptParsed",n=>{n.sourceMapURL&&!s7.test(n.url)&&(this.hadNonModuleSourcemap=!0,this.disposable.disposeObject(r))}))}}dispose(){this.currentlyQualifying&&Date.now()-u7>this.startedAt?it.consecutiveQualifyingSessions++:it.consecutiveQualifyingSessions=0,this.disposable.dispose()}};it.consecutiveQualifyingSessions=0,it.didVerifyEmitter=new K,it.didSuggest=!1,it=W([(0,ac.injectable)(),I(0,(0,ac.inject)(ku)),I(1,(0,ac.inject)(zt)),I(2,(0,ac.inject)(Ym))],it);var fn=$(ae()),DM=$(vM());var lc=Symbol("IContainer"),Ai=Symbol("StoragePath"),Dr=Symbol("IInitializeParams"),Yo=Symbol("VSCodeApi"),fc=Symbol("IsVSCode"),_M=Symbol("ExtensionContext"),bw=Symbol("ProcessEnv"),Bf=Symbol("execa"),qe=Symbol("FS"),Ha="ExtensionLocation",ga=Symbol("IBrowserFinder"),ybe=Symbol("DwarfDebugging"),eH=Symbol("SessionSubStates"),yw=new WeakMap,mt=(t,e)=>{if(!(typeof e=="object"&&e&&"dispose"in e))return e;let r=e,n=yw.get(t.container);return n?n.push(r):yw.set(t.container,[r]),e},tH=t=>{yw.get(t)?.forEach(e=>e.dispose())},bbe=Symbol("IExtensionContribution");var nH=$(ae());var wM=$(require("fs")),rH=$(require("path")),IM=t=>{let e={};p(e);function r(h,g){return t({category:"telemetry",output:h,data:g})}let n=h=>r("js-debug/dap/operation",{...e,...h}),i=h=>r("js-debug/cdp/operation",{...e,...h}),o=h=>r("js-debug/error",{...e,...h}),s=h=>{e.browser=(h.targetProject||h.targetProject)+"/"+h.targetVersion,r("js-debug/browserVersion",{...e,...h})},a=h=>r("js-debug/breakpointStats",{...e,...h}),u=h=>r("js-debug/statistics",{...e,...h}),c=h=>{e.nodeVersion=h.version,r("js-debug/nodeRuntime",{...e,...h})},l=h=>{r("js-debug/launch",{...e,...h,parameters:JSON.stringify(h.parameters)})},f=h=>{r("js-debug/diagnosticPrompt",{...e,...h})};function p(h){try{let g=rH.resolve(rH.dirname(__filename),"..","..",".gitcommit");h.jsDebugCommitId=wM.readFileSync(g,"utf8")}catch{}}return{breakpointStats:a,statistics:u,browserVersion:s,cdpOperation:i,dapOperation:n,error:o,launch:l,nodeRuntime:c,diagnosticPrompt:f,setGlobalMetric:(h,g)=>{e[h]=g}}};var Ff=class{constructor(e=!0){this.isVSCode=e;this.measurements=Object.create(null)}add(e,r,n){let i=this.measurements[e];i||(i=this.measurements[e]={times:[],errors:[]}),i.times.push(r),n&&i.errors.push(n)}flush(){let e={errors:[]};for(let r in this.measurements){let{times:n,errors:i}=this.measurements[r],o={operation:r,totalTime:0,max:0,avg:0,stddev:0,count:n.length,failed:i.length};for(let s of n)o.totalTime+=s,o.max=Math.max(o.max,s);o.avg=o.totalTime/o.count;for(let s of n)o.stddev+=(s-o.avg)**2;o.stddev=Math.sqrt(o.stddev/(n.length-1)),e[o.operation]=o,e[`!${o.operation}.errors`]=i,this.isVSCode||(e[`${o.operation}.errors`]=i)}return this.measurements=Object.create(null),e}};var Si=class{constructor(e=!0){this.isVsCode=e;this.target=[];this.flushEmitter=new K;this.loggers=IM(e=>this.pushOutput(e));this.batchFlushTimeout={};this.batchers={dapOperation:new Ff(this.isVsCode),cdpOperation:new Ff(this.isVsCode)};this.onFlush=this.flushEmitter.event;this.setGlobalMetric=this.loggers.setGlobalMetric}report(e,...r){let n=this.loggers[e];n(...r)}reportOperation(e,r,n,i){this.batchers[e].add(r,n,i),this.batchFlushTimeout[e]===void 0&&(this.batchFlushTimeout[e]=setTimeout(()=>{this.report(e,this.batchers[e].flush()),this.batchFlushTimeout[e]=void 0},Si.batchFlushInterval))}attachDap(e){this.target instanceof Array&&this.target.forEach(r=>e.output(r)),this.target=e}flush(){this.flushEmitter.fire();let e=Object.entries(this.batchFlushTimeout);for(let[r,n]of e){let i=this.batchers[r].flush();i.length&&this.report(r,i),this.batchFlushTimeout[r]=void 0,clearTimeout(n)}}dispose(){for(let e of Object.values(this.batchFlushTimeout))e&&clearTimeout(e)}pushOutput(e){e.data=vw(e.data),this.target instanceof Array?this.target.push(e):this.target.output(e)}};Si.batchFlushInterval=5e3,Si=W([(0,nH.injectable)(),I(0,(0,nH.inject)(fc))],Si);var vw=t=>typeof t=="number"?Number(t.toFixed(1)):typeof t!="object"||!t?t:t instanceof Error?_w(t):t instanceof Array?t.map(vw):Yi(t,vw),AM=/(?:[A-z]:)?(?:[\\/][^:]*)+[\\/]([^:]*:)/g;function _w(t){let e=String(t.message),r=String(t.name);AM.lastIndex=0;let n=typeof t.stack=="string"?t.stack.replace(AM,"$1"):void 0;return{error:{message:e,name:r,stack:n}}}var EM=require("crypto"),Ei=$(ae());var Uf=Symbol("IDwarfModuleProvider");var oH=Symbol("IWasmSymbolProvider"),Aw=Symbol("IWasmWorkerFactory"),pc=class{constructor(e,r){this.dwarf=e;this.launchConfig=r;this.cdpCounter=0;this.cdp=new Map;this.prompt=ye(()=>this.dwarf.prompt())}async spawn(e){if(!this.launchConfig.enableDWARF)return null;this.worker??=this.dwarf.load().then(i=>{if(!i)return null;let o=i.spawn({getWasmGlobal:(s,a)=>this.loadWasmValue(`globals[${s}]`,a),getWasmLocal:(s,a)=>this.loadWasmValue(`locals[${s}]`,a),getWasmOp:(s,a)=>this.loadWasmValue(`stack[${s}]`,a),getWasmLinearMemory:(s,a,u)=>this.loadWasmValue(`[].slice.call(new Uint8Array(memories[0].buffer, ${+s}, ${+a}))`,u).then(c=>new Uint8Array(c).buffer)});return o.rpc.sendMessage("hello",[],!1),o});let r=await this.worker;if(!r)return null;let n=this.cdpCounter++;return this.cdp.set(n,e),{rpc:r.rpc,getStopId:i=>`${n}:${i}`,dispose:()=>(this.cdp.delete(n),r.dispose())}}async dispose(){await this.worker?.then(e=>e?.dispose()),this.worker=Promise.resolve(null)}async loadWasmValue(e,r){let n=r,i=n.indexOf(":"),o=n.substring(0,i),s=n.substring(i+1),a=await this.cdp.get(+o)?.Debugger.evaluateOnCallFrame({callFrameId:s,expression:e+tt(),silent:!0,returnByValue:!0,throwOnSideEffect:!0});if(!a||a.exceptionDetails)throw new Error(`evaluate failed: ${a?.exceptionDetails?.text||"unknown"}`);return a.result.value}};pc=W([(0,Ei.injectable)(),I(0,(0,Ei.inject)(Uf)),I(1,(0,Ei.inject)(Ee))],pc);var dc=class{constructor(e,r,n,i){this.dwarf=e;this.cdp=r;this.logger=n;this.launchConfig=i;this.worker=ye(()=>this.dwarf.spawn(this.cdp))}async loadWasmSymbols(e){if(!this.launchConfig.enableDWARF)return this.defaultSymbols(e);let r=await this.worker();if(!r){let a=this.defaultSymbols(e);return a.onDidDisassemble=this.dwarf.prompt,a}let{rpc:n}=r,i=(0,EM.randomUUID)(),o=e.debugSymbols?.externalURL,s;try{s=await n.sendMessage("addRawModule",i,o,{url:e.url,code:!o&&e.url.startsWith("wasm://")?await this.getBytecode(e.scriptId):void 0})}catch{return this.defaultSymbols(e)}return!(s instanceof Array)||s.length===0?(n.sendMessage("removeRawModule",i),this.defaultSymbols(e)):(this.logger.info("sourcemap.parsing","parsed files from wasm",{files:s}),new ww(e,this.cdp,i,r,s))}async dispose(){await this.worker.value?.then(e=>e?.dispose())}defaultSymbols(e){return new iH(e,this.cdp,[])}async getBytecode(e){let n=(await this.cdp.Debugger.getScriptSource({scriptId:e}))?.bytecode;return n?Buffer.from(n,"base64").buffer:void 0}};dc=W([(0,Ei.injectable)(),I(0,(0,Ei.inject)(Aw)),I(1,(0,Ei.inject)(rt)),I(2,(0,Ei.inject)(re)),I(3,(0,Ei.inject)(Ee))],dc);var iH=class{constructor(e,r,n){this.event=e;this.cdp=r;this.doDisassemble=ye(async()=>{let e=[],r;for await(let n of this.getDisassembledStream()){e=e.concat(n.lines);let i;if(r){let o=new Uint32Array(r.length+n.lines.length);i=r.length,o.set(r),r=o}else r=new Uint32Array(n.lines.length),i=0;for(let o=0;o<n.lines.length;o++)r[i+o]=n.bytecodeOffsets[o]}return r??=new Uint32Array(0),{lines:e,byteOffsetsOfLines:r}});n.push(this.decompiledUrl=e.url.replace(".wasm",".wat")),this.files=n}async getDisassembly(){let{lines:e}=await this.doDisassemble();return this.onDidDisassemble?.(),e.join(`
`)}originalPositionFor(e){return this.disassembledPositionFor(e)}async disassembledPositionFor(e){let{byteOffsetsOfLines:r}=await this.doDisassemble(),n=mT(r,e.base0.columnNumber,(i,o)=>i-o);if(n!==r.length)return{url:this.decompiledUrl,position:new at(n,0)}}async compiledPositionFor(e,r){if(e!==this.decompiledUrl)return[];let{byteOffsetsOfLines:n}=await this.doDisassemble(),{lineNumber:i}=r.base0;if(i>=n.length)return[];let o=n[r.base0.lineNumber];return[new at(0,o)]}dispose(){}async*getDisassembledStream(){let{scriptId:e}=this.event,r=await this.cdp.Debugger.disassembleWasmModule({scriptId:e});if(r)for(yield r.chunk;r.streamId;){let n=await this.cdp.Debugger.nextWasmDisassemblyChunk({streamId:r.streamId});if(!n)return;yield n.chunk}}},ww=class extends iH{constructor(r,n,i,o,s){super(r,n,s);this.moduleId=i;this.worker=o;this.mappedLines=new Map}get codeOffset(){return this.event.codeOffset||0}async originalPositionFor(r){let n=await this.worker.rpc.sendMessage("rawLocationToSourceLocation",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return n.length?{position:new at(n[0].lineNumber,n[0].columnNumber),url:n[0].sourceFileURL}:super.originalPositionFor(r)}async compiledPositionFor(r,n){if(r===this.decompiledUrl)return super.compiledPositionFor(r,n);let{lineNumber:i,columnNumber:o}=n.base0,s=await this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:i,columnNumber:o===0?-1:o,rawModuleId:this.moduleId,sourceFileURL:r});if(o===0&&s.length===0){let a=await this.getMappedLines(r),u=a.find(c=>c>i);if(!a.includes(i)&&u)return this.compiledPositionFor(r,new at(u,0))}return s.filter(a=>a.rawModuleId===this.moduleId).map(a=>new at(0,this.codeOffset+a.startOffset))}dispose(){return this.worker.rpc.sendMessage("removeRawModule",this.moduleId)}async getVariablesInScope(r,n){let i={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId};return(await this.worker.rpc.sendMessage("listVariablesInScope",i)).map(s=>({name:s.name,scope:s.scope,type:s.type,evaluate:async()=>{let a=await this.worker.rpc.sendMessage("evaluate",s.name,i,this.worker.getStopId(r));return a?new Iw(a,this.worker.rpc):h7}}))}async getFunctionStack(r){let n=await this.worker.rpc.sendMessage("getFunctionInfo",{codeOffset:r.base0.columnNumber-this.codeOffset,inlineFrameIndex:r.base0.lineNumber,rawModuleId:this.moduleId});return"frames"in n?n.frames:[]}async getStepSkipList(r,n,i,o){if(i===this.decompiledUrl)return[];let s={codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},a=()=>o&&i?this.worker.rpc.sendMessage("sourceLocationToRawLocation",{lineNumber:o.base0.lineNumber,columnNumber:-1,rawModuleId:this.moduleId,sourceFileURL:i}):[],u;switch(r){case 2:{u=await this.worker.rpc.sendMessage("getInlinedFunctionRanges",s);break}case 1:{let c=await Promise.all([this.worker.rpc.sendMessage("getInlinedCalleesRanges",s),a()]);u=Js(c);break}case 0:u=await a();break;default:u=[];break}return u.map(c=>new On(new at(0,c.startOffset+this.codeOffset),new at(0,c.endOffset+this.codeOffset)))}async evaluate(r,n,i){try{return await this.worker.rpc.sendMessage("evaluate",i,{codeOffset:n.base0.columnNumber-this.codeOffset,inlineFrameIndex:n.base0.lineNumber,rawModuleId:this.moduleId},this.worker.getStopId(r))??void 0}catch(o){throw new Y(Ne(o.message))}}getMappedLines(r){let n=this.mappedLines.get(r);if(n)return n;let i=(async()=>{try{let o=await this.worker.rpc.sendMessage("getMappedLines",this.moduleId,r);return new Uint32Array(o?.sort((s,a)=>s-a)||[])}catch{return new Uint32Array}})();return this.mappedLines.set(r,i),i}},h7={type:"null",description:"no properties"},Iw=class t{constructor(e,r){if(this.type=e.type,this.description=e.description,this.linearMemoryAddress=e.linearMemoryAddress,this.linearMemorySize=e.linearMemoryAddress,e.objectId&&e.hasChildren){let n=e.objectId;this.getChildren=ye(()=>this._getChildren(r,n))}}async _getChildren(e,r){return(await e.sendMessage("getProperties",r)).map(i=>({name:i.name,value:new t(i.value,e)}))}};var Qo=Symbol("IScriptSkipper");function LM(t){return typeof t.lineNumber=="number"&&typeof t.columnNumber=="number"&&!!t.source}var PM=()=>({source:null,line:null,column:null,name:null,lastColumn:null,isSourceMapLoadFailure:!0}),m7=/\?t=[0-9]+$/,H7=t=>t.endsWith(".hot-update.js")||m7.test(t),g7={load:0,resolveLocation:2e3,sourceMapMinPause:1e3,output:1e3,sourceMapCumulativePause:1e4},xM=(t,e)=>e instanceof dt&&e.compiledToSourceUrl.has(t);var CM=2**31-1,Nt=class{constructor(e,r,n,i,o,s,a,u,c){this.sourceMapFactory=r;this.logger=n;this.launchConfig=i;this.initializeConfig=o;this.sourcePathResolver=s;this.scriptSkipper=a;this.resourceProvider=u;this.wasmSymbols=c;this.rootPaths=[];this.scriptsById=new Map;this.onSourceMappedSteppingChangeEmitter=new K;this.onScriptEmitter=new K;this._sourceByOriginalUrl=new hi(e=>e.toLowerCase());this._sourceByReference=new Map;this._sourceMapSourcesByUrl=new Map;this._sourceByAbsolutePath=na();this._sourceMapTimeouts=g7;this._fileContentOverridesForTest=new Map;this._temporarilyDisabledSourceMaps=new Set;this._permanentlyDisabledSourceMaps=new Set;this.onScript=this.onScriptEmitter.event;this._statistics={fallbackSourceMapCount:0};this._doSourceMappedStepping=this.launchConfig.sourceMaps;this.onSourceMappedSteppingChange=this.onSourceMappedSteppingChangeEmitter.event;this._dap=e;let l="webRoot"in i?i.webRoot:i.rootPath;l&&(this.rootPaths=[l,Nr(l,"..","ClientApp")]),a.setSourceContainer(this),this.setSourceMapTimeouts({...this.sourceMapTimeouts(),...i.timeouts})}get sources(){return this._sourceByReference.values()}statistics(){return this._statistics}get doSourceMappedStepping(){return this._doSourceMappedStepping}set doSourceMappedStepping(e){e!==this._doSourceMappedStepping&&(this._doSourceMappedStepping=e,this.onSourceMappedSteppingChangeEmitter.fire(e))}setSourceMapTimeouts(e){this._sourceMapTimeouts=e}sourceMapTimeouts(){return this._sourceMapTimeouts}setFileContentOverrideForTest(e,r){r===void 0?this._fileContentOverridesForTest.delete(e):this._fileContentOverridesForTest.set(e,r)}async loadedSources(){let e=[];for(let r of this._sourceByReference.values())e.push(r.toDap());return await Promise.all(e)}source(e){if(e.sourceReference)return this._sourceByReference.get(e.sourceReference);if(e.path)return this._sourceByAbsolutePath.get(e.path)}isSourceSkipped(e){return this.scriptSkipper.isScriptSkipped(e)}addScriptById(e){this.scriptsById.set(e.scriptId,e),"source"in e&&this.onScriptEmitter.fire(e)}getSourceScriptById(e){return this.scriptsById.get(e)}getScriptById(e){let r=this.scriptsById.get(e);return r&&"source"in r?r:void 0}getSourceByOriginalUrl(e){return this._sourceByOriginalUrl.get(e)}getSourceReference(e){let r=(0,DM.xxHash32)(e)&CM;for(let n=0;n<65535;n++){if(!this._sourceByReference.has(r))return r;r===CM&&(r=0),r++}return this.logger.assert(!1,"Max iterations exceeding for source reference assignment"),r}async preferredUiLocation(e){let r=!1,n=4;for(;;){let i=await this._originalPositionFor(e);if(!LM(i)){n=r?void 0:i;break}e=i,r=!0,n=void 0}return{...e,isMapped:r,unmappedReason:n}}async currentSiblingUiLocations(e,r){let n=await this._uiLocations(e);return r?n.filter(i=>i.source===r):n}clear(e){this.scriptsById.clear();for(let r of this._sourceByReference.values())this.removeSource(r,e);this._sourceByReference.clear(),this.sourceMapFactory instanceof Xo&&this.sourceMapFactory.invalidateCache()}async _uiLocations(e){let[r,n]=await Promise.all([this.getSourceMapUiLocations(e),this.getCompiledLocations(e)]);return[...r,e,...n]}async getSourceMapUiLocations(e){let r=await this._originalPositionFor(e);if(!LM(r))return[];let n=await this.getSourceMapUiLocations(r);return n.push(r),n}async _originalPositionFor(e){if(!vr(e.source))return 1;let r=await Df.waitForValueWithTimeout(e.source.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!r)return 2;if(this._doSourceMappedStepping)return this._originalPositionForMap(e,r);if(Q_(r)){let n=await r.disassembledPositionFor(new _t(e.lineNumber,e.columnNumber)),i=n&&e.source.sourceMap.sourceByUrl.get(n.url);if(i)return i?{columnNumber:n.position.base1.lineNumber,lineNumber:n.position.base1.lineNumber,source:i}:3}return 0}async _originalPositionForMap(e,r){let n=e.source;if(!vr(n))return 1;if(this._temporarilyDisabledSourceMaps.has(n)||this._permanentlyDisabledSourceMaps.has(n))return 0;let i=await this.getOptiminalOriginalPosition(r,zT(e,n.inlineScriptOffset));if(!i)return 3;let o=n.sourceMap.sourceByUrl.get(i.url);if(!o)return 3;let s=i.position.base1;return{lineNumber:s.lineNumber,columnNumber:s.columnNumber,source:o}}async getCompiledLocations(e){if(!(e.source instanceof dt))return[];let r=[];for(let[n,i]of e.source.compiledToSourceUrl){let o=await Df.waitForValueWithTimeout(n.sourceMap,this._sourceMapTimeouts.resolveLocation);if(!o)continue;let s;if("decompiledUrl"in o){let a=await o.compiledPositionFor(i,new _t(e.lineNumber,e.columnNumber));if(!a)continue;s=a.map(u=>({lineNumber:u.base1.lineNumber,columnNumber:u.base1.columnNumber,source:n}))}else{let a=this.sourceMapFactory.guardSourceMapFn(o,()=>dm(i,e,o),PM);if(!a)continue;let{lineNumber:u,columnNumber:c}=KT({lineNumber:a.line||1,columnNumber:(a.column||0)+1},n.inlineScriptOffset),l={lineNumber:u,columnNumber:c,source:n};s=[l,...await this.getCompiledLocations(l)]}r=r.concat(s)}return r}async getOptiminalOriginalPosition(e,r){if(Q_(e))return await e.originalPositionFor(new _t(r.lineNumber,r.columnNumber));let n=this.sourceMapFactory.guardSourceMapFn(e,()=>{let i=e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:No});return i.line!==null?i:e.originalPositionFor({line:r.lineNumber,column:r.columnNumber-1,bias:$u})},PM);if(!(n.column===null||n.line===null||n.source===null))return{position:new kn(n.line,n.column),url:n.source}}async addSource(e,r,n,i,o,s){let a=await this.sourcePathResolver.urlToAbsolutePath({url:e.url});this.logger.verbose("runtime.sourcecreate","Creating source from url",{inputUrl:e.url,absolutePath:a});let u;return e.scriptLanguage==="WebAssembly"?u=new km(this,e,a):u=new la(this,e.url,a,r,n&&this.sourcePathResolver.shouldResolveSourceMap({sourceMapUrl:n,compiledPath:a||e.url})?{sourceMapUrl:n,compiledPath:a||e.url,cacheKey:e.hash}:void 0,i,o,s),this._addSource(u),u}async _addSource(e){let r=e.url&&this._sourceByOriginalUrl.get(e.url);r&&!xM(r,e)&&this.removeSource(r,!0),this._sourceByOriginalUrl.set(e.url,e),this._sourceByReference.set(e.sourceReference,e),e instanceof dt&&this._sourceMapSourcesByUrl.set(e.url,e);let n=this._sourceByAbsolutePath.get(e.absolutePath);(n===void 0||n.url.length>=e.url.length||xM(n,e))&&this._sourceByAbsolutePath.set(e.absolutePath,e),this.scriptSkipper.initializeSkippingValueForSource(e),e.toDap().then(i=>this._dap.loadedSource({reason:"new",source:i})),fa(e)?this._finishAddSourceWithSourceMap(e):pa(e)&&this._finishAddSourceWithWasm(e)}async _finishAddSourceWithWasm(e){let r=await this.wasmSymbols.loadWasmSymbols(e.event),n=[];for(let i of r.files){let o=await this.sourcePathResolver.urlToAbsolutePath({url:i}),s=o?xe(o):i;this.logger.verbose("runtime.sourcecreate","Creating wasm source from source map",{inputUrl:i,absolutePath:o,resolvedUrl:s});let a=o&&xe(o),u=i===r.decompiledUrl?()=>r.getDisassembly():()=>a?this.resourceProvider.fetch(a).then(l=>l.body):Promise.resolve(`Could not read ${i}`),c=new dt(this,s,o,u);c.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,c),n.push(this._addSource(c))}await Promise.all(n),e.sourceMap.value.resolve(r)}async _finishAddSourceWithSourceMap(e){let r=e.sourceMap.value,n;try{n=await this.sourceMapFactory.load(e.sourceMap.metadata)}catch(i){if(this.initializeConfig.clientID==="visualstudio"){let o=e.sourceMap.metadata.sourceMapUrl;try{let s=await this.sourcePathResolver.urlToAbsolutePath({url:o});s&&(e.sourceMap.metadata.sourceMapUrl=xe(s)),n=await this.sourceMapFactory.load(e.sourceMap.metadata),this._statistics.fallbackSourceMapCount++,this.logger.info("sourcemap.parsing","Failed to process original source-map; falling back to storage source-map",{fallbackSourceMapUrl:e.sourceMap.metadata.sourceMapUrl,originalSourceMapUrl:o,originalSourceMapError:_w(i)})}catch{}}if(n===void 0)return this._dap.output({output:em(e.url,i.message).error.format+`
`,category:"stderr"}),r.resolve(void 0)}if(this._sourceByReference.get(e.sourceReference)!==e)return r.resolve(void 0);this.logger.verbose("sourcemap.parsing","Creating sources from source map",{sourceMapId:n.id,metadata:n.metadata});try{await this._addSourceMapSources(e,n)}finally{r.resolve(n)}this.scriptSkipper.initializeSkippingValueForSource(e)}removeSource(e,r=!1){let n=this._sourceByReference.get(e.sourceReference);if(n!==void 0){if(this.logger.assert(e===n,"Expected source to be the same as the existing reference"),this._sourceByReference.delete(e.sourceReference),this._sourceByOriginalUrl.get(e.url)===e&&this._sourceByOriginalUrl.delete(e.url),e instanceof dt){this._sourceMapSourcesByUrl.delete(e.url);for(let[i,o]of e.compiledToSourceUrl)i.sourceMap.sourceByUrl.delete(o)}this._sourceByAbsolutePath.delete(e.absolutePath),vr(e)&&(this._permanentlyDisabledSourceMaps.delete(e),this._temporarilyDisabledSourceMaps.delete(e)),r||e.toDap().then(i=>this._dap.loadedSource({reason:"removed",source:i})),pa(e)&&e.sourceMap.value.promise.then(i=>i?.dispose()),vr(e)&&this._removeSourceMapSources(e,r)}}async _addSourceMapSources(e,r){let n=[];for(let i of r.sources){if(i===null)continue;let o=await this.sourcePathResolver.urlToAbsolutePath({url:i,map:r}),s=o?xe(o):r.computedSourceUrl(i),a=this._sourceMapSourcesByUrl.get(s);if(e===a)continue;if(a)if(H7(e.url))this.removeSource(a);else{a.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,a);continue}this.logger.verbose("runtime.sourcecreate","Creating source from source map",{inputUrl:i,sourceMapId:r.id,absolutePath:o,resolvedUrl:s});let u=o&&xe(o),c=this.sourceMapFactory.guardSourceMapFn(r,()=>r.sourceContentFor(i),()=>null),l;if(c){let p=Fu(c);if(p&&(!Kt(p)&&o?l=Wo(o?xe(o):i,p):l=p),o&&l){let m={sourceMapUrl:l,compiledPath:o};this.sourcePathResolver.shouldResolveSourceMap(m)||(l=void 0)}}let f=new dt(this,s,o,c!==null?()=>Promise.resolve(c):u?()=>this.resourceProvider.fetch(u).then(p=>p.body):()=>e.content(),l?{compiledPath:o||s,sourceMapUrl:l,cacheKey:r.metadata.cacheKey}:void 0,void 0,e.runtimeScriptOffset);f.compiledToSourceUrl.set(e,i),e.sourceMap.sourceByUrl.set(i,f),n.push(this._addSource(f))}await Promise.all(n)}_removeSourceMapSources(e,r){for(let n of e.sourceMap.sourceByUrl.keys()){let i=e.sourceMap.sourceByUrl.get(n);i&&(e.sourceMap.sourceByUrl.delete(n),i.compiledToSourceUrl.delete(e),!i.compiledToSourceUrl.size&&this.removeSource(i,r))}}async waitForSourceMapSources(e){return vr(e)?[...(await Df.waitForSources(e.sourceMap)).values()]:[]}async revealUiLocation(e){this._dap.revealLocationRequested({source:await e.source.toDap(),line:e.lineNumber,column:e.columnNumber})}disableSourceMapForSource(e,r=!1){r?this._permanentlyDisabledSourceMaps.add(e):this._temporarilyDisabledSourceMaps.add(e)}clearDisabledSourceMaps(e){e?this._temporarilyDisabledSourceMaps.delete(e):this._temporarilyDisabledSourceMaps.clear()}};Nt=W([(0,fn.injectable)(),I(0,(0,fn.inject)(Pr)),I(1,(0,fn.inject)(yi)),I(2,(0,fn.inject)(re)),I(3,(0,fn.inject)(Ee)),I(4,(0,fn.inject)(Dr)),I(5,(0,fn.inject)(je)),I(6,(0,fn.inject)(Qo)),I(7,(0,fn.inject)(ea)),I(8,(0,fn.inject)(oH))],Nt);var TM=t=>t.originalPosition.columnNumber===1&&t.originalPosition.lineNumber===1,$M=500,MM=Symbol("DontCompare");var pn=class{constructor(e,r,n,i,o,s,a){this.logger=n;this.launchConfig=i;this.conditionFactory=o;this.suggester=s;this._breakpointsPredictor=a;this._resolvedBreakpoints=new Map;this._totalBreakpointsCount=0;this._launchBlocker=new Set;this._predictorDisabledForTest=!1;this._breakpointsStatisticsCalculator=new Lm;this.entryBreakpointMode=0;this._enabledFilter=()=>!0;this._byDapId=new Map;this._byPath=na();this._byRef=new Map;this.moduleEntryBreakpoints=na();this._dap=e,this._sourceContainer=r,a?.onLongParse(()=>e.longPrediction({})),r.onScript(u=>{u.source.then(c=>{let l=this._thread;l&&this._byRef.get(c.sourceReference)?.forEach(f=>f.updateForNewLocations(l,u))})}),r.onSourceMappedSteppingChange(()=>{if(this._thread)for(let u of this._byDapId.values())u.refreshUiLocations(this._thread)}),this._scriptSourceMapHandler=async(u,c)=>{if(!n.assert(this._thread,"Expected thread to be set for the breakpoint source map handler"))return[];let l=[],f=[c];for(let p=0;p<f.length;p++)for(let m of f[p]){let h=m.absolutePath,g=h?this._byPath.get(h):void 0;for(let _ of g||[])l.push(_.updateForNewLocations(this._thread,u));let y=this._byRef.get(m.sourceReference);for(let _ of y||[])l.push(_.updateForNewLocations(this._thread,u));m.sourceMap&&f.push(m.sourceMap.sourceByUrl.values())}return Js(await Promise.all(l))}}get appliedByPath(){return this._byPath}get appliedByRef(){return this._byRef}hasAtLocation(e){let r=this._byPath.get(e.source.absolutePath)||[],n=this._byRef.get(e.source.sourceReference)||[];return r.concat(n).some(i=>i.originalPosition.columnNumber===e.columnNumber&&i.originalPosition.lineNumber===e.lineNumber)}async moveBreakpoints(e,r,n,i){let o=l=>CC(l,async f=>{let p=await this._sourceContainer.getOptiminalOriginalPosition(n,f.originalPosition);if(!p)return!1;let m=p.position.base1;return f.updateSourceLocation(e,{path:i.absolutePath,sourceReference:i.sourceReference},{lineNumber:m.lineNumber,columnNumber:m.columnNumber,source:i}),!1}),s=r.absolutePath,a=i.absolutePath,u=s?this._byPath.get(s):void 0;if(u&&a){let[l,f]=await o(u);this._byPath.set(s,l),this._byPath.set(a,f)}let c=this._byRef.get(r.sourceReference);if(c){let[l,f]=await o(c);this._byRef.set(r.sourceReference,l),this._byRef.set(i.sourceReference,f)}}async updateEntryBreakpointMode(e,r){if(r===this.entryBreakpointMode)return;let n=[...this.moduleEntryBreakpoints.values()];this.moduleEntryBreakpoints.clear(),this.entryBreakpointMode=r,await Promise.all(n.map(i=>this.ensureModuleEntryBreakpoint(e,i.source)))}async applyEnabledFilter(e,r=MM){if(r!==MM&&this._enabledFilter!==r)return;this._enabledFilter=e||(()=>!0);let n=this._thread;n&&await Promise.all([...this._byDapId.values()].map(i=>this._enabledFilter(i)?i.enable(n):i.disable()))}async getBreakpointLocations(e,r,n,i){let o=n.base1,s=i.base1,[a,u]=await Promise.all([this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:o.lineNumber,columnNumber:o.columnNumber}),this._sourceContainer.currentSiblingUiLocations({source:r,lineNumber:s.lineNumber,columnNumber:s.columnNumber})]);if(a.length!==u.length)return this.logger.warn("internal","Expected to have the same number of start and end locations"),[];let c=[],l=[];for(let f=0;f<a.length;f++){let p=a[f],m=u[f];if(p.source!==m.source){this.logger.warn("internal","Expected to have the same number of start and end scripts");continue}let h=p.source;if(!h.scripts.length)continue;let{scriptId:g}=h.scripts[h.scripts.length-1];c.push(e.cdp().Debugger.getPossibleBreakpoints({restrictToFunction:!1,start:{scriptId:g,...h.offsetSourceToScript(no(p))},end:{scriptId:g,...h.offsetSourceToScript(no(m))}}).then(y=>{if(y?.locations)return Promise.all(y.locations.map(async _=>{let{lineNumber:C,columnNumber:N=0}=_,D=await this._sourceContainer.currentSiblingUiLocations({source:h,...h.offsetScriptToSource(JT({lineNumber:C,columnNumber:N}))});l.push({breakLocation:_,uiLocations:D})}))}))}return await Promise.all(c),l}setThread(e){this._thread=e,this._thread.cdp().Debugger.on("breakpointResolved",r=>{let n=this._resolvedBreakpoints.get(r.breakpointId);n&&n.updateUiLocations(e,r.breakpointId,[r.location])}),this._thread.setSourceMapDisabler(r=>{let n=[];for(let i of r){let o=this._resolvedBreakpoints.get(i);if(o){let s=this._sourceContainer.source(o.source);vr(s)&&n.push(s)}}return n});for(let r of this._byPath.values())r.forEach(n=>this._setBreakpoint(n,e)),this.ensureModuleEntryBreakpoint(e,r[0]?.source);for(let r of this._byRef.values())r.forEach(n=>this._setBreakpoint(n,e));"runtimeSourcemapPausePatterns"in this.launchConfig&&this.launchConfig.runtimeSourcemapPausePatterns.length&&this.setRuntimeSourcemapPausePatterns(e,this.launchConfig.runtimeSourcemapPausePatterns),this._byDapId.size>0&&this._installSourceMapHandler(this._thread)}async launchBlocker(){Am(this.logger,"BreakpointManager.launchBlocker",async()=>{this._predictorDisabledForTest||await Promise.all([...this._launchBlocker])})}setRuntimeSourcemapPausePatterns(e,r){return Promise.all(r.map(n=>this._setBreakpoint(new Nf(this,n),e)))}addLaunchBlocker(...e){for(let r of e)this._launchBlocker.add(r),r.finally(()=>this._launchBlocker.delete(r))}setPredictorDisabledForTest(e){this._predictorDisabledForTest=e}_installSourceMapHandler(e){let r=this.launchConfig.perScriptSourcemaps==="yes",n;r?n=Promise.all([this.updateEntryBreakpointMode(e,1),e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler)]).then(()=>!0):this._breakpointsPredictor&&!this.launchConfig.pauseForSourceMap?n=e.setScriptSourceMapHandler(!1,this._scriptSourceMapHandler):n=e.setScriptSourceMapHandler(!0,this._scriptSourceMapHandler),this._sourceMapHandlerInstalled={entryBpSet:n}}async _uninstallSourceMapHandler(e){e.setScriptSourceMapHandler(!1),this._sourceMapHandlerInstalled=void 0}_setBreakpoint(e,r){this._enabledFilter(e)&&this.addLaunchBlocker(Promise.race([we($M),e.enable(r)]))}async setBreakpoints(e,r){!this._sourceMapHandlerInstalled&&this._thread&&e.breakpoints?.length&&this._installSourceMapHandler(this._thread);let n=await this._sourceMapHandlerInstalled?.entryBpSet;e.source.path=Mn(e.source.path);let i=this._sourceContainer.source(e.source);if(!n&&this._breakpointsPredictor&&!i){let l=this._breakpointsPredictor.predictBreakpoints(e);this.addLaunchBlocker(l),await l}let o=this._thread;if(o?.debuggerReady.hasSettled()===!1){let l=o.debuggerReady.promise;this.addLaunchBlocker(l),await l}let s=l=>{let f={unbound:l.slice(),new:[],list:[]};if(!e.breakpoints)return f;for(let p=0;p<e.breakpoints.length;p++){let m=e.breakpoints[p],h;try{h=new cn(this,r[p],e.source,m,this.conditionFactory.getConditionFor(m))}catch(_){if(!(_ instanceof Y))throw _;this._dap.output({category:"stderr",output:_.message}),h=new qm(this,r[p],e.source,m)}let g=f.unbound.findIndex(_=>_.equivalentTo(h)),y=f.unbound[g];y?.equivalentTo?.(h)?(f.list.push(y),f.unbound.splice(g,1)):(f.new.push(h),f.list.push(h),this._byDapId.set(h.dapId,h))}return f},a=()=>e.source.sourceReference?this._byRef.get(e.source.sourceReference):e.source.path?this._byPath.get(e.source.path):void 0,u=s(a()??[]);if(e.source.sourceReference)this._byRef.set(e.source.sourceReference,u.list);else if(e.source.path)this._byPath.set(e.source.path,u.list);else return{breakpoints:[]};if(u.unbound.length===0&&u.new.length===0)return{breakpoints:[]};if(this._totalBreakpointsCount-=u.unbound.length,await Promise.all(u.unbound.map(l=>(this._byDapId.delete(l.dapId),l.disable()))),this._totalBreakpointsCount+=u.new.length,this._thread&&(this._totalBreakpointsCount===0&&this._sourceMapHandlerInstalled?this._uninstallSourceMapHandler(this._thread):this._totalBreakpointsCount>0&&!this._sourceMapHandlerInstalled&&this._installSourceMapHandler(this._thread)),o&&u.new.length){this.ensureModuleEntryBreakpoint(o,e.source);let l=a(),f=Promise.all(u.new.filter(this._enabledFilter).filter(p=>l?.includes(p)).map(p=>p.enable(o)));this.addLaunchBlocker(Promise.race([we($M),f])),await f}let c=await Promise.all(u.list.map(l=>l.toDap()));return this._breakpointsStatisticsCalculator.registerBreakpoints(c),we(0).then(()=>u.new.forEach(l=>l.markSetCompleted())),{breakpoints:c}}async notifyBreakpointChange(e,r){if(!this._byDapId.has(e.dapId))return;let n=await e.toDap();n.verified&&(this._breakpointsStatisticsCalculator.registerResolvedBreakpoint(e.dapId),this.suggester.notifyVerifiedBreakpoint()),r&&this._dap.breakpoint({reason:"changed",breakpoint:n})}isEntrypointBreak(e,r){return[...this.moduleEntryBreakpoints.values()].some(i=>i.enabled&&i.cdpScriptIds.has(r))?!0:e.some(i=>{let o=this._resolvedBreakpoints.get(i);return o&&(o instanceof _i||TM(o))})}isEntrypointCdpBreak(e){return this._resolvedBreakpoints.get(e)instanceof _i}async shouldPauseAt(e,r,n,i=!1){if(!r.length)return e.reason!=="instrumentation";let o=0,s=i?1:0;return await Promise.all(r.map(async a=>{if(n?.cdpId===a){o++;return}let u=this._resolvedBreakpoints.get(a);if(u instanceof _i){this.entryBreakpointMode===0&&!(u instanceof Nf)&&u.disable(),s++;return}u instanceof cn&&(await u.testHitCondition(e)?o++:s++)})),o>0||s===0}registerBreakpointsHit(e){for(let r of e){let n=this._resolvedBreakpoints.get(r);n instanceof cn&&this._breakpointsStatisticsCalculator.registerBreakpointHit(n.dapId)}}statisticsForTelemetry(){return this._breakpointsStatisticsCalculator.statistics()}ensureModuleEntryBreakpoint(e,r){if(!r.path||(this._byPath.get(r.path)??[]).some(TM))return;let i=_i.getModeKeyForSource(this.entryBreakpointMode,r.path);if(!r.path||this.moduleEntryBreakpoints.has(i))return;let o=new _i(this,r,this.entryBreakpointMode);this.moduleEntryBreakpoints.set(r.path,o),this._setBreakpoint(o,e)}executionContextWasCleared(){for(let e of this._byDapId.values())e.executionContextWasCleared()}async reapply(){let e=[...this._byDapId.values()];if(await Promise.all(e.map(r=>r.disable())),this._thread){let r=this._thread;await Promise.all(e.map(n=>n.enable(r)))}}};pn=W([(0,Li.injectable)(),I(0,(0,Li.inject)(Pr)),I(1,(0,Li.inject)(Nt)),I(2,(0,Li.inject)(re)),I(3,(0,Li.inject)(Ee)),I(4,(0,Li.inject)(Fm)),I(5,(0,Li.inject)(it)),I(6,(0,Li.inject)(aa))],pn);var KR=require("crypto"),_c=$(ae());var Ve=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},jf=class{constructor(){this._first=Ve.Undefined;this._last=Ve.Undefined;this._size=0}get size(){return this._size}isEmpty(){return this._first===Ve.Undefined}clear(){let e=this._first;for(;e!==Ve.Undefined;){let r=e.next;e.prev=Ve.Undefined,e.next=Ve.Undefined,e=r}this._first=Ve.Undefined,this._last=Ve.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Ve(e);if(this._first===Ve.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Ve.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Ve.Undefined){let e=this._last.element;return this._remove(this._last),e}}applyFilter(e){let r=this._first;for(;r!==Ve.Undefined;){let n=r.next;e(r.element)||this._remove(r),r=n}}_remove(e){if(e.prev!==Ve.Undefined&&e.next!==Ve.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Ve.Undefined&&e.next===Ve.Undefined?(this._first=Ve.Undefined,this._last=Ve.Undefined):e.next===Ve.Undefined?(this._last=this._last.prev,this._last.next=Ve.Undefined):e.prev===Ve.Undefined&&(this._first=this._first.next,this._first.prev=Ve.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Ve.Undefined;)yield e.element,e=e.next}};var yH=$(ae()),qR=$(require("net"));var Pi=class extends Y{constructor(e){super({id:9243,format:e,showUser:!0}),this._cause={id:9243,format:e,showUser:!0}}};function xi(t,e,r){if(e.isCancellationRequested)return Promise.reject(new Pi(r||"Task cancelled"));let n=$e(),i=e.onCancellationRequested(n.resolve);return Promise.race([n.promise.then(()=>{throw new Pi(r||"Task cancelled")}),t.then(o=>(i.dispose(),o)).catch(o=>{throw i.dispose(),o})])}function RM(t,e){let r=new Lt(e),n=t.map(async i=>{try{return await i(r.token)}finally{r.cancel()}});return Promise.race(n)}var kM=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),cr=Object.freeze({isCancellationRequested:!1,onCancellationRequested:()=>({dispose:()=>{}})}),b7=Object.freeze({isCancellationRequested:!0,onCancellationRequested:kM}),Lt=class t{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static withTimeout(e,r){let n=new t(r),i=n._token=new hc,o=setTimeout(()=>i.cancel(),e);return i.onCancellationRequested(()=>clearTimeout(o)),n}get token(){return this._token||(this._token=new hc),this._token}cancel(){this._token?this._token instanceof hc&&this._token.cancel():this._token=b7}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof hc&&this._token.dispose():this._token=cr}},hc=class{constructor(){this._isCancelled=!1;this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?kM:(this._emitter||(this._emitter=new K),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}};var Xw=$(require("net"));var MQ=$(FM(),1),RQ=$(Rw(),1),kQ=$(Ow(),1),BR=$(qw(),1),Gw=$(NR(),1);var FR=BR.default;var UR=(t,e)=>t+Math.floor(Math.random()*(e-t));async function Zf({min:t=53e3,max:e=54e3,attempts:r=1e3,tester:n=NQ}={},i=cr){let o=UR(t,e);for(let s=Math.min(r,e-t);;s--)try{return await n(o,i)}catch(a){if(s===0||a instanceof Pi)throw a;o=o===e-1?t:o+1}}function NQ(t,e=cr){let r;return new Promise((n,i)=>{let o=Xw.createServer();o.listen(t,"127.0.0.1",()=>{let s=o.address();o.close(()=>n(s.port))}),o.on("error",i),r=e.onCancellationRequested(()=>{o.close(),i(new Pi("Port open lookup cancelled"))})}).finally(()=>r?.dispose())}var jR=(t,e)=>(r,n)=>{let i=Xw.createServer(t);return i.listen(r,e),gH(i,n)},WR=t=>(e,r)=>gH(new Gw.default({host:"127.0.0.1",...t,port:e}),r),gH=(t,e)=>{let r;return new Promise((n,i)=>{t.on("error",i),t.on("listening",()=>n(t)),r=e.onCancellationRequested(()=>{t.close(),i(new Pi("Port open lookup cancelled"))})}).finally(()=>r?.dispose())};var VR=async(t,e,r,n,i=cr)=>{let o=r?await gH(qR.createServer(e).listen(r,n),i):await Zf({tester:jR(e,n)},i),s=t.register(o.address().port);return o.on("close",()=>s.dispose()),o.on("error",()=>s.dispose()),o},bH=async(t,e,r)=>{let n=await Zf({tester:WR(e)},r),i=t.register(n.address().port);return n.on("close",()=>i.dispose()),n.on("error",()=>i.dispose()),n},Tr=Symbol("IPortLeaseTracker"),bc=class{constructor(e){this.usedPorts=new Set;this.onRegistered=new K;this.isMandated=e==="remote"}register(e){return this.usedPorts.add(e),this.onRegistered.fire(e),{dispose:()=>this.usedPorts.delete(e)}}isRegistered(e,r=2e3){return this.usedPorts.has(e)?Promise.resolve(!0):e<53e3||e>=54e3?Promise.resolve(!1):RM([()=>we(r).then(()=>!1),n=>new Promise(i=>{let o=this.onRegistered.event(s=>{s===e&&i(!0)});n.onCancellationRequested(()=>o.dispose())})])}};bc=W([(0,yH.injectable)(),I(0,(0,yH.inject)(Ha))],bc);var GR="JsDebug",XR="*";var Kw=class{constructor(){this.replays=new Map}addReplay(e,r,n){let i=this.replays.get(e);return i||(i=new jf,this.replays.set(e,i)),i.push({event:`${e}.${r}`,params:n})}capture(e,r,n,i){let o=e[r];if(i===0)o.on(n,s=>this.addReplay(r,n,s));else if(i===2){let s;o.on(n,a=>{s?.(),s=this.addReplay(r,n,a)})}else{let s=new jf;o.on(n,a=>{s.size===i.cap&&s.shift()?.(),s.push(this.addReplay(r,n,a))})}}filter(e,r){let n=this.replays.get(e);n&&n.applyFilter(r)}clearEvent(e,r){let n=`${e}.${r}`;this.filter(e,i=>i.event!==n)}clearDomain(e){this.replays.delete(e)}read(e){return this.replays.get(e)??[]}},vH=Symbol("ICdpProxyProvider"),vc=class{constructor(e,r,n){this.cdp=e;this.portTracker=r;this.logger=n;this.disposables=new Be;this.replay=new Kw;this.jsDebugApi={subscribe:(e,{events:r})=>{for(let n of r)n.endsWith(XR)?e.pushDisposable(this.cdp.session.onPrefix(n.slice(0,-XR.length),i=>e.send({method:i.method,params:i.params}))):e.pushDisposable(this.cdp.session.on(n,i=>e.send({method:n,params:i})));return{}}};this.replay.capture(e,"CSS","styleSheetAdded",0),this.replay.capture(e,"Debugger","paused",2),this.replay.capture(e,"Runtime","executionContextCreated",{cap:50,type:1}),this.replay.capture(e,"Runtime","consoleAPICalled",{cap:50,type:1}),e.Debugger.on("resumed",()=>{this.replay.clearEvent("Debugger","paused")}),e.CSS.on("fontsUpdated",i=>{i.font&&this.replay.addReplay("CSS","fontsUpdated",i)}),e.CSS.on("styleSheetRemoved",i=>this.replay.filter("CSS",o=>o.params.styleSheetId!==i.styleSheetId))}async proxy(){this.server||(this.server=this.createServer());let{server:e,path:r}=await this.server,n=e.address();return{host:n.address,port:n.port,path:r}}async createServer(){let e=`/${(0,KR.randomBytes)(20).toString("hex")}`,r=await bH(this.portTracker,{perMessageDeflate:!0,path:e});return this.logger.info("proxyActivity","activated cdp proxy"),r.on("connection",n=>{let i=new zw(n,this.logger);this.logger.info("proxyActivity","accepted proxy connection",{id:i.id}),n.on("close",()=>{this.logger.verbose("proxyActivity","closed proxy connection",{id:i.id}),this.disposables.disposeObject(i)}),n.on("message",async o=>{let s;try{s=JSON.parse(o.toString())}catch(p){return i.send({id:0,error:{code:-32700,message:p.message}})}this.logger.verbose("proxyActivity","received proxy message",s);let{method:a,params:u,id:c=0}=s,[l,f]=a.split(".");try{let p=l===GR?await this.invokeJsDebugDomainMethod(i,f,u):await this.invokeCdpMethod(i,l,f,u);i.send({id:c,result:p})}catch(p){let m=p instanceof ua&&p.cause?p.cause:{code:0,message:p.message};i.send({id:c,error:m})}})}),{server:r,path:e}}dispose(){this.disposables.dispose(),this.server?.then(e=>e.server.close()),this.server=void 0}invokeCdpMethod(e,r,n,i){let o=this.cdp.session.sendOrDie(`${r}.${n}`,i);switch(n){case"enable":for(let s of this.replay.read(r))e.send({method:s.event,params:s.params});break;case"disable":this.replay.clearDomain(r);break;default:}return o}invokeJsDebugDomainMethod(e,r,n){if(!this.jsDebugApi.hasOwnProperty(r))throw new ua(r).setCause(-32601,`${GR}.${r} not found`);return this.jsDebugApi[r](e,n)}};vc=W([(0,_c.injectable)(),I(0,(0,_c.inject)(rt)),I(1,(0,_c.inject)(Tr)),I(2,(0,_c.inject)(re))],vc);var BQ=0,zw=class{constructor(e,r){this.webSocket=e;this.logger=r;this.disposables=new Be;this.id=BQ++}pushDisposable(e){this.disposables.push(e)}dispose(){this.disposables.dispose(),this.webSocket.close()}send(e){this.logger.verbose("proxyActivity","send proxy message",e),this.webSocket.send(JSON.stringify(e))}};var JR=require("./vendor/acorn-loose.js"),ep=$(ae());var Jw=kt(function(t,e,r){let n=r?"variable":"property",i=(l,f,p)=>{if(f!=="function")return n;if(l==="constructor")return"class";let m=String(p);return m.startsWith("class ")||m.includes("[native code]")&&/^[A-Z]/.test(l)?"class":r?"function":"method"},o=l=>{switch(typeof l){case"number":case"boolean":return`${l}`;case"object":return l===null?"null":l.constructor.name||"object";case"function":return`fn(${new Array(l.length).fill("?").join(", ")})`;default:return typeof l}},s=[],a=new Set,u="~",c=t===void 0?this:t;for(;c!=null;c=c.__proto__){u+="~";let l=Object.getOwnPropertyNames(c).filter(f=>f.startsWith(e)&&!f.match(/^\d+$/));for(let f of l){if(a.has(f))continue;a.add(f);let p=Object.getOwnPropertyDescriptor(c,f),m=n,h;try{let g=c[f];m=i(f,typeof p?.value,g),h=o(g)}catch{}s.push({label:f,sortText:u+f.replace(/^_+/,g=>"{".repeat(g.length)),type:m,detail:h})}r=!1}return{result:s,isArray:this instanceof Array}}),zR=ra(Jw.source);var FQ=t=>{switch(t.type){case"ClassDeclaration":case"ClassExpression":return{type:"class",id:t.id};case"MethodDefinition":return{type:t.key?.type==="Identifier"&&t.key.name==="constructor"?"constructor":"method",id:t.key};case"VariableDeclarator":return{type:t.init?.type==="FunctionExpression"||t.init?.type==="ArrowFunctionExpression"?"function":"variable",id:t.id}}};function UQ(t){let e=!1;return Uo(t,{enter(r){if(r.type==="CallExpression"||r.type==="NewExpression"||r.type==="UnaryExpression"&&r.operator==="delete"||r.type==="ClassBody")return e=!0,0}}),e}var _H=Symbol("ICompletions"),wc=class{constructor(e,r){this.evaluator=e;this.cdp=r}async completions(e){let r=mi(e.expression),n=new qo(e.expression).convert(e.position),i=()=>Promise.resolve([]);return Uo(r,{enter:(o,s)=>{let a=o;if(a.start<n&&n<=a.end){if(o.type==="MemberExpression"||o.type==="Identifier"&&s?.type==="MemberExpression"&&!s.computed&&s.object!==o){let u=o.type==="MemberExpression"?o:s;i=u.computed?()=>this.elementAccessCompleter(e,u,n):()=>this.propertyAccessCompleter(e,u,n)}else o.type==="Identifier"&&(i=()=>this.identifierCompleter(e,r,o,n));s=o}}}),i().then(o=>o.sort((s,a)=>s.sortText>a.sortText?1:-1))}async elementAccessCompleter(e,r,n){if(r.property.type!=="Literal"||typeof r.property.value!="string")return[];let i=e.expression.slice(Fo(r.property)+1,n);return(await this.defaultCompletions(e,i)).filter(s=>s.sortText!=="~~[").map(s=>({...s,text:JSON.stringify(s.text??s.label)+"]",start:Fo(r.property),length:N_(r.property)-Fo(r.property)}))}async identifierCompleter(e,r,n,i){let o=[];Uo(r,{enter(u){let c=FQ(u);c?.id?.type==="Identifier"&&o.push({label:c.id.name,type:c.type,sortText:c.id.name})}});let s=e.expression.slice(Fo(n),i),a=[...o,...await this.defaultCompletions(e,s)];return this.evaluator.hasReturnValue&&e.executionContextId!==void 0&&io.startsWith(s)&&a.push({sortText:`~${io}`,label:io,type:"variable"}),a}async propertyAccessCompleter(e,r,n){let{result:i,isArray:o}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:rT(e.expression,r.object),prefix:(0,JR.isDummy)(r.property)?"":e.expression.slice(Fo(r.property),n),throwOnSideEffect:UQ(r)}),s=Fo(r.property)-1,a=/^[$a-z_][0-9a-z_$]*$/i;for(let u of i)a.test(u.label)||(u.text=`[${JSON.stringify(u.label)}]`,u.start=s,u.length=1);if(o){let u="index";i.unshift({label:`[${u}]`,text:`[${u}]`,type:"property",sortText:"~~[",start:s,selectionStart:1,selectionLength:u.length,length:1})}return i}async completePropertyAccess({executionContextId:e,stackFrame:r,expression:n,prefix:i,isInGlobalScope:o=!1,throwOnSideEffect:s=!1}){let a={expression:`(${n})`,objectGroup:"console",silent:!0,throwOnSideEffect:s},u=r&&r.callFrameId(),c=await this.evaluator.evaluate(u?{...a,callFrameId:u}:{...a,contextId:e},{stackFrame:r});if(!c||c.exceptionDetails)return{result:[],isArray:!1};if(!c.result.objectId){let l={...a,returnByValue:!0,throwOnSideEffect:!1,expression:zR.expr(`(${n})`,JSON.stringify(i),JSON.stringify(o))},f=await this.evaluator.evaluate(u?{...l,callFrameId:u}:{...l,contextId:e});return!f||f.exceptionDetails?{result:[],isArray:!1}:f.result.value}try{return(await Jw({cdp:this.cdp,args:[void 0,i,o],objectId:c.result.objectId,returnByValue:!0})).value}catch{return{result:[],isArray:!1}}finally{this.cdp.Runtime.releaseObject({objectId:c.result.objectId})}}async defaultCompletions(e,r=""){for(let n of["self","global","this"]){let{result:i}=await this.completePropertyAccess({executionContextId:e.executionContextId,stackFrame:e.stackFrame,expression:n,prefix:r,isInGlobalScope:!0});if(e.stackFrame){let o=r.toLowerCase(),s=new Set(i.map(a=>a.label));for(let a of await e.stackFrame.completions())s.has(a.label)||!a.label.toLowerCase().includes(o)||(s.add(a.label),i.push(a))}return i.push(...this.syntheticCompletions(e,r)),i}return this.syntheticCompletions(e,r)}syntheticCompletions(e,r){return this.evaluator.hasReturnValue&&io.startsWith(r)?[{sortText:`~${io}`,label:io,type:"variable"}]:[]}};wc=W([(0,ep.injectable)(),I(0,(0,ep.inject)(un)),I(1,(0,ep.inject)(rt))],wc);var xH=$(ut());var Di=class{constructor(e,r){this._tokens=[];this._separator=r||"",this._budget=e-1-this._separator.length}append(e){if(e.length>this.budget()){this.appendEllipsis();return}this._append(e)}_append(e){this._tokens.length&&(this._budget-=this._separator.length),this._tokens.push(e),this._budget-=e.length}appendEllipsis(){this._tokens[this._tokens.length-1]!=="\u2026"&&this._append("\u2026")}checkBudget(){return this._budget<=0&&this.appendEllipsis(),this._budget>0}budget(){return this._budget-(this._tokens.length?this._separator.length:0)}build(){return this._tokens.join(this._separator)}isEmpty(){return!this._tokens.length}};var vk=$(yk());var nZ=1e4;function iZ(t,e){if(!t.includes("%"))return[{type:"string",value:t}];let r=[];function n(u){if(!u)return;let c=r[r.length-1];c?.type==="string"?c.value+=u:r.push({type:"string",value:u})}function i(u,c,l){r.push({type:"specifier",specifier:u,precision:c,substitutionIndex:l})}let o=0,s=0,a=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${e.join("")}])`,"g");for(let u=a.exec(t);u;u=a.exec(t)){let c=u.index;if(c>o&&n(t.substring(o,c)),u[0]==="%%")n("%");else{let[,l,f,p]=u;l&&Number(l)>0&&(s=Number(l)-1);let m=f?Number(f):void 0;i(p,m,s),++s}o=c+u[0].length}return n(t.substring(o)),r}function tI(t,e,r){let n=iZ(t,Array.from(r.keys())),i=new Set,o=r.get("");if(!o)throw new Error("Expected to hav a default formatter");let s=new Di(nZ),a=!1;for(let u=0;s.checkBudget()&&u<n.length;++u){let c=n[u];if(c.type==="string"){s.append(c.value);continue}let l=c.substitutionIndex;if(l>=e.length){s.append("%"+(c.precision||"")+c.specifier);continue}i.add(l),c.specifier==="c"&&(a=!0);let f=r.get(c.specifier)||o;s.append(f(e[l],{budget:s.budget(),quoted:!1}))}a&&s.append("\x1B[0m");for(let u=0;s.checkBudget()&&u<e.length;++u)i.has(u)||(i.add(u),(t||u)&&s.append(" "),s.append(o(e[u],{budget:s.budget(),quoted:!1})));return{result:s.build(),usedAllSubs:i.size===e.length}}function bk(t){try{return new vk.default(t).ansi256().object().ansi256}catch{}}function _k(t){let e=/\s*(.*?)\s*:\s*(.*?)\s*(?:;|$)/g,r="\x1B[0m",n=e.exec(t);for(;n!==null;){if(n.length===3)switch(n[1]){case"color":let i=bk(n[2]);i&&(r+=`\x1B[38;5;${i}m`);break;case"background":case"background-color":let o=bk(n[2]);o&&(r+=`\x1B[48;5;${o}m`);break;case"font-weight":n[2]==="bold"&&(r+="\x1B[1m");break;case"font-style":n[2]==="italic"&&(r+="\x1B[3m");break;case"text-decoration":n[2]==="underline"&&(r+="\x1B[4m");break;default:}n=e.exec(t)}return r}var Ik=t=>t.replace(/\\/gm,"\\\\").replace(/\n/gm,"\\n").replace(/\r/gm,"\\r").replace(/\t/gm,"\\t"),sZ={budget:1e5,quoted:!0},wk={budget:1e3,quoted:!0,postProcess:Ik},aZ={budget:1/0,quoted:!1},uZ={budget:1e3,quoted:!0,postProcess:Ik},cZ={budget:1e5,quoted:!0},EH=t=>{switch(t){case"repl":return sZ;case"hover":return wk;case"propertyValue":return wk;case"watch":return uZ;case"copy":case"clipboard":return aZ;default:return cZ}};var lZ=30,fZ=100,rI=20,pZ=1e4,dZ=3,Ak=120,nI=new Set(["null","regexp","date"]);function _a(t){return t.type==="function"||t.type==="object"&&!nI.has(t.subtype)}function iI(t){return t.subtype==="array"||t.subtype==="typedarray"}function wa(t,e,r){let n=EH(e),i=LH(t,n,r);return t.preview?.subtype==="regexp"?i:n.postProcess?.(i)??i}function LH(t,e,r){return t.type==="function"?t.description?Pk(t.description,e.budget):"<function>":t.type==="object"&&t.subtype==="node"?t.description:"preview"in t&&t.preview?PH(t.preview,e.budget,r):Lk(t,e.budget,e.quoted,r)}function PH(t,e,r){return iI(t)?hZ(t,e):t.subtype==="internal#entry"?Hi(t.description||"",e):t.type==="function"?Pk(t.description,e):_a(t)?mZ(t,e,r):gZ(t,e,r)}function hZ(t,e){let r=new Di(e),n=t.description,i=n.match(/[^(]*\(([\d]+)\)/);if(!i)return n;let o=parseInt(i[1],10);n.startsWith("Array(")&&(n=n.substring(5)),r.append(Hi(n,r.budget())),r.append(" ");let s=new Di(r.budget()-2,", "),a=-1;for(let u of t.properties){if(!s.checkBudget())break;if(isNaN(u.name))continue;let c=parseInt(u.name,10);c>a+1&&s.appendEllipsis(),a=c,s.append(ip(u,s.budget()))}o>a+1&&s.appendEllipsis();for(let u of t.properties){if(!s.checkBudget())break;isNaN(u.name)&&s.append(ip(u,s.budget(),u.name))}return t.overflow&&s.appendEllipsis(),r.append("["+s.build()+"]"),r.build()}function mZ(t,e,r){let n=new Di(e," ");t.description!=="Object"&&n.append(Hi(t.description,n.budget()));let i=new Map,o=t.properties||[];for(let p of o)i.set(p.name,p);let s=i.get("[[PrimitiveValue]]");if(s)return n.append(`(${ip(s,n.budget()-2)})`),n.build();let a=i.get("[[PromiseStatus]]"),u=i.get("[[PromiseValue]]");if(a&&u)return a.value==="pending"?n.append(`{<${a.value}>}`):n.append(`{${ip(u,n.budget()-2,`<${a.value}>`)}}`),n.build();let c=i.get("[[GeneratorStatus]]");if(c)return n.append(`{<${c.value}>}`),n.build();let l=new Di(n.budget()-2,", ");for(let p of o){if(!l.checkBudget())break;l.append(ip(p,l.budget(),p.name))}for(let p of t.entries||[]){if(!l.checkBudget())break;if(p.key){let m=PH(p.key,Math.min(rI,l.budget()),r),h=PH(p.value,Math.min(rI,l.budget()-m.length-4),r);l.append(Sc(m," => ",h,l.budget()))}else l.append(PH(p.value,Math.min(rI,l.budget()),r))}t.overflow&&l.appendEllipsis();let f=l.build();return f?n.append("{"+f+"}"):n.isEmpty()&&n.append("{}"),n.build()}function Sk(t,e){return t.length<=e?t:"\u2026"}function HZ(t,e){return t.length>=e?t.slice(0,e-1)+"\u2026":t}function gZ(t,e,r){if(t.type==="object"&&t.subtype==="null")return Sk("null",e);if(t.type==="undefined")return Sk("undefined",e);if(t.type==="string"){let n=t.description??t.value;return r?.hex&&(n=Buffer.from(n,"utf8").toString("hex")),ju(n,e)}return t.type==="number"||t.type==="bigint"?op(t,!1,e,r):HZ(t.description||"",e)}function Sc(t,e,r,n){return t===void 0?ju(r,n):t.length+e.length>n?Hi(t,n):`${t}${e}${ju(r,n-t.length-e.length)}`}function ip(t,e,r){return e=Math.min(e,fZ),t.type==="function"?Sc(r,": ","\u0192",e):t.type==="object"&&t.value==="Object"?Sc(r,": ","{\u2026}",e):typeof t.value>"u"?Sc(r,": ",`<${t.type}>`,e):t.type==="string"?Sc(r,": ",`'${t.value}'`,e):Sc(r,": ",t.value??"unknown",e)}function Lk(t,e,r,n){if(t.type==="string"){let i=t.value||(t.description?t.description:"");n?.hex&&(i=Buffer.from(i,"utf8").toString("hex"),r=!1);let o=ju(i,r?e-2:e);return r?`'${o}'`:o}return t.type==="undefined"?"undefined":t.subtype==="null"?"null":t.type==="bigint"||t.type==="number"?op(t,!1,e,n):t.description?Hi(t.description,Math.max(e,1e5)):Hi(String("value"in t?t.value:t.description),e)}function Pk(t,e){let r=new Di(e),n=t.replace(/^function [gs]et /,"function ").replace(/^function [gs]et\(/,"function(").replace(/^[gs]et /,""),i=n.match(/^(async\s+function)/),o=n.startsWith("function*"),s=n.startsWith("*"),a=!o&&n.startsWith("function"),u=n.startsWith("class ")||n.startsWith("class{"),c=n.indexOf("=>"),l=!i&&!o&&!a&&!u&&c>0,f;if(u){f=n.substring(5);let h=/^[^{\s]+/.exec(f.trim()),g="";h&&(g=h[0].trim()||""),m("class",f,g)}else if(i)f=n.substring(i[1].length),m("async \u0192",f,p(f));else if(o)f=n.substring(9),m("\u0192*",f,p(f));else if(s)f=n.substring(1),m("\u0192*",f,p(f));else if(a)f=n.substring(8),m("\u0192",f,p(f));else if(l){let h=n;n.length>lZ&&(h=n.substring(0,c+2)+" {\u2026}"),m("",n,h)}else m("\u0192",n,p(n));return r.build();function p(h){let g=h.indexOf("("),y=h.match(/\)\s*{/),_=y&&y.index||0;if(g!==-1&&y&&_>g){let C=h.substring(0,g).trim()||"",N=h.substring(g,_+1);return C+N}return"()"}function m(h,g,y){r.checkBudget()&&(h.length&&r.append(h+" "),g=g.trim(),g.endsWith(" { [native code] }")&&(g=g.substring(0,g.length-18)),r.budget()>=g.length?r.append(g):r.append(y.replace(/\n/g," ")))}}function Ia(t){let e=t;if(e.type!=="object"||e.subtype==="null")return{title:Lk(e,pZ,!1,void 0)};let r=e.description??e.className??"Error",n=/^\s+at\s/m.exec(r);if(!n){let i=r.lastIndexOf(`
`);return i===-1?{title:r}:{title:r.substring(0,i)}}return{title:r.substring(0,n.index-1),stackTrace:r.substring(n.index+2)}}function op(t,e,r,n){if(t.type==="number"){if("unserializableValue"in t)return t.unserializableValue;let s=t.value||+t.description;return n?.hex?s.toString(16):String(s)}if(t.type==="bigint"){let s=t.unserializableValue||t.description;return n?.hex?BigInt(s.slice(0,-1)).toString(16):s}let i=t,o=typeof i.value=="number"?i.value:+String(i.description);return Hi(String(e?Math.floor(o):o),r)}function yZ(t,e){return ju(String(typeof t.value<"u"?t.value:t.description),e)}function xk(t){let e=[],r=new Set([void 0]),n=new Map;for(let l of t.properties.filter(f=>f.valuePreview)){let f=new Map;f.set(void 0,l.name),n.set(void 0,Math.max(n.get(void 0)||0,l.name.length)),e.push(f),l.valuePreview?.properties.map(p=>{p.value&&(r.add(p.name),f.set(p.name,p.value),n.set(p.name,Math.max(n.get(p.name)||0,p.value.length)))})}for(let l of r.values())l&&n.set(l,Math.max(n.get(l)||0,l.length));let i=Array.from(n.values()).reduce((l,f)=>l+f,0),o=Ak-4-(r.size-1)*3;if(i>o){let l=o/i;for(let f of n.keys()){let p=Math.max(dZ,n.get(f)*l|0);n.set(f,p)}}let s=[];for(let l of r.values())s.push("-".repeat(n.get(l)));let a="[-"+s.join("-|-")+"-]",u=[];u.push(a.replace("[","\u256D").replace(/\|/g,"\u252C").replace("]","\u256E").replace(/-/g,"\u2504"));let c=[];for(let l of r.values())c.push(Ek(l||"",n.get(l)));u.push("\u250A "+c.join(" \u250A ")+" \u250A"),u.push(a.replace("[","\u251C").replace(/\|/g,"\u253C").replace("]","\u2524").replace(/-/g,"\u2504"));for(let l of e){let f=[];for(let p of r.values())f.push(Ek(l.get(p)||"",n.get(p)));u.push("\u250A "+f.join(" \u250A ")+" \u250A")}return u.push(a.replace("[","\u2570").replace(/\|/g,"\u2534").replace("]","\u256F").replace(/-/g,"\u2504")),u.map(l=>Hi(l,Ak)).join(`
`)}var oI=new Map([["",(t,e)=>LH(t,e)],["s",(t,e)=>yZ(t,e.budget)],["i",(t,e)=>op(t,!0,e.budget,void 0)],["d",(t,e)=>op(t,!0,e.budget,void 0)],["f",(t,e)=>op(t,!1,e.budget,void 0)],["c",t=>_k(t.value)],["o",(t,e)=>LH(t,e)],["O",(t,e)=>LH(t,e)]]);function Ek(t,e){return t.length===e?t:t.length<e?t+" ".repeat(e-t.length):Hi(t,e)}var Dk=kt(function(){return this});var CH=class{constructor(e,r){this.protoObj=e;this.cdp=r}async toDap(e){if(!this.protoObj.objectId)return{category:"stderr",output:xH.t("Only objects can be queried")};let r=await this.cdp.Runtime.queryObjects({prototypeObjectId:this.protoObj.objectId,objectGroup:"console"});if(await this.cdp.Runtime.releaseObject({objectId:this.protoObj.objectId}),!r)return{category:"stderr",output:xH.t("Could not query the provided object")};let n;try{n=await Dk({cdp:this.cdp,args:[],objectId:r.objects.objectId,objectGroup:"console",generatePreview:!0})}catch(s){return{category:"stderr",output:xH.t(s.message)}}let i="\x1B[32mobjects: "+wa(n,"repl")+"\x1B[0m";return{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput(i,[n]).id}}};var Tk=/^(\W*at .*\()(.*):(\d+):(\d+)(\))$/,$k=/^(\W*at )(.*):(\d+):(\d+)$/,ns=class{constructor(e){this.stack=e}static isStackLike(e){return Tk.test(e)||$k.test(e)}*[Symbol.iterator](){for(let e of this.stack.split(`
`)){let r=Tk.exec(e)||$k.exec(e);if(!r){yield e+`
`;continue}let[,n,i,o,s,a]=r;n&&(yield n),yield new sI(i,new _t(Number(o),Number(s))),a&&(yield a),yield`
`}}},sI=class{constructor(e,r){this.path=e;this.position=r}toString(){return`${this.path}:${this.position.lineNumber}:${this.position.columnNumber}`}};var $r=$(ut());var sp=$(ae());async function aI(t){let e=await t.uiLocation();return e?e.source.blackboxed()?2:vr(e.source)&&!e.isMapped&&e.unmappedReason===3?1:0:0}var bZ=new Set(["breakpoint","exception","entry"]),vZ=256,is=class{constructor(e,r){this.launchConfig=e;this.logger=r;this._smartStepCount=0}resetSmartStepCount(){this._smartStepCount>0&&(this.logger.verbose("internal",`smartStep: skipped ${this._smartStepCount} steps`),this._smartStepCount=0)}async getSmartStepDirection(e,r){if(!this.launchConfig.smartStep||bZ.has(e.reason))return;let n=(await e.stackTrace.loadFrames(1)).find(Ks(fr));if((n&&await aI(n))===0){this.resetSmartStepCount();return}return this._smartStepCount++>vZ?2:r?.reason==="step"?r.direction:0}};is=W([(0,sp.injectable)(),I(0,(0,sp.inject)(Ee)),I(1,(0,sp.inject)(re))],is);var Mk=kt(function(){return[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")]}),Rk=ra(function(t,e){let r={},n="<<default preview>>";if(typeof this!="object"||!this)return r;for(let[i,o]of Object.entries(this)){if(e)try{let s=e.call(o,n);if(s!==n){r[i]=String(s);continue}}catch(s){r[i]=`<<indescribable>>${JSON.stringify([String(s),i])}`;continue}if(typeof o=="object"&&o){let s;for(let a of runtimeArgs[0])if(typeof o[a]=="function")try{s=o[a]();break}catch{}!s&&!String(o.toString).includes("[native code]")&&(s=String(o)),s&&!s.startsWith("[object ")&&(r[i]=s.length>=t?s.slice(0,t)+"\u2026":s)}}return r}),DH=ra(function(t,e){if(e)try{let r="<<default preview>>",n=e.call(this,r);if(n!==r)return String(n)}catch(r){return`<<indescribable>>${JSON.stringify([String(r),"object"])}`}if(typeof this=="object"&&this){let r;for(let n of[Symbol.for("debug.description"),Symbol.for("nodejs.util.inspect.custom")])if(typeof this[n]=="function")try{r=this[n]();break}catch{}if(!r&&!String(this.toString).includes("[native code]")&&(r=String(this)),r&&!r.startsWith("[object "))return r.length>=t?r.slice(0,t)+"\u2026":r}});var Ce=$(ut()),zk=require("crypto");var dn=class t{constructor(e=process.hrtime()){this.value=e}get ms(){return this.s*1e3}get s(){return this.value[0]+this.value[1]/1e9}elapsed(){return new t().subtract(this)}subtract(e){let r=this.value[1]-e.value[1],n=this.value[0]-e.value[0];return r<0&&(r+=1e9,n--),new t([n,r])}};var Ec=class{constructor(e,r,n,i,o,s){this.launchConfig=e;this.targetInfo=r;this.parentTarget=n;this.targetOriginValue=i;this.cdp=o;this.logger=s;this.onNameChanged=new K().event;this.attached=!1;this.isWaitingForDebugger=!0;o.pause()}id(){return this.targetInfo.targetId}name(){return this.targetInfo.title}fileName(){return this.targetInfo.url}type(){return"node"}parent(){return this.parentTarget}children(){return[]}canStop(){return!1}stop(){}canRestart(){return!1}restart(){}canAttach(){return!this.attached}async attach(){return await this.cdp.Runtime.enable({}),await this.cdp.Debugger.enable({}),this.attached=!0,this.cdp}canDetach(){return this.attached}async detach(){await this.cdp.Debugger.resume({}),await this.cdp.NodeWorker.detach({sessionId:this.targetInfo.targetId}),this.attached=!1}targetOrigin(){return this.targetOriginValue}afterBind(){return this.cdp.resume(),Promise.resolve()}async runIfWaitingForDebugger(){this.isWaitingForDebugger=!1,await this.cdp.Runtime.runIfWaitingForDebugger({})}initialize(){return Promise.resolve()}waitingForDebugger(){return this.isWaitingForDebugger}supportsCustomBreakpoints(){return!1}supportsXHRBreakpoints(){return!1}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?xe(e):e}executionContextName(){return this.targetInfo.title}};var Xe=$(ut()),TH=new Map;function $H(){if(TH.size)return TH;function t(o,s){for(let a of s)a.group=o,TH.set(a.id,a)}function e(o,s){let a=s||o;return{id:"instrumentation:"+o,title:a,group:"",details:u=>{if(o==="webglErrorFired"){let c=u.webglErrorName;return c=c.replace(/^.*(0x[0-9a-f]+).*$/i,"$1"),{short:c,long:Xe.t('Paused on WebGL Error instrumentation breakpoint, error "{0}"',c)}}return o==="scriptBlockedByCSP"&&u.directiveText?{short:Xe.t('CSP violation "{0}"',u.directiveText),long:Xe.t('Paused on Content Security Policy violation instrumentation breakpoint, directive "{0}"',u.directiveText)}:{short:a,long:Xe.t('Paused on instrumentation breakpoint "{0}"',a)}},apply:async(u,c)=>(c?await u.EventBreakpoints.setInstrumentationBreakpoint({eventName:o}):await u.EventBreakpoints.removeInstrumentationBreakpoint({eventName:o}))?!0:!!(c?await u.DOMDebugger.setInstrumentationBreakpoint({eventName:o}):await u.DOMDebugger.removeInstrumentationBreakpoint({eventName:o}))}}function r(o,s,a){let u=s===void 0?"*":typeof s=="string"?[s]:s;return{id:"listener:"+o,title:a||o,group:"",details:c=>{let l=(c.targetName||"*").toLowerCase();return{short:l+"."+o,long:Xe.t('Paused on event listener breakpoint "{0}", triggered on "{1}"',o,l)}},apply:async(c,l)=>{let f=!0;for(let p of u)l?f=f&&!!await c.DOMDebugger.setEventListenerBreakpoint({eventName:o,targetName:p}):f=f&&!!await c.DOMDebugger.removeEventListenerBreakpoint({eventName:o,targetName:p});return f}}}t("Ad Auction Worklet",[e("beforeBidderWorkletBiddingStart",Xe.t("Bidder Bidding Phase Start")),e("beforeBidderWorkletReportingStart",Xe.t("Bidder Reporting Phase Start")),e("beforeSellerWorkletScoringStart",Xe.t("Seller Scoring Phase Start")),e("beforeSellerWorkletReportingStart",Xe.t("Seller Reporting Phase Start"))]),t("Animation",[e("requestAnimationFrame",Xe.t("Request Animation Frame")),e("cancelAnimationFrame",Xe.t("Cancel Animation Frame")),e("requestAnimationFrame.callback",Xe.t("Animation Frame Fired"))]),t("Canvas",[e("canvasContextCreated",Xe.t("Create canvas context")),e("webglErrorFired",Xe.t("WebGL Error Fired")),e("webglWarningFired",Xe.t("WebGL Warning Fired"))]),t("Clipboard",[r("copy"),r("cut"),r("paste"),r("beforecopy"),r("beforecut"),r("beforepaste")]),t("Control",[r("resize"),r("scroll"),r("scrollend"),r("zoom"),r("focus"),r("blur"),r("select"),r("change"),r("submit"),r("reset")]),t("Device",[r("deviceorientation"),r("devicemotion")]),t("DOM Mutation",[r("DOMActivate"),r("DOMFocusIn"),r("DOMFocusOut"),r("DOMAttrModified"),r("DOMCharacterDataModified"),r("DOMNodeInserted"),r("DOMNodeInsertedIntoDocument"),r("DOMNodeRemoved"),r("DOMNodeRemovedFromDocument"),r("DOMSubtreeModified"),r("DOMContentLoaded")]),t("Drag / Drop",[r("drag"),r("dragstart"),r("dragend"),r("dragenter"),r("dragover"),r("dragleave"),r("drop")]),t("Geolocation",[e("Geolocation.getCurrentPosition","getCurrentPosition"),e("Geolocation.watchPosition","watchPosition")]),t("Keyboard",[r("keydown"),r("keyup"),r("keypress"),r("input")]),t("Load",[r("load"),r("beforeunload"),r("unload"),r("abort"),r("error"),r("hashchange"),r("popstate"),r("navigate"),r("navigatesuccess"),r("navigateerror"),r("currentchange"),r("nagivateto"),r("navigatefrom"),r("finish"),r("dispose")]);let n=["audio","video"];t("Media",[r("play",n),r("pause",n),r("playing",n),r("canplay",n),r("canplaythrough",n),r("seeking",n),r("seeked",n),r("timeupdate",n),r("ended",n),r("ratechange",n),r("durationchange",n),r("volumechange",n),r("loadstart",n),r("progress",n),r("suspend",n),r("abort",n),r("error",n),r("emptied",n),r("stalled",n),r("loadedmetadata",n),r("loadeddata",n),r("waiting",n)]),t("Mouse",[r("auxclick"),r("click"),r("dblclick"),r("mousedown"),r("mouseup"),r("mouseover"),r("mousemove"),r("mouseout"),r("mouseenter"),r("mouseleave"),r("mousewheel"),r("wheel"),r("contextmenu")]),t("Notification",[e("Notification.requestPermission","requestPermission")]),t("Parse",[e("Element.setInnerHTML",Xe.t("Set innerHTML")),e("Document.write","document.write")]),t("Picture-in-Picture",[r("enterpictureinpicture","video"),r("leavepictureinpicture","video"),r("resize","PictureInPictureWindow"),r("enter","documentPictureInPicture")]),t("Pointer",[r("pointerover"),r("pointerout"),r("pointerenter"),r("pointerleave"),r("pointerdown"),r("pointerup"),r("pointermove"),r("pointercancel"),r("gotpointercapture"),r("lostpointercapture"),r("pointerrawupdate")]),t("Script",[e("scriptFirstStatement",Xe.t("Script First Statement")),e("scriptBlockedByCSP",Xe.t("Script Blocked by Content Security Policy"))]),t("Timer",[e("setTimeout"),e("clearTimeout"),e("setInterval"),e("clearInterval"),e("setTimeout.callback",Xe.t("setTimeout fired")),e("setInterval.callback",Xe.t("setInterval fired"))]),t("Touch",[r("touchstart"),r("touchmove"),r("touchend"),r("touchcancel")]),t("WebAudio",[e("audioContextCreated",Xe.t("Create AudioContext")),e("audioContextClosed",Xe.t("Close AudioContext")),e("audioContextResumed",Xe.t("Resume AudioContext")),e("audioContextSuspended",Xe.t("Suspend AudioContext"))]),t("Window",[e("DOMWindow.close","window.close")]),t("Worker",[r("message"),r("messageerror")]);let i=["xmlhttprequest","xmlhttprequestupload"];return t("XHR",[r("readystatechange",i),r("load",i),r("loadstart",i),r("loadend",i),r("abort",i),r("error",i),r("progress",i),r("timeout",i)]),TH}var uI=ra(function(t,e){let r=" ".repeat(e),n=`
`;function i(s){if(s instanceof Uint8Array)return Uint8Array;if(s instanceof Uint8ClampedArray)return Uint8ClampedArray;if(s instanceof Uint16Array)return Uint16Array;if(s instanceof Uint32Array)return Uint32Array;if(s instanceof BigUint64Array)return BigUint64Array;if(s instanceof Int8Array)return Int8Array;if(s instanceof Int32Array)return Int32Array;if(s instanceof BigInt64Array)return BigInt64Array;if(s instanceof Float32Array)return Float32Array;if(s instanceof Float64Array)return Float64Array}function o(s,a=0,u=[]){switch(typeof s){case"bigint":return`${s}n`;case"boolean":return s.toString();case"function":{let f=s.toString().replace(/^[^\s]+\(/,"function(").split(/\r?\n/g),p=/^$/;for(let m of f){let h=/^[ \t]+/.exec(m);if(h){p=new RegExp(`^[ \\t]{0,${h[0].length}}`);break}}return f.map((m,h)=>h===0?m:(m=m.replace(p,""),h===f.length-1?r.repeat(a)+m:r.repeat(a+1)+m)).join(n)}case"number":return`${s}`;case"object":if(s===null)return"null";if(u.includes(s))return"[Circular]";if(s instanceof Date)return`"${s.toISOString()}"`;if(typeof Node<"u"&&t instanceof Node)return t.outerHTML;let c=i(s);if(c)return`new ${c.name}([${s.join(", ")}])`;if(s instanceof ArrayBuffer)return`new Uint8Array([${new Uint8Array(s).join(", ")}]).buffer`;if(s instanceof Array)return["[",...s.map(f=>r.repeat(a+1)+o(f,a+1,[...u,s])+","),r.repeat(a)+"]"].join(n);let l=s;return["{",...Object.keys(l).map(f=>r.repeat(a+1)+(/^[$a-z_][0-9a-z_$]*$/i.test(f)?f:JSON.stringify(f))+": "+o(l[f],a+1,[...u,s])+","),r.repeat(a)+"}"].join(n);case"string":return JSON.stringify(s);case"symbol":return s.toString();case"undefined":return"undefined";default:return String(s)}}try{return o(t)}catch{return""+t}}),kk=kt(`
  function(spaces2) {
    const result = ${uI.expr("this","spaces2")};
    return result;
  }
`);var Bn=$(ut());var Aa=$(ae());var Ok=kt(function(){let t={__proto__:this.__proto__},e=Object.getOwnPropertyNames(this);for(let r=0;r<e.length;++r){let n=e[r],i=n>>>0;if(String(i>>>0)===n&&i>>>0!==4294967295)continue;let o=Object.getOwnPropertyDescriptor(this,n);o&&Object.defineProperty(t,n,o)}return t});var Nk=kt(function(t,e){let r={},n=t===-1?0:t,i=e===-1?this.length:t+e;for(let o=n;o<i&&o<this.length;++o){let s=Object.getOwnPropertyDescriptor(this,o);s&&Object.defineProperty(r,o,s)}return r});var Bk=kt(function(t){return t.call(this)});var cI=kt(function(t,e){let{buffer:r,byteLength:n,byteOffset:i}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,o=i+Math.min(t,n),s=Math.max(0,Math.min(e,n-t));return a(new Uint8Array(r,o,s));function a(u){let c="0123456789abcdef",l="";for(let f=0;f<u.length;f++){let p=u[f];l+=c[p>>>4]+c[p&15]}return l}});var lI=kt(function(t,e){let r=u(e),{buffer:n,byteLength:i,byteOffset:o}=this instanceof ArrayBuffer?new DataView(this):this instanceof WebAssembly.Memory?new DataView(this.buffer):this,s=o+Math.min(t,i),a=Math.max(0,Math.min(r.length,i-t));return new Uint8Array(n,s,a).set(r.subarray(0,a)),a;function u(c){let l=new Uint8Array(c.length>>>1);for(let f=0;f<c.length;f+=2)l[f>>>1]=parseInt(c.slice(f,f+2),16);return l}});var lp=(()=>{let t=0,e=2147483647-1;return()=>t++%e+1})(),wI=t=>{if(typeof t=="string")return{value:t};let e=t;return e.objectId?{objectId:e.objectId}:e.unserializableValue?{unserializableValue:e.unserializableValue}:{value:e.value}},wZ=new Set(["typedarray","dataview","arraybuffer","webassemblymemory"]);var Vk=1024,IZ=/^[$a-z_][0-9a-z_$]*$/i,AZ=/^#[0-9a-z_$]+$/i,SZ=t=>t.hasOwnProperty("configurable"),Fk=(t,e,r)=>{let n=nT(t,cm(e),r);return to(n)},Uk="<<indescribable>>",Gk=t=>{if(!t.startsWith(Uk))return t;let e,r;try{[e,r]=JSON.parse(t.slice(Uk.length))}catch{return t}return Bn.t("{0} (couldn't describe: {1})",e,r)},fI=t=>!!t&&typeof t=="object"&&"readMemory"in t&&"writeMemory"in t,jk={PARAMETER:{name:Bn.t("Parameters"),sortOrder:-10},LOCAL:{name:Bn.t("Locals"),sortOrder:-9},GLOBAL:{name:Bn.t("Globals"),sortOrder:-8}},ap=class t{constructor(e,r,n,i,o,s,a){this.cdp=e;this.parent=r;this.vars=i;this.locationProvider=o;this.currentRef=s;this.settings=a;this.name=n.name,this.presentationHint=n.presentationHint,this.sortOrder=n.sortOrder||0}get customDescriptionGenerator(){return this.settings.customDescriptionGenerator}createVariable(e,r,...n){let i=new e(new t(this.cdp,this.currentRef?.(),r,this.vars,this.locationProvider,()=>i,this.settings),...n);return i.id>0&&this.vars.add(i),i}createVariableByType(e,r,n){if(iI(r))return this.createVariable(kH,e,r);if(r.objectId){if(r.subtype==="map"||r.subtype==="set")return this.createVariable(HI,e,r,n);if(!nI.has(r.subtype))return this.createVariable(up,e,r,n)}return this.createVariable(hn,e,r)}async getDescriptionSymbols(e){return this.settings.descriptionSymbols??=Mk({cdp:this.cdp,args:[],objectId:e}).then(r=>({objectId:r.objectId}),()=>({value:[]})),await this.settings.descriptionSymbols}async createObjectPropertyVars(e,r){let n=[];if(this.settings.customPropertiesGenerator){let{result:c,errorDescription:l}=await this.evaluateCodeForObject(e,this.settings.customPropertiesGenerator,[]);c&&c.type!=="undefined"?e=c:n.push([this.createVariable(mI,{name:"",sortOrder:-1},c,c?.description||l||Bn.t("Unknown error"))])}if(!e.objectId)return[];r&&this.cdp.DotnetDebugger.setEvaluationOptions({options:r,type:"variable"});let[i,o,s]=await Promise.all([this.cdp.Runtime.getProperties({objectId:e.objectId,accessorPropertiesOnly:!0,ownProperties:!1,generatePreview:!0}),this.cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0,generatePreview:!0}),this.cdp.Runtime.callFunctionOn({functionDeclaration:Rk.decl(`${Vk}`,this.settings.customDescriptionGenerator||"null"),arguments:[await this.getDescriptionSymbols(e.objectId)],objectId:e.objectId,throwOnSideEffect:!0,returnByValue:!0}).then(c=>c?.result.value||{}).catch(()=>({}))]);if(!i||!o)return[];let a=new Map,u=[];for(let c of i.result){if(c.symbol){u.push(c);continue}c.name==="__proto__"&&o.internalProperties?.some(l=>l.name==="[[Prototype]]")||a.set(c.name,c)}for(let c of o.result)c.get||c.set||(c.symbol?u.push(c):a.set(c.name,c));for(let c of[a.values(),u.values()])for(let l of c)n.push(this.createPropertyVar(l,e,s?.hasOwnProperty(l.name)?Gk(s[l.name]):void 0));for(let c of o.privateProperties??[])n.push(this.createPropertyVar(c,e,void 0,{presentationHint:{visibility:"private"},sortOrder:1}));for(let c of o.internalProperties||[]){if(c.name==="[[StableObjectId]]")continue;let l;c.name==="[[FunctionLocation]]"&&c.value&&c.value.subtype==="internal#location"?l=this.createVariable(hI,{name:c.name,presentationHint:{visibility:"internal",attributes:["readOnly"]},sortOrder:2},c.value):c.value!==void 0&&(l=this.createVariableByType({name:c.name,presentationHint:{visibility:"internal"},sortOrder:2},c.value)),l&&n.push([l])}return Js(await Promise.all(n))}async createPropertyVar(e,r,n,i){let o=[],s=e.get&&e.get.type!=="undefined",a=e.set&&e.set.type!=="undefined",u={name:e.name,presentationHint:{},sortOrder:0,...i};return i||(SZ(e)?(e.enumerable===!1&&!s&&(u.presentationHint.visibility="internal",u.sortOrder=1),(e.writable===!1||s&&!a)&&(u.presentationHint.attributes=["readOnly"])):(u.presentationHint.visibility="private",u.sortOrder=1)),"value"in e&&e.value&&o.push(this.createVariableByType(u,e.value,n)),s?o.push(this.createVariable(bI,u,e.get,r)):a&&o.push(this.createVariable(yI,u,e.set)),o}async evaluateCodeForObject(e,r,n){try{let i=await this.cdp.Runtime.callFunctionOn({objectId:e.objectId,functionDeclaration:r,arguments:n.map(wI)});if(i){if(i.exceptionDetails===void 0)return{result:i.result};if(i&&i.result.description)return{errorDescription:i.result.description}}return{errorDescription:Bn.t("Unknown error")}}catch(i){return{errorDescription:i.stack||i.message||String(i)}}}},EZ=t=>typeof t=="number"||/^[0-9]+$/.test(t),hn=class t{constructor(e,r){this.context=e;this.remoteObject=r;this.id=lp()}get name(){return this.context.name}get sortOrder(){return this.context.sortOrder}get accessor(){let{parent:e,name:r}=this.context;if(e instanceof cp)return e.accessor;if(!(e instanceof t))return this.context.name;let n=e.context.parent;if(n instanceof t){if(this.remoteObject.subtype==="internal#entry")return`[...${n.accessor}.entries()][${+r}]`;if(e.remoteObject.subtype==="internal#entry")return`${e.accessor}[${this.name==="key"?0:1}]`}return EZ(r)?`${e.accessor}[${r}]`:IZ.test(r)?`${e.accessor}.${r}`:e.accessor==="this"&&AZ.test(r)?`${e.accessor}.${r}`:`${e.accessor}[${JSON.stringify(r)}]`}async toDap(e,r){let n=this.context.name;return this.context.parent instanceof Lc&&(n=await this.context.parent.getRename(n)),Promise.resolve({name:n,value:wa(this.remoteObject,e,r),evaluateName:this.accessor,type:this.remoteObject.type,variablesReference:0,presentationHint:this.context.presentationHint})}async setProperty(e,r){let n=await this.context.cdp.Runtime.callFunctionOn({objectId:this.remoteObject.objectId,functionDeclaration:`function(a) { return this[a] = ${r}; ${tt()} }`,arguments:[wI(e)],silent:!0});if(!n)throw new Y(Ne(Bn.t("Unable to set variable value")));if(n.exceptionDetails)throw new Y(Xk(n.exceptionDetails));return this.context.createVariableByType({name:e},n.result)}async getChildren(e){return Promise.resolve([])}},MH=class{constructor(e){this.child=e;this.id=lp()}getChildren(){return Promise.resolve([this.child])}},pI=class extends hn{constructor(r,n,i,o){super(r,{type:i[0]?.type??"string"});this.value=n;this.args=i;this.stackTrace=o}toDap(){return Promise.resolve({name:this.context.name,value:this.value,variablesReference:this.stackTrace||this.args.some(_a)?this.id:0})}getChildren(r){let n=[],{args:i,stackTrace:o}=this;for(let s=0;s<i.length;++s)_a(i[s])&&n.push(this.context.createVariableByType({name:`arg${s}`,sortOrder:s},i[s]));return o&&n.push(this.context.createVariable(dI,{name:"",sortOrder:Number.MAX_SAFE_INTEGER},this.remoteObject,o)),Promise.resolve(n)}},dI=class extends hn{constructor(r,n,i){super(r,n);this.stacktrace=i}async toDap(){return{name:"",value:await this.stacktrace.format(),variablesReference:0}}},hI=class extends hn{constructor(r,n){super(r,n);this.location=n.value}async toDap(){return{name:this.context.name,value:await this.context.locationProvider.renderDebuggerLocation(this.location),variablesReference:0,presentationHint:{visibility:"internal"}}}},mI=class extends hn{constructor(r,n,i){super(r,n);this.message=i}get accessor(){if(!(this.context.parent instanceof hn))throw new Error("ErrorVariable must have a parent Variable");return this.context.parent.accessor}toDap(){return Promise.resolve({name:this.context.name,value:this.message,variablesReference:0})}},RH=Symbol("NoStringRepr"),up=class extends hn{constructor(r,n,i){super(r,n);this.customStringRepr=i}async toDap(r,n){let[i,o]=await Promise.all([await super.toDap(r,n),await this.getValueRepresentation(r)]);return{...i,type:this.remoteObject.className||this.remoteObject.subtype||this.remoteObject.type,variablesReference:this.id,memoryReference:wZ.has(this.remoteObject.subtype)?String(this.id):void 0,value:o}}async getValueRepresentation(r){if(typeof this.customStringRepr=="string")return this.customStringRepr;if(!this.context.parent&&this.remoteObject.objectId&&this.customStringRepr!==RH)try{let n=await this.context.cdp.Runtime.callFunctionOn({functionDeclaration:DH.decl(`${Vk}`,this.context.customDescriptionGenerator||"null"),objectId:this.remoteObject.objectId,returnByValue:!0});if(n?.result.value)return this.customStringRepr=Gk(n.result.value)}catch{this.customStringRepr=RH}return this.context.name==="__proto__"&&this.remoteObject.description||wa(this.remoteObject,r)}async readMemory(r,n){let i=await cI({cdp:this.context.cdp,args:[r,n],objectId:this.remoteObject.objectId,returnByValue:!0});return Buffer.from(i.value,"hex")}async writeMemory(r,n){return(await lI({cdp:this.context.cdp,args:[r,n.toString("hex")],objectId:this.remoteObject.objectId,returnByValue:!0})).value}getChildren(r){return this.context.createObjectPropertyVars(this.remoteObject,r.evaluationOptions)}},Wk="[[Entries]]",HI=class extends up{constructor(r,n){super(r,n,RH);this.baseChildren=ye(()=>super.getChildren({variablesReference:this.id}));this.isMap=n.subtype==="map";let i=n.preview;this.size=Number(i?.properties.find(o=>o.name==="size")?.value)??void 0}async toDap(r){let n=await super.toDap(r);return this.size&&this.size>100&&(n.indexedVariables=this.size),n}async getChildren(r){let n=await this.baseChildren();return[...(await n.find(o=>o.name===Wk)?.getChildren(r)||[]).filter(o=>o.sortOrder===0),...n.filter(o=>o.name!==Wk)]}},kH=class extends up{constructor(r,n){super(r,n,RH);this.length=0;let i=String(n.description).match(/\(([0-9]+)\)/);this.length=i?+i[1]:0}async toDap(r){return{...await super.toDap(r),indexedVariables:this.length>100?this.length:void 0,namedVariables:this.length>100?1:void 0}}async getChildren(r){switch(r?.filter){case"indexed":return this.getArraySlots(r);case"named":return this.getArrayProperties();default:return Promise.all([this.getArrayProperties(),this.getArraySlots()]).then(Js)}}async getArrayProperties(){try{let r=await Ok({cdp:this.context.cdp,args:[],objectId:this.remoteObject.objectId,generatePreview:!0});return this.context.createObjectPropertyVars(r)}catch{return[]}}async getArraySlots(r){let n=r&&typeof r.start<"u"?r.start:-1,i=r&&typeof r.count<"u"?r.count:-1,o;try{o=await Nk({cdp:this.context.cdp,generatePreview:!1,args:[n,i],objectId:this.remoteObject.objectId})}catch{return[]}let s=await this.context.createObjectPropertyVars(o);return o.objectId&&await this.context.cdp.Runtime.releaseObject({objectId:o.objectId}),s}},gI=class extends kH{async toDap(e){return this.remoteObject.preview?{...await super.toDap(e),name:xk(this.remoteObject.preview)}:super.toDap(e)}},cp=class extends hn{constructor(e,r){super(e,r)}getChildren(e){return this.context.createObjectPropertyVars(this.remoteObject)}},yI=class extends cp{async toDap(e,r){return{...await super.toDap(e,r),value:"write-only",variablesReference:this.id}}},bI=class extends cp{constructor(r,n,i){super(r,n);this.parentObject=i}async toDap(r,n){let i=await super.toDap(r,n);return i.variablesReference=this.id,i.presentationHint={...i.presentationHint,lazy:!0},i}async getChildren(r){try{let n=await Bk({cdp:this.context.cdp,objectId:this.parentObject.objectId,args:[new Af(this.remoteObject.objectId)]});return[this.context.createVariableByType({name:this.name,presentationHint:this.context.presentationHint},n)]}catch(n){if(!(n instanceof ta))throw n}return super.getChildren(r)}},OH=class t{constructor(e,r,n){this.context=e;this.variable=r;this.scopeRef=n;this.id=lp();this.sortOrder=0}static{this.presentationHint={attributes:["readOnly"]}}toDap(){return Promise.resolve({name:this.context.name,value:this.variable.description||"",variablesReference:this.variable.getChildren?this.id:0,memoryReference:this.variable.linearMemoryAddress?String(this.id):void 0,presentationHint:this.context.presentationHint})}async getChildren(){return(await this.variable.getChildren?.()||[]).map(r=>this.context.createVariable(t,{name:r.name,presentationHint:t.presentationHint},r.value,this.scopeRef))}async readMemory(e,r){let n=this.variable.linearMemoryAddress;if(n===void 0)return;let i=await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${cI.source}).call(memories[0].buffer, ${+n+e}, ${+r}) ${tt()}`,returnByValue:!0});if(!i)throw new ta({exceptionId:0,text:"No response from CDP",lineNumber:0,columnNumber:0});return Buffer.from(i.result.value,"hex")}async writeMemory(e,r){let n=this.variable.linearMemoryAddress;return n===void 0?0:(await this.context.cdp.Debugger.evaluateOnCallFrame({callFrameId:this.scopeRef.callFrameId,expression:`(${lI.source}).call(memories[0].buffer, ${+n+e}, ${JSON.stringify(r.toString("hex"))}) ${tt()}`,returnByValue:!0}))?.result.value||0}},vI=class{constructor(e,r,n,i){this.context=e;this.kind=r;this.variables=n;this.scopeRef=i;this.id=lp();this.sortOrder=jk[this.kind]?.sortOrder||0}toDap(){return Promise.resolve({name:jk[this.kind]?.name||this.kind,value:"",variablesReference:this.id})}getChildren(){return Promise.all(this.variables.map(async e=>{let r=await e.evaluate();return this.context.createVariable(OH,{name:e.name,presentationHint:OH.presentationHint},r,this.scopeRef)}))}},Lc=class{constructor(e,r,n,i,o){this.remoteObject=e;this.context=r;this.ref=n;this.extraProperties=i;this.renameProvider=o;this.id=lp()}async getChildren(e){let r=await this.context.createObjectPropertyVars(this.remoteObject),n=new Set(r.map(i=>i.name));for(let i of this.extraProperties)n.has(i.name)||r.push(this.context.createVariableByType({name:i.name},i.value));return r}async getRename(e){return(await this.renameProvider.provideOnStackframe(this.ref.stackFrame)).getOriginalName(e,this.ref.stackFrame.rawPosition)||e}async setProperty(e,r){let n=await this.context.cdp.Debugger.evaluateOnCallFrame({expression:`${r} ${tt()}`,callFrameId:this.ref.callFrameId});if(!n)throw new Y(Fe(Bn.t("Invalid expression")));if(n.exceptionDetails)throw new Y(Xk(n.exceptionDetails));return await this.context.cdp.Debugger.setVariableValue({callFrameId:this.ref.callFrameId,scopeNumber:this.ref.scopeNumber,variableName:e,newValue:wI(n.result)}),this.context.createVariableByType({name:e},n.result)}},_I=class{constructor(){this.value=new Map}get(e){return this.value.get(e)}add(e){this.value.set(e.id,e)}clear(){this.value.clear()}},os=class{constructor(e,r,n,i,o){this.renameProvider=e;this.cdp=r;this.dap=n;this.launchConfig=i;this.locationProvider=o;this.vars=new _I;this.contextSettings={customDescriptionGenerator:i.customDescriptionGenerator&&Fk(["defaultValue"],i.customDescriptionGenerator,!1),customPropertiesGenerator:i.customPropertiesGenerator&&Fk([],i.customPropertiesGenerator,!1)}}createDetached(){return new os(this.renameProvider,this.cdp,this.dap,this.launchConfig,this.locationProvider)}clear(){this.vars.clear()}createFloatingVariable(e,r){return this.createFloatingContext().createVariableByType({name:e},r)}createVariableForOutput(e,r,n,i){let o=this.createFloatingContext(),s=r.length===1&&i==="table"?o.createVariable(gI,{name:""},r[0]):r.length===1&&_a(r[0])&&!n?o.createVariableByType({name:""},r[0]):o.createVariable(pI,{name:""},e,r,n),a=new MH(s);return this.vars.add(a),a}createScope(e,r,n){let i=new Lc(e,new ap(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),r,n,this.renameProvider);return this.vars.add(i),i}createWasmScope(e,r,n){let i=new vI(new ap(this.cdp,void 0,{name:""},this.vars,this.locationProvider,()=>i,this.contextSettings),e,r,n);return this.vars.add(i),i}hasVariable(e){return!!this.vars.get(e)}hasMemory(e){return fI(this.vars.get(Number(e)))}async readMemory(e,r,n){let i=this.vars.get(Number(e));return fI(i)?i.readMemory(r,n):void 0}async writeMemory(e,r,n){let i=this.vars.get(Number(e)),o=fI(i)?await i.writeMemory(r,n):0;return o>0&&this.dap.invalidated({areas:["variables"]}),o}async getVariableNames(e){let r=this.vars.get(e.variablesReference);return r?(await r.getChildren(e)).filter(Ks(hn)).map(i=>i.name):[]}async getVariables(e){let r=this.vars.get(e.variablesReference);if(!r)return[];let n=await r.getChildren(e);return(await Promise.all(n.map(o=>o.toDap(r instanceof Lc||r instanceof MH?"repl":"propertyValue",e.format).then(s=>({v:o,dap:s}))))).sort((o,s)=>o.v.sortOrder-s.v.sortOrder||+o.dap.name-+s.dap.name||o.dap.name.localeCompare(s.dap.name)).map(o=>o.dap)}async setVariable(e){let r=this.vars.get(e.variablesReference);if(!e.value)throw new Y(Fe(Bn.t("Cannot set an empty value")));if(r instanceof Lc||r instanceof hn)return await(await r.setProperty(e.name,e.value)).toDap("propertyValue",e.format);throw new Y(Ne(Bn.t("Variable not found")))}createFloatingContext(){return new ap(this.cdp,void 0,{name:"<unnamed>"},this.vars,this.locationProvider,void 0,this.contextSettings)}};os=W([(0,Aa.injectable)(),I(0,(0,Aa.inject)(Ko)),I(1,(0,Aa.inject)(rt)),I(2,(0,Aa.inject)(Pr)),I(3,(0,Aa.inject)(Ee))],os);function Xk(t){let e=t.exception&&Ia(t.exception).title||t.text;return Fe(e)}var NH=class{constructor(e){this.description=e;this.sourceMapLoads=new Map;this.scripts=[]}get isDefault(){return this.description.auxData&&this.description.auxData.isDefault}async remove(e){await Promise.all(this.scripts.map(async r=>{let n=await r.source;n.filterScripts(i=>i.executionContextId!==this.description.id),n.scripts.length||e.removeSource(n)}))}},II=class{constructor(e){this._obj=e;this._dapDeferred=$e()}resolve(){this._dapDeferred.resolve(this._obj)}with(e){return this._dapDeferred.hasSettled()?e(this._obj):this._dapDeferred.promise.then(r=>e(r))}},PZ=50,Kk=(t,e)=>t.sourceReference===e.sourceReference&&_m(t.path||"",e.path||""),xZ=()=>`
//# sourceURL=eval-${(0,zk.randomBytes)(4).toString("hex")}.repl
`,AI=class{enqueue(e,r){if(!this.queue||this.queue.operation!==e){let n=this.queue?.result.then(r,r)??r(),i=this.queue={operation:e,result:n.finally(()=>{this.queue===i&&(this.queue=void 0)})}}return this.queue.result}};var Pc=class t{constructor(e,r,n,i,o,s,a,u,c,l,f,p,m,h){this.target=i;this.logger=s;this.evaluator=a;this.completer=u;this.launchConfig=c;this._breakpointManager=l;this.console=f;this.exceptionPause=p;this._smartStepper=m;this.shutdown=h;this._executionContexts=new Map;this._excludedCallers=[];this.stateQueue=new AI;this._onPausedEmitter=new K;this.disposed=!1;this.debuggerReady=$e();this.onPaused=this._onPausedEmitter.event;this._dap=new II(n),this._sourceContainer=e,this._cdp=r,this.id=t._lastThreadId++,this.replVariables=new os(o,this._cdp,n,c,this),e.onSourceMappedSteppingChange(()=>this.refreshStackTrace()),this._initialize()}static{this._lastThreadId=0}static{this._allThreadsByDebuggerId=new Map}setExcludedCallers(e){this._excludedCallers=e}cdp(){return this._cdp}name(){return this.target.name()}pausedDetails(){return this._pausedDetails}pausedVariables(){return this._pausedVariables}defaultExecutionContext(){for(let e of this._executionContexts.values())if(e.isDefault)return e}resume(){return this.stateQueue.enqueue("resume",async()=>(this._sourceContainer.clearDisabledSourceMaps(),!await this._cdp.Debugger.resume({})&&this._pausedDetails!==void 0?Ne(Ce.t("Unable to resume")):{allThreadsContinued:!1}))}pause(){return this.stateQueue.enqueue("pause",async()=>(this._expectedPauseReason={reason:"pause"},await this._cdp.Debugger.pause({})?{}:Ne(Ce.t("Unable to pause"))))}stepOver(){return this.stateQueue.enqueue("stepOver",async()=>{this._expectedPauseReason={reason:"step",direction:1};let e=await this.getCurrentSkipList(1);return await this._cdp.Debugger.stepOver({skipList:e})?{}:Ne(Ce.t("Unable to step next"))})}stepInto(e){return this.stateQueue.enqueue("stepInto",async()=>{this._waitingForStepIn={lastDetails:this._pausedDetails},this._expectedPauseReason={reason:"step",direction:0};let r=this._pausedDetails?.stepInTargets?.[e];if(r){let n=await this._cdp.Debugger.setBreakpoint({location:r.breakLocation});if(this._waitingForStepIn.intoTargetBreakpoint=n?.breakpointId,await this._cdp.Debugger.resume({}))return{}}else{let n=await this.getCurrentSkipList(0);if(await this._cdp.Debugger.stepInto({breakOnAsyncCall:!0,skipList:n}))return{}}return Ne(Ce.t("Unable to step in"))})}stepOut(){return this.stateQueue.enqueue("stepOut",async()=>(this._expectedPauseReason={reason:"step",direction:2},await this._cdp.Debugger.stepOut({})?{}:Ne(Ce.t("Unable to step out"))))}async getCurrentSkipList(e){if(!this._pausedDetails)return;let[r]=await this._pausedDetails.stackTrace.loadFrames(1);if(!r||!Jk(r))return;let n=await r.getStepSkipList(e);if(n)return On.simplify(n).map(i=>({start:i.begin.base0,end:i.end.base0,scriptId:r.root.scriptId}))}_stackFrameNotFoundError(){return Ne(Ce.t("Stack frame not found"))}_evaluateOnAsyncFrameError(){return Ne(Ce.t("Unable to evaluate on async stack frame"))}async restartFrame(e){let r=this._pausedDetails?.stackTrace.frame(e.frameId)?.root;if(!r)return this._stackFrameNotFoundError();let n=r.callFrameId();return n?await this._cdp.Debugger.restartFrame({callFrameId:n,mode:"StepInto"})?(this._expectedPauseReason={reason:"frame_entry",description:Ce.t("Paused on frame entry")},r.canExplicitlyBeRestarted||await this._cdp.Debugger.stepInto({}),{}):Fe(Ce.t("Frame could not be restarted")):Fe(Ce.t("Cannot restart asynchronous frame"))}async stackTrace(e){return this._pausedDetails?this._pausedDetails.stackTrace.toDap(e):Ne(Ce.t("Thread is not paused"))}async scopes(e){let r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0;return r?r.scopes():this._stackFrameNotFoundError()}async exceptionInfo(){let e=this._pausedDetails&&this._pausedDetails.exception;if(!e)return Ne(Ce.t("Thread is not paused on exception"));let r=Ia(e);return{exceptionId:r.title,breakMode:"all",details:{stackTrace:r.stackTrace,evaluateName:void 0}}}async revealPage(){return this._cdp.Page.bringToFront({}),{}}async completions(e){let r;if(e.frameId!==void 0){if(r=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId)?.root:void 0,!r)return this._stackFrameNotFoundError();if(!r.callFrameId())return this._evaluateOnAsyncFrameError()}if(e.line===1&&e.text.startsWith("cd "))return{targets:this.getExecutionContextCompletions(e)};let n=await this.completer.completions({executionContextId:this._selectedContext?this._selectedContext.description.id:void 0,stackFrame:r,expression:e.text,position:new _t(e.line||1,e.column)});return{targets:[...this.getExecutionContextCompletions(e),...n]}}getExecutionContextCompletions(e){if(e.line&&e.line>1)return[];let r=e.text.slice(0,e.column).trim();return[...this._executionContexts.values()].map(n=>`cd ${this.target.executionContextName(n.description)}`).filter(n=>n.startsWith(r)).map(n=>({label:n,start:0,length:e.text.length}))}async _evaluteWasm(e,r,n){if(!e)return;let i=e.root,o=i.callFrameId(),s=await i.scriptSource?.source;if(!pa(s)||!o)return;let a=await s.sourceMap.value.promise;if(!a.evaluate)return;let u=new at(e instanceof pp?e.inlineFrameIndex:0,i.rawPosition.base0.columnNumber),c=await a.evaluate(o,u,r.expression);if(c)return await n.createFloatingVariable(r.expression,c).toDap(r.context,r.format)}async _evaluteJs(e,r,n){let i=e?.root.callFrameId(),o=r.context==="clipboard"?{expression:uI.expr(r.expression,"2"),includeCommandLineAPI:!0,returnByValue:!0,objectGroup:"console"}:{expression:r.expression,includeCommandLineAPI:!0,objectGroup:"console",generatePreview:!0,timeout:r.context==="hover"?this.getHoverEvalTimeout():void 0};if(r.context==="repl"){if(o.expression=If(o.expression),o.expression.indexOf("await")!==-1){let u=cT(o.expression);u&&(o.expression=u,o.awaitPromise=!0)}o.expression+=xZ()}r.evaluationOptions&&this.cdp().DotnetDebugger.setEvaluationOptions({options:r.evaluationOptions,type:"evaluation"});let s=this.evaluator.evaluate(i?{...o,callFrameId:i}:{...o,contextId:this._selectedContext?this._selectedContext.description.id:void 0},{isInternalScript:!1,stackFrame:e?.root});if(r.context==="repl")return await this._evaluateRepl(r,s,r.format);let a=await s;if(!a)throw new Y(Ne(Ce.t("Unable to evaluate")));if(a.exceptionDetails){let u=a.exceptionDetails.exception?Ia(a.exceptionDetails.exception).title:a.exceptionDetails.text;throw u.startsWith("Uncaught")||(u="Uncaught "+u),new Y(Ne(u))}return n.createFloatingVariable(o.expression,a.result).toDap(r.context,r.format)}async evaluate(e){let r,n;if(e.frameId!==void 0){if(n=this._pausedDetails?this._pausedDetails.stackTrace.frame(e.frameId):void 0,!n)throw new Y(this._stackFrameNotFoundError());if(r=n.root.callFrameId(),!r)throw new Y(this._evaluateOnAsyncFrameError())}if(e.context==="repl"&&e.expression.startsWith("cd ")){let s=e.expression.substring(3).trim();for(let a of this._executionContexts.values())if(this.target.executionContextName(a.description)===s)return this._selectedContext=a,{result:`[${s}]`,variablesReference:0}}let i=r?this._pausedVariables:this.replVariables;if(!i)throw new Y(Ne(Ce.t("Unable to evaluate")));let o=await this._evaluteWasm(n,e,i)??await this._evaluteJs(n,e,i);return{type:o.type,result:o.value,variablesReference:o.variablesReference,namedVariables:o.namedVariables,indexedVariables:o.indexedVariables,memoryReference:o.memoryReference}}getHoverEvalTimeout(){let e=this.launchConfig.timeouts?.hoverEvaluation;if(e===void 0)return 500;if(!(e<=0))return e}async _evaluateRepl(e,r,n){let i=await r;if(!i)return{name:e.expression,value:"",variablesReference:0};if(i.exceptionDetails){let u=await new fp(i.exceptionDetails).toDap(this);throw new Y(CD(u.output))}let o=this._selectedContext&&this.defaultExecutionContext()!==this._selectedContext?`\x1B[33m[${this.target.executionContextName(this._selectedContext.description)}] `:"",s=await this.replVariables.createFloatingVariable(e.expression,i.result).toDap("repl",n),a=EH("repl").budget;return s.variablesReference===0&&s.value.length===a&&setImmediate(()=>this.console.enqueue(this,{toDap:()=>({output:Ce.t("Output has been truncated to the first {0} characters. Run `{1}` to copy the full output.",a,`copy(${e.expression.trim()})`),category:"stdout"})})),{...s,value:`${o}${s.value}`}}_initialize(){this._cdp.Runtime.on("executionContextCreated",e=>{this._executionContextCreated(e.context)}),this._cdp.Runtime.on("executionContextDestroyed",e=>{this._executionContextDestroyed(e.executionContextId)}),this._cdp.Runtime.on("executionContextsCleared",()=>{this.launchConfig.noDebug||this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.replVariables.clear(),this._executionContextsCleared()}),this._cdp.Inspector.on("targetReloadedAfterCrash",()=>{this._breakpointManager.reapply()}),this.launchConfig.outputCapture==="console"&&(this._cdp.Runtime.on("consoleAPICalled",e=>{this.console.dispatch(this,e)}),this._cdp.Runtime.on("exceptionThrown",e=>{this.console.enqueue(this,new fp(e.exceptionDetails))})),this._cdp.Runtime.on("inspectRequested",e=>{e.hints.copyToClipboard?this._copyObjectToClipboard(e.object):e.hints.queryObjects?this.console.enqueue(this,new CH(e.object,this.cdp())):this._revealObject(e.object)}),this._cdp.Debugger.on("paused",async e=>this._onPaused(e)),this._cdp.Debugger.on("resumed",()=>this.onResumed()),this._cdp.Debugger.on("scriptParsed",e=>this._onScriptParsed(e)),this._cdp.Debugger.on("scriptFailedToParse",e=>this._onScriptParsed(e)),this._cdp.Runtime.enable({}),this._cdp.Profiler.enable({}),this.launchConfig.noDebug?this.logger.info("runtime.launch","Running with noDebug, so debug domains are disabled"):this._ensureDebuggerEnabledAndRefreshDebuggerId(),this.target.initialize(),this._dap.with(e=>e.thread({reason:"started",threadId:this.id}))}dapInitialized(){this._dap.resolve()}async getStepInTargets(e){let r=this._pausedDetails;if(!r)return[];let n=r.stackTrace.frames.find(l=>l.frameId===e);if(!(n instanceof fr))return[];let i=await n.uiLocation();if(!i)return[];let o=r.event.callFrames[0].location,[s,a]=await Promise.all([this._breakpointManager.getBreakpointLocations(this,i.source,new _t(i.lineNumber,1),new _t(i.lineNumber+1,1)).then(l=>l.filter(f=>f.breakLocation.lineNumber!==o.lineNumber||f.breakLocation.columnNumber!==o.columnNumber)),i.source.content()]),u=r.stepInTargets?.length||0;r.stepInTargets=r.stepInTargets?.concat(s)||s;let c=a&&new qo(a);return s.map((l,f)=>{let p=l.uiLocations.find(h=>h.source===i.source);if(!p)return;if(!c)return{id:u+f,label:`Column ${p}`,line:p.lineNumber,column:p.columnNumber};let m=lT(a.slice(c.getLineOffset(p.lineNumber-1),c.getLineOffset(p.lineNumber)),p.columnNumber-1);if(m)return{id:u+f,label:m.text,line:p.lineNumber,column:m.start+1,endLine:p.lineNumber,endColumn:m.end+1}}).filter(Gt)}async refreshStackTrace(){this._pausedDetails&&(this._pausedDetails=await this._createPausedDetails(this._pausedDetails.event),this._onThreadResumed(),await this._onThreadPaused(this._pausedDetails))}_executionContextCreated(e){let r=new NH(e);this._executionContexts.set(e.id,r)}_executionContextDestroyed(e){let r=this._executionContexts.get(e);r&&(this._executionContexts.delete(e),r.remove(this._sourceContainer))}_executionContextsCleared(){this._removeAllScripts(),this._breakpointManager.executionContextWasCleared(),this._pausedDetails&&this.onResumed(),this._executionContexts.clear()}_ensureDebuggerEnabledAndRefreshDebuggerId(){this._cdp.Debugger.enable({}).then(e=>{this.debuggerReady.resolve(),e&&t._allThreadsByDebuggerId.set(e.debuggerId,this)}),this.exceptionPause.apply(this._cdp)}async _onPaused(e){let r=e.hitBreakpoints??[],n=e.reason==="Break on start"||e.reason==="debugCommand",i=e.callFrames[0]?.location,o=e.data?.scriptId||i?.scriptId,s=o&&(e.reason==="instrumentation"||this._breakpointManager.isEntrypointBreak(r,o)||r.some(l=>this._pauseOnSourceMapBreakpointIds?.includes(l)));if(this.evaluator.setReturnedValue(e.callFrames[0]?.returnValue),s){this.launchConfig.perScriptSourcemaps==="auto"&&this._shouldEnablePerScriptSms(e)&&await this._enablePerScriptSourcemaps(),e.data&&!n&&(e.data.__rewriteAs="breakpoint");let l=this._expectedPauseReason;if(!(o&&await this._handleSourceMapPause(o,i))){if(!n){if(await this.isCrossThreadStep(e))e.data={...e.data,__rewriteAs:"step"};else if(!await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!0))if(l?.reason==="step"){if(l.direction!==0)return this._cdp.Debugger.resume({})}else return this.resume()}}}else if(!(e.reason==="exception"||e.reason==="promiseRejection"?await this.exceptionPause.shouldPauseAt(e):await this._breakpointManager.shouldPauseAt(e,r,this.target.entryBreakpoint,!1)))return this.resume();let a=this._waitingForStepIn?.intoTargetBreakpoint;if(a){e.hitBreakpoints?.includes(a)?(this._waitingForStepIn.intoTargetBreakpoint=void 0,await this._cdp.Debugger.removeBreakpoint({breakpointId:a}),await this._cdp.Debugger.stepInto({breakOnAsyncCall:!1})):this.resume();return}if(n&&("continueOnAttach"in this.launchConfig&&this.launchConfig.continueOnAttach||this.launchConfig.type==="pwa-extensionHost"||this.target instanceof Ec)){this.resume();return}let u=this._pausedDetails=await this._createPausedDetails(e);if(this._excludedCallers.length&&await this._matchesExcludedCaller(this._pausedDetails.stackTrace)){this.logger.info("runtime","Skipping pause due to excluded caller"),this.resume();return}let c=await this._smartStepper.getSmartStepDirection(u,this._expectedPauseReason);if(this._pausedDetails===u){switch(c){case 0:return this.stepInto();case 2:return this.stepOut();case 1:return this.stepOver();default:}this._waitingForStepIn=void 0,this._pausedVariables=this.replVariables.createDetached(),await this._onThreadPaused(u)}}async _matchesExcludedCaller(e){if(!this._excludedCallers.length)return!1;let r=e.frames[0],n=r instanceof fr&&await r.uiLocation();if(!n)return!1;let i,o,s=[];for(let{caller:a,target:u}of this._excludedCallers)if(!(u.line!==n.lineNumber||u.column!==n.columnNumber)&&(i??=await n.source.toDapShallow(),!!Kk(i,u.source))){o||(o=await e.loadFrames(PZ).then(l=>Promise.all(l.slice(1).filter(Ks(fr)).map(f=>f.uiLocation()))));for(let c=0;c<o.length;c++){let l=o[c];if(!l||l.lineNumber!==a.line||l.columnNumber!==a.column)continue;let f=s[c]??=await l.source.toDapShallow();if(Kk(f,a.source))return!0}}return!1}onResumed(){this._pausedDetails=void 0,this._pausedVariables=void 0,this.evaluator.setReturnedValue(void 0),this._onThreadResumed()}async dispose(){this.disposed=!0,await this.shutdown.shutdown();for(let[e,r]of t._allThreadsByDebuggerId)r===this&&t._allThreadsByDebuggerId.delete(e);this._removeAllScripts(!0),this._executionContextsCleared(),await this._dap.with(e=>e.thread({reason:"exited",threadId:this.id}))}rawLocation(e){if("location"in e){let r=e;return{lineNumber:Math.max(0,r.location.lineNumber)+1,columnNumber:Math.max(0,r.location.columnNumber||0)+1,scriptId:r.location.scriptId}}return{lineNumber:Math.max(0,e.lineNumber)+1,columnNumber:Math.max(0,e.columnNumber||0)+1,scriptId:e.scriptId}}rawLocationToUiLocation(e){if(!e.scriptId||this.disposed||this.launchConfig.noDebug)return;let r=this._sourceContainer.getScriptById(e.scriptId);return r?r.resolvedSource?this._sourceContainer.preferredUiLocation({...r.resolvedSource.offsetScriptToSource(e),source:r.resolvedSource}):r.source.then(n=>this._sourceContainer.preferredUiLocation({...n.offsetSourceToScript(e),source:n})):this.rawLocationToUiLocationWithWaiting(e)}async rawLocationToUiLocationWithWaiting(e){let r=e.scriptId?await this.getScriptByIdOrWait(e.scriptId):void 0;if(!r)return;let n=await r.source;return this._sourceContainer.preferredUiLocation({...n.offsetScriptToSource(e),source:n})}getScriptById(e){return this._sourceContainer.getScriptById(e)}getScriptByIdOrWait(e,r=500){return this._sourceContainer.getScriptById(e)||this.waitForScriptId(e,r)}waitForScriptId(e,r){return new Promise(n=>{let i=this._sourceContainer.onScript(s=>{s.scriptId===e&&(n(s),i.dispose(),clearTimeout(o))}),o=setTimeout(()=>{n(void 0),i.dispose()},r)})}async renderDebuggerLocation(e){let r=this.rawLocation(e),n=await this.rawLocationToUiLocation(r);return n?`@ ${await n.source.prettyName()}:${n.lineNumber}`:`@ VM${r.scriptId||"XX"}:${r.lineNumber}`}async updateCustomBreakpoints(e,r){if(!this.target.supportsCustomBreakpoints())return;this._enabledCustomBreakpoints??=new Set;let n=new Set;for(let o of e)n.add("x"+o);for(let o of r)n.add("e"+o);let i=[];for(let o of n)if(!this._enabledCustomBreakpoints.has(o)){let s=o.slice(1);i.push(o.startsWith("x")?this._cdp.DOMDebugger.setXHRBreakpoint({url:s}):$H().get(s)?.apply(this._cdp,!0))}for(let o of this._enabledCustomBreakpoints)if(!n.has(o)){let s=o.slice(1);i.push(o.startsWith("x")?this._cdp.DOMDebugger.removeXHRBreakpoint({url:s}):$H().get(s)?.apply(this._cdp,!1))}this._enabledCustomBreakpoints=n,await Promise.all(i)}async _createPausedDetails(e){let r=e.reason==="assert"||e.reason==="exception"||e.reason==="promiseRejection"||e.reason==="other"||e.reason==="ambiguous",n=e.hitBreakpoints?.filter(o=>!this._breakpointManager.isEntrypointCdpBreak(o))||[];if((n.length||!r)&&this._sourceContainer.clearDisabledSourceMaps(),e.hitBreakpoints&&this._sourceMapDisabler)for(let o of this._sourceMapDisabler(e.hitBreakpoints))this._sourceContainer.disableSourceMapForSource(o);let i=co.fromDebugger(this,e.callFrames,e.asyncStackTrace,e.asyncStackTraceId);if(e.data?.__rewriteAs==="breakpoint")return{thread:this,event:e,stackTrace:i,reason:"breakpoint",description:Ce.t("Paused on breakpoint")};if(e.data?.__rewriteAs==="step")return{thread:this,event:e,stackTrace:i,reason:"step",description:Ce.t("Paused")};switch(e.reason){case"assert":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Ce.t("Paused on assert")};case"debugCommand":return{thread:this,event:e,stackTrace:i,reason:"pause",description:Ce.t("Paused on debug() call")};case"DOM":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Ce.t("Paused on DOM breakpoint")};case"EventListener":return this._resolveEventListenerBreakpointDetails(i,e);case"exception":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Ce.t("Paused on exception"),exception:e.data};case"promiseRejection":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Ce.t("Paused on {0}","promise rejection"),exception:e.data};case"instrumentation":return e.data&&e.data.scriptId?{thread:this,event:e,stackTrace:i,reason:"step",description:Ce.t("Paused")}:{thread:this,event:e,stackTrace:i,reason:"function breakpoint",description:Ce.t("Paused on instrumentation breakpoint")};case"XHR":return{thread:this,event:e,stackTrace:i,reason:"data breakpoint",description:Ce.t("Paused on XMLHttpRequest or fetch")};case"OOM":return{thread:this,event:e,stackTrace:i,reason:"exception",description:Ce.t("Paused before Out Of Memory exception")};default:if(n.length){let o=!1,s=this.target.entryBreakpoint;if(s&&n.includes(s.cdpId)){o=!0;let a=this._sourceContainer.source({path:st(s.path)});a!==void 0&&(o=!(await this._sourceContainer.currentSiblingUiLocations({lineNumber:e.callFrames[0].location.lineNumber+1,columnNumber:(e.callFrames[0].location.columnNumber||0)+1,source:a}))?.some(c=>this._breakpointManager.hasAtLocation(c)))}return o||this._breakpointManager.registerBreakpointsHit(n),{thread:this,event:e,stackTrace:i,hitBreakpoints:e.hitBreakpoints,reason:o?"entry":"breakpoint",description:Ce.t("Paused on breakpoint")}}return this._expectedPauseReason?{thread:this,event:e,stackTrace:i,description:Ce.t("Paused"),...this._expectedPauseReason}:{thread:this,event:e,stackTrace:i,reason:"pause",description:Ce.t("Paused on debugger statement")}}}_resolveEventListenerBreakpointDetails(e,r){let n=r.data,i=n&&n.eventName||"",o=$H().get(i);if(o){let s=o.details(n);return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:s.short,text:s.long}}return{thread:this,event:r,stackTrace:e,reason:"function breakpoint",description:Ce.t("Paused on event listener")}}_clearDebuggerConsole(){return{category:"console",output:"\x1B[2J"}}_removeAllScripts(e=!1){this._sourceContainer.clear(e)}_onScriptParsed(e){let r={url:e.url,hasSourceURL:!!e.hasSourceURL,embedderName:e.embedderName,scriptId:e.scriptId,executionContextId:e.executionContextId};if(ur(e.url)&&(e.url=xe(e.url)),this._sourceContainer.getScriptById(e.scriptId))return;if(e.url.endsWith(".cdp")){this._sourceContainer.addScriptById(r);return}e.url&&(e.url=this.target.scriptUrlToUrl(e.url));let n=this._executionContexts.get(e.executionContextId);n||(this.logger.info("internal","Creating missing execution context id",e),n=new NH({id:e.executionContextId,name:"<autofilled>",origin:"",uniqueId:String(e.executionContextId)}),this._executionContexts.set(e.executionContextId,n));let o={...r,source:(async()=>{let s=this._sourceContainer.getSourceByOriginalUrl(e.url);if(e.hash&&s?.contentHash===e.hash)return s.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),s;let a=async()=>{let p=await this._cdp.Debugger.getScriptSource({scriptId:e.scriptId});return p?p.scriptSource:void 0},u=e.startLine||e.startColumn?{lineOffset:e.startLine,columnOffset:e.startColumn}:void 0,c=e.url.endsWith("#vscode-extension")?{lineOffset:2,columnOffset:0}:void 0,l;e.sourceMapURL&&(l=Kt(e.sourceMapURL)?e.sourceMapURL:e.url&&Wo(e.url,e.sourceMapURL)||e.url,l||this._dap.with(p=>wD(p,`Could not load source map from ${e.sourceMapURL}`)));let f=await this._sourceContainer.addSource(e,a,l,u,c,!e.hasSourceURL&&this.launchConfig.enableContentValidation?e.hash:void 0);return f.addScript({scriptId:e.scriptId,url:e.url,embedderName:e.embedderName,hasSourceURL:!!e.hasSourceURL,executionContextId:e.executionContextId}),f})()};o.source.then(s=>o.resolvedSource=s),n.scripts.push(o),this._sourceContainer.addScriptById(o),(e.sourceMapURL||e.scriptLanguage==="WebAssembly")&&this._getOrStartLoadingSourceMaps(o)}async _handleSourceMapPause(e,r){this._pausedForSourceMapScriptId=e;let n=this._sourceContainer.sourceMapTimeouts().sourceMapMinPause,i=n+this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause,o=this._sourceContainer.getScriptById(e);if(!o)return this._pausedForSourceMapScriptId=void 0,!1;let s=new dn,a=await Promise.race([this._getOrStartLoadingSourceMaps(o),we(i)]),u=s.elapsed().ms,c=this._sourceContainer.sourceMapTimeouts().sourceMapCumulativePause-Math.max(u-n,0);this._sourceContainer.setSourceMapTimeouts({...this._sourceContainer.sourceMapTimeouts(),sourceMapCumulativePause:c}),this.logger.verbose("internal","Blocked execution waiting for source-map",{timeSpentWallClockInMs:u,sourceMapCumulativePause:c}),a||this._dap.with(p=>p.output({category:"stderr",output:Ce.t("WARNING: Processing source-maps of {0} took longer than {1} ms so we continued execution without waiting for all the breakpoints for the script to be set.",o.url||o.scriptId,i)})),console.assert(this._pausedForSourceMapScriptId===e),this._pausedForSourceMapScriptId=void 0;let l=r?.lineNumber||0,f=r?.columnNumber;return!!a?.map(no).some(p=>p.lineNumber===l&&(f===void 0||f===p.columnNumber))}_getOrStartLoadingSourceMaps(e){let r=this._executionContexts.get(e.executionContextId);if(!r)return Promise.resolve([]);let n=r.sourceMapLoads.get(e.scriptId);if(n)return n;let i=e.source.then(o=>this._sourceContainer.waitForSourceMapSources(o)).then(o=>o.length&&this._scriptWithSourceMapHandler?this._scriptWithSourceMapHandler(e,o):[]);return r.sourceMapLoads.set(e.scriptId,i),i}async _revealObject(e){if(e.type!=="function"||e.objectId===void 0)return;let r=await this._cdp.Runtime.getProperties({objectId:e.objectId,ownProperties:!0});if(r)for(let n of r.internalProperties||[]){if(n.name!=="[[FunctionLocation]]"||!n.value||n.value.subtype!=="internal#location")continue;let i=await this.rawLocationToUiLocation(this.rawLocation(n.value.value));i&&this._sourceContainer.revealUiLocation(i);break}}async _copyObjectToClipboard(e){if(!e.objectId){this._dap.with(r=>r.copyRequested({text:wa(e,"copy")}));return}try{let r=await kk({cdp:this.cdp(),objectId:e.objectId,args:[2],silent:!0,returnByValue:!0});this._dap.with(n=>n.copyRequested({text:r.value}))}catch{}finally{this.cdp().Runtime.releaseObject({objectId:e.objectId}).catch(()=>{})}}async _onThreadPaused(e){this._expectedPauseReason=void 0,this._onPausedEmitter.fire(e);let r;e.hitBreakpoints&&(r=await Promise.race([we(1e3).then(()=>{}),Promise.all(e.hitBreakpoints.map(n=>this._breakpointManager._resolvedBreakpoints.get(n)).filter(Ks(cn)).map(n=>n.untilSetCompleted().then(()=>n.dapId)))])),await we(0),this._dap.with(n=>n.stopped({reason:e.reason,description:e.description,threadId:this.id,text:e.text,hitBreakpointIds:r,allThreadsStopped:!1}))}_onThreadResumed(){this._dap.with(e=>e.continued({threadId:this.id,allThreadsContinued:!1}))}isCrossThreadStep(e){if(!e.asyncStackTraceId||!e.asyncStackTraceId.debuggerId)return!1;let r=t.threadForDebuggerId(e.asyncStackTraceId.debuggerId);if(!r||!r._waitingForStepIn?.lastDetails)return!1;let n=r._waitingForStepIn.lastDetails.stackTrace;return r._cdp.Debugger.getStackTrace({stackTraceId:e.asyncStackTraceId}).then(i=>!i||!i.stackTrace.callFrames.length||!fr.fromRuntime(r,i.stackTrace.callFrames[0],!1).equivalentTo(n.frames[0])?!1:(r._waitingForStepIn=void 0,!0))}async setScriptSourceMapHandler(e,r){this._scriptWithSourceMapHandler=r;let n=e&&this._sourceContainer.sourceMapTimeouts().sourceMapMinPause&&r;if(n&&!this._pauseOnSourceMapBreakpointIds?.length){await this.debuggerReady.promise;let i=await Promise.all([this._cdp.Debugger.setInstrumentationBreakpoint({instrumentation:"beforeScriptWithSourceMapExecution"}),this._cdp.Debugger.setBreakpointByUrl({lineNumber:0,columnNumber:0,urlRegex:"\\.[wW][aA][sS][mM]"})]);this._pauseOnSourceMapBreakpointIds=i.map(o=>o?.breakpointId).filter(Gt)}else if(!n&&this._pauseOnSourceMapBreakpointIds?.length){let i=this._pauseOnSourceMapBreakpointIds;this._pauseOnSourceMapBreakpointIds=void 0,await Promise.all(i.map(o=>this._cdp.Debugger.removeBreakpoint({breakpointId:o})))}return!!this._pauseOnSourceMapBreakpointIds?.length}async _enablePerScriptSourcemaps(){await this._breakpointManager.updateEntryBreakpointMode(this,1),await this.setScriptSourceMapHandler(!1,this._scriptWithSourceMapHandler)}_shouldEnablePerScriptSms(e){return e.data?.url.includes("@vite/client")?!0:e.reason!=="instrumentation"||!Kt(e.data?.sourceMapURL)?!1:e.data.url?.startsWith("webpack")||e.data.url?.startsWith("ng:")}setSourceMapDisabler(e){this._sourceMapDisabler=e}static threadForDebuggerId(e){return t._allThreadsByDebuggerId.get(e)}async replacePathsInStackTrace(e){let r=[];for(let i of new ns(e)){if(typeof i=="string"){r.push(i);continue}let o=this._sourceContainer.getSourceByOriginalUrl(xe(i.path))||this._sourceContainer.getSourceByOriginalUrl(i.path);if(!o){r.push(i.toString());continue}r.push(this._sourceContainer.preferredUiLocation({columnNumber:i.position.base1.columnNumber,lineNumber:i.position.base1.lineNumber,source:o}).then(({source:s,lineNumber:a,columnNumber:u})=>`${s.absolutePath}:${a}:${u}`))}return(await Promise.all(r)).join("")}};var Jk=t=>typeof t.uiLocation=="function",co=class t{constructor(e){this.thread=e;this.frames=[];this._frameById=new Map;this._lastInlineWasmExpanded=Promise.resolve(0);this._lastFrameThread=e}static fromRuntime(e,r){let n=new t(e);for(let i of r.callFrames)i.url.endsWith(".cdp")||n.frames.push(fr.fromRuntime(e,i,!1));return r.parentId?(n._asyncStackTraceId=r.parentId,console.assert(!r.parent)):n._appendStackTrace(e,r.parent),n}static fromDebugger(e,r,n,i){let o=new t(e);for(let s of r)o._appendFrame(fr.fromDebugger(e,s));return i?(o._asyncStackTraceId=i,console.assert(!n)):o._appendStackTrace(e,n),o}async loadFrames(e,r){return await this.expandAsyncStack(e,r),await this.expandWasmFrames(),this.frames}async expandAsyncStack(e,r){for(;this.frames.length<e&&this._asyncStackTraceId;){if(this._asyncStackTraceId.debuggerId&&(this._lastFrameThread=Pc.threadForDebuggerId(this._asyncStackTraceId.debuggerId)),!this._lastFrameThread){this._asyncStackTraceId=void 0;break}r&&this._lastFrameThread.cdp().DotnetDebugger.setEvaluationOptions({options:{noFuncEval:r},type:"stackFrame"});let n=await this._lastFrameThread.cdp().Debugger.getStackTrace({stackTraceId:this._asyncStackTraceId});this._asyncStackTraceId=void 0,n&&this._appendStackTrace(this._lastFrameThread,n.stackTrace)}}expandWasmFrames(){return this._lastInlineWasmExpanded=this._lastInlineWasmExpanded.then(async e=>{for(;e<this.frames.length;e++){let r=this.frames[e];if(!(r instanceof fr))continue;let n=r.scriptSource?.resolvedSource;if(!pa(n))continue;let i=await n.sourceMap.value.promise;if(!i.getFunctionStack)continue;let o=await i.getFunctionStack(r.rawPosition);if(o.length===0)continue;let s=[];for(let a=0;a<o.length;a++){let u=new pp({source:n,thread:this.thread,inlineFrameIndex:a,name:o[a].name,root:r});this._frameById.set(u.frameId,u),s.push(u)}this._spliceFrames(e,1,...s),e+=o.length-1}return e})}frame(e){return this._frameById.get(e)}_appendStackTrace(e,r){for(console.assert(!r||!this._asyncStackTraceId);r;){if(r.description==="async function"&&r.callFrames.length&&r.callFrames.shift(),r.callFrames.length){this._appendFrame(new BH(r.description||"async"));for(let n of r.callFrames)this._appendFrame(fr.fromRuntime(e,n,!0))}r.parentId&&(this._asyncStackTraceId=r.parentId,console.assert(!r.parent)),r=r.parent}}_spliceFrames(e,r,...n){this.frames.splice(e,r,...n);for(let i of n)i instanceof BH||this._frameById.set(i.frameId,i)}_appendFrame(e){this._spliceFrames(this.frames.length,0,e)}async formatAsNative(){return await this.formatWithMapper(e=>e.formatAsNative())}async format(){return await this.formatWithMapper(e=>e.format())}async formatWithMapper(e){let r=await this.loadFrames(50);for(let i=r.length-1;i>=0;i--){let o=r[i];if(o instanceof fr&&o.isReplEval){r=r.slice(0,i+1);break}}let n=r.map(e);return(await Promise.all(n)).join(`
`)+`
`}async toDap(e){let r=e.startFrame||0,n=(e.levels||50)+r,i=await this.loadFrames(n,e.noFuncEval);n=Math.min(i.length,e.levels?n:i.length);let o=[];for(let s=r;s<n;s++)o.push(i[s].toDap(e.format));return{stackFrames:await Promise.all(o),totalFrames:this._asyncStackTraceId?1e6:i.length}}},EI=Nh(),BH=class{constructor(e="async"){this.label=e;this.frameId=EI()}async toDap(){return{name:this.label,id:0,line:0,column:0,presentationHint:"label"}}async formatAsNative(){return`    --- ${this.label} ---`}async format(){return`\u25C0 ${this.label} \u25B6`}},Yk="<anonymous>",CZ=/^class\s+(.+) {($|\n)/;async function DZ(t,e,r){if(!e.functionName)return Yk;if(e.functionName.includes("."))return e.functionName;let n;if(e.this.objectId&&r&&(n=(await t.cdp().Runtime.callFunctionOn({functionDeclaration:DH.decl("64","null"),objectId:e.this.objectId,returnByValue:!0}))?.result.value),!n&&e.this.description){n=e.this.description;let s=CZ.exec(n);s&&(n=s[1])}if(!n)return e.functionName;let i=n.indexOf(`
`);i!==-1&&(n=n.slice(0,i).trim());let o=e.functionName;return n===o?`${n}.constructor`:n?`${n}.${o}`:o}function TZ(t){return t.functionName||Yk}var fr=class t{constructor(e,r,n,i=!1){this.callFrame=r;this.isAsync=i;this.frameId=EI();this.root=this;this.getLocationInfo=ye(async()=>{let e=this.uiLocation(),r=await aI(this),n=this.overrideName||("this"in this.callFrame?await DZ(this._thread,this.callFrame,r===0):TZ(this.callFrame));return{isSmartStepped:r,name:n,uiLocation:await e}});this.completions=ye(async()=>{if(!this._scope)return[];let e=this._thread.pausedVariables();if(!e)return[];let r=[];for(let i=0;i<this._scope.chain.length;i++){let o=this._scopeVariable(i,this._scope);o&&r.push(e.getVariableNames({variablesReference:o.id}).then(s=>s.map(a=>({label:a,type:"property"}))))}let n=await Promise.all(r);return[].concat(...n)});this._rawLocation=n,this.uiLocation=ye(()=>e.rawLocationToUiLocation(n)),this._thread=e;let o=n.scriptId?e.getScriptById(n.scriptId):void 0;this.isReplEval=o?o.url.endsWith(".repl"):!1}get rawPosition(){return new _t(this._rawLocation.lineNumber,this._rawLocation.columnNumber)}static fromRuntime(e,r,n){return new t(e,r,e.rawLocation(r),n)}static fromDebugger(e,r){let n=new t(e,r,e.rawLocation(r));return n._scope={chain:r.scopeChain,thisObject:r.this,returnValue:r.returnValue,variables:new Array(r.scopeChain.length).fill(void 0),callFrameId:r.callFrameId},n}get scriptId(){return"scriptId"in this.callFrame?this.callFrame.scriptId:this.callFrame.location.scriptId}get scriptSource(){return this._thread._sourceContainer.getScriptById(this.scriptId)}get canExplicitlyBeRestarted(){return!!this.callFrame.canBeRestarted}equivalentTo(e){return e instanceof t&&e._rawLocation.columnNumber===this._rawLocation.columnNumber&&e._rawLocation.lineNumber===this._rawLocation.lineNumber&&e._rawLocation.scriptId===this._rawLocation.scriptId}callFrameId(){return this._scope?this._scope.callFrameId:void 0}async scopes(){let e=this._scope;if(!e)throw new Y(DD());return{scopes:(await Promise.all(e.chain.map(async(n,i)=>{let o="",s;switch(n.type){case"global":o=$r.t("Global");break;case"local":o=$r.t("Local"),s="locals";break;case"with":o=$r.t("With Block"),s="locals";break;case"closure":o=$r.t("Closure"),s="arguments";break;case"catch":o=$r.t("Catch Block"),s="locals";break;case"block":o=$r.t("Block"),s="locals";break;case"script":o=$r.t("Script");break;case"eval":o=$r.t("Eval");break;case"module":o=$r.t("Module");break;default:o=n.type.substr(0,1).toUpperCase()+n.type.substr(1);break}n.name&&n.type==="closure"?o=$r.t("Closure ({0})",n.name):n.name&&(o=`${o}: ${n.name}`);let a=this._scopeVariable(i,e);if(!a)return;let u={name:o,presentationHint:s,expensive:n.type==="global",variablesReference:a.id};if(n.startLocation){let c=this._thread.rawLocation(n.startLocation),l=await this._thread.rawLocationToUiLocation(c);if(u.line=(l||c).lineNumber,u.column=(l||c).columnNumber,l&&(u.source=await l.source.toDap()),n.endLocation){let f=this._thread.rawLocation(n.endLocation),p=await this._thread.rawLocationToUiLocation(f);u.endLine=(p||f).lineNumber,u.endColumn=(p||f).columnNumber}}return u}))).filter(Gt)}}getStepSkipList(e){return Promise.resolve(void 0)}async toDap(e){let{isSmartStepped:r,name:n,uiLocation:i}=await this.getLocationInfo(),o=i?await i.source.toDap():void 0,s=r?"deemphasize":"normal";r&&o&&(o.origin=r===1?$r.t("Skipped by smartStep"):$r.t("Skipped by skipFiles"));let a=(i||this._rawLocation).lineNumber,u=(i||this._rawLocation).columnNumber,c=n;return o&&e&&(e.module&&(c+=` [${o.name}]`),e.line&&(c+=` Line ${a}`)),{id:this.frameId,name:c,line:a,column:u,source:o,presentationHint:s,canRestart:this.callFrame.canBeRestarted??!this.isAsync}}async formatAsNative(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.existingAbsolutePath()||await r?.source.prettyName()||this.callFrame.url,{lineNumber:i,columnNumber:o}=r||this._rawLocation;return`    at ${e} (${n}:${i}:${o})`}async format(){let{name:e,uiLocation:r}=await this.getLocationInfo(),n=await r?.source.prettyName()||"<unknown>",i=r||this._rawLocation,o=`${e} @ ${n}:${i.lineNumber}`;return i.columnNumber>1&&(o+=`:${i.columnNumber}`),o}_scopeVariable(e,r){let n=r.variables[e];if(n)return n;let i={stackFrame:this,callFrameId:r.callFrameId,scopeNumber:e},o=[];e===0&&(r.thisObject&&o.push({name:"this",value:r.thisObject}),r.returnValue&&o.push({name:$r.t("Return value"),value:r.returnValue}));let s=this._thread.pausedVariables();if(!s)return;let a=s.createScope(r.chain[e].object,i,o);return r.variables[e]=a}},SI={scopes:[]},pp=class{constructor(e){this.frameId=EI();this.name=e.name,this.root=e.root,this.thread=e.thread,this.source=e.source,this.inlineFrameIndex=e.inlineFrameIndex,this.wasmPosition=new at(this.inlineFrameIndex,this.root.rawPosition.base0.columnNumber),this.uiLocation=ye(()=>e.thread._sourceContainer.preferredUiLocation({columnNumber:e.root.rawPosition.base1.columnNumber,lineNumber:e.inlineFrameIndex+1,source:e.source}))}async formatAsNative(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return`    at ${this.name} (${n.url}:${r}:${e})`}async format(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation(),i=await n.prettyName()||"<unknown>";return`${this.name} @ ${i}:${r}:${e}`}async toDap(){let{columnNumber:e,lineNumber:r,source:n}=await this.uiLocation();return Promise.resolve({id:this.frameId,name:this.name,column:e,line:r,source:await n.toDapShallow()})}async getStepSkipList(e){let r=this.source.sourceMap.value.settledValue;if(!r?.getStepSkipList)return;let n=await this.uiLocation();return n?r.getStepSkipList(e,this.wasmPosition,n.source.compiledToSourceUrl.get(this.source),new _t(n.lineNumber,n.columnNumber)):r.getStepSkipList(e,this.root.rawPosition)}async scopes(){let e=this.source.sourceMap.value.settledValue,r=this.root.callFrameId();if(!e||!r)return SI;let n=await e.getVariablesInScope?.(r,this.wasmPosition);if(!n)return SI;let i=this.thread.pausedVariables();if(!i)return SI;let o={stackFrame:this.root,callFrameId:r,scopeNumber:0};return{scopes:await Promise.all([...HT(n,s=>s.scope)].map(([s,a])=>i.createWasmScope(s,a,o).toDap("propertyValue").then(u=>({name:u.name,variablesReference:u.variablesReference,expensive:s!=="LOCAL"}))))}}};var Qk=$(ut());var Sa=class{constructor(e){this.event=e;this.stackTrace=ye(e=>this.event.stackTrace?co.fromRuntime(e,this.event.stackTrace):void 0);this.getUiLocation=ye(async e=>{let r=this.stackTrace(e);if(!r)return;let n;for(let i of r.frames){if(!(i instanceof fr))continue;let o=await i.uiLocation();if(o&&(n||(n=o),!o.source.blackboxed()))return{source:await o.source.toDap(),line:o.lineNumber,column:o.columnNumber}}if(n)return{source:await n.source.toDap(),line:n.lineNumber,column:n.columnNumber}})}formatDefaultString(e,r,n=!1){let o=r.length>1&&r[0].type==="string"?tI(r[0].value,r.slice(1),oI):tI("",r,oI),s=o.result+`
`;return o.usedAllSubs&&!r.some(_a)?{output:s}:this.formatComplexStringOutput(e,s,r,n)}async formatComplexStringOutput(e,r,n,i){(n.some(s=>s.subtype==="error")||ns.isStackLike(r))&&(await this.getUiLocation(e),r=await e.replacePathsInStackTrace(r),i=!0);let o=e.replVariables.createVariableForOutput(r,n,i?this.stackTrace(e):void 0);return{output:r,variablesReference:o.id}}},FH=class extends Sa{async toDap(e){return this.event.args[0]?.value==="console.assert"&&(this.event.args[0].value=Qk.t("Assertion failed")),{category:"stderr",...await this.formatDefaultString(e,this.event.args,!0),...await this.getUiLocation(e)}}},Ea=class extends Sa{constructor(r,n,i){super(r);this.includeStack=n;this.category=i}async toDap(r){return{category:this.category,...await this.formatDefaultString(r,this.event.args,this.includeStack),...await this.getUiLocation(r)}}},ss=class extends Ea{constructor(e){super(e,!1,"stdout")}},UH=class extends Ea{constructor(e){super(e,!0,"stdout")}},jH=class extends Ea{constructor(e){super(e,!0,"stderr")}},WH=class extends Ea{constructor(e){super(e,!0,"stderr")}},qH=class extends Sa{async toDap(e){return{category:"stdout",group:this.event.type==="startGroupCollapsed"?"startCollapsed":"start",...await this.formatDefaultString(e,this.event.args),...await this.getUiLocation(e)}}},VH=class extends Ea{constructor(e){super(e,!1,"stdout")}async toDap(e){return this.event.args[0]?.preview?{category:"stdout",output:"",variablesReference:e.replVariables.createVariableForOutput("",this.event.args,void 0,this.event.type).id,...await this.getUiLocation(e)}:super.toDap(e)}};var fp=class extends Sa{constructor(){super(...arguments);this.stackTrace=ye(r=>{if(this.event.stackTrace)return co.fromRuntime(r,this.event.stackTrace);if(this.event.scriptId)return co.fromRuntime(r,{callFrames:[{functionName:"(program)",lineNumber:this.event.lineNumber,columnNumber:this.event.columnNumber,scriptId:this.event.scriptId,url:this.event.url||""}]})})}async toDap(r){let n=this.event.exception?Ia(this.event.exception):{title:""},i=n.title;i.startsWith("Uncaught")||(i=`Uncaught ${this.event.exception?.className??"Error"} `+i);let o=this.stackTrace(r),s=this.event.exception&&!n.stackTrace?[this.event.exception]:[];return ns.isStackLike(i)?i=await r.replacePathsInStackTrace(i):o&&(i+=`
`+await o.formatAsNative()),{category:"stderr",output:i,variablesReference:o||s.length?r.replVariables.createVariableForOutput(i,s,o).id:void 0,...await this.getUiLocation(r)}}};var GH=Symbol("IConsole");var hp=$(ae());var Zk=$(ae());var as=Symbol("IShutdownParticipants"),xc=class{constructor(){this.participants=[]}register(e,r){if(this.shutdownStage!==void 0&&this.shutdownStage>=e)return r(),sc;for(;this.participants.length<=e;)this.participants.push(new Set);return this.participants[e].add(r),{dispose:()=>this.participants[e].delete(r)}}async shutdown(){for(this.shutdownStage=0;this.shutdownStage<this.participants.length;this.shutdownStage++)await Promise.all([...this.participants[this.shutdownStage]].map(e=>e()))}};xc=W([(0,Zk.injectable)()],xc);var dp=class{toDap(){return{category:"console",output:"\x1B[2J"}}},XH=class{toDap(){return{category:"stdout",output:"",group:"end"}}};var KH=class{constructor(e){this.sink=e;this.q=[];this.disposed=!1;this.onDrainedEmitter=new K;this.onDrained=this.onDrainedEmitter.event}get length(){return this.q.length}enqueue(e){this.disposed||(this.q.push(new LI(e)),this.q.length===1&&this.process())}dispose(){this.disposed=!0,this.q=[]}async process(){let e=this.q.findIndex(r=>r.value===t1);e===0?await this.q[0].wait:e===-1?(this.sink(e1(this.q)),this.q=[]):(this.sink(e1(this.q.slice(0,e))),this.q=this.q.slice(e)),this.q.length?this.process():this.onDrainedEmitter.fire()}},e1=t=>t.map(e=>e.value).filter(e=>e!==r1),t1=Symbol("unsettled"),r1=Symbol("unsettled"),LI=class{constructor(e){this.value=t1;e instanceof Promise?this.wait=e.then(r=>{this.value=r},()=>{this.value=r1}):(this.value=e,this.wait=Promise.resolve())}};var MZ=new Set(["group","assert","count"]),Cc=class{constructor(e,r){this.dap=e;this.isDirty=!1;this.queue=new KH(e=>{for(let r of e)this.dap.output(r)});this.onDrained=this.queue.onDrained;r.register(0,async()=>{this.length&&await new Promise(n=>this.onDrained(n)),this.dispose()})}get length(){return this.queue.length}dispose(){this.queue.dispose()}dispatch(e,r){let n=this.parse(r);n&&this.enqueue(e,n)}enqueue(e,r){if(!(r instanceof dp))this.isDirty=!0;else if(this.isDirty)this.isDirty=!1;else return;this.queue.enqueue(r.toDap(e))}parse(e){if(e.type==="log"){let r=e.stackTrace?.callFrames[0];if(r&&r.url==="internal/console/constructor.js"&&MZ.has(r.functionName))return}switch(e.type){case"clear":return new dp;case"endGroup":return new XH;case"assert":return new FH(e);case"table":return new VH(e);case"startGroup":case"startGroupCollapsed":return new qH(e);case"debug":case"log":case"info":return new ss(e);case"trace":return new UH(e);case"error":return new WH(e);case"warning":return new jH(e);case"dir":case"dirxml":return new ss(e);case"count":return new ss(e);case"profile":case"profileEnd":return new ss(e);case"timeEnd":return new ss(e);default:try{kh(e.type,"unknown console message type")}catch{}}}};Cc=W([(0,hp.injectable)(),I(0,(0,hp.inject)(Pr)),I(1,(0,hp.inject)(as))],Cc);var La=$(ae()),o1=require("os"),s1=require("path");var PI=require("path"),n1=(0,PI.join)(__dirname,"diagnosticTool.js"),i1=(0,PI.join)(__dirname,"diagnosticTool.css");var Ti=Symbol("ITarget"),_r=Symbol("ILauncher");var us=class{constructor(e,r,n,i){this.fs=e;this.sources=r;this.breakpoints=n;this.target=i}async generateObject(){let[e]=await Promise.all([this.dumpSources()]);return{breakpoints:this.dumpBreakpoints(),sources:e,config:this.target.launchConfig}}async generateHtml(e=(0,s1.join)((0,o1.tmpdir)(),"js-debug-diagnostics.html")){return await this.fs.writeFile(e,`<!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <style>${await this.fs.readFile(i1,"utf-8")}<</style>
      </head>
      <body>
        <script>window.DUMP=${JSON.stringify(await this.generateObject())}</script>
        <script>${await this.fs.readFile(n1,"utf-8")}</script>
      </body>
      </html>`),e}dumpBreakpoints(){let e=[];for(let r of[this.breakpoints.appliedByPath,this.breakpoints.appliedByRef])for(let n of r.values())for(let i of n){let o=i.diagnosticDump();e.push({source:o.source,params:o.params,cdp:o.cdp.map(s=>s.state===1?{...s,uiLocations:s.uiLocations.map(a=>this.dumpUiLocation(a))}:{...s,done:void 0})})}return e}dumpSources(){let e=[],r=0;for(let n of this.sources.sources)e.push((async()=>({uniqueId:r++,url:n.url,sourceReference:n.sourceReference,absolutePath:n.absolutePath,actualAbsolutePath:await n.existingAbsolutePath(),scriptIds:n.scripts.map(i=>i.scriptId),prettyName:await n.prettyName(),compiledSourceRefToUrl:n instanceof dt?[...n.compiledToSourceUrl.entries()].map(([i,o])=>[i.sourceReference,o]):void 0,sourceMap:fa(n)?{url:n.sourceMap.metadata.sourceMapUrl,metadata:n.sourceMap.metadata,sources:Yi(Object.fromEntries(n.sourceMap.sourceByUrl),i=>i.sourceReference)}:void 0}))());return Promise.all(e)}dumpUiLocation(e){return{lineNumber:e.lineNumber,columnNumber:e.columnNumber,sourceReference:e.source.sourceReference}}};us=W([(0,La.injectable)(),I(0,(0,La.inject)(qe)),I(1,(0,La.inject)(Nt)),I(2,(0,La.inject)(pn)),I(3,(0,La.inject)(Ti))],us);var u1=$(ut()),zH=$(ae());var a1="@vscode/dwarf-debugging",Dc=class{constructor(e){this.dap=e;this.didPrompt=!1}async load(){try{return await import(a1)}catch{return}}prompt(){this.didPrompt||(this.didPrompt=!0,this.dap.output({output:u1.t("You may install the `{}` module via npm for enhanced WebAssembly debugging",a1),category:"console"}))}};Dc=W([(0,zH.injectable)(),I(0,(0,zH.inject)(Pr))],Dc);var cs=$(ae());var $c=Symbol("IExceptionPauseService");var Tc=class{constructor(e,r,n,i,o){this.evaluator=e;this.scriptSkipper=r;this.dap=n;this.sourceContainer=o;this.state={cdp:"none"};this.blocker=$e();this.noDebug=!!i.noDebug,this.breakOnError=i.__breakOnConditionalError,this.blocker.resolve()}get launchBlocker(){return this.blocker.promise}async setBreakpoints(e){if(!this.noDebug){try{this.state=this.parseBreakpointRequest(e)}catch(r){if(!(r instanceof Y))throw r;this.dap.output({category:"stderr",output:r.message});return}this.cdp?await this.sendToCdp(this.cdp):this.state.cdp!=="none"&&this.blocker.hasSettled()&&(this.blocker=$e())}}async shouldPauseAt(e){if(e.reason!=="exception"&&e.reason!=="promiseRejection"||this.state.cdp==="none"||e.callFrames.some(n=>this.sourceContainer.getSourceScriptById(n.location.scriptId)?.url.endsWith(".cdp"))||this.shouldScriptSkip(e))return!1;let r=this.state.condition;if(e.data?.uncaught){if(r.uncaught&&!await this.evalCondition(e,r.uncaught))return!1}else if(r.caught&&!await this.evalCondition(e,r.caught))return!1;return!0}async apply(e){this.cdp=e,this.state.cdp!=="none"&&await this.sendToCdp(e)}async sendToCdp(e){await e.Debugger.setPauseOnExceptions({state:this.state.cdp}),this.blocker.resolve()}async evalCondition(e,r){return!!(await r({callFrameId:e.callFrames[0].callFrameId},{error:e.data}))?.result.value}shouldScriptSkip(e){if(e.data?.uncaught||!e.callFrames.length)return!1;let r=this.sourceContainer.getScriptById(e.callFrames[0].location.scriptId);return!!r&&this.scriptSkipper.isScriptSkipped(r.url)}parseBreakpointRequest(e){let r=(e.filterOptions??[]).concat(e.filters.map(a=>({filterId:a}))),n="none",i=[],o=[];for(let{filterId:a,condition:u}of r)a==="all"?(n="all",u&&i.push(a)):a==="uncaught"&&(n==="none"&&(n="uncaught"),u&&o.push(a));let s=a=>{if(a.length===0)return;let u="!!("+r.map(f=>f.condition).filter(Gt).join(") || !!(")+")",c=jo(u);if(c)throw new Y(Bo({line:0,condition:u},c.message));let l=ew(u,this.breakOnError);return this.evaluator.prepare(l,{hoist:["error"]}).invoke};return n==="none"?{cdp:n}:{cdp:n,condition:{caught:s(i),uncaught:s(o)}}}};Tc=W([(0,cs.injectable)(),I(0,(0,cs.inject)(un)),I(1,(0,cs.inject)(Qo)),I(2,(0,cs.inject)(Pr)),I(3,(0,cs.inject)(Ee)),I(4,(0,cs.inject)(Nt))],Tc);var QH=$(ae());var JH=class{constructor(){this.didEnable=new WeakSet}async retrieve(e){this.didEnable.has(e)||(this.didEnable.add(e),await e.Performance.enable({}));let r=await e.Performance.getMetrics({});if(!r)return{error:"Error in CDP"};let n={};for(let i of r.metrics)n[i.name]=i.value;return{metrics:n}}};var YH=class{async retrieve(e){let r=await e.Runtime.evaluate({expression:`({
        memory: process.memoryUsage(),
        cpu: process.cpuUsage(),
        timestamp: Date.now(),
        resourceUsage: process.resourceUsage && process.resourceUsage(),
      })${tt()}`,returnByValue:!0});return r?r.exceptionDetails?{error:r.exceptionDetails.text}:{metrics:r.result.value}:{error:"No response from CDP"}}};var ZH=Symbol("IPerformanceProvider"),Pa=class{constructor(e){this.target=e}create(){return this.target.type()==="node"?new YH:new JH}};Pa=W([(0,QH.injectable)(),I(0,(0,QH.inject)(Ti))],Pa);var MI=$(ut()),p1=require("crypto"),ls=$(ae()),d1=require("os"),h1=require("path");var rg=$(ae());var xI=$(ut()),xa=$(ae()),eg=require("path");var Mc=class{constructor(e){this.sources=e;this.locationIdCounter=0;this.locationsByRef=new Map}getLocationIdFor(e){let r=[e.functionName,e.url,e.scriptId,e.lineNumber,e.columnNumber].join(":"),n=this.locationsByRef.get(r);if(n)return n.id;let i=this.locationIdCounter++;return this.locationsByRef.set(r,{id:i,callFrame:e,locations:(async()=>{let o=await this.sources.getScriptById(e.scriptId)?.source;if(!o)return[];let s=await this.sources.currentSiblingUiLocations({lineNumber:e.lineNumber+1,columnNumber:e.columnNumber+1,source:o});return Promise.all(s.map(async a=>({...a,source:await a.source.toDapShallow()})))})()}),i}getLocations(){return Promise.all([...this.locationsByRef.values()].sort((e,r)=>e.id-r.id).map(async e=>({callFrame:e.callFrame,locations:await e.locations})))}};var Ut=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(!await this.cdp.Profiler.start({}))throw new Y(Mu());return new CI(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}async save(e,r){let n=await c1(e,this.sources,this.launchConfig.__workspaceFolder);(0,eg.isAbsolute)(r)||(r=(0,eg.join)(this.launchConfig.__workspaceFolder,r)),await this.fs.writeFile(r,JSON.stringify(n))}};Ut.type="cpu",Ut.extension=".cpuprofile",Ut.label=xI.t("CPU Profile"),Ut.description=xI.t("Generates a .cpuprofile file you can open in VS Code or the Edge/Chrome devtools"),Ut.editable=!0,Ut=W([(0,xa.injectable)(),I(0,(0,xa.inject)(rt)),I(1,(0,xa.inject)(qe)),I(2,(0,xa.inject)(Nt)),I(3,(0,xa.inject)(Ee))],Ut);var CI=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new K;this.disposed=!1;this.onUpdate=new K().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,this.stopEmitter.fire())}async stop(){let e=await this.cdp.Profiler.stop({});if(!e)throw new Y(Mu());await this.dispose();let r=await c1(e.profile,this.sources,this.workspaceFolder);await this.fs.writeFile(this.file,JSON.stringify(r))}};async function c1(t,e,r){let n=new Mc(e),i=t.nodes.map(o=>({...o,locationId:n.getLocationIdFor(o.callFrame),positionTicks:o.positionTicks?.map(s=>({...s,startLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line-1,columnNumber:0}),endLocationId:n.getLocationIdFor({...o.callFrame,lineNumber:s.line,columnNumber:0})}))}));return{...t,nodes:i,$vscode:{rootPath:r,locations:await n.getLocations()}}}var DI=$(ut()),Ca=$(ae());var Vr=class{constructor(e,r,n,i){this.cdp=e;this.fs=r;this.sources=n;this.launchConfig=i}static canApplyTo(){return!0}async start(e,r){if(await this.cdp.HeapProfiler.enable({}),!await this.cdp.HeapProfiler.startSampling({}))throw new Y(Mu());return new TI(this.cdp,this.fs,this.sources,this.launchConfig.__workspaceFolder,r)}};Vr.type="heap",Vr.extension=".heapprofile",Vr.label=DI.t("Heap Profile"),Vr.description=DI.t("Generates a .heapprofile file you can open in VS Code or the Edge/Chrome devtools"),Vr.editable=!0,Vr=W([(0,Ca.injectable)(),I(0,(0,Ca.inject)(rt)),I(1,(0,Ca.inject)(qe)),I(2,(0,Ca.inject)(Nt)),I(3,(0,Ca.inject)(Ee))],Vr);var TI=class{constructor(e,r,n,i,o){this.cdp=e;this.fs=r;this.sources=n;this.workspaceFolder=i;this.file=o;this.stopEmitter=new K;this.disposed=!1;this.onUpdate=new K().event;this.onStop=this.stopEmitter.event}async dispose(){this.disposed||(this.disposed=!0,await this.cdp.HeapProfiler.disable({}),this.stopEmitter.fire())}async stop(){let e=await this.cdp.HeapProfiler.stopSampling({});if(!e)throw new Y(Mu());await this.dispose();let r=await this.annotateSources(e.profile);await this.fs.writeFile(this.file,JSON.stringify(r))}async annotateSources(e){let r=new Mc(this.sources),n=(o,s)=>{s.locationId=r.getLocationIdFor(o.callFrame);for(let a of o.children){let u={...a,children:[]};s.children.push(u),n(a,u)}},i={...e.head,children:[]};return n(e.head,i),{...e,head:i,$vscode:{rootPath:this.workspaceFolder,locations:await r.getLocations()}}}};var $I=$(ut()),l1=require("fs"),tg=$(ae());var Gr=class{constructor(e){this.cdp=e;this.cdp.HeapProfiler.on("addHeapSnapshotChunk",({chunk:r})=>this.currentWriter?.stream.write(r))}static canApplyTo(){return!0}async start(e,r){return{onStop:new K().event,onUpdate:new K().event,dispose:()=>{},stop:async()=>{await this.cdp.HeapProfiler.enable({}),await this.dumpToFile(r),await this.cdp.HeapProfiler.disable({})}}}async dumpToFile(e){let{stream:r,promise:n}=this.currentWriter={stream:(0,l1.createWriteStream)(e),promise:this.cdp.HeapProfiler.takeHeapSnapshot({})};await n,r.end(),this.currentWriter=void 0}};Gr.type="memory",Gr.extension=".heapsnapshot",Gr.label=$I.t("Heap Snapshot"),Gr.description=$I.t("Generates a .heapsnapshot file you can open in VS Code or the Edge/Chrome devtools"),Gr.instant=!0,Gr=W([(0,tg.injectable)(),I(0,(0,tg.inject)(rt))],Gr);var ng=Symbol("IProfilerFactory"),f1=()=>{let t=new Date;return["vscode-profile",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].map(e=>String(e).padStart(2,"0")).join("-")},lo=class{constructor(e){this.container=e}get(e){let r=lo.ctors.find(n=>n.type===e);if(!r)throw new Error(`Invalid profilter type ${e}`);return this.container.get(r)}};lo.ctors=[Ut,Vr,Gr],lo=W([(0,rg.injectable)(),I(0,(0,rg.inject)(lc))],lo);var ig=Symbol("IProfileController"),Rc=class{constructor(e,r,n,i,o){this.cdp=e;this.factory=r;this.basicCpuProfiler=n;this.breakpoints=i;this.shutdown=o;this.seenConsoleProfileNames=Object.create(null)}connect(e,r){e.on("startProfile",async n=>(await this.start(e,r,n),{})),e.on("stopProfile",()=>this.stopProfiling(e)),this.cdp.Profiler.on("consoleProfileStarted",()=>{e.output({output:MI.t("Console profile started")+`
`,category:"console"})}),this.cdp.Profiler.on("consoleProfileFinished",async n=>{let i=this.saveConsoleProfile(e,n),o=this.shutdown.register(0,()=>i);await i,o.dispose()}),r.onPaused(()=>this.stopProfiling(e))}async start(e,r,n){if(this.profile)throw new Y(xD());this.profile=this.startProfileInner(e,r,n).catch(i=>{throw this.profile=void 0,i}),await this.profile}async saveConsoleProfile(e,r){let n;if(r.title){n=r.title.replace(/[\/\\]/g,"-");let i=this.seenConsoleProfileNames[r.title]||0;this.seenConsoleProfileNames[r.title]=i+1,i>0&&(n+=`-${i}`)}else n=f1();n+=Ut.extension,await this.basicCpuProfiler.save(r.profile,n),e.output({output:MI.t('CPU profile saved as "{0}" in your workspace folder',n)+`
`,category:"console"})}async startProfileInner(e,r,n){let i=!1,o;if(n.stopAtBreakpoint?.length){let l=new Set(n.stopAtBreakpoint);i=!0,o=f=>!(f instanceof cn)||l.has(f.dapId)}else o=()=>!1;await this.breakpoints.applyEnabledFilter(o);let s=(0,h1.join)((0,d1.tmpdir)(),`vscode-js-profile-${(0,p1.randomBytes)(4).toString("hex")}`),a=await this.factory.get(n.type).start(n,s),u={file:s,profile:a,enableFilter:o,keptDebuggerOn:i};a.onUpdate(l=>e.profilerStateUpdate({label:l,running:!0})),a.onStop(()=>this.disposeProfile(u));let c=!!r.pausedDetails();return i?await r.resume():c&&(await this.cdp.Debugger.disable({}),c&&r.onResumed()),e.profileStarted({file:u.file,type:n.type}),u}async stopProfiling(e){let r=await this.profile?.catch(()=>{});return!r||!this.profile?{}:(this.profile=void 0,await r?.profile.stop(),e.profilerStateUpdate({label:"",running:!1}),{})}async disposeProfile({profile:e,enableFilter:r,keptDebuggerOn:n}){n||await this.cdp.Debugger.enable({}),await this.breakpoints.applyEnabledFilter(void 0,r),e.dispose()}};Rc=W([(0,ls.injectable)(),I(0,(0,ls.inject)(rt)),I(1,(0,ls.inject)(ng)),I(2,(0,ls.inject)(Ut)),I(3,(0,ls.inject)(pn)),I(4,(0,ls.inject)(as))],Rc);var yn=$(ae());var NN=$(m1()),BN=require("dns"),kg=$(ON()),Ma=$(ae());var Rg=Symbol("IRequestOptionsProvider");var ms=class{constructor(e,r){this.fs=e;this.options=r;this.autoLocalhostPortFallbacks={}}async fetch(e,r=cr,n){try{let o=(0,NN.dataUriToBuffer)(e);return{ok:!0,url:e,body:new TextDecoder().decode(o.buffer),statusCode:200}}catch{}let i=ur(e)?e:st(e);if(i)try{return{ok:!0,url:e,body:await this.fs.readFile(i,"utf-8"),statusCode:200}}catch(o){return{ok:!1,url:e,error:o,statusCode:200}}return this.fetchHttp(e,r,n)}async fetchJson(e,r,n){let i=await this.fetch(e,r,{Accept:"application/json",...n});if(!i.ok)return i;try{return{...i,body:JSON.parse(i.body)}}catch(o){return{...i,ok:!1,url:e,error:o}}}async fetchHttp(e,r,n){let i=new URL(e),o=i.protocol!=="http:",s=Number(i.port)??(o?443:80),a={headers:n,followRedirect:!0};o&&await Wu(e)&&(a.rejectUnauthorized=!1),this.options?.provideOptions(a,e);let u=i.hostname==="localhost";if(u&&this.autoLocalhostPortFallbacks[s]){let f=await this.requestHttp(i.toString(),a,r);return f.statusCode!==503?f:(delete this.autoLocalhostPortFallbacks[s],this.requestHttp(e,a,r))}let l=await this.requestHttp(e,a,r);if(l.statusCode===503&&u){let f;try{f=await BN.promises.lookup(i.hostname)}catch{return l}i.hostname=f.family===6?"127.0.0.1":"[::1]",l=await this.requestHttp(i.toString(),a,r),l.statusCode!==503&&(this.autoLocalhostPortFallbacks[s]=i.hostname)}return l}async requestHttp(e,r,n){this.options?.provideOptions(r,e);let i=new Be;try{let o=(0,kg.default)(e,r);i.push(n.onCancellationRequested(()=>o.cancel()));let s=await o;return{ok:!0,url:e,body:s.body,statusCode:s.statusCode}}catch(o){if(!(o instanceof kg.RequestError))throw o;let s=o.response?String(o.response?.body):o.message,a=o.response?.statusCode??503;return{ok:!1,body:s,statusCode:a,url:e,error:new Yh(a,e,s)}}finally{i.dispose()}}};ms=W([(0,Ma.injectable)(),I(0,(0,Ma.inject)(qe)),I(1,(0,Ma.optional)()),I(1,(0,Ma.inject)(Rg))],ms);var Ra=class extends ms{constructor(r,n,i,o,s){super(r,s);this.logger=n;this.target=i;this.cdp=o;this.disposables=new Be}dispose(){this.disposables.dispose()}async fetchHttp(r,n,i={}){let o=await super.fetchHttp(r,n,i);return o.ok?o:(this.logger.info("runtime","Network load failed, falling back to CDP",{url:r,res:o}),this.fetchOverBrowserNetwork(r,o))}async fetchOverBrowserNetwork(r,n){if(!this.cdp)return n;let i=await this.cdp.Network.loadNetworkResource({frameId:this.target?.targetInfo.targetId,url:r,options:{includeCredentials:!0,disableCache:!0}});if(!i||!i.resource.success||!i.resource.httpStatusCode||i.resource.httpStatusCode>=400||!i.resource.stream)return n;let o=Number(i.resource.headers?.["Content-Length"]);isNaN(o)&&(o=1/0);let s=[],a=0;for(;;){let u=await this.cdp.IO.read({handle:i.resource.stream,offset:a});if(!u)return this.logger.info("runtime","Stream error encountered in middle, falling back",{url:r}),n;let c=u.base64Encoded?Buffer.from(u.data,"base64").toString():u.data;if(a+=Buffer.byteLength(c,"utf-8"),s.push(c),a>=o){this.cdp.IO.close({handle:i.resource.stream});break}if(u.eof)break}return{ok:!0,body:s.join(""),statusCode:i.resource.httpStatusCode,url:r}}};Ra=W([(0,yn.injectable)(),I(0,(0,yn.inject)(qe)),I(1,(0,yn.inject)(re)),I(2,(0,yn.optional)()),I(2,(0,yn.inject)(Ti)),I(3,(0,yn.optional)()),I(3,(0,yn.inject)(rt)),I(4,(0,yn.optional)()),I(4,(0,yn.inject)(Rg))],Ra);var gs=$(ae()),jN=$(Of());var Hs="node:";function UN(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];if(n.startsWith("!")){let i=FN(n.slice(1));for(let o=0;o<e.length;o++)e[o]=`^(?!${i.slice(1)})${e[o].slice(1)}`}else e.push(FN(n))}return e.map(r=>new RegExp(r,"i"))}function FN(t){let e=t.split("/"),r=[];for(let n=0;n<e.length;n++){let i=e[n];if(i==="**")n===0?r.push("(.+/)?"):n===e.length-1||r.push(".*/");else{if(i.includes("*")){let o=i.split("*");r.push(o.map(s=>br(s)).join("[^\\/]*"))}else r.push(br(i));r.push(n<e.length-1?"\\/":"$")}}return`^${r.join("")}`}function Fre(t){let e=/^<node_internals>[\/\\](.*)$/,r=t.map(n=>{n=n.trim();let i=e.exec(n);return i?i[1]:null}).filter(Gt);return r.length>0?r:void 0}function Ure(t,e){return e.filter(n=>!n.includes("<node_internals>")).map(n=>ur(n)?qu(t.rebaseLocalToRemote(n)):et(n)).map(vm)}var $i=class{constructor({skipFiles:e},r,n,i,o){this.logger=n;this.cdp=i;this._regexForAuthored=LC(UN);this._scriptsWithSkipping=new Set;this._targetId=o.id(),this._rootTargetId=WN(o).id(),this._isUrlFromSourceMapSkipped=new hi(s=>this._normalizeUrl(s)),this._authoredGlobs=Ure(r,e),this._nodeInternalsGlobs=Fre(e),this._initNodeInternals(o),this._updateSkippedDebounce=xC(500,()=>this._updateGeneratedSkippedSources()),e.length&&this._updateGeneratedSkippedSources(),$i.sharedSkipsEmitter.event(s=>{s.rootTargetId===this._rootTargetId&&s.targetId!==this._targetId&&this._toggleSkippingFile(s.params)})}setSourceContainer(e){this._sourceContainer=e}_testSkipNodeInternal(e){return this._nodeInternalsGlobs?(e.startsWith(Hs)&&(e=e.slice(Hs.length)),(0,jN.default)([e],this._nodeInternalsGlobs).length>0):!1}_testSkipAuthored(e){return this._regexForAuthored(this._authoredGlobs).some(r=>r.test(e))}_isNodeInternal(e,r){return e.startsWith(Hs)?!0:r?.has(e)||/^internal\/.+\.js$/.test(e)}async _updateGeneratedSkippedSources(){let e=this._regexForAuthored(this._authoredGlobs).map(n=>n.source),r=this._allNodeInternals?.settledValue;if(r){e.push(`^(${Hs})?internal\\/`);for(let n of r)this._testSkipNodeInternal(n)&&e.push(`^(${Hs})?${br(n)}$`)}await this.cdp.Debugger.setBlackboxPatterns({patterns:e})}_normalizeUrl(e){return et(e.toLowerCase())}isScriptSkipped(e){return this._isNodeInternal(e,this._allNodeInternals?.settledValue)?this._testSkipNodeInternal(e):(e=this._normalizeUrl(e),this._isUrlFromSourceMapSkipped.get(e)===!0?!0:this._testSkipAuthored(e))}async _updateSourceWithSkippedSourceMappedSources(e,r){let n=this.isScriptSkipped(e.url),i=[],o=n;for(let a of e.sourceMap.sourceByUrl.values()){let u=this.isScriptSkipped(a.url);if(typeof u>"u"&&(u=n),u!==o){let c=await this._sourceContainer.currentSiblingUiLocations({source:a,lineNumber:1,columnNumber:1},e);c[0]?(i.push({lineNumber:c[0].lineNumber-1,columnNumber:c[0].columnNumber-1}),o=!o):this.logger.error("internal","Could not map script beginning for "+a.sourceReference)}}let s=r;i.length||(s=s.filter(a=>this._scriptsWithSkipping.has(a.scriptId)),s.forEach(a=>this._scriptsWithSkipping.delete(a.scriptId))),await Promise.all(s.map(({scriptId:a})=>this.cdp.Debugger.setBlackboxedRanges({scriptId:a,positions:i})))}initializeSkippingValueForSource(e){this._initializeSkippingValueForSource(e)}_initializeSkippingValueForSource(e,r=e.scripts){let n=e.url,i=this.isScriptSkipped(n);if(!i&&e.absolutePath&&this._testSkipAuthored(xe(e.absolutePath))&&(this.setIsUrlBlackboxSkipped(n,!0),i=!0,this._updateSkippedDebounce()),vr(e)){if(i)for(let o of e.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(o.url,!0);for(let o of e.sourceMap.sourceByUrl.values())this._initializeSkippingValueForSource(o,r);this._updateSourceWithSkippedSourceMappedSources(e,r)}}async _initNodeInternals(e){if(e.type()!=="node"||!this._nodeInternalsGlobs||this._allNodeInternals)return;let r=this._allNodeInternals=$e(),n=await this.cdp.Runtime.evaluate({expression:"require('module').builtinModules"+tt(),returnByValue:!0,includeCommandLineAPI:!0});n&&!n.exceptionDetails?r.resolve(new Set(n.result.value.map(i=>i+".js"))):r.resolve(new Set),await this._updateGeneratedSkippedSources()}async _toggleSkippingFile(e){let r;e.resource&&ur(e.resource)&&(r=e.resource);let n={path:r,sourceReference:e.sourceReference},i=this._sourceContainer.source(n);if(!i)return{};let o=!this.isScriptSkipped(i.url);if(i instanceof dt){this._isUrlFromSourceMapSkipped.set(i.url,o);let s=Array.from(i.compiledToSourceUrl.keys());await Promise.all(s.map(a=>this._updateSourceWithSkippedSourceMappedSources(a,a.scripts)))}else{if(vr(i))for(let s of i.sourceMap.sourceByUrl.values())this._isUrlFromSourceMapSkipped.set(s.url,o);this.setIsUrlBlackboxSkipped(i.url,o),await this._updateGeneratedSkippedSources()}return{}}setIsUrlBlackboxSkipped(e,r){let n=e,i=`!${n}`,o=this._authoredGlobs.filter(s=>s!==n&&s!==i);this._regexForAuthored(o).some(s=>s.test(e))!==r&&(o.push(r?n:i),this._regexForAuthored.clear()),this._authoredGlobs=o}async toggleSkippingFile(e){let r=await this._toggleSkippingFile(e);return $i.sharedSkipsEmitter.fire({params:e,rootTargetId:this._rootTargetId,targetId:this._targetId}),r}};$i.sharedSkipsEmitter=new K,$i=W([(0,gs.injectable)(),I(0,(0,gs.inject)(Ee)),I(1,(0,gs.inject)(je)),I(2,(0,gs.inject)(re)),I(3,(0,gs.inject)(rt)),I(4,(0,gs.inject)(Ti))],$i);function WN(t){let e=t.parent();return e?WN(e):t}var Ep=$(ae());var VN=require("path");var qN=/^webpack:\/{3}([^/]+?\.vue)(\?[0-9a-z]*)?$/i,jre=/^webpack:\/{3}\.\/.+\.vue\?[0-9a-z]+$/i,Kc=Symbol("IVueFileMapper");var Xc=class{constructor(e,r){this.files=e;this.search=r;this.getMapping=ye(async()=>{let e=new Map;return await this.search.streamAllChildren(this.files,r=>e.set((0,VN.basename)(r),r)),e})}async lookup(e){let r=qN.exec(e);return r?(await this.getMapping()).get(r[1]):void 0}getVueHandling(e){return this.files.empty?0:qN.test(e)?1:jre.test(e)?2:0}};Xc=W([(0,Ep.injectable)(),I(0,(0,Ep.inject)(Zi)),I(1,(0,Ep.inject)(Gu))],Xc);var Mi=class{constructor(){this.changeEmitter=new K;this.addEmitter=new K;this.removeEmitter=new K;this.targetMap=new Map;this.onChanged=this.changeEmitter.event;this.onAdd=this.addEmitter.event;this.onRemove=this.removeEmitter.event}get size(){return this.targetMap.size}add(e,r){this.targetMap.set(e,r),this.addEmitter.fire([e,r]),this.changeEmitter.fire()}get(e){return this.targetMap.get(e)}remove(e){let r=this.targetMap.get(e);return r===void 0?!1:(this.targetMap.delete(e),this.removeEmitter.fire([e,r]),this.changeEmitter.fire(),!0)}value(){return this.targetMap.values()}};var gF=$(hF()),qg=$(ae());var mF=require("child_process"),Oa=class t extends Error{constructor(r,n,i,o,s){super(`${r} exited with code ${o||-1}: ${n}`);this.command=r;this.stderr=n;this.stdout=i;this.code=o;this.innerError=s}static fromExeca(r){return new t(r.command,r.stderr.toString(),r.stdout.toString(),r.exitCode)}};function Wg(t,e,r){return new Promise((n,i)=>{let o=(0,mF.spawn)(t,e,{...r,stdio:"pipe"}),s=[],a=[];o.stderr.on("data",c=>s.push(c)),o.stdout.on("data",c=>a.push(c));let u=(c,l)=>i(new Oa(t,Buffer.concat(s).toString(),Buffer.concat(a).toString(),c,l));o.on("error",c=>u(void 0,c)),o.on("close",c=>c?u(c):n({stdout:Buffer.concat(a).toString(),stderr:Buffer.concat(s).toString()}))})}var Gne=new Map([["chrome",0],["safari",1],["firefox",2],["msedge",3],["microsoft edge",3],["appxq0fevzme2pys62n3e0fbqa7peapykr8v",4],["ie.http",5]]),HF=t=>{t=t.toLowerCase();for(let[e,r]of Gne.entries())if(t.includes(e))return r},yF=Symbol("IDefaultBrowserProvider"),Yc=class{constructor(e,r=process.platform){this.execa=e;this.platform=r;this.lookup=ye(()=>this.platform==="win32"?this.lookupWindows():this.lookupUnix())}async lookupUnix(){let{name:e}=await(0,gF.default)();return HF(e)}async lookupWindows(){let e=await this.execa("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]);if(e.failed)throw Oa.fromExeca(e);let r=/ProgId\s*REG_SZ\s*(\S+)/.exec(e.stdout);if(r)return HF(r[1])}};Yc=W([(0,qg.injectable)(),I(0,(0,qg.inject)(Bf))],Yc);var vF=$(ae()),Gg=$(require("os"));var Vg=class{async setup(){}dispose(){}write(e){if(e.level>2)throw new Error(e.message);console.log(JSON.stringify(e))}};var iS=class{constructor(e=512){this.size=e;this.items=[];this.i=0}write(e){this.items[this.i]=e,this.i=(this.i+1)%this.size}read(){return this.items.slice(this.i).concat(this.items.slice(0,this.i))}},bn=class{constructor(){this.logTarget={queue:[]};this.logBuffer=new iS}static async test(){let e=new bn;return e.setup({sinks:[new Vg],showWelcome:!1}),e}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}log(e){if(this.logBuffer.write(e),"queue"in this.logTarget){this.logTarget.queue.push(e);return}for(let r of this.logTarget.sinks)r.write(e)}getRecentLogs(){return this.logBuffer.read()}dispose(){if("sinks"in this.logTarget){for(let e of this.logTarget.sinks)e.dispose();this.logTarget={queue:[]}}}forTarget(){return this}async setup(e){if(await Promise.all(e.sinks.map(n=>n.setup())),e.showWelcome!==!1){let n=Xne();for(let i of e.sinks)i.write(n)}let r=this.logTarget;this.logTarget={sinks:e.sinks.slice()},"sinks"in r?r.sinks.forEach(n=>n.dispose()):r.queue.forEach(n=>this.log(n))}};bn.null=(()=>{let e=new bn;return e.setup({sinks:[]}),e})(),bn=W([(0,vF.injectable)()],bn);var Xne=()=>({timestamp:Date.now(),tag:"runtime.welcome",level:1,message:`${Bh} v${ff} started`,metadata:{os:`${Gg.platform()} ${Gg.arch()}`,nodeVersion:process.version,adapterVersion:ff}});var Op=Symbol("MutableLaunchConfig"),_F=t=>{let e=new K;return new Proxy({},{ownKeys(){return Object.keys(t)},get(r,n){switch(n){case"update":return i=>{t=i,e.fire()};case"onChange":return e.event;default:return t[n]}}})};var K2=$(G2()),Ny=$(ae());var Ya=Symbol("touched"),Cs;(u=>{function t(){return{children:{},[Ya]:1}}u.root=t;function e(c,l){return c[Ya]=1,a(c,s(l),0)}u.getPath=e;function r(c){c[Ya]=1}u.touch=r;function n(c){c[Ya]=2}u.touchAll=n;function i(c,l){let f=c.children[l]??={children:{}};return f[Ya]=1,f}u.getOrMakeChild=i;function o(c){if(c[Ya]){for(let[l,f]of Object.entries(c.children))switch(f[Ya]){case 1:o(f);break;case 2:break;default:delete c.children[l]}return c}}u.prune=o;function s(c){let l=c.split(/\/|\\/);return l[0]===""&&l.unshift(),l}function a(c,l,f){let p=i(c,l[f]);return f===l.length-1?p:a(p,l,f+1)}})(Cs||={});var tE=require("fs"),rE=$(Of()),Qa=require("path"),X2=$(Z0());var kle=/\//g,Oy=class{constructor(e){this.stat=zs(e=>tE.promises.lstat(e));this.readdir=zs(e=>tE.promises.readdir(e,{withFileTypes:!0}));this.alreadyProcessedFiles=new Set;this.fileEmitter=new K;this.onFile=this.fileEmitter.event;this.errorEmitter=new K;this.onError=this.errorEmitter.event;this.processor=e.fileProcessor,this.filter=e.filter,this.ignore=e.ignore.map(i=>rE.default.matcher((0,X2.default)(et(i),{cwd:e.cwd})));let r=(0,Qa.isAbsolute)(e.pattern)?(0,Qa.relative)(e.cwd,e.pattern):e.pattern,n=rE.default.parse(et(r),{ignore:e.ignore,cwd:e.cwd,expand:!0});this.done=Promise.all(n.map(i=>{let o=[];for(let c=1;c<i.tokens.length;){let l=c+1;for(;l<i.tokens.length&&i.tokens[l].type!=="slash";)l++;let f=i.tokens[c];f.type==="globstar"?o.push("**"):l===c+1&&f.type==="text"?o.push(f.value):o.push(new RegExp("^"+i.tokens.slice(c,l).map(p=>p.output||p.value).join("")+"$")),c=l+1}let s=o[0]==="**"?[0,1]:[0],a=Cs.getPath(e.cache,e.cwd),u={elements:o,seen:new Set};return Promise.all(s.map(c=>this.readSomething(u,c,e.cwd,[],a)))})).then(()=>{})}async readSomething(e,r,n,i,o){if(this.alreadyProcessedFiles.has(o))return;let s=`${r}:${n}`;if(e.seen.has(s))return;e.seen.add(s);let a;try{a=await this.stat(n)}catch(c){this.errorEmitter.fire({path:n,error:c});return}if(this.alreadyProcessedFiles.has(o))return;let u=o.data;if(u&&a.mtimeMs===u.mtime){if(u.type===0){let c=[],f=Object.entries(o.children).filter(([,p])=>p.data?.type!==0).map(([p])=>p);for(let[p,m]of Object.entries(o.children))c.push(m.data!==void 0?this.handleDirectoryEntry(e,r,n,{name:p,type:m.data.type},f,o):this.stat(n).then(h=>this.handleDirectoryEntry(e,r,n,{name:p,type:h.isFile()?1:0},f,o),()=>{}));await Promise.all(c)}else u.type===1&&(this.alreadyProcessedFiles.add(o),this.fileEmitter.fire(u.extracted));return}a.isDirectory()?await this.handleDir(e,r,a.mtimeMs,n,o):(this.alreadyProcessedFiles.add(o),await this.handleFile(a.mtimeMs,n,i,o))}applyFilterToFile(e,r,n){let i=n.children[e];if(this.alreadyProcessedFiles.has(i))return!1;if(!this.filter)return!0;let o=i.data?.type===1?i.data.extracted:void 0;return Cs.touch(i),this.filter(r,o)}handleDirectoryEntry(e,r,n,i,o,s){let a=n+"/"+i.name,u=this.getDirectoryReadDescends(e,r,n,i);if(u===void 0)return;let c=Cs.getOrMakeChild(s,i.name);if(!(i.type===1&&!this.applyFilterToFile(i.name,a,s)))return typeof u=="number"?this.readSomething(e,r+u,a,o,c):Promise.all(u.map(l=>this.readSomething(e,r+l,a,o,c)))}getDirectoryReadDescends(e,r,n,i){let o=n+"/"+i.name;if(this.ignore.some(u=>u(o)))return;let s=r===e.elements.length-1,a=e.elements[r];if(a==="**")return i.type===1?s?0:this.getDirectoryReadDescends(e,r+1,n,i):s?0:[0,1];if((a instanceof RegExp&&a.test(i.name)||a===i.name)&&(i.type===0?!s:s))return 1}async handleFile(e,r,n,i){let o=Qa.sep==="/"?r:r.replace(kle,Qa.sep),s;try{s=await this.processor(o,{siblings:n,mtime:e})}catch(a){this.errorEmitter.fire({path:o,error:a});return}i.data={type:1,mtime:e,extracted:s},this.fileEmitter.fire(s)}async handleDir(e,r,n,i,o){let s;try{s=await this.readdir(i)}catch(c){this.errorEmitter.fire({path:i,error:c});return}let a=[],u=s.filter(c=>c.isFile()).map(c=>c.name);for(let c of s){if(c.name.startsWith("."))continue;let l;if(c.isDirectory())l=0;else if(c.isFile())l=1;else continue;a.push(this.handleDirectoryEntry(e,r,i,{name:c.name,type:l},u,o))}await Promise.all(a),o.data={type:0,mtime:n}}};var hl=class{constructor(e){this.logger=e}async streamAllChildren(e,r){let n=[];return await this.globForFiles(e,o=>n.push(r(ft(o.path)))),(await Promise.all(n)).filter(o=>o!==void 0)}async streamChildrenWithSourcemaps(e){let r=[],n=e.lastState||{},i={};return await Promise.all([...e.files.explode()].map(async s=>{let a=JSON.stringify(s),u=n[a]||Cs.root();await this._streamChildrenWithSourcemaps(u,e,r,s);let c=Cs.prune(u);c&&(i[a]=c)})),this.logger.info("sourcemap.parsing",`turboGlobStream search found ${r.length} files`),{values:(await Promise.all(r)).filter(Gt),state:i}}async _streamChildrenWithSourcemaps(e,r,n,i){let o=new Oy({pattern:i.pattern,ignore:i.negations,cwd:i.cwd,cache:e,filter:r.filter,fileProcessor:(s,a)=>ET(s,a).then(u=>u&&r.processMap(u))});o.onError(({path:s,error:a})=>{this.logger.warn("sourcemap.parsing","Error parsing source map",{error:a,path:s})}),o.onFile(s=>s&&n.push(r.onProcessedMap(s))),await o.done}async globForFiles(e,r){await Promise.all([...e.explode()].map(n=>new Promise((i,o)=>(0,K2.default)([n.pattern,"!**/*.asar/**"],{ignore:n.negations,matchBase:!0,cwd:n.cwd}).on("data",r).on("finish",i).on("error",o))))}};hl=W([(0,Ny.injectable)(),I(0,(0,Ny.inject)(re))],hl);var Jy=$(ut()),Ms=$(ae());var z2=require("url"),J2=$(require("path"));var By=class{constructor(){this._onFrameAddedEmitter=new K;this._onFrameRemovedEmitter=new K;this._onFrameNavigatedEmitter=new K;this.onFrameAdded=this._onFrameAddedEmitter.event;this.onFrameRemoved=this._onFrameRemovedEmitter.event;this.onFrameNavigated=this._onFrameNavigatedEmitter.event;this._frames=new Map}attached(e,r){e.Page.enable({}),e.Page.getResourceTree({}).then(n=>{this._processCachedResources(e,n?n.frameTree:void 0,r)})}mainFrame(){return this._mainFrame}_processCachedResources(e,r,n){r&&this._addFramesRecursively(e,r,r.frame.parentId,n),e.Page.on("frameAttached",i=>{this._frameAttached(e,n,i.frameId,i.parentFrameId)}),e.Page.on("frameNavigated",i=>{this._frameNavigated(e,n,i.frame)}),e.Page.on("frameDetached",i=>{this._frameDetached(e,n,i.frameId)})}_addFrame(e,r,n){let i=new iE(this,e,r,n);return this._frames.set(i.id,i),i.isMainFrame()&&(this._mainFrame=i),this._onFrameAddedEmitter.fire(i),i}_frameAttached(e,r,n,i){let o=this._frames.get(n);return o||(o=this._addFrame(e,n,i)),o._ref(r),o}_frameNavigated(e,r,n){let i=this._frames.get(n.id);i||(i=this._frameAttached(e,r,n.id,n.parentId)),i._navigate(n,r),this._onFrameNavigatedEmitter.fire(i)}_frameDetached(e,r,n){let i=this._frames.get(n);i&&i._unref(r)}frameForId(e){return this._frames.get(e)}frames(){return Array.from(this._frames.values())}_addFramesRecursively(e,r,n,i){let o=r.frame,s=this._frames.get(o.id);s?(s._navigate(o,i),this._onFrameNavigatedEmitter.fire(s)):(s=this._addFrame(e,o.id,n),s._navigate(o,i));for(let a=0;r.childFrames&&a<r.childFrames.length;++a)this._addFramesRecursively(e,r.childFrames[a],s.id,i)}},iE=class{constructor(e,r,n,i){this._targets=new Set;this.cdp=r,this.model=e,this._parentFrameId=i,this.id=n,this._url=""}_ref(e){this._targets.add(e)}_navigate(e,r){this._name=e.name,this._url=e.url,this._securityOrigin=e.securityOrigin,this._unreachableUrl=e.unreachableUrl||"",this._ref(r),this._unrefChildFrames(r)}name(){return this._name||""}url(){return this._url}securityOrigin(){return this._securityOrigin}unreachableUrl(){return this._unreachableUrl}isMainFrame(){return!this._parentFrameId}parentFrame(){return this._parentFrameId?this.model.frameForId(this._parentFrameId):void 0}childFrames(){return this.model.frames().filter(e=>e._parentFrameId===this.id)}_unrefChildFrames(e){for(let r of this.childFrames())r._unref(e)}_unref(e){this._targets.delete(e),!this._targets.size&&(this._unrefChildFrames(e),this.model._frames.delete(this.id),this.model._onFrameRemovedEmitter.fire(this))}displayName(){return this._name?this._name:Ole(this._url)||`<iframe ${this.id}>`}};function nE(t,e){return t.length<=e?t:t.substr(0,e-1)+"\u2026"}function Ole(t){let e;try{e=new z2.URL(t)}catch{return nE(t,20)}if(e.protocol==="data")return nE(t,20);if(e.protocol==="blob"||t==="about:blank")return t;let r=J2.basename(e.pathname);return r||(r=(e.host||"")+"/"),r==="/"&&(r=nE(t,20)),r}var Y2=require("url"),oE=class{constructor(e){this.versions=new Map;this.id=e.registrationId,this.scopeURL=e.scopeURL}},sE=class{constructor(e,r){this.revisions=[];this.registration=e,this.id=r.versionId,this.scriptURL=r.scriptURL,this._targetId=r.targetId,this._status=r.status,this._runningStatus=r.runningStatus}addRevision(e){this._targetId&&e.targetId&&this._targetId!==e.targetId&&console.error(`${this._targetId} !== ${e.targetId}`),e.targetId&&(this._targetId=e.targetId),this._status=e.status,this._runningStatus=e.runningStatus,this.revisions.unshift(e)}status(){return this._status}runningStatus(){return this._runningStatus}targetId(){return this._targetId}label(){let e=new Y2.URL(this.registration.scopeURL),r=e.pathname.substr(1);r.endsWith("/")&&(r=r.substring(0,r.length-1));let n=r||`${e.host}`,i=this._status==="activated"?"":` ${this._status}`,o=this._runningStatus==="running"?"":` ${this._runningStatus}`;return`${n} #${this.id}${i}${o}`}},Fy=class t{constructor(e){this._registrations=new Map;this._versions=new Map;this._onDidChangeUpdater=new K;this.onDidChange=this._onDidChangeUpdater.event;this._targets=new Set;this._frameModel=e,t._instances.add(this)}static{this._instances=new Set}dispose(){t._instances.delete(this)}attached(e){this._targets.add(e),!this._cdp&&(this._cdp=e,e.ServiceWorker.enable({}),e.ServiceWorker.on("workerRegistrationUpdated",r=>this._workerRegistrationsUpdated(r.registrations)),e.ServiceWorker.on("workerVersionUpdated",r=>this._workerVersionsUpdated(r.versions)),t._mode!=="normal"&&this.setMode(t._mode))}async detached(e){this._targets.delete(e)}version(e){return this._versions.get(e)}registrations(){let e=[],r=this._frameModel.frames().map(n=>n.url());for(let n of this._registrations.values())for(let i of r)if(i.startsWith(n.scopeURL)){e.push(n);break}return e}registration(e){return this._registrations.get(e)}_workerVersionsUpdated(e){for(let r of e){let n=this._registrations.get(r.registrationId);if(!n)continue;let i=n.versions.get(r.versionId);i||(i=new sE(n,r),n.versions.set(r.versionId,i)),r.targetId&&this._versions.set(r.targetId,i),i.addRevision(r),i.status()==="redundant"&&i.runningStatus()==="stopped"&&(r.targetId&&this._versions.delete(r.targetId),n.versions.delete(i.id))}this._onDidChangeUpdater.fire()}_workerRegistrationsUpdated(e){for(let r of e)if(r.isDeleted){if(!this._registrations.has(r.registrationId))debugger;this._registrations.delete(r.registrationId)}else{if(this._registrations.has(r.registrationId))return;this._registrations.set(r.registrationId,new oE(r))}this._onDidChangeUpdater.fire()}static setModeForAll(e){t._mode=e;for(let r of t._instances)r.setMode(e)}setMode(e){if(this._cdp){this._cdp.ServiceWorker.setForceUpdateOnPageLoad({forceUpdateOnPageLoad:e==="force"});for(let r of this._targets.values())e==="bypass"?(r.Network.enable({}),r.Network.setBypassServiceWorker({bypass:!0})):r.Network.disable({})}}async stopWorker(e){if(!this._cdp)return;let r=this.version(e);r&&await this._cdp.ServiceWorker.stopWorker({versionId:r.id})}};var Ds=class{constructor(e,r,n,i,o,s,a,u){this.process=r;this.logger=o;this.telemetry=s;this.launchParams=a;this._targets=new Map;this._detachedTargets=new Set;this.frameModel=new By;this.serviceWorkerModel=new Fy(this.frameModel);this._lifecycleQueue=Promise.resolve();this._onTargetAddedEmitter=new K;this._onTargetRemovedEmitter=new K;this.onTargetAdded=this._onTargetAddedEmitter.event;this.onTargetRemoved=this._onTargetRemovedEmitter.event;this._connection=e,this._sourcePathResolver=i,this._browser=n,this._targetOrigin=u,this.serviceWorkerModel.onDidChange(()=>{for(let c of this._targets.values())c.type()==="service_worker"&&c._onNameChangedEmitter.fire()})}static async connect(e,r,n,i,o,s,a){let c=await e.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=e.createSession(c.sessionId);return new this(e,r,l,n,o,s,i,a)}dispose(){this.serviceWorkerModel.dispose()}targetList(){return Array.from(this._targets.values()).filter(e=>Sf.has(e.type()))}async getCandiateInfo(e){let r=await this._browser.Target.getTargets({});return r?e?r.targetInfos.filter(e):r.targetInfos:[]}async closeBrowser(){if(this.launchParams.request==="launch"){if(this.launchParams.cleanUp==="wholeBrowser")await this._browser.Browser.close({}),this.process?.kill();else for(let e of this._targets.values())await this._browser.Target.closeTarget({targetId:e.targetId}),this._connection.close();this.process=void 0}}waitForMainTarget(e){let r,n=new Promise(o=>r=o),i=async o=>{if([...this._targets.values()].some(u=>u.targetId===o.targetId)||this._detachedTargets.has(o.targetId)||e&&!e(o))return;let s=this._browser.Target.on("targetInfoChanged",u=>{u.targetInfo.targetId===o.targetId&&(o=u.targetInfo)}),a;try{a=await this._browser.Target.attachToTarget({targetId:o.targetId,flatten:!0})}finally{s.dispose()}if(!a){r(void 0);return}r(this.attachedToTarget(o,a.sessionId,!0))};return this._browser.Target.setDiscoverTargets({discover:!0}),this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(o=>i(o.targetInfo))),this._browser.Target.on("targetInfoChanged",o=>this._targetInfoChanged(o.targetInfo,this.enqueueLifecycleFn(i))),this._browser.Target.on("detachedFromTarget",this.enqueueLifecycleFn(async o=>{o.targetId&&await this._detachedFromTarget(o.sessionId,!1)})),n}enqueueLifecycleFn(e){return r=>this._lifecycleQueue=this._lifecycleQueue.then(()=>e(r))}attachedToTarget(e,r,n,i,o=!0){let s=this._targets.get(r);if(s)return s;let a=this._connection.createSession(r),u=new gm(this,e,a,i,n,this.launchParams,r,this.logger,()=>{this._connection.disposeSession(r),this._detachedFromTarget(r)});this._targets.set(r,u),i&&i._children.set(e.targetId,u),a.Target.on("attachedToTarget",async l=>{this.attachedToTarget(l.targetInfo,l.sessionId,l.waitingForDebugger,u)}),a.Target.on("detachedFromTarget",async l=>{l.targetId&&this._detachedFromTarget(l.sessionId,!1)}),a.Target.setAutoAttach({autoAttach:!0,waitForDebuggerOnStart:o,flatten:!0}),a.Network.setCacheDisabled({cacheDisabled:this.launchParams.disableNetworkCache}).catch(l=>this.logger.info("runtime.target","Error setting network cache state",l)),i||this.retrieveBrowserTelemetry(a);let c=e.type;return Hm.has(c)&&this.frameModel.attached(a,e.targetId),this.serviceWorkerModel.attached(a),this._onTargetAddedEmitter.fire(u),!Sf.has(c)||c==="service_worker"?u.runIfWaitingForDebugger():c==="page"&&o&&a.Page.waitForDebugger({}),u}async retrieveBrowserTelemetry(e){try{let r=await e.Browser.getVersion({});if(!r)throw new Error("Undefined return from getVersion()");let n={targetCRDPVersion:r.protocolVersion,targetRevision:r.revision,targetUserAgent:r.userAgent,targetV8:r.jsVersion,targetVersion:"",targetProject:"",targetProduct:""};this.logger.verbose("runtime.target","Retrieved browser information",r);let i=(r.product||"").split("/");i.length===2?(n.targetProject=i[0],n.targetVersion=i[1]):n.targetProduct=r.product,this.telemetry.report("browserVersion",n)}catch(r){this.logger.warn("runtime.target","Error getting browser telemetry",r)}}async _detachedFromTarget(e,r=!0){let n=this._targets.get(e);if(n){this._targets.delete(e),n.parentTarget?._children.delete(e);try{await n._detached()}catch{}if(this._onTargetRemovedEmitter.fire(n),r&&(this._detachedTargets.add(n.targetId),await this._browser.Target.detachFromTarget({sessionId:e})),!this._targets.size&&this.launchParams.request==="launch")try{this.launchParams.cleanUp==="wholeBrowser"?await this._browser.Browser.close({}):(await this._browser.Target.closeTarget({targetId:n.id()}),this._connection.close())}catch{}}}async _targetInfoChanged(e,r){let n=[...this._targets.values()].filter(i=>i.targetId===e.targetId);if(!e.attached||!n.length)return n.length&&await Promise.all(n.map(i=>this._detachedFromTarget(i.sessionId,!1))),r(e);for(let i of n)i._updateFromInfo(e);for(let i of this._targets.values())i.targetId!==e.targetId&&i._onNameChangedEmitter.fire()}};var dW=$(require("child_process")),hW=require("fs");var Nle=50,Jr=class t{constructor(e){this.messageEmitter=new K;this.endEmitter=new K;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this._ws=e,this._ws.addEventListener("message",r=>{this.messageEmitter.fire([r.data.toString("utf-8"),new dn])}),this._ws.addEventListener("close",()=>{this.endEmitter.fire(),this._ws=void 0}),this._ws.addEventListener("error",()=>{})}static async create(e,r,n){let i=!e.startsWith("ws://"),o=await Wu(e);for(;;){let s=Date.now()+Nle;try{let a={headers:{host:n??"localhost"},perMessageDeflate:!1,maxPayload:268435456,rejectUnauthorized:!(i&&o),followRedirects:!0},u=new FR(e,[],a);return await xi(new Promise((c,l)=>{u.addEventListener("open",()=>c(new t(u))),u.addEventListener("error",f=>{let p=e===u.url?e:u.url.replace(/^http(s?):/,"ws$1:");if(p===e){l(f.error);return}this.create(p,r,n).then(c,l)})}),Lt.withTimeout(2e3,r).token,`Could not open ${e}`).catch(c=>{throw u.close(),c})}catch(a){if(r.isCancellationRequested)throw a;let u=s-Date.now();u>0&&await we(u)}}}send(e){this._ws?.send(e)}dispose(){return new Promise(e=>{if(!this._ws)return e();this._ws.addEventListener("close",()=>e()),this._ws.close()})}};var Uy=$(require("path"));function Ble(t){let e=[/^APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL$/i,/^ELECTRON_.+$/i,/^GOOGLE_API_KEY$/i,/^VSCODE_.+$/i,/^SNAP(|_.*)$/i,/^GDK_PIXBUF_.+$/i];return new jt(t).map((r,n)=>e.some(i=>i.test(r))?void 0:n)}var jt=class t{constructor(e){this.defined=ye(()=>xu(this.value));this.value=e?IC(e):{}}static{this.platform=process.platform}static{this.empty=new t({})}static{this.processEnv=ye(()=>Ble(process.env))}lookup(e){return t.platform==="win32"?EC(this.value,e):this.value[e]}addToPath(e,r="append",n=!1){let i=t.platform==="win32"?"Path":"PATH",o=t.platform==="win32"?Uy.win32.delimiter:Uy.posix.delimiter,s=this.lookup(i);return n&&!s&&(s=`\${env:${i}}`),s?r==="append"?s=s+o+e:s=e+o+s:s=e,this.update(i,s)}addNodeOption(e){let r=this.lookup("NODE_OPTIONS");return this.update("NODE_OPTIONS",r?`${r} ${e}`:e)}update(e,r){return t.merge(this,{[e]:r})}merge(...e){return t.merge(this,...e)}map(e){return new t(Yi(this.value,(r,n)=>e(n,r)))}static merge(...e){let r=e.map(i=>i instanceof t?i.value:i),n=t.platform==="win32"?SC(...r):Object.assign({},...r);return new t(n)}};var Q2="--remote-debugging-port",Z2="--remote-debugging-pipe",eW=t=>{let e={};for(let r of t){let n=r.indexOf("=");n===-1?e[r]=null:e[r.slice(0,n)]=r.slice(n+1)}return e},jy=t=>{let e=[];for(let r of Object.keys(t)){let n=t[r];n!==void 0&&e.push(n===null?r:`${r}=${n}`)}return e},Ts=class t{constructor(e=[]){this.args=e;this.argMap=ye(()=>eW(this.args))}static{this.default=new t(["--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-default-apps","--disable-dev-shm-usage","--disable-renderer-backgrounding","--disable-sync","--metrics-recording-only","--no-first-run","--no-default-browser-check"])}add(e,r=null){return new t(jy({...this.argMap(),[e]:r}))}remove(e){return new t(jy({...this.argMap(),[e]:void 0}))}merge(e){return new t(jy({...this.argMap(),...e instanceof t?e.argMap():eW(e)}))}setConnection(e){return new t(jy({...this.argMap(),[Z2]:e==="pipe"?null:void 0,[Q2]:e!=="pipe"?String(e):void 0}))}getSuggestedConnection(){let e=this.argMap();if(e.hasOwnProperty(Z2))return"pipe";let r=e[Q2];if(r!==void 0)return r&&Number(r)||0}filter(e){let r=this.argMap(),n=[];for(let i of Object.keys(r)){let o=r[i];e(i,o)&&n.push(o===null?i:`${i}=${o}`)}return new t(n)}toArray(){return this.args.slice()}};var aE=require("url");function Wy(t,e,r){let n=zs(s=>{if(s)return new aE.URL(s);throw new Error(`A valid url wasn't supplied: <${s}>`)}),i={"url.hostname":()=>n(e).hostname,"url.port":()=>n(e).port,browserInspectUri:()=>encodeURIComponent(r),browserInspectUriPath:()=>new aE.URL(r).pathname,wsProtocol:()=>n(e).protocol==="https:"?"wss":"ws"};return t.replace(/{([^\}]+)}/g,(s,a)=>i.hasOwnProperty(a)?i[a]():s)}var cW=$(require("readline"));var iW=$(Vy());var wn=class{constructor(e,r,n){this.logger=e;this.pipeWrite=r;this.pipeRead=n;this.messageEmitter=new K;this.endEmitter=new K;this.onMessage=this.messageEmitter.event;this.onEnd=this.endEmitter.event;this.onceEnded=ye(()=>{this.streams&&(this.beforeClose(),this.streams.read.removeAllListeners(),this.pipeRead?.destroy(),this.streams.write.removeListener("end",this.onceEnded),this.streams.write.removeListener("error",this.onWriteError),this.streams.write.on("error",()=>{}),this.streams.write.end(),this.streams=void 0,this.endEmitter.fire())});this.onWriteError=e=>{this.logger.error("internal","pipeWrite error",{error:e})};let i=n||r;this.streams={read:i.on("error",o=>this.logger.error("internal","pipeRead error",{error:o})).pipe((0,iW.default)("\0")).on("data",o=>this.messageEmitter.fire([o,new dn])).on("end",this.onceEnded),write:r.on("end",this.onceEnded).on("error",this.onWriteError)}}send(e){this.streams?.write.write(e+"\0")}dispose(){this.onceEnded()}beforeClose(){}};var Gy=require("child_process"),uE=require("path");function qn(t,e,r="forceful"){if(r==="none")return!0;if(process.platform==="win32"){let n=process.env.WINDIR||"C:\\Windows",i=(0,uE.join)(n,"System32","taskkill.exe");try{return(0,Gy.execSync)(`${i} ${r==="forceful"?"/F":""} /T /PID ${t}`,{stdio:"pipe"}),!0}catch(o){return e.error("runtime.exception","Error running taskkill.exe",o),!1}}else try{let n=(0,uE.join)(__dirname,"./targets/node/terminateProcess.sh"),i=(0,Gy.spawnSync)("sh",[n,t.toString(),r==="forceful"?"9":"15"]);return i.stderr&&i.status?(e.error("runtime.exception","Error running terminateProcess",i),!1):!0}catch(n){return e.error("runtime.exception","Error running terminateProcess",n),!1}}var aW=require("fs");async function cE(t,e,r,n){let i=new ms(aW.promises),[o,s]=await Promise.all([oW(i,new URL("/json/version",t),e),n?oW(i,new URL("/json/list",t),e):Promise.resolve(void 0)]);if(!o.ok)r.verbose("runtime.launch","Error looking up /json/version",o);else if(o.body.webSocketDebuggerUrl){let a=sW(o.url,o.body.webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/version",{url:o.body.webSocketDebuggerUrl,fixed:a}),a}if(s)if(!s.ok)r.verbose("runtime.launch","Error looking up /json/list",s);else{let a=sW(s.url,s.body[0].webSocketDebuggerUrl);return r.verbose("runtime.launch","Discovered target URL from /json/list",{url:s.body[0].webSocketDebuggerUrl,fixed:a}),a}throw new Error("Could not find any debuggable target")}async function oW(t,e,r){if(e.hostname!=="localhost")return t.fetchJson(e.toString(),r,{host:"localhost"});e.hostname="127.0.0.1";let n=e.toString();e.hostname="[::1]";let i=e.toString(),o=new Lt(r);try{let s;return await hu([n,i].map(async u=>(s=await t.fetchJson(u,o.token),s.ok&&s)))||s}finally{o.cancel()}}var uW=t=>async(e,r,n)=>{for(;;)try{return await cE(e,r,n,t)}catch(i){if(r.isCancellationRequested)throw new Error(`Could not connect to debug target at ${e}: ${i.message}`);await we(200)}},ml=uW(!0),Xy=uW(!1);function sW(t,e){let r=new URL(t),n=new URL(e);return n.host=r.host,n.toString()}var lW=async(t,e,r,n)=>{let i=r.connection===0?await Gle(e,n):await Xy(`http://localhost:${r.connection}`,n,t),o=r.inspectUri?Wy(r.inspectUri,r.url,i):i;for(;;)try{return await Jr.create(o,n)}catch(s){if(n.isCancellationRequested)throw s;await we(200)}},Ky=class{constructor(e){this.logger=e;this.pid=void 0;this.onExit=new K().event;this.onError=new K().event}async transport(e,r){return lW(this.logger,this,e,r)}kill(){}},zy=class{constructor(e,r){this.cp=e;this.logger=r;this.pid=void 0;this.exitEmitter=new K;this.onExit=this.exitEmitter.event;this.errorEmitter=new K;this.onError=this.errorEmitter.event;e.on("exit",n=>this.exitEmitter.fire(n||0)),e.on("error",n=>this.errorEmitter.fire(n))}get stderr(){return this.cp.stderr}get stdio(){return this.cp.stdio}async transport(e,r){return e.connection==="pipe"?new wn(this.logger,this.cp.stdio[3],this.cp.stdio[4]):lW(this.logger,this,e,r)}kill(){qn(this.cp.pid,this.logger)}};function Gle(t,e){if(!t.stderr)throw new Error("Cannot wait for a websocket for a target that lacks stderr");return new Promise((r,n)=>{let i=cW.createInterface({input:t.stderr}),o="",s=()=>c();i.on("line",l),i.on("close",s);let a=new Be([t.onExit(()=>c()),t.onError(c)]),u=e.onCancellationRequested(()=>{f(),n(new Pi(`Timed out after ${u} ms while trying to connect to the browser!`))});function c(p){f(),n(new Error(["Failed to launch browser!"+(p?" "+p.message:""),o,"","TROUBLESHOOTING: https://github.com/GoogleChrome/puppeteer/blob/master/docs/troubleshooting.md",""].join(`
`)))}function l(p){o+=p+`
`;let m=p.match(/^DevTools listening on (ws:\/\/.*)$/);m&&(f(),r(m[1]))}function f(){u.dispose(),i.removeListener("line",l),i.removeListener("close",s),a.dispose()}})}async function fW(t,e,r,n){let i=t.launchUnelevatedRequest({process:e,args:r});await xi(i,n,"Could not launch browser unelevated")}var pW=()=>{};async function mW(t,e,r,n,i,o,s={}){let{onStderr:a=pW,onStdout:u=pW,args:c=[],dumpio:l=!1,cwd:f=process.cwd(),env:p=jt.empty,connection:m="pipe",cleanUp:h="wholeBrowser",url:g,inspectUri:y}=s,_=new Ts(c),C=_.getSuggestedConnection();s.includeLaunchArgs!==!1?(_=lE(_,s),C===void 0&&(_=_.setConnection(m),C=m)):C===void 0&&(C="pipe");let N=["pipe","pipe","pipe"];C==="pipe"&&(l?N=["ignore","pipe","pipe","pipe","pipe"]:N=["ignore","ignore","ignore","pipe","pipe"]);let D;if(!!(i.supportsLaunchUnelevatedProcessRequest&&s.launchUnelevated)&&typeof C=="number"&&C!==0)await fW(t,e,_.toArray(),o),D=new Ky(r);else{r.info("runtime.launch",`Launching Chrome from ${e}`);let G=dW.spawn(e,_.toArray(),{detached:!0,env:p.defined(),cwd:await Du(hW.promises,f)?f:process.cwd(),stdio:N});if(G.pid===void 0)throw await Promise.race([we(1e3).then(()=>new Error("Unable to launch the executable (undefined pid)")),new Promise(U=>G.once("error",U))]);D=new zy(G,r)}l?(D.stderr?.on("data",G=>a(G.toString())),D.stdout?.on("data",G=>u(G.toString()))):(D.stderr?.resume(),D.stdout?.resume());let X=()=>{h==="wholeBrowser"&&D.kill()};process.on("exit",X),D.onExit(()=>process.removeListener("exit",X));try{if(s.promisedPort){let G;C=await Promise.race([s.promisedPort,new Promise((U,k)=>{G=D.onExit(M=>{k(new Y(kD(M)))})})]).finally(()=>G.dispose())}return{process:D,canReconnect:typeof C=="number",createConnection:async G=>{let U=await D.transport({connection:C,inspectUri:y||void 0,url:g||void 0},G);return new vt(U,r,n)}}}catch(G){throw D.kill(),G}}function lE(t,e={}){let{userDataDir:r=null,ignoreDefaultArgs:n=!1}=e,i=n===!0?new Ts:Ts.default;return n instanceof Array&&(i=i.filter(o=>!n.includes(o))),r&&(i=i.add("--user-data-dir",r)),i=i.merge(t),t.toArray().every(o=>o.startsWith("-"))&&e.hasUserNavigation&&(i=i.add("about:blank")),i}async function HW(t,e,r,n){let{browserWSEndpoint:i,browserURL:o}=t;if(i){let s=await Jr.create(i,e);return new vt(s,r,n)}else if(o){let s=await Xy(o,e,r),a=t.inspectUri?Wy(t.inspectUri,t.pageURL,s):s,u=await Jr.create(a,e);return new vt(u,r,n)}throw new Error("Either browserURL or browserWSEndpoint needs to be specified")}var In=class{constructor(e,r,n){this.logger=e;this.pathResolver=r;this.vscode=n;this._disposables=[];this._onTerminatedEmitter=new K;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new K;this.onTargetListChanged=this._onTargetListChangedEmitter.event}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[],this._attemptTimer&&clearTimeout(this._attemptTimer),this._targetManager&&this._targetManager.dispose()}resolveParams(e){return e.request==="attach"&&(e.type==="pwa-chrome"||e.type==="pwa-msedge"&&typeof e.useWebView!="object")&&e.browserAttachLocation==="workspace"}async launch(e,r){return this.resolveParams(e)?(this._lastLaunchParams={...e,timeout:1/0},await this.attemptToAttach(this._lastLaunchParams,r),{blockSessionTermination:!0}):{blockSessionTermination:!1}}_scheduleAttach(e,r){this._attemptTimer=setTimeout(()=>{this._attemptTimer=void 0,this.attemptToAttach(e,{...r,cancellationToken:cr})},1e3)}createTargetManager(e,r,n){return Ds.connect(e,void 0,this.pathResolver,r,this.logger,n.telemetryReporter,n.targetOrigin)}async attemptToAttach(e,r){let n=await this.acquireConnectionForBrowser(r,e);this._connection=n,n.onDisconnected(()=>{this._connection=void 0,this._targetManager&&(this._targetManager.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire()),this._lastLaunchParams===e&&e.restart?this._scheduleAttach(e,r):this._onTerminatedEmitter.fire({killed:!0,code:0})},void 0,this._disposables);let i=this._targetManager=await this.createTargetManager(n,e,r);if(!i)return;i.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),i.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),i.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),i.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire(),i.targetList().length||this._onTerminatedEmitter.fire({killed:!0,code:0})});let o=await Promise.race([i.waitForMainTarget(await this.getTargetFilter(i,e)),we(e.timeout).then(()=>{throw new Y(Zh())})]);return typeof o=="string"?o:void 0}async getTargetFilter(e,r){let n=Go(r),i=Vu(n);if(r.targetSelection!=="pick")return i;let o=await e.getCandiateInfo(i);if(o.length===0)return i;if(o.length===1||!this.vscode)return u=>u.targetId===o[0].targetId;let s=Jy.t("Select a tab"),a=await this.vscode.window.showQuickPick(o.map(u=>({label:u.title,detail:u.url,targetId:u.targetId})),{matchOnDescription:!0,matchOnDetail:!0,placeHolder:s});return a?u=>u.targetId===a.targetId:i}async acquireConnectionForBrowser({telemetryReporter:e,cancellationToken:r},n){for(;this._lastLaunchParams===n;)try{return await this.acquireConnectionInner(e,n,r)}catch(i){if(r.isCancellationRequested)throw new Y(bf(Jy.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,i.message)));await we(1e3)}throw new Y(bf(Jy.t("Cannot connect to the target at {0}: {1}",`${n.address}:${n.port}`,"Cancelled")))}async acquireConnectionInner(e,r,n){let i=`http://${r.address}:${r.port}`;return await HW({browserURL:i,inspectUri:r.inspectUri,pageURL:r.url},n,this.logger,e)}async terminate(){this._lastLaunchParams=void 0,this._connection?.close()}async restart(){if(this._targetManager)for(let e of this._targetManager.targetList())e.type()==="page"&&!e.name().startsWith("devtools://")&&e.restart()}targetList(){let e=this._targetManager;return e?e.targetList():[]}};In=W([(0,Ms.injectable)(),I(0,(0,Ms.inject)(re)),I(1,(0,Ms.inject)(je)),I(2,(0,Ms.optional)()),I(2,(0,Ms.inject)(Yo))],In);var Vn=$(ae());var yW=$(uv()),bW=$(ut()),Hd=$(require("fs")),Rs=$(ae()),Hl=$(require("path"));var Fi=class{constructor(e,r,n,i,o){this.storagePath=e;this.logger=r;this.pathResolver=n;this.initializeParams=i;this.fs=o;this._disposables=new Be;this._onTerminatedEmitter=new K;this.onTerminated=this._onTerminatedEmitter.event;this._onTargetListChangedEmitter=new K;this.onTargetListChanged=this._onTargetListChangedEmitter.event;this._terminatedCts=new Lt}dispose(){this._disposables.dispose()}async launchBrowser({runtimeExecutable:e,trace:r,includeDefaultArgs:n,includeLaunchArgs:i,runtimeArgs:o,userDataDir:s,env:a,cwd:u,port:c,url:l,file:f,inspectUri:p,webRoot:m,cleanUp:h,launchUnelevated:g},y,_,C,N){let D=await this.findBrowserPath(e||"stable"),j;return typeof s=="string"?j=Hl.resolve(s):s&&(j=Hl.resolve(Hl.join(this.storagePath,o?.includes("--headless")?".headless-profile":".profile"))),Hd.mkdirSync(this.storagePath,{recursive:!0}),j&&(Hd.mkdirSync(j,{recursive:!0}),j=Hd.realpathSync(j)),await mW(y,D,this.logger,C,this.initializeParams,_,{onStdout:X=>y.output({category:"stdout",output:X}),onStderr:X=>y.output({category:"stderr",output:X}),dumpio:typeof r=="boolean"?r:r.stdio,cleanUp:h,hasUserNavigation:!!(l||f),cwd:u||m||void 0,env:jt.merge(jt.processEnv(),a),args:o||[],userDataDir:j,connection:c||(p?0:"pipe"),launchUnelevated:g,ignoreDefaultArgs:!n,includeLaunchArgs:i,url:l,inspectUri:p,promisedPort:N})}getFilterForTarget(e){return Vu(Go(e,["about:blank"]))}async doLaunch(e,r){let n;try{n=await this.launchBrowser(e,r.dap,r.cancellationToken,r.telemetryReporter)}catch(c){throw new Y(C_(c))}let i=new Lt(this._terminatedCts.token);n.process.onExit(()=>this.fireTerminatedEvent());let o=()=>n.canReconnect&&!i.token.isCancellationRequested,s=async c=>{if(this._targetManager?.dispose(),this._targetManager=void 0,this._onTargetListChangedEmitter.fire(),o()&&(await we(1e3),o())){r.dap.output({category:"stderr",output:bW.t("Browser connection failed, will retry: {0}",c?.message||"Connection closed")});try{return await we(2e3),await a()}catch{}}n.process.kill(),this.fireTerminatedEvent()},a=async()=>{if(!i.token.isCancellationRequested)try{let c=await n.createConnection(i.token),l=await this.launchCdp(e,n,c,{...r,cancellationToken:i.token});await this.finishLaunch(l,e),c.onDisconnected(()=>s())}catch(c){if(o())return s(c);throw n.process.kill(),new Y(C_(c))}},u=r.cancellationToken.onCancellationRequested(()=>i.cancel());try{await a()}finally{u.dispose()}}async launchCdp(e,r,n,i){if(this._connectionForTest=n,this._targetManager=await Ds.connect(n,r.process,this.pathResolver,e,this.logger,i.telemetryReporter,i.targetOrigin),!this._targetManager)throw new Y(bf());this._targetManager.serviceWorkerModel.onDidChange(()=>this._onTargetListChangedEmitter.fire()),this._targetManager.frameModel.onFrameNavigated(()=>this._onTargetListChangedEmitter.fire()),this._disposables.push(this._targetManager),this._targetManager.onTargetAdded(()=>{this._onTargetListChangedEmitter.fire()}),this._targetManager.onTargetRemoved(()=>{this._onTargetListChangedEmitter.fire()});let o=this.getFilterForTarget(e),s=await xi(this._targetManager.waitForMainTarget(o),i.cancellationToken,"Could not attach to main target");if(!s)throw new Y(Zh());return s}async finishLaunch(e,r){if("skipNavigateForTest"in r)return;let n;if(r.file){let i=Hl.resolve(r.webRoot||r.rootPath||"",r.file),o=Math.min(i.includes("#")?i.indexOf("#"):1/0,i.includes("?")?i.indexOf("?"):1/0);isFinite(o)&&!await ko(this.fs,i)?n=xe(i.slice(0,o))+i.slice(o):n=xe(i)}else n=r.url;n&&await e.cdp().Page.navigate({url:n})}async launch(e,r){let n=this.resolveParams(e);return n?(await this.doLaunch(n,r),{blockSessionTermination:!0}):{blockSessionTermination:!1}}async terminate(){this._targetManager?await this._targetManager.closeBrowser():this.fireTerminatedEvent()}async restart(){for(let e of this.targetList())e.type()==="page"&&e.restart()}async findBrowserByExe(e,r){return r==="*"?(await e.findWhere(i=>i.quality==="stable")||(await e.findAll())[0])?.path:(0,yW.isQuality)(r)?(await e.findWhere(n=>n.quality===r))?.path:r}targetList(){let e=this._targetManager;return e?e.targetList():[]}connectionForTest(){return this._connectionForTest}fireTerminatedEvent(){this._terminatedCts.token.isCancellationRequested||(this._terminatedCts.cancel(),this._onTerminatedEmitter.fire({code:0,killed:!0}))}};Fi=W([(0,Rs.injectable)(),I(0,(0,Rs.inject)(Ai)),I(1,(0,Rs.inject)(re)),I(2,(0,Rs.inject)(je)),I(3,(0,Rs.inject)(Dr)),I(4,(0,Rs.inject)(qe))],Fi);var Za=class extends Fi{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-chrome"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await Du(this.fs,n))throw new Y(Qh("Chrome",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};Za=W([(0,Vn.injectable)(),I(0,(0,Vn.inject)(Ai)),I(1,(0,Vn.inject)(re)),I(2,(0,Vn.inject)(ga)),I(2,(0,Vn.tagged)("browser","chrome")),I(3,(0,Vn.inject)(qe)),I(4,(0,Vn.inject)(je)),I(5,(0,Vn.inject)(Dr))],Za);var vW=require("crypto"),Gn=$(ae()),_W=require("net"),wW=require("os"),IW=require("path");var Xle=["--do-not-de-elevate"],gl=class extends Fi{constructor(r,n,i,o,s,a){super(r,n,s,a,o);this.browserFinder=i}resolveParams(r){return r.type==="pwa-msedge"&&r.request==="launch"&&r.browserLaunchLocation==="workspace"?r:void 0}launchBrowser(r,n,i,o){return super.launchBrowser({...r,runtimeArgs:r.runtimeArgs??Xle},n,i,o,r.useWebView?this.getWebviewPort(r,o):void 0)}getFilterForTarget(r){return r.useWebView&&r.urlFilter?Vu(Go(r)):super.getFilterForTarget(r)}async getWebviewPort(r,n){let i=$e();if(!r.runtimeExecutable)return i.resolve(r.port),i.promise;let o=r.runtimeExecutable.split(/\\|\//).pop(),s=`VSCode_${(0,vW.randomBytes)(12).toString("base64")}`,a=`\\\\.\\pipe\\WebView2\\Debugger\\${o}\\${s}`,u=(0,_W.createServer)(c=>{c.on("data",async l=>{let f=JSON.parse(l.toString()),p=f.devtoolsActivePort||"",m=parseInt(p.split(`
`).shift()||""),h=r.port||m;i.resolve(h);let g=`ws://${r.address}:${h}/devtools/${f.type}/${f.id}`,y=await Jr.create(g,cr),_=new vt(y,this.logger,n);await _.rootSession().Runtime.runIfWaitingForDebugger({}),_.close()})});return u.on("error",i.reject),u.on("close",()=>i.resolve(r.port)),u.listen(a),r.userDataDir=r.userDataDir||(0,IW.join)((0,wW.tmpdir)(),`vscode-js-debug-userdatadir_${r.port}`),r.env=r.env||{},r.env.WEBVIEW2_USER_DATA_FOLDER=r.userDataDir.toString(),r.env.WEBVIEW2_ADDITIONAL_BROWSER_ARGUMENTS=`--remote-debugging-port=${r.port}`,r.env.WEBVIEW2_WAIT_FOR_SCRIPT_DEBUGGER="true",r.env.WEBVIEW2_PIPE_FOR_SCRIPT_DEBUGGER=s,i.promise}async findBrowserPath(r){let n=await this.findBrowserByExe(this.browserFinder,r);if(!n||!await Du(this.fs,n))throw new Y(Qh("Edge",r,(await this.browserFinder.findAll()).map(i=>i.quality)));return n}};gl=W([(0,Gn.injectable)(),I(0,(0,Gn.inject)(Ai)),I(1,(0,Gn.inject)(re)),I(2,(0,Gn.inject)(ga)),I(2,(0,Gn.tagged)("browser","edge")),I(3,(0,Gn.inject)(qe)),I(4,(0,Gn.inject)(je)),I(5,(0,Gn.inject)(Dr))],gl);var Eo=$(ae());var AW=require("crypto"),Yy=$(ae());var Kle=0,Ui=class{constructor(e){this.portLeaseTracker=e;this.teardown=new WeakMap}async launch(e,r,n){this.server&&this.server.close();let i=`/${(0,AW.randomBytes)(20).toString("hex")}`,o=this.server=await bH(this.portLeaseTracker,{perMessageDeflate:!0,host:"127.0.0.1",path:i}),s=++Kle;e.launchBrowserInCompanion({...n,serverPort:o.address().port,path:i,launchId:s});let a=await xi(new Promise((c,l)=>{o.once("connection",c),o.once("error",l)}),r,"Timed out waiting for browser connection"),u=new Jr(a);return this.teardown.set(u,()=>e.killCompanionBrowser({launchId:s})),u}close(e){this.teardown.get(e)?.()}dispose(){this.server?.close(),this.server=void 0}};Ui=W([(0,Yy.injectable)(),I(0,(0,Yy.inject)(Tr))],Ui);var yl=class extends In{constructor(r,n,i,o){super(n,i,o);this.helper=r}resolveParams(r){return r.request==="attach"&&(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.browserAttachLocation==="ui"}async acquireConnectionForBrowser(r,n){let i=await this.helper.launch(r.dap,r.cancellationToken,{type:n.type==="pwa-chrome"?"chrome":"edge",params:n,attach:{host:n.address,port:n.port}});return new vt(i,this.logger,r.telemetryReporter)}};yl=W([(0,Eo.injectable)(),I(0,(0,Eo.inject)(Ui)),I(1,(0,Eo.inject)(re)),I(2,(0,Eo.inject)(je)),I(3,(0,Eo.optional)()),I(3,(0,Eo.inject)(Yo))],yl);var Lo=$(ae());var bl=class extends Fi{constructor(r,n,i,o,s,a){super(r,n,i,o,s);this.helper=a}resolveParams(r){return(r.type==="pwa-chrome"||r.type==="pwa-msedge")&&r.request==="launch"&&r.browserLaunchLocation==="ui"?r:void 0}async launchBrowser(r,n,i,o){let s=await this.helper.launch(n,i,{type:r.type==="pwa-chrome"?"chrome":"edge",browserArgs:lE(new Ts(r.runtimeArgs||[]),{hasUserNavigation:!!r.url,ignoreDefaultArgs:!r.includeDefaultArgs}).setConnection(r.port||"pipe").toArray(),params:r});return{canReconnect:!1,createConnection:()=>Promise.resolve(new vt(s,this.logger,o)),process:{onExit:new K().event,onError:new K().event,transport:()=>Promise.resolve(s),kill:()=>this.helper.close(s)}}}async findBrowserPath(){throw new Error("not implemented")}};bl=W([(0,Lo.injectable)(),I(0,(0,Lo.inject)(Ai)),I(1,(0,Lo.inject)(re)),I(2,(0,Lo.inject)(je)),I(3,(0,Lo.inject)(Dr)),I(4,(0,Lo.inject)(qe)),I(5,(0,Lo.inject)(Ui))],bl);var ks=$(ae()),DW=require("net");var vl=class extends In{constructor(e,r,n){super(e,r,n)}resolveParams(e){return e.request==="attach"&&e.type==="pwa-msedge"&&typeof e.useWebView=="object"}async acquireConnectionForBrowser(e,r){let{getAppContainerProcessTokens:n}=await Promise.resolve().then(()=>$(CW())),i=n(r.useWebView.pipeName);if(!i)throw new Y(TD());let o=i.map(u=>(0,DW.connect)(u)),s;try{s=await xi(hu(o.map(u=>new Promise(c=>u.on("error",()=>c(void 0)).on("connect",()=>c(u))))),e.cancellationToken)}finally{for(let u of o)u!==s&&u.destroy()}if(!s)throw new Y($D());let a=new wn(this.logger,s);return new vt(a,this.logger,e.telemetryReporter)}};vl=W([(0,ks.injectable)(),I(0,(0,ks.inject)(re)),I(1,(0,ks.inject)(je)),I(2,(0,ks.optional)()),I(2,(0,ks.inject)(Yo))],vl);var Sl=$(ae()),qW=require("net");var Yr=$(ae());var fE=Symbol("ILinkedBreakpointLocation");var NW=$(require("path"));var yd=$(ae()),Ns=$(require("path")),OW=require("url");var TW=require("fs"),Po=$(require("path")),pE=require("url");function Zy(t,e){return t?(t.endsWith("/")||(t+="/"),t+e):e}async function eb(t,e,r,n,i){e=st(e)||e;let o;if(t){if(sn(t))o=st(t);else if(ur(t))o=await n(t,r,i)||t;else if(Po.isAbsolute(e))o=tfe(e,t);else{let s=new pE.URL(e).pathname,a=await n(s,r,i),u=Po.dirname(a);o=Oo(u,t)}i.verbose("sourcemap.parsing","resolved sourceRoot",{sourceRoot:t,absSourceRoot:o})}else if(Po.isAbsolute(e))o=Po.dirname(e),i.verbose("sourcemap.parsing","no sourceRoot specified, using script dirname",{absSourceRoot:o});else{let s=new pE.URL(e).pathname||"/placeholder.js",a=await n(s,r,i);o=a?Po.dirname(a):"",i.verbose("sourcemap.parsing","no sourceRoot specified, using webRoot + script path dirname",{absSourceRoot:o})}return o=IT(o),o=ft(o),o}var gd=async(t,e,r)=>{if(!t||!t.startsWith("/"))return"";let n=Object.keys(e).sort((i,o)=>o.length-i.length);for(let i of n){if(!i)continue;let o=e[i];if(i[0]!=="/"&&(r.verbose("sourcemap.parsing",`Keys should be absolute: ${i}`),i="/"+i),Zle(i,t))return efe(i,o,t)}return""},$W=(t,e)=>async(r,n,i)=>{if(process.platform==="win32"&&/^[a-z]:/i.test(r))return r;let o=await wm(t,Po.dirname(e),"package.json");if(!o)return gd(r,n,i);let s=await gd(r,AC(n,a=>a.length>=o.length),i);return process.platform!=="win32"&&r!=="/"&&!s&&(await TW.promises.stat(r).catch(()=>{}))?.isDirectory()?r:s||o};function Zle(t,e){return t===e?!0:(t.endsWith("/")||(t+="/"),e.startsWith(t))}function efe(t,e,r){let n=decodeURIComponent(r.substring(t.length));return n?Oo(e,n):e}function tfe(t,e){return Nr(Po.dirname(t),e)}var kW=$(Of()),wl=$(require("path"));var nb="*",MW=new RegExp(br(nb),"g"),tb="?:"+nb,rfe=new RegExp(br(tb),"g"),dE=(t,e)=>{let r=e.match(t);return t.lastIndex=0,r?r.length:0},RW=new RegExp(`${br(tb)}|${br(nb)}`,"g"),rb=class{constructor(e,r){this.logger=r;this.replacers=[];let n=Object.keys(e).sort((i,o)=>o.replace(tb,"*").length-i.replace(tb,"*").length);for(let i of n){let o=e[i];if(!o.includes("*")&&/\$[0-9'`&]/.test(o)){this.replacers.push([new RegExp(`^${i}$`,"i"),o]);continue}let s=et(i),a=`"${s}": "${o}"`,u=dE(MW,s)-dE(rfe,s);if(u>1){r.warn("runtime.sourcemap",`Warning: only one asterisk allowed in a sourceMapPathOverrides entry - ${a}`);continue}if(dE(MW,o)>u){r.warn("runtime.sourcemap",`The right side of a sourceMapPathOverrides entry must have 0 or 1 asterisks - ${a}}`);continue}let c="^",l=0;for(RW.lastIndex=0;;){let f=RW.exec(s);if(c+=br(s.slice(l,f?.index),"/"),!f)break;f[0]===nb?c+="(.*?)":c+=".*?",l=f.index+f[0].length}u===0&&(c+="([\\/\\\\].*)?",o+="*"),this.replacers.push([new RegExp(c+"$","i"),o.replace(/\$/g,"$$$$").replace(/\*/,"$1")])}}apply(e){let r=et(e);for(let[n,i]of this.replacers){let o=r.replace(n,i);if(o!==r)return this.logger.verbose("runtime.sourcemap",`SourceMap: mapping ${e} => ${o}, via sourceMapPathOverrides entry - ${n.toString()}`),Oo(o)}return e}};var nfe=/\x00/,_l=class{constructor(e,r){this.options=e;this.logger=r;this.sourceMapOverrides=new rb(this.options.sourceMapOverrides,this.logger);this.resolvePatterns=this.options.resolveSourceMapLocations?.map(e=>{let r=e.startsWith("!")?"!":"",n=e.slice(r.length).replace(/(?<!\.)\.[^.]+$/,".*");if(!ur(n))return et(e);n=et(Nr(n));let i=p_(this.options.workspaceFolder),o=p_(n),s=0;for(let a=0;a<i.length&&a<o.length&&o[a].toLowerCase()===i[a].toLowerCase();a++)s+=i[a].length+1;return n=n.slice(0,s).replace(/[\[\]\(\)\{\}\!\*]/g,"\\$&")+n.slice(s),r+n})}shouldResolveSourceMap({sourceMapUrl:e,compiledPath:r}){if(r.startsWith(Hs)||r==="")return!1;if(!this.resolvePatterns||this.resolvePatterns.length===0)return!0;let n=st(e)||Kt(e)&&r||e;if(n.startsWith("webpack-internal:///"))return!0;let i=Wh(e)?!1:W_(),o=this.rebaseRemoteToLocal(n);return(0,kW.default)((o!==n?[n,o]:[n]).map(et),this.resolvePatterns,{dot:!0,nocase:!i}).length>0}rebaseRemoteToLocal(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return wl.resolve(e);let r=df(this.options.remoteRoot,e);if(r.startsWith(".."))return"";let n=Oo(this.options.localRoot,r);return n=d_(n),this.logger.verbose("runtime.sourcemap",`Mapped remoteToLocal: ${e} -> ${n}`),Nr(n)}rebaseLocalToRemote(e){if(!this.options.remoteRoot||!this.options.localRoot||!this.canMapPath(e))return e;let r=df(this.options.localRoot,e),n=Oo(this.options.remoteRoot,r);return n=ft(n,!0),this.logger.verbose("runtime.sourcemap",`Mapped localToRemote: ${e} -> ${n}`),n}normalizeSourceMapUrl(e){e=e.replace(nfe,"");let r=e.lastIndexOf("?");return r!==-1&&e.slice(r-4,r)!==".vue"&&(e=e.slice(0,r)),e}canMapPath(e){return wl.posix.isAbsolute(e)||wl.win32.isAbsolute(e)||sn(e)}};var hE="https?:\\/\\/[^\\/]+\\/",Os=class extends _l{constructor(r,n,i,o){super(i,o);this.vueMapper=r;this.fsUtils=n}absolutePathToUrlPath(r){r=Ns.normalize(r);let{baseUrl:n,pathMapping:i}=this.options,o=["/",i["/"]],s=Object.entries(i).sort(([c,l],[f,p])=>p.length-l.length||f.length-c.length).find(([,c])=>VC(c,r))||o;if(!s)return{url:xe(r),needsWildcard:!1};if(n&&sn(n))return{url:qu(r),needsWildcard:!1};let a=Vo(Ns.relative(s[1],r)),u=s[0].replace(/\/$|^\//g,"");return u&&(a=u+"/"+a),!n&&!Im(a)?{url:a,needsWildcard:!0}:{url:fm(n,a),needsWildcard:!1}}async urlToAbsolutePath({url:r,map:n}){let i=r.indexOf("?");return i!==-1&&r.slice(i-4,i)!==".vue"&&(r=r.slice(0,i)),n?this.sourceMapSourceToAbsolute(r,n):this.simpleUrlToAbsolute(r)}async simpleUrlToAbsolute(r){if(!r)return;if(sn(r)){let s=st(r);if(await this.fsUtils.exists(s))return s;let a=AT(r);return await this.fsUtils.exists(a)?a:s}let n;try{let s=new OW.URL(r);if(!s.pathname||s.pathname==="/"?n="index.html":n=s.pathname,s.protocol==="webpack-internal:")return}catch{n=r}let i=Ns.extname(n),o=n.replace(/^\//,"").split(/[\/\\]/);for(;o.length>0;){let s="/"+o.join("/"),a=await gd(s,this.options.pathMapping,this.logger);if(a){if(!i&&await this.fsUtils.exists(a+".html"))return a+".html";if(await this.fsUtils.exists(a))return a}o.shift()}}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;switch(this.vueMapper.getVueHandling(r)){case 2:return;case 1:let a=await this.vueMapper.lookup(r);if(a)return ft(a);break;default:}r=this.normalizeSourceMapUrl(r);let{pathMapping:i}=this.options,o=Zy(n.sourceRoot,r),s=this.sourceMapOverrides.apply(o);if(s!==o){s=ft(s);let a=Nr(i["/"],"..","ClientApp",df(i["/"],s));return this.options.clientID==="visualstudio"&&o.startsWith("webpack:///")&&!await this.fsUtils.exists(s)&&await this.fsUtils.exists(a)?a:s}return sn(r)?st(r):Ns.isAbsolute(r)?ft(r):Nr(await eb(n.sourceRoot,n.metadata.compiledPath,i,gd,this.logger),r)}absolutePathToUrlRegexp(r){let n=this.absolutePathToUrlPath(r),i=n.url,o=i.length;i.endsWith("index.html")?(o=i.length-10-1,i=i.slice(0,o)+"\\/?($|index(\\.html)?)"):i.endsWith(".html")&&(o=i.length-5,i=i.slice(0,o)+"(\\.html)?");let s=0;n.needsWildcard&&(i=hE+i,s=hE.length,o+=hE.length);let a=on(i,[s,o]);return n.needsWildcard?`${on(xe(r))}|${a}`:a}};Os=W([(0,yd.injectable)(),I(0,(0,yd.inject)(Kc)),I(1,(0,yd.inject)(Lr))],Os);var ib=class extends Os{constructor(r,n,i,o){super(r,n,i,o);this.blazorInCodespacesRegexpSubstitution="$1:\\$2";if(this.options.remoteFilePrefix){let s=`\\${NW.default.sep}`,a=this.options.remoteFilePrefix.replace(new RegExp(s,"g"),s);this.blazorInCodespacesRegexp=new RegExp(`^${a}${s}([A-z])\\$${s}(.*)$`)}else this.blazorInCodespacesRegexp=new RegExp("")}absolutePathToUrlRegexp(r){if(this.options.remoteFilePrefix){let n=r.replace(this.blazorInCodespacesRegexp,this.blazorInCodespacesRegexpSubstitution),o=Vo(n).replace(/^(\w):(.*)$/,"$1$2"),s=on(o);if(s){let a=`dotnet://.*\\.dll/${s}`;return this.logger.verbose("runtime.breakpoints","absolutePathToUrlRegexp.blazor.remoteFs",{absolutePath:r,dotnetUrlRegexp:a}),a}}else{let n=xe(r),i=on(n),o=super.absolutePathToUrlRegexp(r);return i.includes(o)?i:`${i}|${o}`}return super.absolutePathToUrlRegexp(r)}};var BW=require("url");function FW(t){if("file"in t&&t.file)return qu(t.file);if(t.url)try{let e=new BW.URL(t.url);return e.pathname="/",e.search="",e.hash="",e.protocol==="data:"?void 0:e.href}catch{}}var eu=$(require("path")),jW=require("url");var UW="node:",xo=class t extends _l{constructor(r,n,i,o){super(i,o);this.fsUtils=r;this.linkedBp=n;this.options=i;this.logger=o}static shouldWarnAboutSymlinks(r){return"runtimeArgs"in r&&!r.runtimeArgs?.includes("--preserve-symlinks")}static getOptions(r){return{workspaceFolder:r.__workspaceFolder,resolveSourceMapLocations:r.resolveSourceMapLocations,basePath:r.cwd,sourceMapOverrides:r.sourceMapPathOverrides,remoteRoot:r.remoteRoot,localRoot:r.localRoot}}derive(r){return new t(this.fsUtils,this.linkedBp,{...this.options,...r},this.logger)}get resolutionOptions(){return this.options}async urlToAbsolutePath({url:r,map:n}){if(r=this.normalizeSourceMapUrl(r),r.startsWith(UW)&&this.options.basePath)return r=eu.join(this.options.basePath,"lib",r.slice(UW.length)),r.endsWith(".js")||(r+=".js"),r;if(n)return this.sourceMapSourceToAbsolute(r,n);let i=st(r);if(i)return this.rebaseRemoteToLocal(i);if(Im(r)){let s=this.sourceMapOverrides.apply(r);r=s===r?new jW.URL(r).pathname.slice(1):s}else if(eu.isAbsolute(r))r=this.sourceMapOverrides.apply(r);else return`<node_internals>/${r}`;let o=Nr(this.options.basePath??"",r);return this.rebaseRemoteToLocal(o)}absolutePathToUrl(r){return xe(this.rebaseLocalToRemote(eu.normalize(r)))}async absolutePathToUrlRegexp(r){let n=r;try{n=await this.fsUtils.realPath(r)}catch{}return _m(n,r)?on(this.absolutePathToUrl(r)):(this.linkedBp?.warn(),on(this.absolutePathToUrl(r))+"|"+on(this.absolutePathToUrl(n)))}async sourceMapSourceToAbsolute(r,n){if(!this.shouldResolveSourceMap(n.metadata))return;let i=Zy(n.sourceRoot,r),o=this.sourceMapOverrides.apply(i);return o!==i?ft(o):sn(r)?st(r):!eu.isAbsolute(r)&&this.options.basePath?Nr(await eb(this.options.remoteRoot&&ur(n.sourceRoot)&&this.rebaseRemoteToLocal(n.sourceRoot)||n.sourceRoot,n.metadata.compiledPath,{"/":this.options.basePath},$W(this.fsUtils,n.metadata.compiledPath),this.logger),r):this.rebaseRemoteToLocal(r)||r}};var Xn=Symbol("ISourcePathResolverFactory"),Il=class{constructor(e,r){this.fsUtils=e;this.linkedBp=r}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new xo(this.fsUtils,xo.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,xo.getOptions(e),r);throw new Error(`Not usable for type ${e.type}`)}};Il=W([(0,Yr.injectable)(),I(0,(0,Yr.inject)(Lr)),I(1,(0,Yr.optional)()),I(1,(0,Yr.inject)(fE))],Il);var Al=class{constructor(e,r,n,i){this.initializeParams=e;this.vueMapper=r;this.fsUtils=n;this.linkedBp=i}create(e,r){if(e.type==="pwa-node"||e.type==="node-terminal"||e.type==="pwa-extensionHost")return new xo(this.fsUtils,xo.shouldWarnAboutSymlinks(e)?this.linkedBp:void 0,xo.getOptions(e),r);{let n=!!e.inspectUri;return new(n?ib:Os)(this.vueMapper,this.fsUtils,{workspaceFolder:e.__workspaceFolder,resolveSourceMapLocations:e.resolveSourceMapLocations,baseUrl:FW(e),localRoot:null,remoteRoot:null,pathMapping:{"/":e.webRoot,...e.pathMapping},sourceMapOverrides:e.sourceMapPathOverrides,clientID:this.initializeParams.clientID,remoteFilePrefix:e.__remoteFilePrefix},r)}}};Al=W([(0,Yr.injectable)(),I(0,(0,Yr.inject)(Dr)),I(1,(0,Yr.inject)(Kc)),I(2,(0,Yr.inject)(Lr)),I(3,(0,Yr.optional)()),I(3,(0,Yr.inject)(fE))],Al);var WW=require("url");var ob=class extends Ds{constructor(){super(...arguments);this.baseFilter=Go(this.launchParams);this.filter=r=>{let{debugWebWorkerExtHost:n,debugWebviews:i}=this.launchParams;return!!(n&&(r.type==="worker"&&r.title==="DebugWorkerExtensionHost"||r.type==="page"&&r.title.includes("[Extension Development Host]"))||i&&r.type==="iframe"&&this.baseFilter(r))}}static async connectRenderer(r,n,i,o,s,a){let c=await r.rootSession().Target.attachToBrowserTarget({});if(!c)return;let l=r.createSession(c.sessionId);return new this(r,void 0,l,n,o,s,i,a)}waitForMainTarget(r){let n=this.launchParams;return n.debugWebWorkerExtHost&&this._browser.Target.on("targetCreated",this.enqueueLifecycleFn(async({targetInfo:i})=>{if(!i.url.includes(n.__sessionId))return;let o=await this._browser.Target.attachToTarget({targetId:i.targetId,flatten:!0});o&&this.attachedToTarget(i,o.sessionId,!1)})),super.waitForMainTarget(r)}attachedToTarget(r,n,i,o){let s=super.attachedToTarget(r,n,i||this.filter(r),o,!1);return r.type==="iframe"&&s.setComputeNameFn(ife),s}},ife=t=>{let e;try{e=new WW.URL(t.targetInfo.url)}catch{return}switch(e.searchParams.get("purpose")){case"customEditor":return`${e.searchParams.get("extensionId")} editor: ${e.host}`;case"notebookRenderer":return`Notebook Renderer: ${e.host}`;default:let r=e.searchParams.get("extensionId");return`Webview: ${r?r+" ":""} ${e.host}`}};var Kn=class extends In{constructor(r,n,i){super(r,n);this.pathResolverFactory=i}async launch(r,n){if(r.type!=="pwa-extensionHost"||r.request!=="attach")return{blockSessionTermination:!1};let i=Kn.debugIdToRendererDebugPort.get(r.__sessionId);if(!i)return{blockSessionTermination:!1};let o=Cu({name:"Webview",type:"pwa-chrome",request:"attach",port:i,__workspaceFolder:r.__workspaceFolder,urlFilter:"",resolveSourceMapLocations:r.resolveSourceMapLocations,...r.rendererDebugOptions});return o.__sessionId=r.__sessionId,o.debugWebWorkerExtHost=r.debugWebWorkerHost,o.debugWebviews=r.debugWebviews,super.launch(o,n).catch(s=>this.logger.error("runtime.exception","Error in webview attach",{err:s})),{blockSessionTermination:!1}}async acquireConnectionInner(r,n,i){let o=new Be,s=await new Promise((a,u)=>{let c=(0,qW.createConnection)({port:n.port},()=>a(c));c.on("error",u),o.push(i.onCancellationRequested(()=>{c.destroy(),u(new Error("connection timed out"))}))}).finally(()=>o.dispose());return new vt(new wn(this.logger,s),this.logger,r)}async getTargetFilter(r){return r.filter}async createTargetManager(r,n,i){return new ob(r,void 0,r.rootSession(),this.pathResolverFactory.create(n,this.logger),this.logger,i.telemetryReporter,n,i.targetOrigin)}};Kn.debugIdToRendererDebugPort=new Map,Kn=W([(0,Sl.injectable)(),I(0,(0,Sl.inject)(re)),I(1,(0,Sl.inject)(je)),I(2,(0,Sl.inject)(Xn))],Kn);var sb=class t{constructor(){this.target={queue:[]}}connectTo(e){this.target={logger:e}}info(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:1})}verbose(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:0})}warn(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:2})}error(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:3})}fatal(e,r,n){this.log({tag:e,timestamp:Date.now(),message:r,metadata:n,level:4})}log(e){this.target&&("queue"in this.target?this.target.queue.push(e):this.target.logger.log(e))}getRecentLogs(){return this.target?"queue"in this.target?this.target.queue:this.target.logger.getRecentLogs():[]}assert(e,r){if(e===!1||e===void 0||e===null){if(this.error("runtime.assertion",r,{error:new Error("Assertion failed")}),process.env.JS_DEBUG_THROW_ASSERTIONS)throw new Error(r);debugger;return!1}return!0}setup(){throw new Error("A ProxyLogger cannot be setup()")}dispose(){this.target=void 0}forTarget(){return new t}};var VW=Symbol("ITargetOrigin"),ab=class{constructor(e){this.id=e}},ub=class{constructor(e){this.id=e}};var cb=class{constructor(e,r){this.parentList=e;this.logger=r;this.targets=new Mi;this.onTerminatedEmitter=new K;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;e.onAdd(([,n])=>{n.parent&&this.targets.get(n.parent.id)&&this.targets.add(n.id,n.target)}),e.onRemove(([n])=>{this.targets.remove(n)&&!this.targets.size&&this.onTerminatedEmitter.fire({killed:!0,code:0})})}async launch(e,r){if(e.type!=="node-terminal"||e.request!=="attach")return{blockSessionTermination:!1};let n=this.parentList.get(e.delegateId);if(n===void 0)return setTimeout(()=>this.onTerminatedEmitter.fire({killed:!0,code:0}),1),{blockSessionTermination:!0};let i=n.target.targetOrigin();if(!(i instanceof ub))throw new Error("Expected delegate session to have a mutable target origin");let o=n.target.logger;if(!(o instanceof sb))throw new Error("Expected delegate session to have a proxy logger");return i.id=r.targetOrigin.id,o.connectTo(this.logger),setTimeout(()=>{this.targets.add(e.delegateId,n.target),n.dap.connect(r.dap)},0),{blockSessionTermination:!0}}terminate(){for(let e of this.targets.value())e.stop();return Promise.resolve()}restart(){for(let e of this.targets.value())e.restart();return Promise.resolve()}targetList(){return[...this.targets.value()]}dispose(){this.terminate()}};var GW=$(ae());var ofe=0,tu=class{constructor(){this.delegateSessions=new Mi;this.refsByTarget=new WeakMap}createLauncher(e){return new cb(this.delegateSessions,e)}addDelegate(e,r,n){let i={id:ofe++,target:e,dap:r,parent:n&&this.refsByTarget.get(n)};return this.refsByTarget.set(e,i),this.delegateSessions.add(i.id,i),i.id}removeDelegate(e){let r=this.refsByTarget.get(e);r&&this.delegateSessions.remove(r.id)}};tu=W([(0,GW.injectable)()],tu);var fq=$(ae());var Ue=class t{constructor(e,r,n){this.major=e;this.minor=r;this.patch=n}static parse(e){let r=e.split(".").map(Number);if(r.length!==3||r.some(isNaN))throw new SyntaxError(`Input string '${e}' is not a semver`);return new t(r[0],r[1],r[2])}static min(e,r){return e.lt(r)?e:r}compare(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}gt(e){return this.compare(e)>0}gte(e){return this.compare(e)>=0}lt(e){return this.compare(e)<0}lte(e){return this.compare(e)<=0}toString(){return`${this.major}.${this.minor}.${this.patch}`}};var aq=$(ae());var oq=$(YW()),qi=$(require("fs")),nu=$(ae()),sq=$(require("net")),vE=$(require("os")),_E=$(require("path"));var lb=class{constructor(e,r){this.sessionId=e;this.sink=r;this.onMessageEmitter=new K;this.onEndEmitter=new K;this.disposables=new Be;this.onMessage=this.onMessageEmitter.event;this.onEnd=this.onEndEmitter.event;this.disposables.push(r.NodeWorker.on("detachedFromWorker",n=>{n.sessionId===e&&(this.onEndEmitter.fire(),this.dispose())}),r.NodeWorker.on("receivedMessageFromWorker",n=>{n.sessionId===e&&this.onMessageEmitter.fire([n.message,new dn])}))}send(e){this.sink.NodeWorker.sendMessageToWorker({message:e,sessionId:this.sessionId})}dispose(){this.disposables.isDisposed||(this.disposables.dispose(),this.onEndEmitter.fire())}};var QW=":::";var yE=require("path"),xRe=(0,yE.join)(__dirname,"watchdog.js"),ZW=(0,yE.join)(__dirname,"bootloader.js");var wd=$(ut()),An=$(ae()),ji=require("path");var bd=$(ae()),eq=require("path");var ru=Symbol("IPackageJsonProvider");var El=class{constructor(e,r){this.fs=e;this.config=r;this.getPath=ye(async()=>{if(this.config.type!=="pwa-node"||this.config.request!=="launch")return;let e=await wm(this.fs,this.config.cwd,"package.json");return e?(0,eq.join)(e,"package.json"):void 0});this.getContents=ye(async()=>{let e=await this.getPath();if(e)try{let r=await this.fs.readFile(e);return JSON.parse(r.toString())}catch{return}})}};El=W([(0,bd.injectable)(),I(0,(0,bd.inject)(Lr)),I(1,(0,bd.inject)(Ee))],El);var Bs=Symbol("INodeBinaryProvider");function tq(t,e){return t.has(1)?e.addNodeOption("--inspect-publish-uid=http"):e}var wfe=new Set(["npm","yarn","pnpm","tnpm","cnpm"]),rq=t=>wfe.has((0,ji.basename)(t,(0,ji.extname)(t))),nq=(t,e)=>{if(!(!t||!rq(t)))return e.find(r=>!r.startsWith("-")&&r!=="run"&&r!=="run-script")},bE=new Ue(12,0,0),Ife=new Ue(8,0,0),Afe=[{inclusiveMin:new Ue(16,0,0),inclusiveMax:new Ue(16,3,99),message:wd.t("Some breakpoints might not work in your version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes. Details: https://aka.ms/AAcsvqm")},{inclusiveMin:new Ue(7,0,0),inclusiveMax:new Ue(8,99,99),message:wd.t("You're running an outdated version of Node.js. We recommend upgrading for the latest bug, performance, and security fixes.")}],Qr=class{constructor(e,r){this.path=e;this.version=r;this.capabilities=new Set;r===void 0&&(r=bE),r.gte(new Ue(12,0,0))&&this.capabilities.add(0),r.gte(new Ue(12,6,0))&&this.capabilities.add(1)}get isPreciselyKnown(){return this.version!==void 0}get warning(){if(this.version){for(let e of Afe)if(e.inclusiveMax.gte(this.version)&&e.inclusiveMin.lte(this.version))return e}}has(e,r){return!this.isPreciselyKnown&&r!==void 0?r:this.capabilities.has(e)}},_d=class extends Y{constructor(r,n){super(PD(r.toString(),n));this.version=r;this.location=n}},Sfe=["node","node64","electron"],Efe=new Map([[11,new Ue(12,0,0)],[10,new Ue(12,0,0)],[9,new Ue(12,0,0)],[8,new Ue(12,0,0)],[7,new Ue(12,0,0)],[6,new Ue(12,0,0)],[5,new Ue(10,0,0)],[4,new Ue(10,0,0)],[3,new Ue(10,0,0)],[2,new Ue(8,0,0)],[1,new Ue(8,0,0)]]),vd=class{constructor(e,r,n){this.logger=e;this.fs=r;this.packageJson=n;this.knownGoodMappings=new Map}async resolveAndValidate(e,r="node",n,i){try{return await this.resolveAndValidateInner(e,r,n,i)}catch(o){if(!(o instanceof _d))throw o;if(await this.shouldTryDebuggingAnyway(o))return new Qr(o.location,o.version instanceof Ue?o.version:void 0);throw o}}shouldTryDebuggingAnyway(e){return Promise.resolve(!1)}async resolveAndValidateInner(e,r,n,i){let o=await this.resolveBinaryLocation(r,e);if(this.logger.info("runtime.launch","Using binary at",{location:o,executable:r}),!o)throw new Y(P_(r,wd.t("path does not exist")));if(n)return new Qr(o,new Ue(n,0,0));let s=wT(o);if(!Sfe.includes(s)){if(rq(o)){let g=await this.packageJson.getPath();g&&(e=e.addToPath((0,ji.resolve)((0,ji.dirname)(g),"node_modules/.bin"),"prepend"))}try{let g=await this.resolveAndValidateInner(e,"node",void 0,i);return new Qr(o,g.version)}catch(g){if(RD(g,9230))throw g;return new Qr(o,void 0)}}if(o.startsWith("/snap/"))return new Qr(o,void 0);let a=this.knownGoodMappings.get(o);if(a)return a;let u=await this.getVersionText(o,i);if(!u)return new Qr(o,void 0);this.logger.info("runtime.launch","Discovered version",{version:u});let c=/v([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(u);if(!c)throw new _d(u,o);let[,l,f,p]=c.map(Number),m=new Ue(l,f,p);if(s==="electron"){let g=await this.resolveAndValidate(e);m=Ue.min(Efe.get(m.major)??bE,g.version??bE)}if(m.lt(Ife))throw new _d(m,o);let h=new Qr(o,m);return this.knownGoodMappings.set(o,h),h}async resolveBinaryLocation(e,r){return e&&(0,ji.isAbsolute)(e)?await UC(this.fs,e,r):await jh(this.fs,e,r.value)}async getVersionText(e,r){try{let{stdout:n}=await Wg(e,["--version"],{env:jt.processEnv().defined(),cwd:r});return n.trim()}catch(n){throw r&&!(await ko(this.fs,r))?.isDirectory()?new Y(LD(r)):new Y(P_(e,n.message))}}};vd=W([(0,An.injectable)(),I(0,(0,An.inject)(re)),I(1,(0,An.inject)(qe)),I(2,(0,An.inject)(ru))],vd);var Ll=class extends vd{constructor(r,n,i,o){super(r,n,i);this.vscode=o}async shouldTryDebuggingAnyway({message:r}){if(!this.vscode)return!1;let n=wd.t("Yes");return await this.vscode.window.showErrorMessage(r,n)===n}};Ll=W([I(0,(0,An.inject)(re)),I(1,(0,An.inject)(qe)),I(2,(0,An.inject)(ru)),I(3,(0,An.optional)()),I(3,(0,An.inject)(Yo))],Ll);var iq=require("path");var fb=class{constructor(e,r,n,i,o,s,a={},u){this.launchConfig=e;this.targetOriginValue=r;this.connection=n;this.targetInfo=o;this.logger=s;this.lifecycle=a;this._parent=u;this._serialize=Promise.resolve(void 0);this._attached=!1;this._onNameChangedEmitter=new K;this._onDisconnectEmitter=new K;this.entryBreakpoint=void 0;this.onDisconnect=this._onDisconnectEmitter.event;this.onNameChanged=this._onNameChangedEmitter.event;this.connection=n,this._cdp=i,i.pause(),this._waitingForDebugger=o.type==="waitingForDebugger",o.title?this._targetName=`${(0,iq.basename)(o.title)} [${o.processId}]`:this._targetName=`[${o.processId}]`,i.Target.on("targetDestroyed",()=>this.connection.close()),n.onDisconnected(()=>this._disconnected())}id(){return this.targetInfo.targetId}processId(){return this.targetInfo.processId}name(){return this._targetName}fileName(){return this.targetInfo.title}type(){return"node"}targetOrigin(){return this.targetOriginValue}parent(){return this._parent}async initialize(){this.lifecycle.initialized&&(this.entryBreakpoint=await this.lifecycle.initialized(this)||void 0)}waitingForDebugger(){return this._waitingForDebugger}scriptUrlToUrl(e){return e[0]==="/"||process.platform==="win32"&&e[1]===":"&&e[2]==="\\"?xe(e):e}supportsCustomBreakpoints(){return!1}supportsXHRBreakpoints(){return!1}executionContextName(){return this._targetName}hasParent(){return!!this._parent}async runIfWaitingForDebugger(){await this._cdp.Runtime.runIfWaitingForDebugger({})}async _disconnected(){this._onDisconnectEmitter.fire()}canAttach(){return!this._attached}async attach(){return this._serialize=this._serialize.then(async()=>{if(!this._attached)return this._doAttach()}),this._serialize}async _doAttach(){this._waitingForDebugger=!1,this._attached=!0;let e=await this._cdp.Target.attachToTarget({targetId:this.targetInfo.targetId});if(!e){this.logger.info("runtime.launch","Failed to attach to target",{targetId:this.targetInfo.targetId});return}this._cdp.NodeWorker.enable({waitForDebuggerOnStart:!0}),e&&"__dynamicAttach"in e&&(await this._cdp.Runtime.enable({}),await this._cdp.Debugger.enable({}));let r;return this._cdp.Runtime.on("executionContextCreated",n=>{n.context.auxData&&n.context.auxData.isDefault&&(r=n.context.id)}),this._cdp.Runtime.on("executionContextDestroyed",n=>{n.executionContextId===r&&this.connection.close()}),this._cdp}async afterBind(){this._cdp.resume()}canDetach(){return this._attached}async detach(){this._serialize=this._serialize.then(async()=>{this._waitingForDebugger&&await(await this._doAttach())?.Runtime.runIfWaitingForDebugger({}),this._attached&&this._doDetach()})}async _doDetach(){await Promise.all([this._cdp.Target.detachFromTarget({targetId:this.targetInfo.targetId}),this._cdp.NodeWorker.disable({})]),this.connection.close(),this._attached=!1}canRestart(){return!1}restart(){}canStop(){return!0}stop(){try{this.lifecycle.close&&this.lifecycle.close(this)}finally{this.connection.close()}}};var Wi=class{constructor(e,r,n,i){this.pathProvider=e;this.logger=r;this.portLeaseTracker=n;this.pathResolverFactory=i;this.serverConnections=new Set;this.targets=new Mi;this.onTerminatedEmitter=new K;this.onTerminated=this.onTerminatedEmitter.event;this.onTargetListChanged=this.targets.onChanged;this.bootloaderFile=ye(this.getBootloaderFile.bind(this))}async launch(e,r){let n=this.resolveParams(e);if(!n)return{blockSessionTermination:!1};this._stopServer();let{server:i,pipe:o}=await this._startServer(r.telemetryReporter),s=this.logger.forTarget(),a=this.run={server:i,serverAddress:o,params:n,context:r,logger:s,pathResolver:this.pathResolverFactory.create(n,this.logger)};return await this.launchProgram(a),{blockSessionTermination:!0}}async terminate(){this.program?await this.program.stop():this.onProgramTerminated({code:0,killed:!0})}async restart(e){if(!this.run)return;let r=this.program;r&&(this.program=void 0,await r.stop(),await Promise.race([we(2e3).then(()=>!1),Promise.all([...this.serverConnections].map(i=>new Promise(o=>i.onDisconnected(o))))])||(this.logger.warn("runtime.launch","Timeout waiting for server connections to close"),this.closeAllConnections())),await this.launchProgram({...this.run,params:e?this.resolveParams(e)??this.run.params:this.run.params,context:{...this.run.context,cancellationToken:this.run.params.timeout>0?Lt.withTimeout(this.run.params.timeout).token:cr}})}targetList(){return[...this.targets.value()]}dispose(){this._stopServer()}onProgramTerminated(e){this.onTerminatedEmitter.fire(e),this._stopServer(),this.program=void 0}resolveNodePath(e,r="node"){return this.pathProvider.resolveAndValidate(jt.merge(jt.processEnv(),this.getConfiguredEnvironment(e)),r,e.nodeVersionHint,e.cwd)}getConfiguredEnvironment(e){let r=jt.empty;if(e.envFile)try{r=r.merge(Lfe(e.envFile))}catch(n){throw new Y(ED(n.message))}return r.merge(e.env)}async resolveEnvironment({params:e,serverAddress:r},n,i){let o=this.getConfiguredEnvironment(e),s=await this.bootloaderFile(e.cwd,n),a={inspectorIpc:r,deferredMode:!1,waitForDebugger:"",execPath:await jh(qi.promises,"node",process.env),onlyEntrypoint:!e.autoAttachChildProcesses,verbose:e.trace===!0||typeof e.trace=="object"&&e.trace.stdio?!0:void 0,autoAttachMode:"always",mandatePortTracking:this.portLeaseTracker.isMandated?!0:void 0,...i},u={NODE_OPTIONS:` --require ${s.interpolatedPath} `,VSCODE_INSPECTOR_OPTIONS:QW+JSON.stringify(a),ELECTRON_RUN_AS_NODE:null},c=o.lookup("NODE_OPTIONS");c&&(u.NODE_OPTIONS+=` ${c}`);let l=jt.processEnv().lookup("NODE_OPTIONS");return l&&(u.NODE_OPTIONS+=` ${l}`),o.merge({...u})}createLifecycle(e,r,n){return{}}async _startServer(e){let r=Uh(),n=await new Promise((i,o)=>{let s=sq.createServer(a=>this._startSession(a,e)).on("error",o).listen(r,()=>i(s))});return{pipe:r,server:n}}_stopServer(){this.run?.server.close(),this.run=void 0,this.bootloaderFile.value?.then(e=>e.dispose()),this.bootloaderFile.forget(),this.closeAllConnections()}closeAllConnections(){this.serverConnections.forEach(e=>e.close()),this.serverConnections.clear()}async _startSession(e,r){if(!this.run)return;let{connection:n,cdp:i,targetInfo:o}=await this.acquireTarget(e,r,this.run.logger);if(!this.run){e.destroy();return}o.processId===void 0&&(o.processId=Number(o.targetId));let s=new fb(this.run.params,this.run.context.targetOrigin,n,i,o,this.run.logger,this.createLifecycle(i,this.run,o),o.openerId?this.targets.get(o.openerId):void 0);this.listenToWorkerDomain(i,r,s),this.targets.add(o.targetId,s),s.onDisconnect(()=>this.targets.remove(o.targetId))}async listenToWorkerDomain(e,r,n){e.NodeWorker.on("attachedToWorker",i=>{let o=new lb(i.sessionId,e),s=new Ec(n.launchConfig,{attached:!0,canAccessOpener:!1,type:"node-worker",targetId:`${n.id()}-${i.sessionId}`,title:i.workerInfo.title,url:i.workerInfo.url,openerId:n.id()},n,n.targetOrigin(),new vt(o,n.logger,r).rootSession(),n.logger),a=new Be;a.push(o),a.push(n.onDisconnect(()=>a.dispose())),a.push(o.onEnd(()=>a.dispose())),a.callback(()=>this.targets.remove(s.id())),this.targets.add(s.id(),s)})}async acquireTarget(e,r,n){let i=new vt(new wn(n,e),n,r);this.serverConnections.add(i),i.onDisconnected(()=>this.serverConnections.delete(i));let o=i.rootSession(),{targetInfo:s}=await new Promise(c=>o.Target.on("targetCreated",c)),a=s,u=this.portLeaseTracker.register(a.processInspectorPort);return i.onDisconnected(()=>u.dispose()),{targetInfo:a,cdp:o,connection:i,logger:n}}async getBootloaderFile(e,r){let n=et(ZW);if(!n.includes(" "))return{interpolatedPath:n,dispose:()=>{}};if(r.has(0))return{interpolatedPath:`"${n}"`,dispose:()=>{}};let i=`require(${JSON.stringify(n)})`;if(!vE.tmpdir().includes(" ")||!e){let a=_E.join(vE.tmpdir(),"vscode-js-debug-bootloader.js");return await qi.promises.writeFile(a,i),{interpolatedPath:a,dispose:()=>{}}}let o=".vscode-js-debug-bootloader.js",s=_E.join(e,o);return await qi.promises.writeFile(s,i),{interpolatedPath:`./${o}`,dispose:()=>qi.unlinkSync(s)}}async gatherTelemetryFromCdp(e,r){for(let n=0;n<8;n++){let i=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:"typeof process === 'undefined' || process.pid === undefined ? 'process not defined' : ({ processId: process.pid, nodeVersion: process.version, architecture: process.arch })"+tt()});if(!this.program)return;if(!i||!i.result.value){this.logger.error("runtime.target","Undefined result getting telemetry");return}if(typeof i.result.value!="object"){this.logger.info("runtime.target","Process not yet defined, will retry"),await we(50*2**n);continue}let o=i.result.value;return r.context.telemetryReporter.report("nodeRuntime",{version:o.nodeVersion,arch:o.architecture}),this.program.gotTelemetery(o),o}}};Wi=W([(0,nu.injectable)(),I(0,(0,nu.inject)(Bs)),I(1,(0,nu.inject)(re)),I(2,(0,nu.inject)(Tr)),I(3,(0,nu.inject)(Xn))],Wi);function Lfe(t){if(!qi.existsSync(t))return{};let e=Pfe(qi.readFileSync(t,"utf8"));return oq.parse(Buffer.from(e))}function Pfe(t){return t&&t[0]==="\uFEFF"&&(t=t.substr(1)),t}var xfe=["NODE_OPTIONS","VSCODE_INSPECTOR_OPTIONS"],Fs=class extends Wi{async appendEnvironmentVariables(e,r){let n="typeof process==='undefined'||process.pid===undefined?'process not defined':(()=>{"+Object.entries(r.defined()).map(([i,o])=>{let s=JSON.stringify(i);return xfe.includes(i)?`process.env[${s}]=(process.env[${s}]||'')+${JSON.stringify(o)}`:`process.env[${s}]=${JSON.stringify(o)}`}).join(";")+"})()"+tt();for(let i=0;i<5;i++){let o=await e.Runtime.evaluate({contextId:1,returnByValue:!0,expression:n});if(!o){this.logger.error("runtime.target","Undefined result setting child environment vars");return}if(!o.exceptionDetails&&o.result.value!=="process not defined")return;this.logger.error("runtime.target","Error setting child environment vars",o),await we(50)}}};Fs=W([(0,aq.injectable)()],Fs);var pb=class{constructor(e,r){this.a=e;this.b=r;this.stopped=Promise.race([this.a.stopped.then(async e=>await this.b.stop()&&e),this.b.stopped.then(async e=>await this.a.stop()&&e)])}gotTelemetery(e){this.a.gotTelemetery(e),this.b.gotTelemetery(e)}async stop(){return(await Promise.all([this.a.stop(),this.b.stop()]))[0]}},db=class{constructor(e,r,n){this.child=e;this.logger=r;this.killBehavior=n;this.killed=!1;this.stopped=new Promise((i,o)=>{e.once("exit",s=>i({killed:this.killed,code:s||0})),e.once("error",s=>o({killed:this.killed,code:1,error:s}))})}gotTelemetery(){}stop(){return this.killed=!0,qn(this.child.pid,this.logger,this.killBehavior),this.stopped}},iu=class{constructor(){this.stopped=new Promise(e=>this.stopDefer=e)}gotTelemetery(e){this.telemetry=e}stop(){return this.stopDefer({code:0,killed:!0}),this.stopped}},Us=class extends iu{constructor(r){super();this.wd=r;r.onEnd(n=>{this.stopDefer(n),this.wd.dispose()})}stop(){return this.wd.dispose(),this.stopped}},Pl=class t{constructor(e,r,n){this.terminalResult=e;this.logger=r;this.killBehavior=n;this.didStop=!1;this.stopped=new Promise(e=>this.onStopped=r=>{this.didStop=!0,e({code:0,killed:r})});e.processId&&this.startPollLoop(e.processId)}static{this.terminationPollInterval=1e3}static{this.killConfirmInterval=200}gotTelemetery({processId:e}){if(this.didStop){qn(e,this.logger,this.killBehavior);return}this.loop||this.startPollLoop(e)}stop(){return this.didStop?this.stopped:(this.didStop=!0,this.loop?(qn(this.loop.processId,this.logger,this.killBehavior),this.startPollLoop(this.loop.processId,t.killConfirmInterval)):this.terminalResult.shellProcessId?(qn(this.terminalResult.shellProcessId,this.logger,this.killBehavior),this.startPollLoop(this.terminalResult.shellProcessId,t.killConfirmInterval)):this.onStopped(!0),this.stopped)}startPollLoop(e,r=t.terminationPollInterval){this.loop&&clearInterval(this.loop.timer);let n={processId:e,timer:setInterval(()=>{Cfe(e)||(clearInterval(n.timer),this.onStopped(!0))},r)};this.loop=n}};function Cfe(t){try{return process.kill(t,0),!0}catch{return!1}}var lq=$(require("net"));var uq=require("crypto"),cq=()=>(0,uq.randomBytes)(12).toString("hex");var Vi=class t{constructor(e,r){this.info=e;this.server=r;this.onEndEmitter=new K;this.cts=new Lt;this.gracefulExit=!1;this.targetAlive=!1;this.targetInfo={targetId:this.info.ownId??cq(),processId:Number(this.info.pid)||0,type:this.info.waitForDebugger?"waitingForDebugger":"",title:this.info.scriptName,url:"file://"+this.info.scriptName,openerId:this.info.openerId,attached:!0,canAccessOpener:!1,processInspectorPort:Number(new URL(this.info.inspectorURL).port)};this.onEnd=this.onEndEmitter.event;this.listenToServer()}get isTargetAlive(){return this.targetAlive}static async attach(e){let r=await new Promise((i,o)=>{let s=lq.createConnection(e.ipcAddress,()=>i(s));s.on("error",o)}),n=new wn(bn.null,r);return new t(e,n)}listenToServer(){let{server:e,targetInfo:r}=this;e.send(JSON.stringify({method:"Target.targetCreated",params:{targetInfo:r}})),e.onMessage(async([n])=>{if(this.target&&!n.includes("Target.attachToTarget")&&!n.includes("Target.detachFromTarget")){this.target.send(n);return}let i=await this.execute(n);i&&e.send(JSON.stringify(i))}),e.onEnd(()=>{this.disposeTarget(),this.onEndEmitter.fire({killed:this.gracefulExit,code:this.gracefulExit?0:1})})}dispose(){this.gracefulExit=!0,this.cts.dispose(!0),this.disposeTarget(),this.server.dispose()}async execute(e){let r=JSON.parse(e);switch(r.method){case"Target.attachToTarget":return this.target&&this.disposeTarget(),this.target=await this.createTarget(),{id:r.id,result:{sessionId:this.targetInfo.targetId,__dynamicAttach:this.info.dynamicAttach?!0:void 0}};case"Target.detachFromTarget":return this.gracefulExit=!0,this.disposeTarget(),{id:r.id,result:{}};default:this.target?.send(r);return}}async createTarget(){this.gracefulExit=!1;let e=await Jr.create(this.info.inspectorURL,this.cts.token,this.info.remoteHostHeader);return e.onMessage(([r])=>this.server.send(r)),e.onEnd(()=>{e&&this.server.send(JSON.stringify({method:"Target.targetDestroyed",params:{targetId:this.targetInfo.targetId,sessionId:this.targetInfo.targetId}})),this.targetAlive=!1,this.server.dispose()}),e}disposeTarget(){this.target&&(this.target.dispose(),this.target=void 0)}};var wE=class extends Us{constructor(r,n){super(r);this.logger=n;this.stopped.then(()=>{this.telemetry&&qn(this.telemetry.processId,this.logger,"polite")})}},xl=class extends Fs{constructor(){super(...arguments);this.restarting=!1}async restart(){this.restarting=!0,this.onProgramTerminated({code:0,killed:!0,restart:!0}),this.program?.stop()}resolveParams(r){return r.type==="pwa-extensionHost"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=await ml(`http://localhost:${r.params.port}`,r.context.cancellationToken,this.logger),i=await Vi.attach({ipcAddress:r.serverAddress,scriptName:"Extension Host",inspectorURL:n,waitForDebugger:!0,dynamicAttach:!0}),o=this.program=new wE(i,this.logger);this.program.stopped.then(s=>{o===this.program&&this.onProgramTerminated(s)})}createLifecycle(r,n,i){return i.openerId?{}:{initialized:()=>this.onFirstInitialize(r,n,i)}}async onFirstInitialize(r,n,i){this.setEnvironmentVariables(r,n,i.targetId);let o=await this.gatherTelemetryFromCdp(r,n),s=this.program;if(o&&s){let a=new Pl({processId:o.processId},this.logger,"forceful");a.stopped.then(()=>s.stop()),s.stopped.then(()=>{this.restarting||a.stop()})}}async setEnvironmentVariables(r,n,i){if(!n.params.autoAttachChildProcesses)return;let o=await this.resolveEnvironment(n,new Qr("node",Ue.parse(process.versions.node)),{openerId:i});return this.appendEnvironmentVariables(r,o.update("ELECTRON_RUN_AS_NODE",null))}};xl=W([(0,fq.injectable)()],xl);var Id=require("fs"),pq=$(ae());var Cl=class extends Wi{resolveParams(e){return e.type==="pwa-extensionHost"&&e.request==="launch"?e:void 0}async launchProgram(e){let r=e.params.port||await Zf(),n=await e.context.dap.launchVSCodeRequest({args:Dfe(e.params,r),env:this.getConfiguredEnvironment(e.params).defined(),debugRenderer:e.params.debugWebviews||e.params.debugWebWorkerHost});n.rendererDebugPort&&Kn.debugIdToRendererDebugPort.set(e.params.__sessionId,n.rendererDebugPort),this.program=new iu,this.program.stop()}};Cl=W([(0,pq.injectable)()],Cl);var Dfe=(t,e)=>{let r=t.args.map(n=>{if(n.startsWith("-")){let i=n.split("=",2);return i.length===2&&((0,Id.existsSync)(i[1])||(0,Id.existsSync)(i[1]+".js"))?{prefix:i[0]+"=",path:i[1]}:{prefix:n}}else{try{let i=(0,Id.lstatSync)(n);if(i.isDirectory())return{prefix:"--folder-uri=",path:n};if(i.isFile())return{prefix:"--file-uri=",path:n}}catch{}return{path:n}}});return t.noDebug||r.unshift({prefix:`--inspect-brk-extensions=${e}`}),r.unshift({prefix:`--debugId=${t.__sessionId}`}),r};var Eq=$(ut()),ou=$(ae());var dq=require("crypto"),Ad=require("fs"),hq=require("os"),mq=$(require("path")),hb=class t{constructor(){this.disposed=!1;this.path=mq.join((0,hq.tmpdir)(),`node-debug-callback-${(0,dq.randomBytes)(8).toString("hex")}`);this.file=Ad.promises.open(this.path,"w")}static{this.updateInterval=1e3}static{this.recencyDeadline=2e3}static isValid(e){try{let r=(0,Ad.readFileSync)(e);return r.length?r.readDoubleBE()>Date.now()-t.recencyDeadline:!1}catch{return!1}}async startTouchLoop(){await this.touch(),this.disposed||(this.updateInterval=setInterval(()=>this.touch(),t.updateInterval))}async touch(e=()=>Date.now()){let r=await this.file,n=Buffer.alloc(8);n.writeDoubleBE(e()),await r.write(n,0,n.length,0)}async dispose(){if(!this.disposed){this.disposed=!0,this.updateInterval&&clearInterval(this.updateInterval);try{await(await this.file).close(),await Ad.promises.unlink(this.path)}catch{}}}};var _q=require("fs");var yq=require("path");var Hq=require("child_process"),gq=$(Vy()),Dl=class{constructor(e=Hq.spawn){this.spawn=e}lookup(e,r){return new Promise((n,i)=>{let o=this.createProcess(),s=this.createParser();o.on("error",i),o.stderr.on("error",a=>i(`Error finding processes: ${a.toString()}`)),o.stdout.pipe((0,gq.default)(/\r?\n/)).on("data",a=>{let u=s(a);u&&(r=e(u,r))}),o.on("close",(a,u)=>{a===0?n(r):u?i(new Error(`process terminated with signal: ${u}`)):a&&i(new Error(`process terminated with exit code: ${a}`))})})}};var Tl=class extends Dl{constructor(r){super();this.fsUtils=r}async getWorkingDirectory(r){try{let{stdout:n}=await Wg("lsof",["-a","-dcwd","-Fn",`-p${r}`]),i=n.trim().split(`
`).pop().slice(1);return i&&(0,yq.isAbsolute)(i)&&await this.fsUtils.exists(i)?i:void 0}catch(n){if(n instanceof Oa)return;throw n}}createProcess(){return this.spawn("ps",["-xo",`pid=PID,ppid=PPID,comm=${"a".repeat(256)},command=COMMAND`])}createParser(){let r;return n=>{if(!r){r=n.indexOf("COMMAND");return}let i=/^\W*([0-9]+)\W*([0-9]+)\W*/.exec(n);if(i)return{pid:Number(i[1]),ppid:Number(i[2]),command:n.slice(i[0].length,r).trim(),args:n.slice(r).trim()}}}};var mb=class extends Tl{createProcess(){return this.spawn("ps",["-axo","pid=PID,ppid=PPID,comm:30,command=COMMAND"])}createParser(){let e=super.createParser();return r=>{let n=e(r);if(!n)return;let i=n.args.indexOf(n.command);if(i===-1)return n;for(i=i+n.command.length;i<n.args.length&&n.args[i]!==" ";)i++;return n.command=n.args.substr(0,i),n.args=n.args.substr(i+1),n}}};var bq=require("path");var Hb=class extends Dl{async getWorkingDirectory(){}createProcess(){let e=(0,bq.join)(process.env.WINDIR||"C:\\Windows","System32","wbem","WMIC.exe");return this.spawn(e,["process","get","CommandLine,CreationDate,ParentProcessId,ProcessId"])}createParser(){let e=/^(.*)\s+([0-9]+)\.[0-9]+[+-][0-9]+\s+([0-9]+)\s+([0-9]+)$/;return r=>{let n=e.exec(r.trim());if(!n||n.length!==5)return;let i=Number(n[4]),o=Number(n[3]),s=Number(n[2]),a=n[1].trim();if(!isNaN(i)&&!isNaN(o)&&a){let u=a;if(a[0]==='"'){let c=a.indexOf('"',1);c>0&&(u=a.substr(1,c-1),a=a.substr(c+2))}else{let c=a.indexOf(" ");c>0?(u=a.substr(0,c),a=a.substr(c+1)):a=""}return{pid:i,ppid:o,command:u,args:a,date:s}}}}};var vq=new Dn(_q.promises),wq=process.platform==="win32"?new Hb:process.platform==="darwin"?new Tl(vq):new mb(vq);function Iq(t){let e=/--inspect(-brk)?(=((\[[0-9a-fA-F:]*\]|[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+|[a-zA-Z0-9\.]*):)?(\d+))?/,r=/--inspect-port=(\d+)/,n,i,o=e.exec(t);return o&&o.length>=1&&(o.length>=5&&o[4]&&(n=o[4]),o.length>=6&&o[5]&&(i=parseInt(o[5]))),o=r.exec(t),o&&o.length===2&&(i=parseInt(o[1])),{address:n,port:i}}async function Aq(t,e,r,n=cr){let i=await Tfe(t.pid,r);if(!i)return[];let o=[],s=i.children.slice();for(;s.length;){let a=s.pop();s=s.concat(a.children);let{port:u}=Iq(a.args);u&&o.push(cE(`http://${t.hostname}:${u}`,n,r,!0).then(c=>Vi.attach({ipcAddress:t.ipcAddress,scriptName:"Child Process",inspectorURL:c,waitForDebugger:!0,dynamicAttach:!0,pid:String(a.pid),openerId:e})).catch(c=>r.info("internal","Could not spawn WD for child process",{err:c,port:u,child:a})))}return(await Promise.all(o)).filter(a=>!!a)}async function Tfe(t,e){let r=new Map;r.set(0,{children:[],pid:0,ppid:0,command:"",args:""});try{await wq.lookup(({pid:i,ppid:o,command:s,args:a})=>(i!==o&&r.set(i,{pid:i,ppid:o,command:s,args:a,children:[]}),r),null)}catch(i){e.warn("internal","Error getting child process tree",i);return}let n=r.values();for(let i of n){let o=r.get(i.ppid);o&&o!==i&&o.children.push(i)}return!isNaN(t)&&t>0?r.get(t):r.get(0)}var Sq=$(ae());var Gi=class{create(e){return e===!1?new IE:e===!0?new gb({maxAttempts:1/0,delay:1e3}):new gb({maxAttempts:e.maxAttempts??1/0,delay:e.delay??1e3})}};Gi=W([(0,Sq.injectable)()],Gi);var gb=class t{constructor(e,r=0){this.options=e;this.attempt=r}get delay(){return this.options.delay}next(){return this.attempt===this.options.maxAttempts?void 0:new t(this.options,this.attempt+1)}reset(){return this.attempt?new t(this.options):this}},IE=class{constructor(){this.delay=-1}next(){}reset(){return this}};var $l=class extends Fs{constructor(r,n,i,o,s=new Gi){super(r,n,o,i);this.restarters=s}resolveParams(r){return r.type==="pwa-node"&&r.request==="attach"?r:void 0}async launchProgram(r){let n=async(o,s)=>{let a=this.program,u;try{r.params.websocketAddress?u=r.params.websocketAddress:u=await ml(`http://${r.params.address}:${r.params.port}`,s&&r.params.timeout>0?Lt.withTimeout(r.params.timeout).token:r.context.cancellationToken,this.logger)}catch(f){if(a&&a===s)return i(o,a,{killed:!1,code:1});throw f}let c=await Vi.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:u,remoteHostHeader:r.params.remoteHostHeader,waitForDebugger:!0,dynamicAttach:!0}),l=this.program=new Us(c);l.stopped.then(f=>i(o.reset(),l,f))},i=async(o,s,a)=>{if(this.program!==s)return;if(a.killed){this.onProgramTerminated(a);return}let u=o.next();if(!u){this.onProgramTerminated(a);return}r.context.dap.output({output:Eq.t(`Lost connection to debugee, reconnecting in {0}ms\r
`,u.delay)});let c=new iu;this.program=c;let l=await Promise.race([we(u.delay),c.stopped]);this.program===c&&(l?this.onProgramTerminated(a):n(u,c))};return n(this.restarters.create(r.params.restart))}async terminate(r){await super.terminate(),r&&this.telemetry&&qn(this.telemetry.processId,this.logger)}createLifecycle(r,n,i){if(i.openerId)return{};let o;return{initialized:async()=>{o=this.onFirstInitialize(r,n,i),await o},close:()=>{this.targetList().length&&this.program?.stop(),o?.then(s=>s.dispose())}}}async onFirstInitialize(r,n,i){let o=new hb;await o.startTouchLoop();let s=new Qr("node",void 0);try{s=await this.resolveNodePath(n.params)}catch{}let[a]=await Promise.all([this.gatherTelemetryFromCdp(r,n),this.setEnvironmentVariables(r,n,o.path,i.targetId,s)]);return this.telemetry=a,a&&n.params.attachExistingChildren&&Aq({pid:a.processId,nodePath:s.path,hostname:n.params.address,ipcAddress:n.serverAddress},i.targetId,this.logger).catch(u=>this.logger.warn("internal","Error watching child processes",{err:u})),o}async setEnvironmentVariables(r,n,i,o,s){if(!n.params.autoAttachChildProcesses)return;if(!await Wu(n.params.address)){this.logger.warn("runtime.target","Cannot attach to children of remote process");return}let a=await this.resolveEnvironment(n,s,{requireLease:i,openerId:o});return this.appendEnvironmentVariables(r,a)}};$l=W([(0,ou.injectable)(),I(0,(0,ou.inject)(Bs)),I(1,(0,ou.inject)(re)),I(2,(0,ou.inject)(Xn)),I(3,(0,ou.inject)(Tr))],$l);var Zr=$(ae()),kl=require("path");function Lq(t){if(!t.runtimeArgs||t.attachSimplePort)return;let e=[];for(let r of t.runtimeArgs)/^--inspect-brk(=|$)/.test(r)?t.stopOnEntry=t.stopOnEntry||!0:e.push(r);t.runtimeArgs=e}var Pq=require("os"),xq=$(require("path")),Cq=require("crypto"),Ml=require("fs"),yb=class t{constructor(){this.path=xq.join((0,Pq.tmpdir)(),`node-debug-callback-${(0,Cq.randomBytes)(8).toString("hex")}`);this.disposed=!1}static{this.pollInterval=200}read(e=t.pollInterval){return this.readPromise?this.readPromise:(this.readPromise=new Promise((r,n)=>{let i=setInterval(()=>{if(this.disposed){clearInterval(i),r(void 0);return}if((0,Ml.existsSync)(this.path)){try{r(JSON.parse((0,Ml.readFileSync)(this.path,"utf-8")))}catch(o){n(o)}finally{this.dispose()}clearInterval(i)}},e)}),this.readPromise)}dispose(){if(!this.disposed){this.disposed=!0;try{(0,Ml.unlinkSync)(this.path)}catch{}}}};var su=$(require("path"));var Sd=Symbol("IProgramLauncher"),bb=t=>{let e=t.program;if(e&&su.isAbsolute(e)){let r=su.relative(t.cwd,e);e=su.isAbsolute(r)?r:`.${su.sep}${r}`}return e?[...t.runtimeArgs,e,...Ef(t.args)]:[...t.runtimeArgs,...Ef(t.args)]};var $fe=async(t,e)=>{if(typeof e.stopOnEntry=="string")return(0,kl.resolve)(e.cwd,e.stopOnEntry);if(e.program)return(0,kl.resolve)(e.cwd,e.program);for(let r of Ef(e.args)){if(r.startsWith("-"))continue;let n=(0,kl.resolve)(e.cwd,r);if(await t.exists(n))return n}},Rl=class extends Wi{constructor(r,n,i,o,s,a,u,c,l){super(r,n,l,c);this.bpPredictor=i;this.launchers=o;this.restarters=s;this.fsUtils=a;this.packageJson=u}resolveParams(r){let n;if(r.type==="pwa-node"&&r.request==="launch"?n={...r}:"server"in r&&r.server&&"program"in r.server&&(n={...r.server}),!!n)return Lq(n),n}async launchProgram(r){r.params.program&&(r.params.program=await this.tryGetCompiledFile(r.params.program)),this.attachSimplePort=await this.getSimpleAttachPortIfAny(r.params);let n=async i=>{this.program&&this.program.stop();let o=await this.resolveNodePath(r.params,r.params.runtimeExecutable||void 0),s=o.warning;s&&r.context.dap.output({category:"stderr",output:s.message});let a=new yb,u=await this.resolveEnvironment(r,o,{fileCallback:a.path});this.attachSimplePort?(r.params.attachSimplePort||r.context.dap.output({category:"stderr",output:"Using legacy attach mode for --inspect-brk in npm scripts. We recommend removing --inspect-brk, and using `stopOnEntry` in your launch.json if you need it."}),u=u.merge({NODE_OPTIONS:null})):u=tq(o,u);let c={...r.params,env:u.value},l=this.launchers.find(p=>p.canLaunch(c));if(!l)throw new Error("Cannot find an appropriate launcher for the given set of options");let f=await l.launchProgram(o.path,c,r.context);if(this.attachSimplePort){let p=await Vi.attach({ipcAddress:r.serverAddress,scriptName:"Remote Process",inspectorURL:await ml(`http://127.0.0.1:${this.attachSimplePort}`,r.context.cancellationToken,this.logger),waitForDebugger:!0,dynamicAttach:!0});f=new pb(f,new Us(p))}else a.read().then(p=>{p&&f.gotTelemetery(p)});this.program=f,f.stopped.then(async p=>{if(a.dispose(),this.program!==f)return;if(p.killed||p.code===0){this.onProgramTerminated(p);return}let m=i.next();if(!m){this.onProgramTerminated(p);return}await we(m.delay),this.program===f&&n(m)})};return n(this.restarters.create(r.params.restart))}async getSimpleAttachPortIfAny(r){if(r.attachSimplePort)return r.attachSimplePort;let n=nq(r.runtimeExecutable,r.runtimeArgs);if(!(!n||!(await this.packageJson.getContents())?.scripts?.[n]?.includes("--inspect-brk")))return r.port??9229}createLifecycle(r,n,{targetId:i}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(r,n),!n.params.stopOnEntry)return;let o=await $fe(this.fsUtils,n.params);if(!o){this.logger.warn("runtime","Could not resolve program entrypointfrom args");return}let s="(?:entryBreakpoint){0}",a=xe(o),u=on(a)+s,c=await r.Debugger.setBreakpointByUrl({urlRegex:u,lineNumber:0,columnNumber:0});return c?.breakpointId?{cdpId:c?.breakpointId,path:a}:void 0},close:()=>{let o=Number(i);if(o>0)try{process.kill(o)}catch{}}}}async tryGetCompiledFile(r){r=ft(r);let n=(0,kl.extname)(r);if(!n||n===".js")return r;let i=await this.bpPredictor.getPredictionForSource(r);if(!i||i.size===0)return r;let o=Uu(i.values());return o?(this.logger.info("runtime.launch","Updating entrypoint to compiled file",{from:r,to:o.compiledPath,candidates:i.size}),o.compiledPath):r}};Rl=W([(0,Zr.injectable)(),I(0,(0,Zr.inject)(Bs)),I(1,(0,Zr.inject)(re)),I(2,(0,Zr.inject)(aa)),I(3,(0,Zr.multiInject)(Sd)),I(4,(0,Zr.inject)(Gi)),I(5,(0,Zr.inject)(Lr)),I(6,(0,Zr.inject)(ru)),I(7,(0,Zr.inject)(Xn)),I(8,(0,Zr.inject)(Tr))],Rl);var Nl=$(require("fs")),Dq=require("fs"),vb=$(ae()),Tq=$(require("os")),At=$(require("path"));var $q=Symbol("INvmResolver");var Ol=class{constructor(e=new Dn(Dq.promises),r=process.env,n=process.arch,i=process.platform,o=Tq.homedir()){this.fsUtils=e;this.env=r;this.arch=n;this.platform=i;this.homedir=o}async resolveNvmVersionPath(e){let r,n=[],i=this.parseVersionString(e),o=this.env.NVS_HOME;if(!o){let s=this.platform==="win32"?At.join(this.env.LOCALAPPDATA||"","nvs"):At.join(this.env.HOME||"",".nvs");Nl.existsSync(s)&&(o=s)}if(i.nvsFormat||o){if(r=await this.resolveNvs(o,i),!r&&i.nvsFormat)throw new Y(L_(e,"nvs"));n.push("nvs")}if(!r)if(this.platform==="win32")this.env.NVM_HOME&&(r=await this.resolveWindowsNvm(e),n.push("nvm-windows"));else{let s=this.env.NVM_DIR||At.join(this.homedir,".nvm");await this.fsUtils.exists(s)&&(r=await this.resolveUnixNvm(e),n.push("nvm"))}if(!r){let s=this.platform==="win32"?this.env.FNM_DIR||At.join(this.env.APPDATA||"","fnm"):this.env.FNM_DIR||At.join(this.homedir,".fnm");await this.fsUtils.exists(s)&&(r=await this.resolveFnm(e,s),n.push("fnm"))}if(!n.length)throw new Y(E_());if(!r||!await this.fsUtils.exists(r))throw new Y(L_(e,n.join("/")));return{directory:r,binary:await this.getBinaryInFolder(r)}}async getBinaryInFolder(e){return await hu(["node64.exe","node64"].map(r=>this.fsUtils.exists(At.join(e,r))))?"node64":"node"}async resolveNvs(e,{remoteName:r,semanticVersion:n,arch:i}){if(!e)throw new Y(ID());let o=this.findBinFolderForVersion(At.join(e,r),n,s=>Nl.existsSync(At.join(s,i)));if(o)return this.platform!=="win32"?At.join(o,i,"bin"):At.join(o,i)}async resolveUnixNvm(e){let r=this.env.NVM_DIR;if(!r){let i=At.join(this.env.HOME||"",".nvm");await this.fsUtils.exists(i)&&(r=i)}if(!r)throw new Y(E_());let n=this.findBinFolderForVersion(At.join(r,"versions","node"),`v${e}`);return n?At.join(n,"bin"):void 0}async resolveWindowsNvm(e){let r=this.env.NVM_HOME;if(!r)throw new Y(AD());return this.findBinFolderForVersion(r,`v${e}`)}async resolveFnm(e,r){let n=this.findBinFolderForVersion(At.join(r,"node-versions"),`v${e}`);if(n)return this.platform==="win32"?At.join(n,"installation"):At.join(n,"installation","bin")}findBinFolderForVersion(e,r,n){if(!Nl.existsSync(e))return;let i=Nl.readdirSync(e);if(i.includes(r))return At.join(e,r);let o=i.filter(s=>s.startsWith(`${r}.`)).sort(Mfe).filter(s=>n?n(At.join(e,s)):!0).pop();return o?At.join(e,o):void 0}parseVersionString(e){let n=/^(([\w-]+)\/)?(v?(\d+(\.\d+(\.\d+)?)?))(\/((x86)|(32)|((x)?64)|(arm\w*)|(ppc\w*)))?$/i.exec(e);if(!n)throw new Error("Invalid version string: "+e);let i=!!(n[2]||n[8]),o=n[2]||"node",s=n[4]||"",a=Rfe(n[8]||this.arch);return{nvsFormat:i,remoteName:o,semanticVersion:s,arch:a}}};Ol=W([(0,vb.injectable)(),I(0,(0,vb.inject)(Lr))],Ol);var Mfe=(t,e)=>{let r=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(t),n=/([0-9]+)\.([0-9]+)\.([0-9]+)/.exec(e);if(!r||!n)return(n?-1:0)+(r?1:0);let[,i,o,s]=r,[,a,u,c]=n;return Number(i)-Number(a)||Number(o)-Number(u)||Number(s)-Number(c)};function Rfe(t){switch(t){case"32":case"x86":case"ia32":return"x86";case"64":case"x64":case"amd64":return"x64";case"arm":let e=process.config.variables.arm_version;return e?"armv"+e+"l":"arm";default:return t}}var Mq=require("child_process"),wb=$(ae()),Rq=$(Vy());var Bl=class{constructor(e){this.logger=e}canLaunch(e){return e.console==="internalConsole"}async launchProgram(e,r,n){let{executable:i,args:o,shell:s,cwd:a}=kfe(e,bb(r),r.cwd);n.dap.output({category:"console",output:[i,...o].join(" ")+`
`});let u=(0,Mq.spawn)(i,o,{shell:s,cwd:a,env:jt.merge(jt.processEnv(),r.env).defined()});return r.outputCapture==="console"?this.discardStdio(n.dap,u):this.captureStdio(n.dap,u),new db(u,this.logger,r.killBehavior)}captureStdio(e,r){r.stdout.pipe(_b.stream()).on("data",n=>e.output({category:"stdout",output:n})).resume(),r.stderr.pipe(_b.stream()).on("data",n=>e.output({category:"stderr",output:n})).resume()}discardStdio(e,r){let n=[],i=()=>{n&&e.output({category:"stderr",output:Buffer.concat(n).toString()})},o=Buffer.from("Debugger attached."),s=a=>{a.includes(o)?(n=void 0,r.stderr.removeListener("data",s)):n&&n.push(a)};r.stderr.on("data",s),r.on("error",a=>{i(),e.output({category:"stderr",output:a.stack||a.message})}),r.on("exit",a=>{a!==null&&a>0&&(i(),e.output({category:"stderr",output:`Process exited with code ${a}\r
`}))}),r.stdout.resume(),r.stderr.resume()}};Bl=W([(0,wb.injectable)(),I(0,(0,wb.inject)(re))],Bl);var kfe=(t,e,r)=>{if(process.platform==="win32"&&(t=Mn(t),r=Mn(r),t.endsWith(".ps1")&&(e=["-File",t,...e],t="powershell.exe")),process.platform!=="win32"||!t.includes(" "))return{executable:t,args:e,shell:!1,cwd:r};let n=!1,i=[];for(let o of e)o.includes(" ")?(i.push(`"${o}"`),n=!0):i.push(o);return n?{executable:`"${t}"`,args:i,shell:!0,cwd:r}:{executable:t,args:e,shell:!1,cwd:r}};var _b=class t{constructor(){this.etxSpotted=!1}static stream(){return(0,Rq.default)(new t)}[Symbol.split](e){if(this.etxSpotted||=e.includes(""),!this.etxSpotted)return[e,""];let r=e.split("");return r.length>1?r.map((n,i)=>i<r.length-1?`${n}
`:n):r}};var Ib=$(ae());var Fl=class{constructor(e){this.logger=e}canLaunch(e){return e.internalConsoleOptions,e.console!=="internalConsole"}async launchProgram(e,r,n){let i={kind:r.console==="integratedTerminal"?"integrated":"external",title:r.name,cwd:r.cwd,args:[e,...bb(r)],env:xu(r.env),argsCanBeInterpretedByShell:!Array.isArray(r.args)},o;try{o=await this.sendLaunchRequest(i,n)}catch(s){throw new Y(SD(s.message))}return new Pl(o,this.logger,r.killBehavior)}sendLaunchRequest(e,r){return r.dap.runInTerminalRequest(e)}};Fl=W([(0,Ib.injectable)(),I(0,(0,Ib.inject)(re))],Fl);var kq=$(ae());var Ul=class{getTreatment(e,r){return Promise.resolve(r)}};Ul=W([(0,kq.injectable)()],Ul);var Oq=$(ae());var au=class{constructor(){this.flushEmitter=new K;this.onFlush=this.flushEmitter.event}report(){}reportOperation(){}attachDap(){}flush(){this.flushEmitter.fire()}dispose(){}};au=W([(0,Oq.injectable)()],au);var Nq=t=>{},Bq=t=>{};var Uq=(t,e,r,n)=>{let i=new Eb.Container;return i.parent=t,i.bind(Ee).toConstantValue(e.launchConfig),i.bind(lc).toConstantValue(i),i.bind(Pr).toConstantValue(r),i.bind(rt).toConstantValue(n),i.bind(Ti).toConstantValue(e),i.bind(VW).toConstantValue(e.targetOrigin()),i.bind(ea).to(Ra).inSingletonScope(),i.bind(yi).to(ia).inSingletonScope(),i.bind(Fm).to(tc).inSingletonScope(),i.bind(zo).toSelf().inSingletonScope(),e.sourcePathResolver&&i.bind(je).toConstantValue(e.sourcePathResolver),i.bind(Pa).toSelf(),i.bind(ZH).toDynamicValue(o=>o.container.get(Pa).create()).inSingletonScope(),e.parent()&&(i.bind(aa).to(sa).inSingletonScope(),i.bind(bi).to(Ku).inSingletonScope()),i.bind(zt).to(process.env.DA_TEST_DISABLE_TELEMETRY?au:Si).inSingletonScope().onActivation(mt),i.bind(pn).toSelf().inSingletonScope(),i.bind(Nt).toSelf().inSingletonScope(),i.bind(us).toSelf().inSingletonScope(),i.bind(Qo).to($i).inSingletonScope(),i.bind(is).toSelf().inSingletonScope(),i.bind($c).to(Tc).inSingletonScope(),i.bind(_H).to(wc).inSingletonScope(),i.bind(un).to(Zu).inSingletonScope(),i.bind(GH).to(Cc).inSingletonScope(),i.bind(as).to(xc).inSingletonScope(),i.bind(oH).to(dc).inSingletonScope().onActivation(mt),i.bind(Ut).toSelf(),i.bind(Vr).toSelf(),i.bind(Gr).toSelf(),i.bind(ng).to(lo).inSingletonScope(),i.bind(ig).to(Rc).inSingletonScope(),i.bind(vH).to(vc).inSingletonScope().onActivation(mt),i},jq=t=>{let e=new Eb.Container;e.parent=t,e.bind(lc).toConstantValue(e),e.bind(re).to(bn).inSingletonScope().onActivation(mt),e.bind(ea).to(Ra).inSingletonScope(),e.bind(zt).to(process.env.DA_TEST_DISABLE_TELEMETRY?au:Si).inSingletonScope().onActivation(mt),e.bind(di).to(di).inSingletonScope(),e.bind(Zi).to(Zi).inSingletonScope(),e.bind(Kc).to(Xc).inSingletonScope(),e.bind(Gu).to(hl).inSingletonScope(),e.bind(Bs).to(Ll),e.bind(Ui).toSelf().inSingletonScope().onActivation(mt),e.bind(Gi).toSelf(),e.bind(_r).to(Kn).onActivation(mt),e.bind(_r).to(xl).onActivation(mt),e.bind(_r).to(Cl).onActivation(mt),e.bind(_r).to(Rl).onActivation(mt),e.bind(Sd).to(Bl),e.bind(Sd).to(Fl),e.bind(ru).to(El).inSingletonScope(),Bq(e),e.bind(_r).to($l).onActivation(mt),e.bind(Za).toSelf().inSingletonScope().onActivation(mt),e.bind(_r).toService(Za),e.bind(_r).to(gl).inSingletonScope().onActivation(mt),e.bind(_r).to(bl).inSingletonScope().onActivation(mt),e.bind(_r).to(yl).inSingletonScope().onActivation(mt),e.bind(_r).to(vl).inSingletonScope().onActivation(mt),e.bind(_r).to(In).onActivation(mt),e.bind(_r).toDynamicValue(()=>t.get(tu).createLauncher(e.get(re))).inSingletonScope(),e.isBound(Uf)||e.bind(Uf).to(Dc).inSingletonScope(),e.bind(Aw).to(pc).inSingletonScope().onActivation(mt);let r=n=>i=>new n(i.container.get(bw),i.container.get(qe),i.container.get(Bf));return e.bind(ga).toDynamicValue(r(Sb.ChromeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","chrome"),e.bind(ga).toDynamicValue(r(Sb.EdgeBrowserFinder)).inSingletonScope().whenTargetTagged("browser","edge"),e},Wq=t=>{let e=new Eb.Container;return e.bind(lc).toConstantValue(e),e.bind(tu).toSelf().inSingletonScope(),e.bind(Il).toSelf().inSingletonScope(),e.bind(Ym).to(Ul).inSingletonScope(),e.bind(eH).toConstantValue(new Mi),e.bind(yF).to(Yc).inSingletonScope(),e.bind(Ai).toConstantValue(t.storagePath),e.bind(fc).toConstantValue(t.isVsCode),e.bind($q).to(Ol),e.bind(Tr).to(bc).inSingletonScope(),e.bind(bw).toConstantValue(process.env),e.bind(Bf).toConstantValue(Fq.default),e.bind(qe).toConstantValue(Ab.promises),e.bind(Lr).toConstantValue(new Dn(Ab.promises)),e.bind(Ha).toConstantValue(t.isRemote?"remote":"local"),t.context&&e.bind(_M).toConstantValue(t.context),Nq(e),e},qq=(t,e,r)=>{t.bind(Op).toConstantValue(_F(e)),t.bind(Ee).toService(Op),t.bind(Xn).to(Al).inSingletonScope(),t.bind(ku).toConstantValue(r),t.bind(je).toDynamicValue(n=>n.container.get(Xn).create(e,n.container.get(re))).inSingletonScope(),t.bind(Lr).toConstantValue(Fh.create(e.__remoteFilePrefix,Ab.promises,r)),t.bind(V_).to(Xo).inSingletonScope().onActivation(mt),t.bind(Ko).to(Yu).inSingletonScope(),t.bind(it).toSelf().inSingletonScope().onActivation(mt),t.bind(yi).to(ia).inSingletonScope(),t.bind(oa).toSelf().inSingletonScope(),t.bind(aa).to(sa).inSingletonScope(),t.bind(bi).to(Xu).inSingletonScope()};var nV=require("fs"),iV=$(require("net"));var Vq=`\r
\r
`,Ofe=0,Ed=class{constructor(e,r,n){this.inputStream=e;this.outputStream=r;this._contentLength=-1;this._connectionId=Ofe++;this.msgEmitter=new K;this.messageReceived=this.msgEmitter.event;this.endedEmitter=new K;this.closed=this.endedEmitter.event;this._handleData=e=>{let r=new dn;for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let n=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,n.length>0)try{let i=JSON.parse(n);this.logger?.verbose("dap.receive",void 0,{connectionId:this._connectionId,message:i}),this.msgEmitter.fire({message:i,receivedTime:r})}catch(i){console.error("Error handling data: "+(i&&i.message))}continue}}else{let n=this._rawData.indexOf(Vq);if(n!==-1){let o=this._rawData.toString("utf8",0,n).split(`\r
`);for(let s=0;s<o.length;s++){let a=o[s].split(/: +/);a[0]==="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(n+Vq.length);continue}}break}};this.logger=n,this._rawData=Buffer.alloc(0),e.on("end",()=>this.endedEmitter.fire()),e.on("data",this._handleData)}send(e,r=!0,n){let i=JSON.stringify(e);if(r){let s=e;e.type==="response"&&e.command==="source"&&(s={...e,body:{...e.body,content:"<script source>"}}),this.logger?.verbose("dap.send",void 0,{connectionId:this._connectionId,message:s})}let o=`Content-Length: ${Buffer.byteLength(i,"utf8")}\r
\r
${i}`;if(this.outputStream.destroyed){this.logger?.warn("dap.send","Message not sent. Connection was closed."),n?.();return}this.outputStream.write(o,"utf8",s=>{n?.(),s&&(console.log(e),this.logger?.error("dap.send","Error while writing to output stream",s),this.close())})}close(){this.inputStream.destroy(),this.outputStream.destroy()}setLogger(e){return this.logger=e,this}};var tV=$(ut()),Cb=$(require("os"));var Nfe={connect:async()=>sc},Xq=t=>({async connect(e){return await e.Debugger.setAsyncCallStackDepth({maxDepth:t}),sc}}),Bfe=t=>{let e=new K,r=!1,n=()=>{r||(r=!0,e.fire())};return{async connect(i){if(r)return await i.Debugger.setAsyncCallStackDepth({maxDepth:t}),sc;let o=new Be;return o.push(e.event(()=>{o.dispose(),i.Debugger.setAsyncCallStackDepth({maxDepth:t})}),i.Debugger.on("breakpointResolved",n),i.Debugger.on("paused",s=>{s.reason!=="instrumentation"&&n()})),o}}},Gq=Xq(32),Kq=t=>t===!1?Nfe:t===!0?Gq:"onAttach"in t?Xq(t.onAttach):"onceBreakpointResolved"in t?Bfe(t.onceBreakpointResolved):Gq;var Sn=$(ut());var Ld=class t{constructor(e,r,n,i){this.asyncStackPolicy=r;this.launchConfig=n;this._services=i;this._disposables=new Be;this._customBreakpoints=[];this._xhrBreakpoints=[];this._threadDeferred=$e();this.breakpointIdCounter=Nh();this._cdpProxyProvider=this._services.get(vH);this._configurationDoneDeferred=$e(),this.sourceContainer=i.get(Nt),this.breakpointManager=i.get(pn);let o=i.get(ZH),s=i.get(zt);s.onFlush(()=>{s.report("breakpointStats",this.breakpointManager.statisticsForTelemetry()),s.report("statistics",this.sourceContainer.statistics())}),this.dap=e,this.dap.on("initialize",a=>this.onInitialize(a)),this.dap.on("setBreakpoints",a=>this._onSetBreakpoints(a)),this.dap.on("setExceptionBreakpoints",a=>this.setExceptionBreakpoints(a)),this.dap.on("configurationDone",()=>this.configurationDone()),this.dap.on("loadedSources",()=>this._onLoadedSources()),this.dap.on("disableSourcemap",a=>this._onDisableSourcemap(a)),this.dap.on("source",a=>this._onSource(a)),this.dap.on("threads",()=>this._onThreads()),this.dap.on("stackTrace",a=>this._withThread(u=>u.stackTrace(a))),this.dap.on("variables",a=>this._onVariables(a)),this.dap.on("readMemory",a=>this._onReadMemory(a)),this.dap.on("writeMemory",a=>this._onWriteMemory(a)),this.dap.on("setVariable",a=>this._onSetVariable(a)),this.dap.on("setExpression",a=>this._onSetExpression(a)),this.dap.on("continue",()=>this._withThread(a=>a.resume())),this.dap.on("pause",()=>this._withThread(a=>a.pause())),this.dap.on("next",()=>this._withThread(a=>a.stepOver())),this.dap.on("stepIn",a=>this._withThread(u=>u.stepInto(a.targetId))),this.dap.on("stepOut",()=>this._withThread(a=>a.stepOut())),this.dap.on("restartFrame",a=>this._withThread(u=>u.restartFrame(a))),this.dap.on("scopes",a=>this._withThread(u=>u.scopes(a))),this.dap.on("evaluate",a=>this.onEvaluate(a)),this.dap.on("completions",a=>this._withThread(u=>u.completions(a))),this.dap.on("exceptionInfo",()=>this._withThread(a=>a.exceptionInfo())),this.dap.on("setCustomBreakpoints",a=>this.setCustomBreakpoints(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("toggleSkipFileStatus",a=>this._toggleSkipFileStatus(a)),this.dap.on("prettyPrintSource",a=>this._prettyPrintSource(a)),this.dap.on("revealPage",()=>this._withThread(a=>a.revealPage())),this.dap.on("getPerformance",()=>this._withThread(a=>o.retrieve(a.cdp()))),this.dap.on("breakpointLocations",a=>this._breakpointLocations(a)),this.dap.on("createDiagnostics",a=>this._dumpDiagnostics(a)),this.dap.on("requestCDPProxy",()=>this._requestCDPProxy()),this.dap.on("setExcludedCallers",a=>this._onSetExcludedCallers(a)),this.dap.on("saveDiagnosticLogs",({toFile:a})=>this._saveDiagnosticLogs(a)),this.dap.on("setSourceMapStepping",a=>this._setSourceMapStepping(a)),this.dap.on("stepInTargets",a=>this._stepInTargets(a)),this.dap.on("setDebuggerProperty",a=>this._setDebuggerProperty(a)),this.dap.on("setSymbolOptions",a=>this._setSymbolOptions(a))}_setDebuggerProperty(e){return this._thread?.cdp().DotnetDebugger.setDebuggerProperty(e),Promise.resolve({})}_setSymbolOptions(e){return this._thread?.cdp().DotnetDebugger.setSymbolOptions(e),Promise.resolve({})}_breakpointLocations(e){return this._withThread(async r=>{let n=this.sourceContainer.source(e.source);return n?{breakpoints:(await this.breakpointManager.getBreakpointLocations(r,n,new _t(e.line,e.column||1),new _t(e.endLine||e.line+1,e.endColumn||e.column||1))).map(o=>o.uiLocations.find(s=>s.source===n)).filter(Gt).map(o=>({line:o.lineNumber,column:o.columnNumber}))}:{breakpoints:[]}})}_stepInTargets(e){return this._withThread(async r=>({targets:await r.getStepInTargets(e.frameId)}))}_setSourceMapStepping({enabled:e}){return this.sourceContainer.doSourceMappedStepping=e,Promise.resolve({})}async _saveDiagnosticLogs(e){let r=this._services.get(re).getRecentLogs();return await this._services.get(qe).writeFile(e,r.map(n=>JSON.stringify(n)).join(`
`)),{}}async launchBlocker(){await this._configurationDoneDeferred.promise,await this._services.get($c).launchBlocker,await this.breakpointManager.launchBlocker()}async _onSetExcludedCallers({callers:e}){return(await this._threadDeferred.promise).setExcludedCallers(e),{}}async onInitialize(e){console.assert(e.linesStartAt1),console.assert(e.columnsStartAt1);let r=t.capabilities(!0);return setTimeout(()=>this.dap.initialized({}),0),setTimeout(()=>this._thread?.dapInitialized(),0),r}static capabilities(e=!1){return{supportsConfigurationDoneRequest:!0,supportsFunctionBreakpoints:!1,supportsConditionalBreakpoints:!0,supportsHitConditionalBreakpoints:!0,supportsEvaluateForHovers:!0,supportsReadMemoryRequest:!0,supportsWriteMemoryRequest:!0,exceptionBreakpointFilters:[{filter:"all",label:Sn.t("Caught Exceptions"),default:!1,supportsCondition:!0,description:Sn.t("Breaks on all throw errors, even if they're caught later."),conditionDescription:'error.name == "MyError"'},{filter:"uncaught",label:Sn.t("Uncaught Exceptions"),default:!1,supportsCondition:!0,description:Sn.t("Breaks only on errors or promise rejections that are not handled."),conditionDescription:'error.name == "MyError"'}],supportsStepBack:!1,supportsSetVariable:!0,supportsRestartFrame:!0,supportsGotoTargetsRequest:!1,supportsStepInTargetsRequest:!0,supportsCompletionsRequest:!0,supportsModulesRequest:!1,additionalModuleColumns:[],supportedChecksumAlgorithms:[],supportsRestartRequest:!0,supportsExceptionOptions:!1,supportsValueFormattingOptions:!0,supportsExceptionInfoRequest:!0,supportTerminateDebuggee:!0,supportsDelayedStackTraceLoading:!0,supportsLoadedSourcesRequest:!0,supportsLogPoints:!0,supportsTerminateThreadsRequest:!1,supportsSetExpression:!0,supportsTerminateRequest:!1,completionTriggerCharacters:[".","[",'"',"'"],supportsBreakpointLocationsRequest:!0,supportsClipboardContext:!0,supportsExceptionFilterOptions:!0,supportsEvaluationOptions:!!e,supportsDebuggerProperties:!!e,supportsSetSymbolOptions:!!e}}async _onSetBreakpoints(e){return this.breakpointManager.setBreakpoints(e,e.breakpoints?.map(()=>this.breakpointIdCounter())??[])}async setExceptionBreakpoints(e){return await this._services.get($c).setBreakpoints(e),{}}async configurationDone(){return this._configurationDoneDeferred.resolve(),{}}async _onLoadedSources(){return{sources:await this.sourceContainer.loadedSources()}}async _onDisableSourcemap(e){let r=this.sourceContainer.source(e.source);if(!r)return Ne(Sn.t("Source not found"));if(!(r instanceof dt))return Ne(Sn.t("Source not a source map"));for(let n of r.compiledToSourceUrl.keys())this.sourceContainer.disableSourceMapForSource(n,!0);return await this._thread?.refreshStackTrace(),{}}async _onSource(e){e.source||(e.source={sourceReference:e.sourceReference}),e.source.path=Mn(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Ne(Sn.t("Source not found"));let n=await r.content();return n===void 0?(r instanceof dt&&this.dap.suggestDisableSourcemap({source:e.source}),Ne(Sn.t("Unable to retrieve source content"))):{content:n,mimeType:r.getSuggestedMimeType}}async _onThreads(){let e=[];return this._thread&&e.push({id:this._thread.id,name:this._thread.name()}),{threads:e}}findVariableStore(e){if(!this._thread)return;let r=this._thread.pausedVariables();if(r&&e(r))return r;if(e(this._thread.replVariables))return this._thread.replVariables}async _onVariables(e){return{variables:await this.findVariableStore(n=>n.hasVariable(e.variablesReference))?.getVariables(e)??[]}}async _onReadMemory(e){let r=e.memoryReference,n=await this.findVariableStore(i=>i.hasMemory(r))?.readMemory(r,e.offset??0,e.count);return n?{address:"0",data:n.toString("base64"),unreadableBytes:e.count-n.length}:{address:"0",unreadableBytes:e.count}}async _onWriteMemory(e){let r=e.memoryReference;return{bytesWritten:await this.findVariableStore(i=>i.hasMemory(r))?.writeMemory(r,e.offset??0,Buffer.from(e.data,"base64"))}}async _onSetExpression(e){if(!this._thread)throw new Y(D_());let r=await this._thread.evaluate({expression:`${e.expression} = ${If(e.value)}`,context:"repl",frameId:e.frameId});return{value:r.result,variablesReference:r.variablesReference,indexedVariables:r.indexedVariables,namedVariables:r.namedVariables,presentationHint:r.presentationHint,type:r.type}}async _onSetVariable(e){let r=this.findVariableStore(n=>n.hasVariable(e.variablesReference));return r?(e.value=If(e.value.trim()),r.setVariable(e)):Ne(Sn.t("Variable not found"))}_withThread(e){if(!this._thread)throw new Y(D_());return e(this._thread)}async _refreshStackTrace(){if(!this._thread)return;this._thread.pausedDetails()&&await this._thread.refreshStackTrace()}createThread(e,r){this._thread=new Pc(this.sourceContainer,e,this.dap,r,this._services.get(Ko),this._services.get(re),this._services.get(un),this._services.get(_H),this.launchConfig,this.breakpointManager,this._services.get(GH),this._services.get($c),this._services.get(is),this._services.get(as));let n=this._services.get(ig);return n.connect(this.dap,this._thread),"profileStartup"in this.launchConfig&&this.launchConfig.profileStartup&&n.start(this.dap,this._thread,{type:Ut.type}),this._thread.updateCustomBreakpoints(this._xhrBreakpoints,this._customBreakpoints),this.asyncStackPolicy.connect(e).then(i=>this._disposables.push(i)).catch(i=>this._services.get(re).error("internal","Error enabling async stacks",i)),this.breakpointManager.setThread(this._thread),this._services.get(it).attach(e),this._threadDeferred.resolve(this._thread),this._thread}async setCustomBreakpoints({ids:e,xhr:r}){return await this._thread?.updateCustomBreakpoints(r,e),this._customBreakpoints=e,this._xhrBreakpoints=r,{}}async _toggleSkipFileStatus(e){return await this._services.get(Qo).toggleSkippingFile(e),await this._refreshStackTrace(),{}}async _prettyPrintSource(e){if(!e.source||!this._thread)return{canPrettyPrint:!1};e.source.path=Mn(e.source.path);let r=this.sourceContainer.source(e.source);if(!r)return Ne(Sn.t("Source not found"));let n=await r.prettyPrint();if(!n)return Ne(Sn.t("Unable to pretty print"));let{map:i,source:o}=n;return await this.breakpointManager.moveBreakpoints(this._thread,r,i,o),this.sourceContainer.clearDisabledSourceMaps(r),await this._refreshStackTrace(),{}}onEvaluate(e){return e.expression===".scripts"?this._dumpDiagnostics({fromSuggestion:!1}).then(this.dap.openDiagnosticTool).then(()=>({result:"Opening diagnostic tool...",variablesReference:0})):this._withThread(r=>r.evaluate(e))}async _dumpDiagnostics(e){let r={file:await this._services.get(us).generateHtml()};return e.fromSuggestion&&this._services.get(zt).report("diagnosticPrompt",{event:"opened"}),r}async _requestCDPProxy(){return await this._cdpProxyProvider.proxy()}dispose(){this._disposables.dispose(),tH(this._services)}};var zq=require("inspector"),Jq=require("fs"),Lb=class{constructor(e){this.file=e;this.session=new zq.Session;this.session.connect()}async start(){try{await this.post("Profiler.enable")}catch{}await this.post("Profiler.start")}async stop(){let{profile:e}=await this.post("Profiler.stop");await Jq.promises.writeFile(this.file,JSON.stringify(e))}dispose(){this.session.disconnect()}post(e,r){return new Promise((n,i)=>this.session.post(e,r,(o,s)=>{o?i(o):n(s)}))}};var Pb=$(require("path"));function Qq(t,e,r){let n=Yq(t,e,"uncaughtException",r),i=Yq(t,e,"unhandledRejection",r);return process.addListener("uncaughtException",n),process.addListener("unhandledRejection",i),{dispose:()=>{process.removeListener("uncaughtException",n),process.removeListener("unhandledRejection",i)}}}var Yq=(t,e,r,n=!0)=>i=>{jfe(i)&&(e.report("error",{"!error":i,error:n?void 0:i,exceptionType:r}),t.error("runtime.exception","Unhandled error in debug adapter",i))},Ffe=t=>typeof t=="object"&&!!t&&"stack"in t,Ufe=Pb.dirname(Pb.dirname(Pb.dirname(__dirname)));function jfe(t){return!Zq||Ffe(t)&&!!t.stack?.includes(Ufe)}var Zq=!1;function eV(){Zq=!0}var xb=class{constructor(e,r,n,i){this._delegate=e;this._rootServices=n;this._disposables=new Be;this._serviceTree=new WeakMap;this._root=new uu(void 0);this.getLaunchers=ye(()=>{let e=new Set(this._rootServices.getAll(_r));for(let r of e)this._disposables.push(r.onTargetListChanged(()=>{let n=this.targetList();this._attachToNewTargets(n,r),this._terminateOrphanThreads(n)}));return e});this._dap=r.dap(),this._targetOrigin=i,this._disposables.callback(()=>tH(n)),this._disposables.push(Qq(n.get(re),n.get(zt),n.get(fc))),r.attachTelemetry(n.get(zt));let o=this._dap,s=0,a;o.on("initialize",async u=>{this._rootServices.bind(Dr).toConstantValue(u);let c=Ld.capabilities();return u.clientID==="vscode"&&eV(),setTimeout(()=>o.initialized({}),0),c}),o.on("setExceptionBreakpoints",async()=>({})),o.on("setBreakpoints",async u=>(u.breakpoints?.length&&n.get(it).notifyHadBreakpoint(),{breakpoints:u.breakpoints?.map(()=>({id:++s,verified:!1,message:tV.t("Unbound breakpoint")}))??[]})),o.on("configurationDone",async()=>({})),o.on("threads",async()=>({threads:[]})),o.on("loadedSources",async()=>({sources:[]})),o.on("breakpointLocations",()=>Promise.resolve({breakpoints:[]})),o.on("attach",async u=>(await this.boot(u,o),{})),o.on("launch",async u=>(await this.boot(u,o),{})),o.on("pause",async()=>({})),o.on("terminate",()=>this._terminateRoot(!0)),o.on("disconnect",u=>this._disconnectRoot(u)),o.on("restart",async({arguments:u})=>(await this._restart(u),{})),o.on("startSelfProfile",async({file:u})=>(a?.dispose(),a=new Lb(u),await a.start(),{})),o.on("stopSelfProfile",async()=>(a&&(await a.stop(),a.dispose(),a=void 0),{}))}async _terminateRoot(e){return this._root.state=1,await Promise.all([...this.getLaunchers()].map(r=>r.terminate(e))),await this._root.waitUntilChildrenAre(2),this._root.state=2,{}}async _disconnectRoot(e){return this._root.state<1&&await this._terminateRoot(e.terminateDebuggee),this._rootServices.get(zt).flush(),await this._root.waitUntilChildrenAre(3),this._root.state=3,{}}async boot(e,r){return this._boot(Cu(e,this._rootServices.get(Ha)),r)}async _boot(e,r){Wfe(r),this.reportBootTelemetry(e),qq(this._rootServices,e,r),this._rootServices.get(re).setup(JC(r,e.trace));let n=e.timeout>0?Lt.withTimeout(e.timeout):new Lt;e.rootPath&&(e.rootPath=Mn(e.rootPath)),this._launchParams=e;let i=await Promise.all([...this.getLaunchers()].map(o=>this._launch(o,e,n.token)));return Promise.all(i.map(o=>o.terminated)).then(o=>{let s=o.find(Gt);this._markTargetAsTerminated(this._root,{restart:!!s?.restart})}),{}}reportBootTelemetry(e){let r=Cu({type:e.type,request:e.request,name:"<string>",__workspaceFolder:"<workspace>"}),n=(i,o)=>typeof i=="string"?o&&r[o]===i?i:"<string>":i instanceof Array?i.map(s=>n(s)):i&&typeof i=="object"?Yi(i,s=>n(s)):i;this._rootServices.get(zt).report("launch",{type:e.type,request:e.request,os:`${Cb.platform()} ${Cb.arch()}`,nodeVersion:process.version,adapterVersion:ff,parameters:Yi(e,n)})}async _restart(e){let r;if(e){let n=this._rootServices.get(Op);r=Cu({__workspaceFolder:n.__workspaceFolder,...e},this._rootServices.get(Ha)),n.update(r)}await Promise.all([...this.getLaunchers()].map(n=>n.restart(r)))}async _launch(e,r,n){return(await this.captureLaunch(e,r,n)).blockSessionTermination?{terminated:new Promise(o=>{let s=this._disposables.push(e.onTerminated(a=>{s.dispose(),o(a)}))})}:{terminated:Promise.resolve(void 0)}}async captureLaunch(e,r,n){let i=e.constructor.name,o;try{o=await e.launch(r,{telemetryReporter:this._rootServices.get(zt),cancellationToken:n,targetOrigin:this._targetOrigin,dap:this._dap})}catch(s){throw this._rootServices.get(re).warn("runtime.launch","Launch returned error",{error:s,wasCancelled:n.isCancellationRequested,name:i}),s}return o.blockSessionTermination&&this._rootServices.get(re).info("runtime.launch","Launched successfully",{name:i}),o}dispose(){this._disposables.dispose(),this._terminateOrphanThreads([])}targetList(){let e=[];for(let r of this.getLaunchers())e.push(...r.targetList());return e}async attach(e,r){if(!this._launchParams)throw new Error("Cannot launch before params have been set");let n=e.value;if(!n.canAttach())return;let i=await n.attach();if(!i)return;let o=await this._delegate.acquireDap(n),s=o.dap(),a=this._launchParams;this._asyncStackPolicy||(this._asyncStackPolicy=Kq(a.showAsyncStacks));let u=n.parent(),c=u&&this._serviceTree.get(u)||this._rootServices,l=Uq(c,n,s,i);o.attachTelemetry(l.get(zt)),this._serviceTree.set(n,c);let f=new Ld(s,this._asyncStackPolicy,a,l),p=f.createThread(i,n),m=async()=>(await f.launchBlocker(),n.runIfWaitingForDebugger(),e.threadData.resolve({thread:p,debugAdapter:f}),{});s.on("disconnect",h=>this._disconnectTarget(e,h)),s.on("terminate",()=>this._terminateTarget(e)),s.on("restart",async()=>(n.canRestart()?n.restart():await this._restart(),Promise.resolve({}))),await this._delegate.initAdapter(f,n,r)?m():(s.on("attach",m),s.on("launch",m)),await n.afterBind()}_attachToNewTargets(e,r){for(let n of e.values()){if(!n.waitingForDebugger()||uu.targetNodes.has(n))continue;let i=n.parent(),o=i?uu.targetNodes.get(i):this._root;if(!o)throw new Error(`Got target with unknown parent: ${n.name()}`);let s=new uu(n);o.add(s),this.attach(s,r)}}async _terminateOrphanThreads(e,r){let n=[...this._root.all()].filter(i=>!e.includes(i.value));return Promise.all(n.map(i=>this._markTargetAsTerminated(i,r)))}async _markTargetAsTerminated(e,r={}){if(e.state>=1)return await e.waitUntil(2),{};if(e.state=1,rV(e)){let n=await e.threadData.promise;await n.thread.dispose(),n.debugAdapter.dap.terminated(r),n.debugAdapter.dispose()}else this._dap.terminated(r);return await e.waitUntilChildrenAre(2),e.state=2,{}}async _terminateTarget(e){return e.state>=3?{}:(e.value.canStop()?e.value.stop():this._terminateRoot(!0),await e.waitUntil(2),{})}async _disconnectTarget(e,r){if(e.state>=3)return{};e.state<1&&(r.terminateDebuggee!==!0&&e.value.canDetach()?await e.value.detach():e.value.canStop()?e.value.stop():this._terminateRoot(r.terminateDebuggee)),await e.waitUntil(2),await e.waitUntilChildrenAre(3),e.state=3,queueMicrotask(()=>this._delegate.releaseDap(e.value));let n=e.value.parent();return(n?uu.targetNodes.get(n):this._root)?.remove(e),{}}};function Wfe(t){RC&&t.output({category:"console",output:`Note: Using the "preview" debug extension
`})}var rV=t=>!!t.value,uu=class t{constructor(e){this.value=e;this.threadData=$e();this._state=0;this._children=new Set;this._stateChangeEmitter=new K;e&&t.targetNodes.set(e,this)}static{this.targetNodes=new WeakMap}get state(){return this._state}set state(e){e>this._state&&(this._state=e,this._stateChangeEmitter.fire(e))}add(e){this._children.add(e)}remove(e){this._children.delete(e)}async waitUntil(e){return this._state>=e?Promise.resolve():new Promise(r=>{let n=this._stateChangeEmitter.event(i=>{i>=e&&(n.dispose(),r())})})}async waitUntilChildrenAre(e){await Promise.all([...this._children].map(r=>r.waitUntil(e)))}*all(){rV(this)&&(yield this);for(let e of this._children)yield*e.all()}};var Db=class{constructor(e,r,n,i,o){this.debugSession=e;this.logger=n;this.sessionStates=i;this.parent=o;this.subscriptions=new Be;r instanceof Ru?this.connection=r:(r.setLogger(n),this.connection=new Ru(r,this.logger))}listenToTarget(e){this.subscriptions.push(e.onNameChanged(()=>this.setName(e)),this.sessionStates.onAdd(([r])=>r===this.debugSession.id&&this.setName(e)),this.sessionStates.onRemove(([r])=>r===this.debugSession.id&&this.setName(e))),this.setName(e)}dispose(){this.subscriptions.dispose()}setName(e){let r=this.sessionStates.get(this.debugSession.id),n=e.name();this.parent instanceof Tb&&(n=`${this.parent.debugSession.name}: ${n}`),this.debugSession.name=r?`${n} (${r})`:n}},Tb=class extends Db{constructor(r,n,i){super(r,n,i.get(re),i.get(eH));this.debugSession=r;this.services=i;this.connection.attachTelemetry(i.get(zt))}get binder(){return this._binder}createBinder(r){this._binder=new xb(r,this.connection,this.services,new ab(this.debugSession.id))}dispose(){super.dispose(),this._binder?.dispose?.()}},$b=class{constructor(e,r){this.globalContainer=e;this.sessionLauncher=r;this._disposables=[];this._sessions=new Map;this._pendingTarget=new Map;this._sessionForTarget=new Map;this._sessionForTargetCallbacks=new Map}terminate(e){let r=this._sessions.get(e.id);this._sessions.delete(e.id),r&&r.dispose()}hasPendingTargetId(e){return this._pendingTarget.has(e)}createNewRootSession(e,r){let n=new Tb(e,r,jq(this.globalContainer));return n.createBinder(this),this._sessions.set(e.id,n),n}createNewChildSession(e,r,n){let i=this._pendingTarget.get(r);if(!i)throw new Error(`Cannot find target ${r}`);let{target:o,parent:s}=i,a=new Db(e,n,s.logger,s.sessionStates,s);this._pendingTarget.delete(r),a.debugSession.name=o.name(),a.listenToTarget(o);let u=this._sessionForTargetCallbacks.get(o);return this._sessionForTargetCallbacks.delete(o),u?.fulfill?.(a),this._sessions.set(e.id,a),a}async acquireDap(e){return(await this.getOrLaunchSession(e)).connection}getOrLaunchSession(e){let r=this._sessionForTarget.get(e);if(r)return r;let n=new Promise(async(i,o)=>{let s,a=e.parent();if(a?s=await this.getOrLaunchSession(a):s=this._sessions.get(e.targetOrigin().id),!s)throw new Error("Expected to get a parent debug session for target");this._pendingTarget.set(e.id(),{target:e,parent:s}),this._sessionForTargetCallbacks.set(e,{fulfill:i,reject:o});let u=s.debugSession.configuration,c={type:u.type==="pwa-extensionHost"?"pwa-chrome":u.type,name:e.name(),request:s.debugSession.configuration.request,__pendingTargetId:e.id(),preRestartTask:u.preRestartTask??u.postDebugTask,postRestartTask:u.postRestartTask??u.preLaunchTask};this.sessionLauncher.launch(s,e,c)});return this._sessionForTarget.set(e,n),n}initAdapter(e,r,n){return Promise.resolve(!1)}releaseDap(e){this._sessionForTarget.delete(e);let r=this._sessionForTargetCallbacks.get(e);r&&r.reject(new Error("Target gone")),this._sessionForTargetCallbacks.delete(e)}dispose(){for(let e of this._sessions.values())e.dispose();this._sessions.clear(),this._pendingTarget.clear(),this._sessionForTarget.clear(),this._sessionForTargetCallbacks.clear();for(let e of this._disposables)e.dispose();this._disposables=[]}};var Mb=class{constructor(e,r,n="127.0.0.1"){this.host=n;this.disposables=[];this.servers=new Map;this.sessionManager=new $b(e,r),this.portLeaseTracker=e.get(Tr),this.disposables.push(this.sessionManager)}createDebugServer(e,r){return e.configuration.__pendingTargetId?this.createChildDebugServer(e):this.createRootDebugServer(e,r)}createRootDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewRootSession(e,n),r)}createRootDebugSessionFromStreams(e,r,n){let i=new Ed(r,n);return this.sessionManager.createNewRootSession(e,i)}createChildDebugServer(e,r){return this.innerCreateServer(e,n=>this.sessionManager.createNewChildSession(e,e.configuration.__pendingTargetId,n),r)}async innerCreateServer(e,r,n){let i=$e(),o=a=>{let u=new Ed(a,a),c=r(u);i.resolve(c.connection)},s=n===void 0?await new Promise((a,u)=>{let c=Uh(),l=iV.createServer(o).on("error",u).on("close",()=>nV.promises.unlink(c).catch(()=>{})).listen(c,()=>a(l))}):await VR(this.portLeaseTracker,o,n,this.host);return this.servers.set(e.id,s),{server:s,connectionPromise:i.promise}}terminate(e){this.sessionManager.terminate(e),this.servers.get(e.id)?.close(),this.servers.delete(e.id)}dispose(){this.sessionManager.dispose()}};NV().install();var Ppe=BV.mkdtempSync(jV.join(UV.tmpdir(),"vscode-js-debug-"));process.env.L10N_FSPATH_TO_BUNDLE&&Vb.config({fsPath:process.env.L10N_FSPATH_TO_BUNDLE});var jb=class{constructor(e,r,n,i){this.id=e;this.childConnection=n;this.configuration=i;this._name=r}set name(e){this._name=e,this.childConnection.then(r=>r.initializedBlocker).then(r=>r.dap().process({name:e}))}get name(){return this._name}},Wb=class{constructor(e,r,n){let i=Wq({storagePath:Ppe,isVsCode:!1});this.sessionServer=new Mb(i,this,e);let o=$e(),s=new jb("root",Vb.t("JavaScript debug adapter"),o.promise,{type:"pwa-chrome",name:"root",request:"launch"});r&&n?this.launchRootFromExisting(o,s,r,n):this.launchRoot(o,s)}launchRootFromExisting(e,r,n,i){let o=this.sessionServer.createRootDebugSessionFromStreams(r,n,i);e.resolve(o.connection)}async launchRoot(e,r){let n=await this.sessionServer.createRootDebugServer(r,qb??0);n.connectionPromise.then(i=>e.resolve(i)),console.log(n.server.address().port.toString())}launch(e,r,n){let i={...n,sessionId:r.id,__jsDebugChildServer:""},o=$e(),s=new jb(r.id(),r.name(),o.promise,i);this.sessionServer.createChildDebugServer(s,0).then(({server:a,connectionPromise:u})=>{u.then(c=>o.resolve(c)),i.__jsDebugChildServer=a.address().port.toString(),e.connection._send({seq:0,command:"attachedChildSession",type:"request",arguments:{config:i}})})}},qb,Ub;process.argv.length>=3&&(qb=+process.argv[2],process.argv.length>=4&&(Ub=process.argv[3]));if(qb!==void 0){let t=FV.createServer(e=>{new Wb(Ub,e,e)}).listen(qb,Ub);t.on("listening",()=>{console.log(`Listening at ${t.address().address}:${t.address().port}`)})}else new Wb(Ub);
/*! Bundled license information:

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-windows/index.js:
  (*!
   * is-windows <https://github.com/jonschlinkert/is-windows>
   *
   * Copyright © 2015-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
